---
title: Identifizieren von Microservice-Grenzen
description: Identifizieren von Microservice-Grenzen.
author: MikeWasson
ms.date: 02/25/2019
ms.topic: guide
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: microservices
ms.openlocfilehash: 69213701b87f052811a1f032c056f05be7097c14
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 03/20/2019
ms.locfileid: "58244561"
---
# <a name="identifying-microservice-boundaries"></a><span data-ttu-id="a979f-103">Identifizieren von Microservice-Grenzen</span><span class="sxs-lookup"><span data-stu-id="a979f-103">Identifying microservice boundaries</span></span>

<span data-ttu-id="a979f-104">Was ist die richtige Größe für einen Microservice?</span><span class="sxs-lookup"><span data-stu-id="a979f-104">What is the right size for a microservice?</span></span> <span data-ttu-id="a979f-105">Diese Frage wird häufig mit „nicht zu groß und nicht zu klein“ beantwortet. Das ist zwar richtig, aber nicht sonderlich hilfreich.</span><span class="sxs-lookup"><span data-stu-id="a979f-105">You often hear something to the effect of, "not too big and not too small" &mdash; and while that's certainly correct, it's not very helpful in practice.</span></span> <span data-ttu-id="a979f-106">Auf der Grundlage eines sorgfältig entworfenen Domänenmodells lassen sich Microservices viel leichter besprechen.</span><span class="sxs-lookup"><span data-stu-id="a979f-106">But if you start from a carefully designed domain model, it's much easier to reason about microservices.</span></span>

![Diagramm zu Kontextgrenzen](../images/bounded-contexts.png)

<span data-ttu-id="a979f-108">In diesem Artikel wird ein Drohnenlieferdienst als Beispiel verwendet.</span><span class="sxs-lookup"><span data-stu-id="a979f-108">This article uses a drone delivery service as a running example.</span></span> <span data-ttu-id="a979f-109">Weitere Informationen zum Szenario sowie die entsprechende Referenzimplementierung finden Sie [hier](../design/index.md).</span><span class="sxs-lookup"><span data-stu-id="a979f-109">You can read more about the scenario and the corresponding reference implementation [here](../design/index.md).</span></span>

## <a name="from-domain-model-to-microservices"></a><span data-ttu-id="a979f-110">Vom Domänenmodell zu Microservices</span><span class="sxs-lookup"><span data-stu-id="a979f-110">From domain model to microservices</span></span>

<span data-ttu-id="a979f-111">Im [vorherigen Artikel](./domain-analysis.md) haben wir eine Reihe von Kontextgrenzen für eine Drohnenlieferungsanwendung definiert.</span><span class="sxs-lookup"><span data-stu-id="a979f-111">In the [previous article](./domain-analysis.md), we defined a set of bounded contexts for a Drone Delivery application.</span></span> <span data-ttu-id="a979f-112">Anschließend haben wir uns eingehender mit einer dieser Kontextgrenzen (dem Versandkontext) befasst und eine Reihe von Entitäten, Aggregaten und Domänendiensten für diese Kontextgrenze identifiziert.</span><span class="sxs-lookup"><span data-stu-id="a979f-112">Then we looked more closely at one of these bounded contexts, the Shipping bounded context, and identified a set of entities, aggregates, and domain services for that bounded context.</span></span>

<span data-ttu-id="a979f-113">Nun sind wir bereit für den Schritt vom Domänenmodell zum Anwendungsentwurf.</span><span class="sxs-lookup"><span data-stu-id="a979f-113">Now we're ready to go from domain model to application design.</span></span> <span data-ttu-id="a979f-114">Mit dem folgenden Ansatz können Sie Microservices vom Domänenmodell ableiten.</span><span class="sxs-lookup"><span data-stu-id="a979f-114">Here's an approach that you can use to derive microservices from the domain model.</span></span>

1. <span data-ttu-id="a979f-115">Beginnen Sie mit einer Kontextgrenze.</span><span class="sxs-lookup"><span data-stu-id="a979f-115">Start with a bounded context.</span></span> <span data-ttu-id="a979f-116">Grundsätzlich sollte die Funktion in einem Microservice nicht mehrere Kontextgrenzen umfassen.</span><span class="sxs-lookup"><span data-stu-id="a979f-116">In general, the functionality in a microservice should not span more than one bounded context.</span></span> <span data-ttu-id="a979f-117">Eine Kontextgrenze markiert definitionsgemäß die Grenze eines bestimmten Domänenmodells.</span><span class="sxs-lookup"><span data-stu-id="a979f-117">By definition, a bounded context marks the boundary of a particular domain model.</span></span> <span data-ttu-id="a979f-118">Falls ein Microservice verschiedene Domänenmodelle miteinander vermischt, sollten Sie ggf. wieder zur Domänenanalyse zurückkehren und diese optimieren.</span><span class="sxs-lookup"><span data-stu-id="a979f-118">If you find that a microservice mixes different domain models together, that's a sign that you may need to go back and refine your domain analysis.</span></span>

2. <span data-ttu-id="a979f-119">Betrachten Sie als Nächstes die Aggregate in Ihrem Domänenmodell.</span><span class="sxs-lookup"><span data-stu-id="a979f-119">Next, look at the aggregates in your domain model.</span></span> <span data-ttu-id="a979f-120">Aggregate sind häufig gute Kandidaten für Microservices.</span><span class="sxs-lookup"><span data-stu-id="a979f-120">Aggregates are often good candidates for microservices.</span></span> <span data-ttu-id="a979f-121">Ein sorgfältig entworfenes Aggregat weist viele Merkmale eines sorgfältig entworfenen Microservice auf:</span><span class="sxs-lookup"><span data-stu-id="a979f-121">A well-designed aggregate exhibits many of the characteristics of a well-designed microservice, such as:</span></span>

    - <span data-ttu-id="a979f-122">Einem Aggregat liegen geschäftliche Anforderungen zugrunde, keine technischen Aspekte wie Datenzugriff oder Messaging.</span><span class="sxs-lookup"><span data-stu-id="a979f-122">An aggregate is derived from business requirements, rather than technical concerns such as data access or messaging.</span></span>
    - <span data-ttu-id="a979f-123">Ein Aggregat sollte über eine hohe funktionale Kohäsion verfügen.</span><span class="sxs-lookup"><span data-stu-id="a979f-123">An aggregate should have high functional cohesion.</span></span>
    - <span data-ttu-id="a979f-124">Ein Aggregat ist eine Persistenzgrenze.</span><span class="sxs-lookup"><span data-stu-id="a979f-124">An aggregate is a boundary of persistence.</span></span>
    - <span data-ttu-id="a979f-125">Aggregate sollten lose gekoppelt sein.</span><span class="sxs-lookup"><span data-stu-id="a979f-125">Aggregates should be loosely coupled.</span></span>

3. <span data-ttu-id="a979f-126">Auch Domänendienste sind gute Kandidaten für Microservices.</span><span class="sxs-lookup"><span data-stu-id="a979f-126">Domain services are also good candidates for microservices.</span></span> <span data-ttu-id="a979f-127">Domänendienste sind zustandslose, aggregatübergreifende Vorgänge.</span><span class="sxs-lookup"><span data-stu-id="a979f-127">Domain services are stateless operations across multiple aggregates.</span></span> <span data-ttu-id="a979f-128">Ein typisches Beispiel ist ein Workflow, der mehrere Microservices umfasst.</span><span class="sxs-lookup"><span data-stu-id="a979f-128">A typical example is a workflow that involves several microservices.</span></span> <span data-ttu-id="a979f-129">Die Drohnenlieferungsanwendung enthält ein entsprechendes Beispiel.</span><span class="sxs-lookup"><span data-stu-id="a979f-129">We'll see an example of this in the Drone Delivery application.</span></span>

4. <span data-ttu-id="a979f-130">Berücksichtigen Sie außerdem nicht funktionsbezogene Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="a979f-130">Finally, consider non-functional requirements.</span></span> <span data-ttu-id="a979f-131">Betrachten Sie Faktoren wie Teamgröße, Datentypen und Technologien sowie Skalierbarkeits-, Verfügbarkeits- und Sicherheitsanforderungen.</span><span class="sxs-lookup"><span data-stu-id="a979f-131">Look at factors such as team size, data types, technologies, scalability requirements, availability requirements, and security requirements.</span></span> <span data-ttu-id="a979f-132">Auf der Grundlage dieser Faktoren können Sie einen Microservice ggf. in mehrere kompaktere Dienste aufspalten oder aber mehrere Microservices zu einem einzelnen Dienst zusammenfassen.</span><span class="sxs-lookup"><span data-stu-id="a979f-132">These factors may lead you to further decompose a microservice into two or more smaller services, or do the opposite and combine several microservices into one.</span></span>

<span data-ttu-id="a979f-133">Nachdem Sie die Microservices in Ihrer Anwendung identifiziert haben, überprüfen Sie Ihren Entwurf anhand folgender Kriterien:</span><span class="sxs-lookup"><span data-stu-id="a979f-133">After you identify the microservices in your application, validate your design against the following criteria:</span></span>

- <span data-ttu-id="a979f-134">Jeder Dienst hat eine einzelne Aufgabe.</span><span class="sxs-lookup"><span data-stu-id="a979f-134">Each service has a single responsibility.</span></span>
- <span data-ttu-id="a979f-135">Zwischen Diensten findet keine übermäßige Kommunikation statt.</span><span class="sxs-lookup"><span data-stu-id="a979f-135">There are no chatty calls between services.</span></span> <span data-ttu-id="a979f-136">Falls die Aufspaltung von Funktionen in zwei Dienste zu übermäßiger Kommunikation zwischen den Diensten führt, kann dies ein Indiz dafür sein, dass die Funktionen in einen einzelnen Dienst gehören.</span><span class="sxs-lookup"><span data-stu-id="a979f-136">If splitting functionality into two services causes them to be overly chatty, it may be a symptom that these functions belong in the same service.</span></span>
- <span data-ttu-id="a979f-137">Jeder Dienst ist so kompakt, dass er von einem kleinen unabhängigen Team erstellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="a979f-137">Each service is small enough that it can be built by a small team working independently.</span></span>
- <span data-ttu-id="a979f-138">Es bestehen keine gegenseitigen Abhängigkeiten, die eine Abstimmung bei der Bereitstellung mehrerer Dienste erforderlich machen.</span><span class="sxs-lookup"><span data-stu-id="a979f-138">There are no inter-dependencies that will require two or more services to be deployed in lock-step.</span></span> <span data-ttu-id="a979f-139">Die Bereitstellung eines Diensts muss immer ohne erneute Bereitstellung anderer Dienste möglich sein.</span><span class="sxs-lookup"><span data-stu-id="a979f-139">It should always be possible to deploy a service without redeploying any other services.</span></span>
- <span data-ttu-id="a979f-140">Dienste sind nicht eng gekoppelt und können unabhängig voneinander weiterentwickelt werden.</span><span class="sxs-lookup"><span data-stu-id="a979f-140">Services are not tightly coupled, and can evolve independently.</span></span>
- <span data-ttu-id="a979f-141">Ihre Dienstgrenzen führen nicht zu Problemen mit der Datenkonsistenz oder -integrität.</span><span class="sxs-lookup"><span data-stu-id="a979f-141">Your service boundaries will not create problems with data consistency or integrity.</span></span> <span data-ttu-id="a979f-142">Manchmal ist es wichtig, die Datenkonsistenz zu wahren, indem Funktionen in einem einzelnen Microservice platziert werden.</span><span class="sxs-lookup"><span data-stu-id="a979f-142">Sometimes it's important to maintain data consistency by putting functionality into a single microservice.</span></span> <span data-ttu-id="a979f-143">Nichtsdestotrotz sollten Sie sich überlegen, ob Sie wirklich eine starke Konsistenz benötigt.</span><span class="sxs-lookup"><span data-stu-id="a979f-143">That said, consider whether you really need strong consistency.</span></span> <span data-ttu-id="a979f-144">Es gibt Strategien für die Implementierung von letztlicher Konsistenz in einem verteilten System, und die Vorteile einer Zerlegung der Dienste überwiegen häufig die Herausforderungen der Verwendung von letztlicher Konsistenz.</span><span class="sxs-lookup"><span data-stu-id="a979f-144">There are strategies for addressing eventual consistency in a distributed system, and the benefits of decomposing services often outweigh the challenges of managing eventual consistency.</span></span>

<span data-ttu-id="a979f-145">Am wichtigsten ist jedoch: Seien Sie pragmatisch, und denken Sie daran, dass DDD (Domain-Driven Design) ein iterativer Prozess ist.</span><span class="sxs-lookup"><span data-stu-id="a979f-145">Above all, it's important to be pragmatic, and remember that domain-driven design is an iterative process.</span></span> <span data-ttu-id="a979f-146">Beginnen Sie im Zweifelsfall mit undifferenzierteren Microservices.</span><span class="sxs-lookup"><span data-stu-id="a979f-146">When in doubt, start with more coarse-grained microservices.</span></span> <span data-ttu-id="a979f-147">Die Aufspaltung eines Microservice in zwei kompaktere Dienste ist einfacher als ein Refactoring mehrerer vorhandener Microservices.</span><span class="sxs-lookup"><span data-stu-id="a979f-147">Splitting a microservice into two smaller services is easier than refactoring functionality across several existing microservices.</span></span>
  
## <a name="example-defining-microservices-for-the-drone-delivery-application"></a><span data-ttu-id="a979f-148">Beispiel: Definieren von Microservices für die Drohnenlieferungsanwendung</span><span class="sxs-lookup"><span data-stu-id="a979f-148">Example: Defining microservices for the Drone Delivery application</span></span>

<span data-ttu-id="a979f-149">Das Entwicklungsteam hatte ja die vier Aggregate „Delivery“ (Lieferung), „Package“ (Paket), „Drone“ (Drohne) und „Account“ (Konto) sowie die beiden Domänendienste „Scheduler“ (Planung) und „Supervisor“ identifiziert.</span><span class="sxs-lookup"><span data-stu-id="a979f-149">Recall that the development team had identified the four aggregates &mdash; Delivery, Package, Drone, and Account &mdash; and two domain services, Scheduler and Supervisor.</span></span>

<span data-ttu-id="a979f-150">„Delivery“ und „Package“ sind offensichtliche Kandidaten für Microservices.</span><span class="sxs-lookup"><span data-stu-id="a979f-150">Delivery and Package are obvious candidates for microservices.</span></span> <span data-ttu-id="a979f-151">„Scheduler“ und „Supervisor“ koordinieren die Aktivitäten anderer Microservices, weshalb es sinnvoll ist, diese Domänendienste als Microservices zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="a979f-151">The Scheduler and Supervisor coordinate the activities performed by other microservices, so it makes sense to implement these domain services as microservices.</span></span>

<span data-ttu-id="a979f-152">„Drone“ und „Account“ sind interessant, da sie zu anderen Kontextgrenzen gehören.</span><span class="sxs-lookup"><span data-stu-id="a979f-152">Drone and Account are interesting because they belong to other bounded contexts.</span></span> <span data-ttu-id="a979f-153">Eine Möglichkeit wäre, dass „Scheduler“ die Kontextgrenzen „Drone“ und „Account“ direkt aufruft.</span><span class="sxs-lookup"><span data-stu-id="a979f-153">One option is for the Scheduler to call the Drone and Account bounded contexts directly.</span></span> <span data-ttu-id="a979f-154">Eine andere Möglichkeit besteht darin, die Microservices „Drone“ und „Account“ innerhalb der Kontextgrenze „Shipping“ (Versand) zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="a979f-154">Another option is to create Drone and Account microservices inside the Shipping bounded context.</span></span> <span data-ttu-id="a979f-155">Diese Microservices würden dann als Vermittler zwischen den Kontextgrenzen fungieren, indem sie APIs oder Datenschemas verfügbar machen, die besser für den Versandkontext geeignet sind.</span><span class="sxs-lookup"><span data-stu-id="a979f-155">These microservices would mediate between the bounded contexts, by exposing APIs or data schemas that are more suited to the Shipping context.</span></span>

<span data-ttu-id="a979f-156">Da wir in diesem Leitfaden nicht weiter auf die Details der Kontextgrenzen „Drone“ und „Account“ eingehen, haben wir in unserer Referenzimplementierung entsprechende Pseudodienste erstellt.</span><span class="sxs-lookup"><span data-stu-id="a979f-156">The details of the Drone and Account bounded contexts are beyond the scope of this guidance, so we created mock services for them in our reference implementation.</span></span> <span data-ttu-id="a979f-157">Hier sind jedoch einige Faktoren, die Sie in dieser Situation berücksichtigen sollten:</span><span class="sxs-lookup"><span data-stu-id="a979f-157">But here are some factors to consider in this situation:</span></span>

- <span data-ttu-id="a979f-158">Wie hoch ist der zusätzliche Netzwerkaufwand, der durch direkte Aufrufe an die andere Kontextgrenze entsteht?</span><span class="sxs-lookup"><span data-stu-id="a979f-158">What is the network overhead of calling directly into the other bounded context?</span></span>

- <span data-ttu-id="a979f-159">Eignet sich das Datenschema der anderen Kontextgrenze für diesen Kontext, oder ist es besser, ein Schema zu verwenden, das speziell auf diese Kontextgrenze zugeschnitten ist?</span><span class="sxs-lookup"><span data-stu-id="a979f-159">Is the data schema for the other bounded context suitable for this context, or is it better to have a schema that's tailored to this bounded context?</span></span>

- <span data-ttu-id="a979f-160">Handelt es sich bei der anderen Kontextgrenze um ein Legacysystem?</span><span class="sxs-lookup"><span data-stu-id="a979f-160">Is the other bounded context a legacy system?</span></span> <span data-ttu-id="a979f-161">In diesem Fall können Sie einen Dienst erstellen, der als [Antibeschädigungsebene](../../patterns/anti-corruption-layer.md) fungiert und zwischen dem Legacysystem und der modernen Anwendung vermittelt.</span><span class="sxs-lookup"><span data-stu-id="a979f-161">If so, you might create a service that acts as an [anti-corruption layer](../../patterns/anti-corruption-layer.md) to translate between the legacy system and the modern application.</span></span>

- <span data-ttu-id="a979f-162">Welche Teamstruktur wird verwendet?</span><span class="sxs-lookup"><span data-stu-id="a979f-162">What is the team structure?</span></span> <span data-ttu-id="a979f-163">Kann problemlos mit dem Team kommuniziert werden, das für die andere Kontextgrenze zuständig ist?</span><span class="sxs-lookup"><span data-stu-id="a979f-163">Is it easy to communicate with the team that's responsible for the other bounded context?</span></span> <span data-ttu-id="a979f-164">Falls nicht, kann es hilfreich sein, einen Dienst als Vermittler zwischen den beiden Kontexten zu erstellen, um die Kosten für die teamübergreifende Kommunikation zu senken.</span><span class="sxs-lookup"><span data-stu-id="a979f-164">If not, creating a service that mediates between the two contexts can help to mitigate the cost of cross-team communication.</span></span>

<span data-ttu-id="a979f-165">Bislang haben wir noch keine nicht funktionsbezogenen Anforderungen berücksichtigt.</span><span class="sxs-lookup"><span data-stu-id="a979f-165">So far, we haven't considered any non-functional requirements.</span></span> <span data-ttu-id="a979f-166">Angesichts der Durchsatzanforderungen der Anwendung hat das Entwicklungsteam beschlossen, einen separaten Microservice namens „Ingestion“ (Erfassung) zu erstellen, der für die Erfassung von Clientanforderungen zuständig ist.</span><span class="sxs-lookup"><span data-stu-id="a979f-166">Thinking about the application's throughput requirements, the development team decided to create a separate Ingestion microservice that is responsible for ingesting client requests.</span></span> <span data-ttu-id="a979f-167">Dieser Microservice implementiert einen [Belastungsausgleich](../../patterns/queue-based-load-leveling.md), indem er eingehende Anforderungen zur Verarbeitung in einem Puffer platziert.</span><span class="sxs-lookup"><span data-stu-id="a979f-167">This microservice will implement [load leveling](../../patterns/queue-based-load-leveling.md) by putting incoming requests into a buffer for processing.</span></span> <span data-ttu-id="a979f-168">„Scheduler“ liest die Anforderungen aus dem Puffer und führt den Workflow aus.</span><span class="sxs-lookup"><span data-stu-id="a979f-168">The Scheduler will read the requests from the buffer and execute the workflow.</span></span>

<span data-ttu-id="a979f-169">Nicht funktionsbezogene Anforderungen haben das Team zur Erstellung eines zusätzlichen Diensts veranlasst.</span><span class="sxs-lookup"><span data-stu-id="a979f-169">Non-functional requirements led the team to create one additional service.</span></span> <span data-ttu-id="a979f-170">Bislang ging es bei allen Diensten um die Zeitplanung und Auslieferung von Paketen in Echtzeit.</span><span class="sxs-lookup"><span data-stu-id="a979f-170">All of the services so far have been about the process of scheduling and delivering packages in real time.</span></span> <span data-ttu-id="a979f-171">Für die Datenanalyse muss das System jedoch auch den Verlauf jeder Lieferung in einem langfristigen Speicher speichern.</span><span class="sxs-lookup"><span data-stu-id="a979f-171">But the system also needs to store the history of every delivery in long-term storage for data analysis.</span></span> <span data-ttu-id="a979f-172">Das Team hat erwogen, diese Funktion dem Dienst „Delivery“ zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="a979f-172">The team considered making this the responsibility of the Delivery service.</span></span> <span data-ttu-id="a979f-173">Die Datenspeicheranforderungen für die Analyse von Verlaufsdaten unterscheiden sich jedoch deutlich von den Anforderungen für laufende Vorgänge. (Weitere Informationen finden Sie unter [Überlegungen zu Daten](../design/data-considerations.md)).</span><span class="sxs-lookup"><span data-stu-id="a979f-173">However, the data storage requirements are quite different for historical analysis versus in-flight operations (see [Data considerations](../design/data-considerations.md)).</span></span> <span data-ttu-id="a979f-174">Aus diesem Grund hat sich das Team dazu entschieden, einen separaten Dienst namens „Delivery History“ (Lieferverlauf) zu erstellen, der auf DeliveryTracking-Ereignisse des Diensts „Delivery“ lauscht und die Ereignisse in einen langfristigen Speicher schreibt.</span><span class="sxs-lookup"><span data-stu-id="a979f-174">Therefore, the team decided to create a separate Delivery History service, which will listen for DeliveryTracking events from the Delivery service and write the events into long-term storage.</span></span>

<span data-ttu-id="a979f-175">Das folgende Diagramm zeigt den aktuellen Stand des Designs:</span><span class="sxs-lookup"><span data-stu-id="a979f-175">The following diagram shows the design at this point:</span></span>

![Entwurfsdiagramm](../images/drone-delivery.png)

## <a name="next-steps"></a><span data-ttu-id="a979f-177">Nächste Schritte</span><span class="sxs-lookup"><span data-stu-id="a979f-177">Next steps</span></span>

<span data-ttu-id="a979f-178">Sie sollten nun mit dem Zweck und der Funktion der einzelnen Microservices in Ihrem Entwurf vertraut sein.</span><span class="sxs-lookup"><span data-stu-id="a979f-178">At this point, you should have a clear understanding of the purpose and functionality of each microservice in your design.</span></span> <span data-ttu-id="a979f-179">Als Nächstes können Sie die Architektur des Systems erstellen.</span><span class="sxs-lookup"><span data-stu-id="a979f-179">Now you can architect the system.</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="a979f-180">Entwerfen einer Microservices-Architektur</span><span class="sxs-lookup"><span data-stu-id="a979f-180">Design a microservices architecture</span></span>](../design/index.md)

<!-- links -->

[event-grid]: /azure/event-grid/
[functions]: /azure/azure-functions/functions-overview
[functions-triggers]: /azure/azure-functions/functions-triggers-bindings
