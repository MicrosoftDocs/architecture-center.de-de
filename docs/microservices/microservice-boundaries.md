---
title: Identifizieren von Microservice-Grenzen
description: Identifizieren von Microservice-Grenzen
author: MikeWasson
ms.date: 10/23/2018
ms.openlocfilehash: 679696818d50b70a5116916bd9198a390abfd7fe
ms.sourcegitcommit: fdcacbfdc77370532a4dde776c5d9b82227dff2d
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/24/2018
ms.locfileid: "49962788"
---
# <a name="designing-microservices-identifying-microservice-boundaries"></a><span data-ttu-id="d81aa-103">Entwerfen von Microservices: Identifizieren von Microservice-Grenzen</span><span class="sxs-lookup"><span data-stu-id="d81aa-103">Designing microservices: Identifying microservice boundaries</span></span>

<span data-ttu-id="d81aa-104">Was ist die richtige Größe für einen Microservice?</span><span class="sxs-lookup"><span data-stu-id="d81aa-104">What is the right size for a microservice?</span></span> <span data-ttu-id="d81aa-105">Diese Frage wird häufig mit „nicht zu groß und nicht zu klein“ beantwortet. Das ist zwar richtig, aber nicht sonderlich hilfreich.</span><span class="sxs-lookup"><span data-stu-id="d81aa-105">You often hear something to the effect of, "not too big and not too small" &mdash; and while that's certainly correct, it's not very helpful in practice.</span></span> <span data-ttu-id="d81aa-106">Auf der Grundlage eines sorgfältig entworfenen Domänenmodells lassen sich Microservices viel leichter besprechen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-106">But if you start from a carefully designed domain model, it's much easier to reason about microservices.</span></span>

![](./images/bounded-contexts.png)

## <a name="from-domain-model-to-microservices"></a><span data-ttu-id="d81aa-107">Vom Domänenmodell zu Microservices</span><span class="sxs-lookup"><span data-stu-id="d81aa-107">From domain model to microservices</span></span>

<span data-ttu-id="d81aa-108">Im [vorherigen Kapitel](./domain-analysis.md) haben wir eine Reihe von Kontextgrenzen für die Drohnenlieferungsanwendung definiert.</span><span class="sxs-lookup"><span data-stu-id="d81aa-108">In the [previous chapter](./domain-analysis.md), we defined a set of bounded contexts for the Drone Delivery application.</span></span> <span data-ttu-id="d81aa-109">Anschließend haben wir uns eingehender mit einer dieser Kontextgrenzen (dem Versandkontext) befasst und eine Reihe von Entitäten, Aggregaten und Domänendiensten für diese Kontextgrenze identifiziert.</span><span class="sxs-lookup"><span data-stu-id="d81aa-109">Then we looked more closely at one of these bounded contexts, the Shipping bounded context, and identified a set of entities, aggregates, and domain services for that bounded context.</span></span>

<span data-ttu-id="d81aa-110">Nun sind wir bereit für den Schritt vom Domänenmodell zum Anwendungsentwurf.</span><span class="sxs-lookup"><span data-stu-id="d81aa-110">Now we're ready to go from domain model to application design.</span></span> <span data-ttu-id="d81aa-111">Mit dem folgenden Ansatz können Sie Microservices vom Domänenmodell ableiten.</span><span class="sxs-lookup"><span data-stu-id="d81aa-111">Here's an approach that you can use to derive microservices from the domain model.</span></span>

1. <span data-ttu-id="d81aa-112">Beginnen Sie mit einer Kontextgrenze.</span><span class="sxs-lookup"><span data-stu-id="d81aa-112">Start with a bounded context.</span></span> <span data-ttu-id="d81aa-113">Grundsätzlich sollte die Funktion in einem Microservice nicht mehrere Kontextgrenzen umfassen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-113">In general, the functionality in a microservice should not span more than one bounded context.</span></span> <span data-ttu-id="d81aa-114">Eine Kontextgrenze markiert definitionsgemäß die Grenze eines bestimmten Domänenmodells.</span><span class="sxs-lookup"><span data-stu-id="d81aa-114">By definition, a bounded context marks the boundary of a particular domain model.</span></span> <span data-ttu-id="d81aa-115">Falls ein Microservice verschiedene Domänenmodelle miteinander vermischt, sollten Sie ggf. wieder zur Domänenanalyse zurückkehren und diese optimieren.</span><span class="sxs-lookup"><span data-stu-id="d81aa-115">If you find that a microservice mixes different domain models together, that's a sign that you may need to go back and refine your domain analysis.</span></span>

2. <span data-ttu-id="d81aa-116">Betrachten Sie als Nächstes die Aggregate in Ihrem Domänenmodell.</span><span class="sxs-lookup"><span data-stu-id="d81aa-116">Next, look at the aggregates in your domain model.</span></span> <span data-ttu-id="d81aa-117">Aggregate sind häufig gute Kandidaten für Microservices.</span><span class="sxs-lookup"><span data-stu-id="d81aa-117">Aggregates are often good candidates for microservices.</span></span> <span data-ttu-id="d81aa-118">Ein sorgfältig entworfenes Aggregat weist viele Merkmale eines sorgfältig entworfenen Microservice auf:</span><span class="sxs-lookup"><span data-stu-id="d81aa-118">A well-designed aggregate exhibits many of the characteristics of a well-designed microservice, such as:</span></span>

    - <span data-ttu-id="d81aa-119">Einem Aggregat liegen geschäftliche Anforderungen zugrunde, keine technischen Aspekte wie Datenzugriff oder Messaging.</span><span class="sxs-lookup"><span data-stu-id="d81aa-119">An aggregate is derived from business requirements, rather than technical concerns such as data access or messaging.</span></span>  
    - <span data-ttu-id="d81aa-120">Ein Aggregat sollte über eine hohe funktionale Kohäsion verfügen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-120">An aggregate should have high functional cohesion.</span></span>
    - <span data-ttu-id="d81aa-121">Ein Aggregat ist eine Persistenzgrenze.</span><span class="sxs-lookup"><span data-stu-id="d81aa-121">An aggregate is a boundary of persistence.</span></span>
    - <span data-ttu-id="d81aa-122">Aggregate sollten lose gekoppelt sein.</span><span class="sxs-lookup"><span data-stu-id="d81aa-122">Aggregates should be loosely coupled.</span></span> 
    
3. <span data-ttu-id="d81aa-123">Auch Domänendienste sind gute Kandidaten für Microservices.</span><span class="sxs-lookup"><span data-stu-id="d81aa-123">Domain services are also good candidates for microservices.</span></span> <span data-ttu-id="d81aa-124">Domänendienste sind zustandslose, aggregatübergreifende Vorgänge.</span><span class="sxs-lookup"><span data-stu-id="d81aa-124">Domain services are stateless operations across multiple aggregates.</span></span> <span data-ttu-id="d81aa-125">Ein typisches Beispiel ist ein Workflow, der mehrere Microservices umfasst.</span><span class="sxs-lookup"><span data-stu-id="d81aa-125">A typical example is a workflow that involves several microservices.</span></span> <span data-ttu-id="d81aa-126">Die Drohnenlieferungsanwendung enthält ein entsprechendes Beispiel.</span><span class="sxs-lookup"><span data-stu-id="d81aa-126">We'll see an example of this in the Drone Delivery application.</span></span>

4. <span data-ttu-id="d81aa-127">Berücksichtigen Sie außerdem nicht funktionsbezogene Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-127">Finally, consider non-functional requirements.</span></span> <span data-ttu-id="d81aa-128">Betrachten Sie Faktoren wie Teamgröße, Datentypen und Technologien sowie Skalierbarkeits-, Verfügbarkeits- und Sicherheitsanforderungen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-128">Look at factors such as team size, data types, technologies, scalability requirements, availability requirements, and security requirements.</span></span> <span data-ttu-id="d81aa-129">Auf der Grundlage dieser Faktoren können Sie einen Microservice ggf. in mehrere kompaktere Dienste aufspalten oder aber mehrere Microservices zu einem einzelnen Dienst zusammenfassen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-129">These factors may lead you to further decompose a microservice into two or more smaller services, or do the opposite and combine several microservices into one.</span></span> 

<span data-ttu-id="d81aa-130">Nachdem Sie die Microservices in Ihrer Anwendung identifiziert haben, überprüfen Sie Ihren Entwurf anhand folgender Kriterien:</span><span class="sxs-lookup"><span data-stu-id="d81aa-130">After you identify the microservices in your application, validate your design against the following criteria:</span></span>

- <span data-ttu-id="d81aa-131">Jeder Dienst hat eine einzelne Aufgabe.</span><span class="sxs-lookup"><span data-stu-id="d81aa-131">Each service has a single responsibility.</span></span>
- <span data-ttu-id="d81aa-132">Zwischen Diensten findet keine übermäßige Kommunikation statt.</span><span class="sxs-lookup"><span data-stu-id="d81aa-132">There are no chatty calls between services.</span></span> <span data-ttu-id="d81aa-133">Falls die Aufspaltung von Funktionen in zwei Dienste zu übermäßiger Kommunikation zwischen den Diensten führt, kann dies ein Indiz dafür sein, dass die Funktionen in einen einzelnen Dienst gehören.</span><span class="sxs-lookup"><span data-stu-id="d81aa-133">If splitting functionality into two services causes them to be overly chatty, it may be a symptom that these functions belong in the same service.</span></span>
- <span data-ttu-id="d81aa-134">Jeder Dienst ist so kompakt, dass er von einem kleinen unabhängigen Team erstellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="d81aa-134">Each service is small enough that it can be built by a small team working independently.</span></span>
- <span data-ttu-id="d81aa-135">Es bestehen keine gegenseitigen Abhängigkeiten, die eine Abstimmung bei der Bereitstellung mehrerer Dienste erforderlich machen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-135">There are no inter-dependencies that will require two or more services to be deployed in lock-step.</span></span> <span data-ttu-id="d81aa-136">Die Bereitstellung eines Diensts muss immer ohne erneute Bereitstellung anderer Dienste möglich sein.</span><span class="sxs-lookup"><span data-stu-id="d81aa-136">It should always be possible to deploy a service without redeploying any other services.</span></span>
- <span data-ttu-id="d81aa-137">Dienste sind nicht eng gekoppelt und können unabhängig voneinander weiterentwickelt werden.</span><span class="sxs-lookup"><span data-stu-id="d81aa-137">Services are not tightly coupled, and can evolve independently.</span></span>
- <span data-ttu-id="d81aa-138">Ihre Dienstgrenzen führen nicht zu Problemen mit der Datenkonsistenz oder -integrität.</span><span class="sxs-lookup"><span data-stu-id="d81aa-138">Your service boundaries will not create problems with data consistency or integrity.</span></span> <span data-ttu-id="d81aa-139">Manchmal ist es wichtig, die Datenkonsistenz zu wahren, indem Funktionen in einem einzelnen Microservice platziert werden.</span><span class="sxs-lookup"><span data-stu-id="d81aa-139">Sometimes it's important to maintain data consistency by putting functionality into a single microservice.</span></span> <span data-ttu-id="d81aa-140">Nichtsdestotrotz sollten Sie sich überlegen, ob Sie wirklich eine starke Konsistenz benötigt.</span><span class="sxs-lookup"><span data-stu-id="d81aa-140">That said, consider whether you really need strong consistency.</span></span> <span data-ttu-id="d81aa-141">Es gibt Strategien für die Implementierung von letztlicher Konsistenz in einem verteilten System, und die Vorteile einer Zerlegung der Dienste überwiegen häufig die Herausforderungen der Verwendung von letztlicher Konsistenz.</span><span class="sxs-lookup"><span data-stu-id="d81aa-141">There are strategies for addressing eventual consistency in a distributed system, and the benefits of decomposing services often outweigh the challenges of managing eventual consistency.</span></span>

<span data-ttu-id="d81aa-142">Am wichtigsten ist jedoch: Seien Sie pragmatisch, und denken Sie daran, dass DDD (Domain-Driven Design) ein iterativer Prozess ist.</span><span class="sxs-lookup"><span data-stu-id="d81aa-142">Above all, it's important to be pragmatic, and remember that domain-driven design is an iterative process.</span></span> <span data-ttu-id="d81aa-143">Beginnen Sie im Zweifelsfall mit undifferenzierteren Microservices.</span><span class="sxs-lookup"><span data-stu-id="d81aa-143">When in doubt, start with more coarse-grained microservices.</span></span> <span data-ttu-id="d81aa-144">Die Aufspaltung eines Microservice in zwei kompaktere Dienste ist einfacher als ein Refactoring mehrerer vorhandener Microservices.</span><span class="sxs-lookup"><span data-stu-id="d81aa-144">Splitting a microservice into two smaller services is easier than refactoring functionality across several existing microservices.</span></span>
  
## <a name="drone-delivery-defining-the-microservices"></a><span data-ttu-id="d81aa-145">Drohnenlieferung: Definieren der Microservices</span><span class="sxs-lookup"><span data-stu-id="d81aa-145">Drone Delivery: Defining the microservices</span></span>

<span data-ttu-id="d81aa-146">Das Entwicklungsteam hatte ja die vier Aggregate „Delivery“ (Lieferung), „Package“ (Paket), „Drone“ (Drohne) und „Account“ (Konto) sowie die beiden Domänendienste „Scheduler“ (Planung) und „Supervisor“ identifiziert.</span><span class="sxs-lookup"><span data-stu-id="d81aa-146">Recall that the development team had identified the four aggregates &mdash; Delivery, Package, Drone, and Account &mdash; and two domain services, Scheduler and Supervisor.</span></span> 

<span data-ttu-id="d81aa-147">„Delivery“ und „Package“ sind offensichtliche Kandidaten für Microservices.</span><span class="sxs-lookup"><span data-stu-id="d81aa-147">Delivery and Package are obvious candidates for microservices.</span></span> <span data-ttu-id="d81aa-148">„Scheduler“ und „Supervisor“ koordinieren die Aktivitäten anderer Microservices, weshalb es sinnvoll ist, diese Domänendienste als Microservices zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="d81aa-148">The Scheduler and Supervisor coordinate the activities performed by other microservices, so it makes sense to implement these domain services as microservices.</span></span>  

<span data-ttu-id="d81aa-149">„Drone“ und „Account“ sind interessant, da sie zu anderen Kontextgrenzen gehören.</span><span class="sxs-lookup"><span data-stu-id="d81aa-149">Drone and Account are interesting because they belong to other bounded contexts.</span></span> <span data-ttu-id="d81aa-150">Eine Möglichkeit wäre, dass „Scheduler“ die Kontextgrenzen „Drone“ und „Account“ direkt aufruft.</span><span class="sxs-lookup"><span data-stu-id="d81aa-150">One option is for the Scheduler to call the Drone and Account bounded contexts directly.</span></span> <span data-ttu-id="d81aa-151">Eine andere Möglichkeit besteht darin, die Microservices „Drone“ und „Account“ innerhalb der Kontextgrenze „Shipping“ (Versand) zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-151">Another option is to create Drone and Account microservices inside the Shipping bounded context.</span></span> <span data-ttu-id="d81aa-152">Diese Microservices würden dann als Vermittler zwischen den Kontextgrenzen fungieren, indem sie APIs oder Datenschemas verfügbar machen, die besser für den Versandkontext geeignet sind.</span><span class="sxs-lookup"><span data-stu-id="d81aa-152">These microservices would mediate between the bounded contexts, by exposing APIs or data schemas that are more suited to the Shipping context.</span></span>

<span data-ttu-id="d81aa-153">Da wir in diesem Leitfaden nicht weiter auf die Details der Kontextgrenzen „Drone“ und „Account“ eingehen, haben wir in unserer Referenzimplementierung entsprechende Pseudodienste erstellt.</span><span class="sxs-lookup"><span data-stu-id="d81aa-153">The details of the Drone and Account bounded contexts are beyond the scope of this guidance, so we created mock services for them in our reference implementation.</span></span> <span data-ttu-id="d81aa-154">Hier sind jedoch einige Faktoren, die Sie in dieser Situation berücksichtigen sollten:</span><span class="sxs-lookup"><span data-stu-id="d81aa-154">But here are some factors to consider in this situation:</span></span>

- <span data-ttu-id="d81aa-155">Wie hoch ist der zusätzliche Netzwerkaufwand, der durch direkte Aufrufe an die andere Kontextgrenze entsteht?</span><span class="sxs-lookup"><span data-stu-id="d81aa-155">What is the network overhead of calling directly into the other bounded context?</span></span> 

- <span data-ttu-id="d81aa-156">Eignet sich das Datenschema der anderen Kontextgrenze für diesen Kontext, oder ist es besser, ein Schema zu verwenden, das speziell auf diese Kontextgrenze zugeschnitten ist?</span><span class="sxs-lookup"><span data-stu-id="d81aa-156">Is the data schema for the other bounded context suitable for this context, or is it better to have a schema that's tailored to this bounded context?</span></span> 

- <span data-ttu-id="d81aa-157">Handelt es sich bei der anderen Kontextgrenze um ein Legacysystem?</span><span class="sxs-lookup"><span data-stu-id="d81aa-157">Is the other bounded context a legacy system?</span></span> <span data-ttu-id="d81aa-158">In diesem Fall können Sie einen Dienst erstellen, der als [Antibeschädigungsebene](../patterns/anti-corruption-layer.md) fungiert und zwischen dem Legacysystem und der modernen Anwendung vermittelt.</span><span class="sxs-lookup"><span data-stu-id="d81aa-158">If so, you might create a service that acts as an [anti-corruption layer](../patterns/anti-corruption-layer.md) to translate between the legacy system and the modern application.</span></span> 

- <span data-ttu-id="d81aa-159">Welche Teamstruktur wird verwendet?</span><span class="sxs-lookup"><span data-stu-id="d81aa-159">What is the team structure?</span></span> <span data-ttu-id="d81aa-160">Kann problemlos mit dem Team kommuniziert werden, das für die andere Kontextgrenze zuständig ist?</span><span class="sxs-lookup"><span data-stu-id="d81aa-160">Is it easy to communicate with the team that's responsible for the other bounded context?</span></span> <span data-ttu-id="d81aa-161">Falls nicht, kann es hilfreich sein, einen Dienst als Vermittler zwischen den beiden Kontexten zu erstellen, um die Kosten für die teamübergreifende Kommunikation zu senken.</span><span class="sxs-lookup"><span data-stu-id="d81aa-161">If not, creating a service that mediates between the two contexts can help to mitigate the cost of cross-team communication.</span></span>

<span data-ttu-id="d81aa-162">Bislang haben wir noch keine nicht funktionsbezogenen Anforderungen berücksichtigt.</span><span class="sxs-lookup"><span data-stu-id="d81aa-162">So far, we haven't considered any non-functional requirements.</span></span> <span data-ttu-id="d81aa-163">Angesichts der Durchsatzanforderungen der Anwendung hat das Entwicklungsteam beschlossen, einen separaten Microservice namens „Ingestion“ (Erfassung) zu erstellen, der für die Erfassung von Clientanforderungen zuständig ist.</span><span class="sxs-lookup"><span data-stu-id="d81aa-163">Thinking about the application's throughput requirements, the development team decided to create a separate Ingestion microservice that is responsible for ingesting client requests.</span></span> <span data-ttu-id="d81aa-164">Dieser Microservice implementiert einen [Belastungsausgleich](../patterns/queue-based-load-leveling.md), indem er eingehende Anforderungen zur Verarbeitung in einem Puffer platziert.</span><span class="sxs-lookup"><span data-stu-id="d81aa-164">This microservice will implement [load leveling](../patterns/queue-based-load-leveling.md) by putting incoming requests into a buffer for processing.</span></span> <span data-ttu-id="d81aa-165">„Scheduler“ liest die Anforderungen aus dem Puffer und führt den Workflow aus.</span><span class="sxs-lookup"><span data-stu-id="d81aa-165">The Scheduler will read the requests from the buffer and execute the workflow.</span></span> 

<span data-ttu-id="d81aa-166">Nicht funktionsbezogene Anforderungen haben das Team zur Erstellung eines zusätzlichen Diensts veranlasst.</span><span class="sxs-lookup"><span data-stu-id="d81aa-166">Non-functional requirements led the team to create one additional service.</span></span> <span data-ttu-id="d81aa-167">Bislang ging es bei allen Diensten um die Zeitplanung und Auslieferung von Paketen in Echtzeit.</span><span class="sxs-lookup"><span data-stu-id="d81aa-167">All of the services so far have been about the process of scheduling and delivering packages in real time.</span></span> <span data-ttu-id="d81aa-168">Für die Datenanalyse muss das System jedoch auch den Verlauf jeder Lieferung in einem langfristigen Speicher speichern.</span><span class="sxs-lookup"><span data-stu-id="d81aa-168">But the system also needs to store the history of every delivery in long-term storage for data analysis.</span></span> <span data-ttu-id="d81aa-169">Das Team hat erwogen, diese Funktion dem Dienst „Delivery“ zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-169">The team considered making this the responsibility of the Delivery service.</span></span> <span data-ttu-id="d81aa-170">Die Datenspeicheranforderungen für die Analyse von Verlaufsdaten unterscheiden sich jedoch deutlich von den Anforderungen für laufende Vorgänge. (Weitere Informationen finden Sie unter [Überlegungen zu Daten](./data-considerations.md)).</span><span class="sxs-lookup"><span data-stu-id="d81aa-170">However, the data storage requirements are quite different for historical analysis versus in-flight operations (see [Data considerations](./data-considerations.md)).</span></span> <span data-ttu-id="d81aa-171">Aus diesem Grund hat sich das Team dazu entschieden, einen separaten Dienst namens „Delivery History“ (Lieferverlauf) zu erstellen, der auf DeliveryTracking-Ereignisse des Diensts „Delivery“ lauscht und die Ereignisse in einen langfristigen Speicher schreibt.</span><span class="sxs-lookup"><span data-stu-id="d81aa-171">Therefore, the team decided to create a separate Delivery History service, which will listen for DeliveryTracking events from the Delivery service and write the events into long-term storage.</span></span>

<span data-ttu-id="d81aa-172">Das folgende Diagramm zeigt den aktuellen Stand des Designs:</span><span class="sxs-lookup"><span data-stu-id="d81aa-172">The following diagram shows the design at this point:</span></span>
 
![](./images/microservices.png)

## <a name="choosing-a-compute-option"></a><span data-ttu-id="d81aa-173">Wählen einer Computeoption</span><span class="sxs-lookup"><span data-stu-id="d81aa-173">Choosing a compute option</span></span>

<span data-ttu-id="d81aa-174">Der Begriff *Compute* bezieht sich auf das Hostingmodell für die Computeressourcen, auf denen Ihre Anwendung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="d81aa-174">The term *compute* refers to the hosting model for the computing resources that your application runs on.</span></span> <span data-ttu-id="d81aa-175">Bei einer Microservices-Architektur werden bevorzugt die beiden folgenden Ansätze verwendet:</span><span class="sxs-lookup"><span data-stu-id="d81aa-175">For a microservices architecture, two approaches are especially popular:</span></span>

- <span data-ttu-id="d81aa-176">Ein Dienstorchestrator, der Dienste auf dedizierten Knoten (virtuellen Computern) verwaltet</span><span class="sxs-lookup"><span data-stu-id="d81aa-176">A service orchestrator that manages services running on dedicated nodes (VMs).</span></span>
- <span data-ttu-id="d81aa-177">Eine serverlose Architektur mit Funktionen als Dienst (Functions-as-a-Service, FaaS)</span><span class="sxs-lookup"><span data-stu-id="d81aa-177">A serverless architecture using functions as a service (FaaS).</span></span> 

<span data-ttu-id="d81aa-178">Dies sind zwar nicht die einzigen Optionen, sie haben sich aber bei der Erstellung von Microservices bewährt.</span><span class="sxs-lookup"><span data-stu-id="d81aa-178">While these aren't the only options, they are both proven approaches to building microservices.</span></span> <span data-ttu-id="d81aa-179">Eine Anwendung kann beide Ansätze umfassen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-179">An application might include both approaches.</span></span>

### <a name="service-orchestrators"></a><span data-ttu-id="d81aa-180">Dienstorchestratoren</span><span class="sxs-lookup"><span data-stu-id="d81aa-180">Service orchestrators</span></span>

<span data-ttu-id="d81aa-181">Ein Orchestrator bewältigt Aufgaben im Zusammenhang mit der Bereitstellung und Verwaltung einer Gruppe von Diensten.</span><span class="sxs-lookup"><span data-stu-id="d81aa-181">An orchestrator handles tasks related to deploying and managing a set of services.</span></span> <span data-ttu-id="d81aa-182">Diese Aufgaben umfassen das Platzieren von Diensten auf Knoten, das Überwachen der Integrität von Diensten, das Neustarten fehlerhafter Dienste, das Durchführen eines Lastenausgleichs für den Netzwerkdatenverkehr der Dienstinstanzen, das Ermitteln von Diensten, das Skalieren der Anzahl von Dienstinstanzen sowie das Anwenden von Konfigurationsaktualisierungen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-182">These tasks include placing services on nodes, monitoring the health of services, restarting unhealthy services, load balancing network traffic across service instances, service discovery, scaling the number of instances of a service, and applying configuration updates.</span></span> <span data-ttu-id="d81aa-183">Beliebte Orchestratoren sind Kubernetes, Service Fabric, DC/OS und Docker Swarm.</span><span class="sxs-lookup"><span data-stu-id="d81aa-183">Popular orchestrators include Kubernetes, Service Fabric, DC/OS, and Docker Swarm.</span></span>

<span data-ttu-id="d81aa-184">Berücksichtigen Sie die folgenden Optionen auf der Azure-Plattform:</span><span class="sxs-lookup"><span data-stu-id="d81aa-184">On the Azure platform, consider the following options:</span></span>

- <span data-ttu-id="d81aa-185">[Azure Kubernetes Service](/azure/aks/) (AKS) ist ein Managed Kubernetes-Dienst.</span><span class="sxs-lookup"><span data-stu-id="d81aa-185">[Azure Kubernetes Service](/azure/aks/) (AKS) is a managed Kubernetes service.</span></span> <span data-ttu-id="d81aa-186">AKS stellt Kubernetes bereit und macht die Kubernetes-API-Endpunkte verfügbar, hostet und verwaltet aber die Kubernetes-Steuerungsebene und führt somit automatisch Upgrade-, Patch- und andere Verwaltungsaufgaben durch.</span><span class="sxs-lookup"><span data-stu-id="d81aa-186">AKS provisions Kubernetes and exposes the Kubernetes API endpoints, but hosts and manages the Kubernetes control plane, performing automated upgrades, automated patching, autoscaling, and other management tasks.</span></span> <span data-ttu-id="d81aa-187">AKS können Sie sich als „Kubernetes-APIs als Dienst“ vorstellen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-187">You can think of AKS as being "Kubernetes APIs as a service."</span></span> 

- <span data-ttu-id="d81aa-188">[Service Fabric](/azure/service-fabric/) ist eine Plattform für verteilte Systeme, mit der Microservices gepackt, bereitgestellt und verwaltet werden können.</span><span class="sxs-lookup"><span data-stu-id="d81aa-188">[Service Fabric](/azure/service-fabric/) is a distributed systems platform for packaging, deploying, and managing microservices.</span></span> <span data-ttu-id="d81aa-189">Microservices können in Service Fabric als Container, als binäre ausführbare Dateien oder als [Reliable Services](/azure/service-fabric/service-fabric-reliable-services-introduction) bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="d81aa-189">Microservices can be deployed to Service Fabric as containers, as binary executables, or as [Reliable Services](/azure/service-fabric/service-fabric-reliable-services-introduction).</span></span> <span data-ttu-id="d81aa-190">Mit dem Reliable Services-Programmiermodell können Dienste direkt über Service Fabric-APIs das System abfragen, die Integrität melden, Benachrichtigungen zu Konfigurations- und Codeänderungen empfangen sowie andere Dienste ermitteln.</span><span class="sxs-lookup"><span data-stu-id="d81aa-190">Using the Reliable Services programming model, services can directly use Service Fabric programming APIs to query the system, report health, receive notifications about configuration and code changes, and discover other services.</span></span> <span data-ttu-id="d81aa-191">Ein zentraler Unterschied von Service Fabric ist der starke Fokus auf die Erstellung zustandsbehafteter Dienste mit [Reliable Collections](/azure/service-fabric/service-fabric-reliable-services-reliable-collections).</span><span class="sxs-lookup"><span data-stu-id="d81aa-191">A key differentiation with Service Fabric is its strong focus on building stateful services using [Reliable Collections](/azure/service-fabric/service-fabric-reliable-services-reliable-collections).</span></span>

- <span data-ttu-id="d81aa-192">[Azure Container Service](/azure/container-service/) (ACS) ist ein Azure-Dienst, mit dem Sie schnell einen produktionsbereiten DC/OS-, Docker Swarm- oder Kubernetes-Cluster bereitstellen können.</span><span class="sxs-lookup"><span data-stu-id="d81aa-192">[Azure Container Service](/azure/container-service/) (ACS) is an Azure service that lets you deploy a production-ready DC/OS, Docker Swarm, or Kubernetes cluster.</span></span> 

  > [!NOTE]
  > <span data-ttu-id="d81aa-193">Kubernetes wird zwar von ACS unterstützt, wir empfehlen jedoch AKS für die Ausführung von Kubernetes auf Azure.</span><span class="sxs-lookup"><span data-stu-id="d81aa-193">Although Kubernetes is supported by ACS, we recommended AKS for running Kubernetes on Azure.</span></span> <span data-ttu-id="d81aa-194">AKS bietet verbesserten Verwaltungsfunktionen und Kostenvorteile.</span><span class="sxs-lookup"><span data-stu-id="d81aa-194">AKS provides enhanced management capabilities and cost benefits.</span></span>

### <a name="containers"></a><span data-ttu-id="d81aa-195">Container</span><span class="sxs-lookup"><span data-stu-id="d81aa-195">Containers</span></span>

<span data-ttu-id="d81aa-196">Container und Microservices werden gelegentlich in einen Topf geworfen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-196">Sometimes people talk about containers and microservices as if they were the same thing.</span></span> <span data-ttu-id="d81aa-197">Das ist allerdings nicht angebracht: Für die Erstellung von Microservices werden keine Container benötigt. Container bieten jedoch einige Vorteile, die besonders für Microservices relevant sind:</span><span class="sxs-lookup"><span data-stu-id="d81aa-197">While that's not true &mdash; you don't need containers to build microservices &mdash; containers do have some benefits that are particularly relevant to microservices, such as:</span></span>

- <span data-ttu-id="d81aa-198">**Übertragbarkeit:**</span><span class="sxs-lookup"><span data-stu-id="d81aa-198">**Portability**.</span></span> <span data-ttu-id="d81aa-199">Ein Containerimage ist ein eigenständiges Paket, für dessen Ausführung weder Bibliotheken noch andere Abhängigkeiten installiert werden müssen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-199">A container image is a standalone package that runs without needing to install libraries or other dependencies.</span></span> <span data-ttu-id="d81aa-200">Dadurch lassen sie sich ganz einfach bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-200">That makes them easy to deploy.</span></span> <span data-ttu-id="d81aa-201">Container können schnell gestartet und beendet werden, um bei Knotenausfällen oder zur Bewältigung einer höheren Last neue Instanzen zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="d81aa-201">Containers can be started and stopped quickly, so you can spin up new instances to handle more load or to recover from node failures.</span></span> 

- <span data-ttu-id="d81aa-202">**Dichte:**</span><span class="sxs-lookup"><span data-stu-id="d81aa-202">**Density**.</span></span> <span data-ttu-id="d81aa-203">Im Vergleich zur Ausführung eines virtuellen Computers weisen Container eine geringere Dichte auf, da sie Betriebssystemressourcen gemeinsam nutzen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-203">Containers are lightweight compared with running a virtual machine, because they share OS resources.</span></span> <span data-ttu-id="d81aa-204">Dadurch können sich mehrere Container auf einem einzelnen Knoten befinden, was besonders hilfreich ist, wenn sich die Anwendung aus vielen kompakten Diensten zusammensetzt.</span><span class="sxs-lookup"><span data-stu-id="d81aa-204">That makes it possible to pack multiple containers onto a single node, which is especially useful when the application consists of many small services.</span></span>

- <span data-ttu-id="d81aa-205">**Ressourcenisolierung:**</span><span class="sxs-lookup"><span data-stu-id="d81aa-205">**Resource isolation**.</span></span> <span data-ttu-id="d81aa-206">Sie können die verfügbare Arbeitsspeicher- und CPU-Kapazität für einen Container einschränken, um zu verhindern, dass ein außer Kontrolle geratener Prozess sämtliche Hostressourcen beansprucht.</span><span class="sxs-lookup"><span data-stu-id="d81aa-206">You can limit the amount of memory and CPU that is available to a container, which can help to ensure that a runaway process doesn't exhaust the host resources.</span></span> <span data-ttu-id="d81aa-207">Weitere Informationen finden Sie unter [Bulkhead-Muster](../patterns/bulkhead.md).</span><span class="sxs-lookup"><span data-stu-id="d81aa-207">See the [Bulkhead Pattern](../patterns/bulkhead.md) for more information.</span></span>

### <a name="serverless-functions-as-a-service"></a><span data-ttu-id="d81aa-208">Serverlos (Funktionen als Dienst)</span><span class="sxs-lookup"><span data-stu-id="d81aa-208">Serverless (Functions as a Service)</span></span>

<span data-ttu-id="d81aa-209">Bei einer [serverlosen](https://azure.microsoft.com/solutions/serverless/) Architektur verwalten Sie nicht die virtuellen Computer oder die virtuelle Netzwerkinfrastruktur.</span><span class="sxs-lookup"><span data-stu-id="d81aa-209">With a [serverless](https://azure.microsoft.com/solutions/serverless/) architecture, you don't manage the VMs or the virtual network infrastructure.</span></span> <span data-ttu-id="d81aa-210">Stattdessen stellen Sie Code bereit, der dann durch den Hostingdienst auf einem virtuellen Computer platziert und ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="d81aa-210">Instead, you deploy code and the hosting service handles putting that code onto a VM and executing it.</span></span> <span data-ttu-id="d81aa-211">Dieser Ansatz bevorzugt eher kompakte, präzise Funktionen, die mithilfe ereignisbasierter Trigger koordiniert werden.</span><span class="sxs-lookup"><span data-stu-id="d81aa-211">This approach tends to favor small granular functions that are coordinated using event-based triggers.</span></span> <span data-ttu-id="d81aa-212">So kann beispielsweise eine Nachricht, die in einer Warteschlange platziert wird, eine Funktion auslösen, die die Nachricht aus der Warteschlange liest und sie verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="d81aa-212">For example, a message being placed onto a queue might trigger a function that reads from the queue and processes the message.</span></span>

<span data-ttu-id="d81aa-213">[Azure Functions][functions] ist ein serverloser Computedienst, der verschiedenen Funktionstrigger wie etwa HTTP-Anforderungen, Service Bus-Warteschlangen und Event Hubs-Ereignisse unterstützt.</span><span class="sxs-lookup"><span data-stu-id="d81aa-213">[Azure Functions][functions] is a serverless compute service that supports various function triggers, including HTTP requests, Service Bus queues, and Event Hubs events.</span></span> <span data-ttu-id="d81aa-214">Eine vollständige Liste finden Sie unter [Konzepte für Azure Functions-Trigger und -Bindungen][functions-triggers].</span><span class="sxs-lookup"><span data-stu-id="d81aa-214">For a complete list, see [Azure Functions triggers and bindings concepts][functions-triggers].</span></span> <span data-ttu-id="d81aa-215">Erwägen Sie außerdem die Verwendung von [Azure Event Grid][event-grid] – ein verwalteter Ereignisroutingdienst in Azure.</span><span class="sxs-lookup"><span data-stu-id="d81aa-215">Also consider [Azure Event Grid][event-grid], which is a managed event routing service in Azure.</span></span>

### <a name="orchestrator-or-serverless"></a><span data-ttu-id="d81aa-216">Orchestrator oder serverlos?</span><span class="sxs-lookup"><span data-stu-id="d81aa-216">Orchestrator or serverless?</span></span>

<span data-ttu-id="d81aa-217">Im Anschluss finden Sie einige Faktoren, die Sie bei der Wahl eines Orchestratoransatzes oder eines serverlosen Ansatzes berücksichtigen sollten.</span><span class="sxs-lookup"><span data-stu-id="d81aa-217">Here are some factors to consider when choosing between an orchestrator approach and a serverless approach.</span></span>

<span data-ttu-id="d81aa-218">**Verwaltbarkeit:** Eine serverlose Anwendung lässt sich einfach verwalten, da Ihnen die Plattform die Verwaltung sämtlicher Computeressourcen abnimmt.</span><span class="sxs-lookup"><span data-stu-id="d81aa-218">**Manageability** A serverless application is easy to manage, because the platform manages all the of compute resources for you.</span></span> <span data-ttu-id="d81aa-219">Ein Orchestrator abstrahiert zwar einige Aspekte der Clusterverwaltung und -konfiguration, kann die zugrunde liegenden virtuellen Computer jedoch nicht vollständig verbergen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-219">While an orchestrator abstracts some aspects of managing and configuring a cluster, it does not completely hide the underlying VMs.</span></span> <span data-ttu-id="d81aa-220">Bei Verwendung eines Orchestrators müssen Sie sich mit Aspekten wie Lastenausgleich, CPU-/Arbeitsspeicherauslastung und Netzwerk auseinandersetzen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-220">With an orchestrator, you will need to think about issues such as load balancing, CPU and memory usage, and networking.</span></span>

<span data-ttu-id="d81aa-221">**Flexibilität und Steuerung:**</span><span class="sxs-lookup"><span data-stu-id="d81aa-221">**Flexibility and control**.</span></span> <span data-ttu-id="d81aa-222">Ein Orchestrator bietet umfangreiche Steuerungsmöglichkeiten für die Konfiguration und Verwaltung Ihrer Dienste und des Clusters.</span><span class="sxs-lookup"><span data-stu-id="d81aa-222">An orchestrator gives you a great deal of control over configuring and managing your services and the cluster.</span></span> <span data-ttu-id="d81aa-223">Dafür müssen Sie jedoch eine höhere Komplexität in Kauf nehmen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-223">The tradeoff is additional complexity.</span></span> <span data-ttu-id="d81aa-224">Bei einer serverlosen Architektur geben Sie ein gewisses Maß an Kontrolle auf, da diese Details abstrahiert werden.</span><span class="sxs-lookup"><span data-stu-id="d81aa-224">With a serverless architecture, you give up some degree of control because these details are abstracted.</span></span>

<span data-ttu-id="d81aa-225">**Übertragbarkeit:**</span><span class="sxs-lookup"><span data-stu-id="d81aa-225">**Portability**.</span></span> <span data-ttu-id="d81aa-226">Alle hier aufgeführten Orchestratoren (Kubernetes, DC/OS, Docker Swarm und Service Fabric) können lokal oder in mehreren öffentlichen Clouds ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="d81aa-226">All of the orchestrators listed here (Kubernetes, DC/OS, Docker Swarm, and Service Fabric) can run on-premises or in multiple public clouds.</span></span> 

<span data-ttu-id="d81aa-227">**Anwendungsintegration:**</span><span class="sxs-lookup"><span data-stu-id="d81aa-227">**Application integration**.</span></span> <span data-ttu-id="d81aa-228">Die Erstellung einer komplexen Anwendung mit einer serverlosen Architektur ist unter Umständen nicht ganz einfach.</span><span class="sxs-lookup"><span data-stu-id="d81aa-228">It can be challenging to build a complex application using a serverless architecture.</span></span> <span data-ttu-id="d81aa-229">Eine Option in Azure ist die Koordinierung einer Gruppe von Azure-Funktionen mit [Azure Logic Apps](/azure/logic-apps/).</span><span class="sxs-lookup"><span data-stu-id="d81aa-229">One option in Azure is to use [Azure Logic Apps](/azure/logic-apps/) to coordinate a set of Azure Functions.</span></span> <span data-ttu-id="d81aa-230">Ein Beispiel für diese Methode finden Sie unter [Erstellen einer Funktion, die in Azure Logic Apps integriert ist](/azure/azure-functions/functions-twitter-email).</span><span class="sxs-lookup"><span data-stu-id="d81aa-230">For an example of this approach, see [Create a function that integrates with Azure Logic Apps](/azure/azure-functions/functions-twitter-email).</span></span>

<span data-ttu-id="d81aa-231">**Kosten**:</span><span class="sxs-lookup"><span data-stu-id="d81aa-231">**Cost**.</span></span> <span data-ttu-id="d81aa-232">Bei Verwendung eines Orchestrators bezahlen Sie für die virtuellen Computer, die im Cluster ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="d81aa-232">With an orchestrator, you pay for the VMs that are running in the cluster.</span></span> <span data-ttu-id="d81aa-233">Bei einer serverlosen Anwendung bezahlen Sie nur für die tatsächlich genutzten Serverressourcen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-233">With a serverless application, you pay only for the actual compute resources consumed.</span></span> <span data-ttu-id="d81aa-234">In beiden Fällen müssen Sie die Kosten für zusätzliche Dienste wie Speicher, Datenbanken und Messaging berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-234">In both cases, you need to factor in the cost of any additional services, such as storage, databases, and messaging services.</span></span>

<span data-ttu-id="d81aa-235">**Skalierbarkeit**.</span><span class="sxs-lookup"><span data-stu-id="d81aa-235">**Scalability**.</span></span> <span data-ttu-id="d81aa-236">Azure Functions wird auf der Grundlage der Anzahl eingehender Ereignisse automatisch nach Bedarf skaliert.</span><span class="sxs-lookup"><span data-stu-id="d81aa-236">Azure Functions scales automatically to meet demand, based on the number of incoming events.</span></span> <span data-ttu-id="d81aa-237">Bei Verwendung eines Orchestrators können Sie horizontal hochskalieren, indem Sie die Anzahl der im Cluster ausgeführten Dienstinstanzen erhöhen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-237">With an orchestrator, you can scale out by increasing the number of service instances running in the cluster.</span></span> <span data-ttu-id="d81aa-238">Darüber hinaus können Sie dem Cluster zur Skalierung weitere virtuelle Computer hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="d81aa-238">You can also scale by adding additional VMs to the cluster.</span></span>

<span data-ttu-id="d81aa-239">In unserer Referenzimplementierung setzen wir in erster Linie auf Kubernetes. Für den Dienst „Delivery History“ haben wir allerdings Azure Functions verwendet.</span><span class="sxs-lookup"><span data-stu-id="d81aa-239">Our reference implementation primarily uses Kubernetes, but we did use Azure Functions for one service, namely the Delivery History service.</span></span> <span data-ttu-id="d81aa-240">Aufgrund der ereignisgesteuerten Workload eignet sich Azure Functions gut für diesen speziellen Dienst.</span><span class="sxs-lookup"><span data-stu-id="d81aa-240">Azure Functions was a good fit for this particular service, because it's is an event-driven workload.</span></span> <span data-ttu-id="d81aa-241">Da die Funktion über einen Event Hubs-Trigger aufgerufen wird, war für den Dienst nur sehr wenig Code erforderlich.</span><span class="sxs-lookup"><span data-stu-id="d81aa-241">By using an Event Hubs trigger to invoke the function, the service needed a minimal amount of code.</span></span> <span data-ttu-id="d81aa-242">Der Dienst „Delivery History“ gehört außerdem nicht zum Hauptworkflow, sodass die Ausführung außerhalb des Kubernetes-Clusters keine Auswirkungen auf die End-to-End-Wartezeit der von Benutzern initiierten Vorgänge hat.</span><span class="sxs-lookup"><span data-stu-id="d81aa-242">Also, the Delivery History service is not part of the main workflow, so running it outside of the Kubernetes cluster doesn't affect the end-to-end latency of user-initiated operations.</span></span> 

> [!div class="nextstepaction"]
> [<span data-ttu-id="d81aa-243">Überlegungen zu Daten</span><span class="sxs-lookup"><span data-stu-id="d81aa-243">Data considerations</span></span>](./data-considerations.md)

<!-- links -->

[acs-engine]: https://github.com/Azure/acs-engine
[acs-faq]: /azure/container-service/dcos-swarm/container-service-faq
[event-grid]: /azure/event-grid/
[functions]: /azure/azure-functions/functions-overview
[functions-triggers]: /azure/azure-functions/functions-triggers-bindings
