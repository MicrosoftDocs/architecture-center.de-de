---
title: Muster „Gatekeeper“
titleSuffix: Cloud Design Patterns
description: Schützen Sie Anwendungen und Dienste durch Verwendung einer dedizierten Hostinstanz, die als Broker zwischen Clients und der Anwendung oder dem Dienst fungiert, Anforderungen überprüft und bereinigt sowie Anforderungen und Daten zwischen ihnen weiterleitet.
keywords: Entwurfsmuster
author: dragon119
ms.date: 06/23/2017
ms.topic: design-pattern
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.custom: seodec18
ms.openlocfilehash: 99d3f1f3e4ea1f189fbdfc4cb9d9b3d18e8551a2
ms.sourcegitcommit: 1b50810208354577b00e89e5c031b774b02736e2
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 01/23/2019
ms.locfileid: "54487949"
---
# <a name="gatekeeper-pattern"></a><span data-ttu-id="928f8-104">Muster „Gatekeeper“</span><span class="sxs-lookup"><span data-stu-id="928f8-104">Gatekeeper pattern</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="928f8-105">Schützen Sie Anwendungen und Dienste durch Verwendung einer dedizierten Hostinstanz, die als Broker zwischen Clients und der Anwendung oder dem Dienst fungiert, Anforderungen überprüft und bereinigt sowie Anforderungen und Daten zwischen ihnen weiterleitet.</span><span class="sxs-lookup"><span data-stu-id="928f8-105">Protect applications and services by using a dedicated host instance that acts as a broker between clients and the application or service, validates and sanitizes requests, and passes requests and data between them.</span></span> <span data-ttu-id="928f8-106">Dies kann eine zusätzliche Sicherheitsschicht schaffen und die Angriffsfläche des Systems reduzieren.</span><span class="sxs-lookup"><span data-stu-id="928f8-106">This can provide an additional layer of security, and limit the attack surface of the system.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="928f8-107">Kontext und Problem</span><span class="sxs-lookup"><span data-stu-id="928f8-107">Context and problem</span></span>

<span data-ttu-id="928f8-108">Anwendungen machen ihre Funktionalität den Clients verfügbar, indem sie Anforderungen annehmen und verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="928f8-108">Applications expose their functionality to clients by accepting and processing requests.</span></span> <span data-ttu-id="928f8-109">In Szenarien, bei denen Anwendungen in der Cloud gehostet werden, machen diese Anwendungen Endpunkte verfügbar, mit denen Clients eine Verbindung herstellen. Zudem enthalten sie in der Regel den Code, um die Anforderungen von Clients zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="928f8-109">In cloud-hosted scenarios, applications expose endpoints clients connect to, and typically include the code to handle the requests from clients.</span></span> <span data-ttu-id="928f8-110">Dieser Code führt die Authentifizierung und Überprüfung sowie einen Teil oder die gesamte Verarbeitung von Anforderungen durch und greift aller Wahrscheinlichkeit nach für den Client auf Speicher und andere Dienste zu.</span><span class="sxs-lookup"><span data-stu-id="928f8-110">This code performs authentication and validation, some or all request processing, and is likely to accesses storage and other services on behalf of the client.</span></span>

<span data-ttu-id="928f8-111">Wenn ein böswilliger Benutzer in der Lage ist, das System zu gefährden und Zugriff auf die Hostingumgebung der Anwendung zu erlangen, werden die von ihm verwendeten Sicherheitsmechanismen wie Anmeldeinformationen und Speicherschlüssel sowie die Dienste und Daten, auf die er zugreift, verfügbar gemacht.</span><span class="sxs-lookup"><span data-stu-id="928f8-111">If a malicious user is able to compromise the system and gain access to the application’s hosting environment, the security mechanisms it uses such as credentials and storage keys, and the services and data it accesses, are exposed.</span></span> <span data-ttu-id="928f8-112">Folglich kann der böswillige Benutzer ungehinderten Zugriff auf vertrauliche Informationen und andere Dienste erhalten.</span><span class="sxs-lookup"><span data-stu-id="928f8-112">As a result, the malicious user can gain unrestrained access to sensitive information and other services.</span></span>

## <a name="solution"></a><span data-ttu-id="928f8-113">Lösung</span><span class="sxs-lookup"><span data-stu-id="928f8-113">Solution</span></span>

<span data-ttu-id="928f8-114">Um das Risiko eines clientseitigen Zugriffs auf vertrauliche Informationen und Dienste zu minimieren, entkoppeln Sie Hosts oder Aufgaben, die öffentliche Endpunkte von dem Code, der Anforderungen verarbeitet und auf Speicher zugreift, verfügbar machen.</span><span class="sxs-lookup"><span data-stu-id="928f8-114">To minimize the risk of clients gaining access to sensitive information and services, decouple hosts or tasks that expose public endpoints from the code that processes requests and accesses storage.</span></span> <span data-ttu-id="928f8-115">Hierfür können Sie eine Fassade oder eine dedizierte Aufgabe verwenden, die mit Clients interagiert und die Anforderung dann – wahrscheinlich über eine entkoppelte Schnittstelle – an die Hosts oder Aufgaben übergibt, die die Anforderung bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="928f8-115">You can achieve this by using a façade or a dedicated task that interacts with clients and then hands off the request&mdash;perhaps through a decoupled interface&mdash;to the hosts or tasks that'll handle the request.</span></span> <span data-ttu-id="928f8-116">Die Abbildung zeigt eine allgemeine Übersicht über dieses Muster.</span><span class="sxs-lookup"><span data-stu-id="928f8-116">The figure provides a high-level overview of this pattern.</span></span>

![Allgemeine Übersicht über dieses Muster](./_images/gatekeeper-diagram.png)

<span data-ttu-id="928f8-118">Das Muster „Gatekeeper“ kann einfach zum Schutz des Speichers oder als umfangreichere Fassade verwendet werden, um alle Funktionen der Anwendung zu schützen.</span><span class="sxs-lookup"><span data-stu-id="928f8-118">The gatekeeper pattern can be used to simply protect storage, or it can be used as a more comprehensive façade to protect all of the functions of the application.</span></span> <span data-ttu-id="928f8-119">Zu den wichtigsten Faktoren zählen Folgende:</span><span class="sxs-lookup"><span data-stu-id="928f8-119">The important factors are:</span></span>

- <span data-ttu-id="928f8-120">**Kontrollierte Überprüfung:**</span><span class="sxs-lookup"><span data-stu-id="928f8-120">**Controlled validation**.</span></span> <span data-ttu-id="928f8-121">Der Gatekeeper überprüft alle Anforderungen und lehnt diejenigen ab, die die Überprüfungsanforderungen nicht erfüllen.</span><span class="sxs-lookup"><span data-stu-id="928f8-121">The gatekeeper validates all requests, and rejects those that don't meet validation requirements.</span></span>
- <span data-ttu-id="928f8-122">**Begrenztes Risiko und begrenzte Verfügbarkeit:**</span><span class="sxs-lookup"><span data-stu-id="928f8-122">**Limited risk and exposure**.</span></span> <span data-ttu-id="928f8-123">Der Gatekeeper hat keinen Zugriff auf die Anmeldeinformationen oder Schlüssel, die vom vertrauenswürdigen Host für den Zugriff auf Speicher und Dienste verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="928f8-123">The gatekeeper doesn't have access to the credentials or keys used by the trusted host to access storage and services.</span></span> <span data-ttu-id="928f8-124">Wenn der Gatekeeper gefährdet ist, erhält der Angreifer keinen Zugriff auf diese Anmeldeinformationen oder Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="928f8-124">If the gatekeeper is compromised, the attacker doesn't get access to these credentials or keys.</span></span>
- <span data-ttu-id="928f8-125">**Angemessener Schutz:**</span><span class="sxs-lookup"><span data-stu-id="928f8-125">**Appropriate security**.</span></span> <span data-ttu-id="928f8-126">Der Gatekeeper wird in einem Modus mit beschränkten Berechtigungen ausgeführt, während der Rest der Anwendung im Modus mit voller Vertrauenswürdigkeit ausgeführt wird, der für den Zugriff auf Speicher und Dienste erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="928f8-126">The gatekeeper runs in a limited privilege mode, while the rest of the application runs in the full trust mode required to access storage and services.</span></span> <span data-ttu-id="928f8-127">Wenn der Gatekeeper gefährdet ist, kann er nicht direkt auf die Anwendungsdienste oder -daten zugreifen.</span><span class="sxs-lookup"><span data-stu-id="928f8-127">If the gatekeeper is compromised, it can't directly access the application services or data.</span></span>

<span data-ttu-id="928f8-128">Dieses Muster verhält sich wie eine Firewall in einer typischen Netzwerktopologie.</span><span class="sxs-lookup"><span data-stu-id="928f8-128">This pattern acts like a firewall in a typical network topography.</span></span> <span data-ttu-id="928f8-129">Durch dieses kann der Gatekeeper Anforderungen prüfen und entscheiden, ob die Anforderung an den vertrauenswürdigen Host (auch als „Schlüsselmaster“ bezeichnet) übergeben werden soll, der die erforderlichen Aufgaben ausführt.</span><span class="sxs-lookup"><span data-stu-id="928f8-129">It allows the gatekeeper to examine requests and make a decision about whether to pass the request on to the trusted host (sometimes called the keymaster) that performs the required tasks.</span></span> <span data-ttu-id="928f8-130">Für eine solche Entscheidung muss der Gatekeeper den Anforderungsinhalt in der Regel überprüfen und bereinigen, bevor er ihn an den vertrauenswürdigen Host übergibt.</span><span class="sxs-lookup"><span data-stu-id="928f8-130">This decision typically requires the gatekeeper to validate and sanitize the request content before passing it on to the trusted host.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="928f8-131">Probleme und Überlegungen</span><span class="sxs-lookup"><span data-stu-id="928f8-131">Issues and considerations</span></span>

<span data-ttu-id="928f8-132">Beachten Sie die folgenden Punkte bei der Entscheidung, wie dieses Muster implementiert werden soll:</span><span class="sxs-lookup"><span data-stu-id="928f8-132">Consider the following points when deciding how to implement this pattern:</span></span>

- <span data-ttu-id="928f8-133">Stellen Sie sicher, dass die vertrauenswürdigen Hosts, denen der Gatekeeper Anforderungen übergibt, nur interne oder geschützte Endpunkte verfügbar macht und ausschließlich mit dem Gatekeeper eine Verbindung herstellt.</span><span class="sxs-lookup"><span data-stu-id="928f8-133">Ensure that the trusted hosts the gatekeeper passes requests to expose only internal or protected endpoints, and connect only to the gatekeeper.</span></span> <span data-ttu-id="928f8-134">Die vertrauenswürdigen Hosts sollten keine externen Endpunkte oder Schnittstellen verfügbar machen.</span><span class="sxs-lookup"><span data-stu-id="928f8-134">The trusted hosts shouldn't expose any external endpoints or interfaces.</span></span>
- <span data-ttu-id="928f8-135">Der Gatekeeper muss im Modus mit beschränkten Berechtigungen ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="928f8-135">The gatekeeper must run in a limited privilege mode.</span></span> <span data-ttu-id="928f8-136">In der Regel bedeutet dies, dass der Gatekeeper und der vertrauenswürdige Host in Diensten oder auf virtuellen Computern, die separat gehostet werden, ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="928f8-136">Typically this means running the gatekeeper and the trusted host in separate hosted services or virtual machines.</span></span>
- <span data-ttu-id="928f8-137">Der Gatekeeper sollte keine Verarbeitungsaufgaben im Zusammenhang mit der Anwendung oder den Diensten durchführen oder auf Daten zugreifen.</span><span class="sxs-lookup"><span data-stu-id="928f8-137">The gatekeeper shouldn't perform any processing related to the application or services, or access any data.</span></span> <span data-ttu-id="928f8-138">Seine Funktion besteht ausschließlich darin, Anforderungen zu überprüfen und zu bereinigen.</span><span class="sxs-lookup"><span data-stu-id="928f8-138">Its function is purely to validate and sanitize requests.</span></span> <span data-ttu-id="928f8-139">Die vertrauenswürdigen Hosts müssen möglicherweise eine zusätzliche Überprüfung von Anforderungen durchführen, die Kernüberprüfung sollte jedoch vom Gatekeeper durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="928f8-139">The trusted hosts might need to perform additional validation of requests, but the core validation should be performed by the gatekeeper.</span></span>
- <span data-ttu-id="928f8-140">Verwenden Sie nach Möglichkeit einen sicheren Kommunikationskanal (HTTPS, SSL oder TLS) zwischen dem Gatekeeper und den vertrauenswürdigen Hosts oder Aufgaben.</span><span class="sxs-lookup"><span data-stu-id="928f8-140">Use a secure communication channel (HTTPS, SSL, or TLS) between the gatekeeper and the trusted hosts or tasks where this is possible.</span></span> <span data-ttu-id="928f8-141">Allerdings unterstützen einige Hostingumgebungen nicht HTTPS an internen Endpunkten.</span><span class="sxs-lookup"><span data-stu-id="928f8-141">However, some hosting environments don't support HTTPS on internal endpoints.</span></span>
- <span data-ttu-id="928f8-142">Das Hinzufügen der zusätzlichen Schicht zur Anwendung für die Implementierung des Musters „Gatekeeper“ wird aufgrund der zusätzlichen Verarbeitung und Netzwerkkommunikation sehr wahrscheinlich Auswirkungen auf die Leistung haben.</span><span class="sxs-lookup"><span data-stu-id="928f8-142">Adding the extra layer to the application to implement the gatekeeper pattern is likely to have some impact on performance due to the additional processing and network communication it requires.</span></span>
- <span data-ttu-id="928f8-143">Die Gatekeeper-Instanz kann einen Single Point of Failure darstellen.</span><span class="sxs-lookup"><span data-stu-id="928f8-143">The gatekeeper instance could be a single point of failure.</span></span> <span data-ttu-id="928f8-144">Um die Auswirkungen eines Ausfalls zu minimieren, sollten Sie die Bereitstellung zusätzlicher Instanzen und die Verwendung eines Mechanismus zur automatischen Skalierung in Betracht ziehen. So stellen Sie sicher, dass Kapazitäten zur Aufrechterhaltung der Verfügbarkeit vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="928f8-144">To minimize the impact of a failure, consider deploying additional instances and using an autoscaling mechanism to ensure capacity to maintain availability.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="928f8-145">Verwendung dieses Musters</span><span class="sxs-lookup"><span data-stu-id="928f8-145">When to use this pattern</span></span>

<span data-ttu-id="928f8-146">Dieses Muster ist hilfreich:</span><span class="sxs-lookup"><span data-stu-id="928f8-146">This pattern is useful for:</span></span>

- <span data-ttu-id="928f8-147">Für Anwendungen, die vertrauliche Informationen verarbeiten, Dienste verfügbar machen, die im hohen Maße vor bösartigen Angriffen geschützt werden müssen, oder unternehmenskritische Vorgänge durchführen, die nicht unterbrochen werden sollten</span><span class="sxs-lookup"><span data-stu-id="928f8-147">Applications that handle sensitive information, expose services that must have a high degree of protection from malicious attacks, or perform mission-critical operations that shouldn't be disrupted.</span></span>
- <span data-ttu-id="928f8-148">Für verteilte Anwendungen, bei denen die Überprüfung von Anforderungen zur einfacheren Wartung und Verwaltung getrennt von den Hauptaufgaben durchgeführt oder zentralisiert werden muss</span><span class="sxs-lookup"><span data-stu-id="928f8-148">Distributed applications where it's necessary to perform request validation separately from the main tasks, or to centralize this validation to simplify maintenance and administration.</span></span>

## <a name="example"></a><span data-ttu-id="928f8-149">Beispiel</span><span class="sxs-lookup"><span data-stu-id="928f8-149">Example</span></span>

<span data-ttu-id="928f8-150">In einem Szenario, bei dem eine Anwendung in der Cloud gehostet wird, kann dieses Muster implementiert werden, indem die Gatekeeper-Rolle oder der virtuelle Computer von den vertrauenswürdigen Rollen und Diensten in einer Anwendung entkoppelt wird.</span><span class="sxs-lookup"><span data-stu-id="928f8-150">In a cloud-hosted scenario, this pattern can be implemented by decoupling the gatekeeper role or virtual machine from the trusted roles and services in an application.</span></span> <span data-ttu-id="928f8-151">Verwenden Sie hierfür als Zwischenkommunikationsmechanismus einen internen Endpunkt, eine Warteschlange oder einen Speicher.</span><span class="sxs-lookup"><span data-stu-id="928f8-151">Do this by using an internal endpoint, a queue, or storage as an intermediate communication mechanism.</span></span> <span data-ttu-id="928f8-152">Die Abbildung zeigt die Verwendung eines internen Endpunkts.</span><span class="sxs-lookup"><span data-stu-id="928f8-152">The figure illustrates using an internal endpoint.</span></span>

![Beispiel des Musters unter Verwendung von Cloud Services-Web- und Workerrollen](./_images/gatekeeper-endpoint.png)

## <a name="related-patterns"></a><span data-ttu-id="928f8-154">Verwandte Muster</span><span class="sxs-lookup"><span data-stu-id="928f8-154">Related patterns</span></span>

<span data-ttu-id="928f8-155">Das [Muster „Valet-Schlüssel“](./valet-key.md) kann ebenfalls für die Implementierung des Gatekeeper-Musters relevant sein.</span><span class="sxs-lookup"><span data-stu-id="928f8-155">The [Valet Key pattern](./valet-key.md) might also be relevant when implementing the Gatekeeper pattern.</span></span> <span data-ttu-id="928f8-156">Bei der Kommunikation zwischen dem Gatekeeper und den vertrauenswürdigen Rollen ist es empfehlenswert, die Sicherheit durch die Verwendung von Schlüsseln oder Tokens zu erhöhen, die die Berechtigungen für den Zugriff auf Ressourcen einschränken.</span><span class="sxs-lookup"><span data-stu-id="928f8-156">When communicating between the Gatekeeper and trusted roles it's good practice to enhance security by using keys or tokens that limit permissions for accessing resources.</span></span> <span data-ttu-id="928f8-157">Es beschreibt, wie ein Token oder ein Schlüssel verwendet wird, das bzw. der Clients eingeschränkten direkten Zugriff auf eine bestimmte Ressource oder einen bestimmten Dienst bietet.</span><span class="sxs-lookup"><span data-stu-id="928f8-157">Describes how to use a token or key that provides clients with restricted direct access to a specific resource or service.</span></span>
