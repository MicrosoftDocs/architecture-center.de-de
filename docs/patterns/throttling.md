---
title: Drosselung
description: Steuern Sie den Verbrauch der von einer Anwendungsinstanz, einem einzelnen Mandanten oder einem gesamten Dienst verwendeten Ressourcen.
keywords: Entwurfsmuster
author: dragon119
ms.date: 06/23/2017
pnp.series.title: Cloud Design Patterns
pnp.pattern.categories:
- availability
- performance-scalability
ms.openlocfilehash: 29156fc72f40a952dd53adcb20ffa7c3d0af79b4
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/14/2017
---
# <a name="throttling-pattern"></a><span data-ttu-id="f5bdb-104">Muster „Drosselung“</span><span class="sxs-lookup"><span data-stu-id="f5bdb-104">Throttling pattern</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="f5bdb-105">Steuern Sie den Verbrauch der von einer Anwendungsinstanz, einem einzelnen Mandanten oder einem gesamten Dienst verwendeten Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-105">Control the consumption of resources used by an instance of an application, an individual tenant, or an entire service.</span></span> <span data-ttu-id="f5bdb-106">So kann das System auch dann weiter funktionieren und Vereinbarungen zum Servicelevel (Service Level Agreement, SLAs) erfüllen, wenn ein steigender Bedarf zu einer extremen Ressourcenauslastung führt.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-106">This can allow the system to continue to function and meet service level agreements, even when an increase in demand places an extreme load on resources.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="f5bdb-107">Kontext und Problem</span><span class="sxs-lookup"><span data-stu-id="f5bdb-107">Context and problem</span></span>

<span data-ttu-id="f5bdb-108">Die Last einer Cloudanwendung schwankt normalerweise im Laufe der Zeit, je nach Anzahl der aktiven Benutzer oder den Arten der von ihnen ausgeführten Aktivitäten.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-108">The load on a cloud application typically varies over time based on the number of active users or the types of activities they are performing.</span></span> <span data-ttu-id="f5bdb-109">Dies ist beispielsweise während den Geschäftszeiten der Fall, in denen aller Wahrscheinlichkeit nach mehr Benutzer aktiv sind, oder am Ende eines jeden Monats, an dem das System rechenintensive Analysen durchführen muss.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-109">For example, more users are likely to be active during business hours, or the system might be required to perform computationally expensive analytics at the end of each month.</span></span> <span data-ttu-id="f5bdb-110">Zudem kann es zu plötzlichen und unvorhergesehenen Aktivitätsspitzen kommen.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-110">There might also be sudden and unanticipated bursts in activity.</span></span> <span data-ttu-id="f5bdb-111">Wenn die Verarbeitungsanforderungen des Systems die Kapazität der verfügbaren Ressourcen überschreiten, kommt es zu einer Leistungsverschlechterung und eventuell sogar zu Ausfällen.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-111">If the processing requirements of the system exceed the capacity of the resources that are available, it'll suffer from poor performance and can even fail.</span></span> <span data-ttu-id="f5bdb-112">Wenn das System einen vereinbarten Servicelevel erfüllen muss, kann ein solcher Ausfall untragbar sein.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-112">If the system has to meet an agreed level of service, such failure could be unacceptable.</span></span>

<span data-ttu-id="f5bdb-113">Für den Umgang mit einer schwankenden Last in der Cloud gibt es zahlreiche Strategien, was von den Geschäftszielen der Anwendung abhängt.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-113">There're many strategies available for handling varying load in the cloud, depending on the business goals for the application.</span></span> <span data-ttu-id="f5bdb-114">Eine Strategie besteht darin, die bereitgestellten Ressourcen zu einem beliebigen Zeitpunkt durch automatische Skalierung an die Benutzeranforderungen anzupassen.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-114">One strategy is to use autoscaling to match the provisioned resources to the user needs at any given time.</span></span> <span data-ttu-id="f5bdb-115">Hierdurch können nicht nur Benutzeranforderungen konsistent erfüllt werden, sondern es werden gleichzeitig laufende Kosten optimiert.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-115">This has the potential to consistently meet user demand, while optimizing running costs.</span></span> <span data-ttu-id="f5bdb-116">Die automatische Skalierung kann zwar die Bereitstellung zusätzlicher Ressourcen auslösen, eine solche Bereitstellung erfolgt jedoch nicht unmittelbar.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-116">However, while autoscaling can trigger the provisioning of additional resources, this provisioning isn't immediate.</span></span> <span data-ttu-id="f5bdb-117">Steigt die Nachfrage schnell, kann es innerhalb eines bestimmten Zeitfensters zu einem Ressourcendefizit kommen.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-117">If demand grows quickly, there can be a window of time where there's a resource deficit.</span></span>

## <a name="solution"></a><span data-ttu-id="f5bdb-118">Lösung</span><span class="sxs-lookup"><span data-stu-id="f5bdb-118">Solution</span></span>

<span data-ttu-id="f5bdb-119">Eine alternative Strategie zur automatischen Skalierung besteht darin, die Nutzung von Ressourcen durch Anwendungen bis zu einem bestimmten Grenzwert zuzulassen und diese bei Erreichen dieses Grenzwerts dann zu drosseln.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-119">An alternative strategy to autoscaling is to allow applications to use resources only up to a limit, and then throttle them when this limit is reached.</span></span> <span data-ttu-id="f5bdb-120">Das System sollte die eigene Ressourcennutzung überwachen, damit Anforderungen von einem oder mehreren Benutzern bei einer Überschreitung des Schwellenwertes gedrosselt werden können.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-120">The system should monitor how it's using resources so that, when usage exceeds the threshold, it can throttle requests from one or more users.</span></span> <span data-ttu-id="f5bdb-121">Auf diese Weise kann das System weiterhin funktionieren und alle bestehenden Vereinbarungen zum Servicelevel (SLAs) erfüllen.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-121">This will enable the system to continue functioning and meet any service level agreements (SLAs) that are in place.</span></span> <span data-ttu-id="f5bdb-122">Weitere Informationen zur Überwachung der Ressourcennutzung finden Sie unter [Instrumentierungs- und Telemetrieleitfaden](https://msdn.microsoft.com/library/dn589775.aspx).</span><span class="sxs-lookup"><span data-stu-id="f5bdb-122">For more information on monitoring resource usage, see the [Instrumentation and Telemetry Guidance](https://msdn.microsoft.com/library/dn589775.aspx).</span></span>

<span data-ttu-id="f5bdb-123">Das System kann mehrere Drosselungsstrategien implementieren, wie etwa Folgende:</span><span class="sxs-lookup"><span data-stu-id="f5bdb-123">The system could implement several throttling strategies, including:</span></span>

- <span data-ttu-id="f5bdb-124">Ablehnung von Anforderungen eines einzelnen Benutzers, der in einem bestimmten Zeitraum bereits mehr als n-mal pro Sekunde auf System-APIs zugegriffen hat.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-124">Rejecting requests from an individual user who's already accessed system APIs more than n times per second over a given period of time.</span></span> <span data-ttu-id="f5bdb-125">Hierfür muss das System den Ressourcenverbrauch für jeden Mandanten oder Benutzer, der eine Anwendung ausführt, messen.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-125">This requires the system to meter the use of resources for each tenant or user running an application.</span></span> <span data-ttu-id="f5bdb-126">Weitere Informationen finden Sie im [Leitfaden zur Dienstmessung](https://msdn.microsoft.com/library/dn589796.aspx).</span><span class="sxs-lookup"><span data-stu-id="f5bdb-126">For more information, see the [Service Metering Guidance](https://msdn.microsoft.com/library/dn589796.aspx).</span></span>

- <span data-ttu-id="f5bdb-127">Deaktivieren oder Beschränken der Funktionalität ausgewählter nicht wesentlicher Dienste, sodass wesentliche Dienste ungehindert mit ausreichenden Ressourcen ausgeführt werden können.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-127">Disabling or degrading the functionality of selected nonessential services so that essential services can run unimpeded with sufficient resources.</span></span> <span data-ttu-id="f5bdb-128">Wenn die Anwendung beispielsweise Videoausgaben streamt, kann sie zu einer geringeren Auflösung wechseln.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-128">For example, if the application is streaming video output, it could switch to a lower resolution.</span></span>

- <span data-ttu-id="f5bdb-129">Abschwächen des Aktivitätsvolumens durch einen Lastenausgleich (diese Vorgehensweise wird unter [Muster „Warteschlangenbasierter Lastenausgleich“](queue-based-load-leveling.md) näher beschrieben).</span><span class="sxs-lookup"><span data-stu-id="f5bdb-129">Using load leveling to smooth the volume of activity (this approach is covered in more detail by the [Queue-based Load Leveling pattern](queue-based-load-leveling.md)).</span></span> <span data-ttu-id="f5bdb-130">In einer mehrinstanzenfähigen Umgebung wird die Leistung durch diese Vorgehensweise bei jedem Mandanten beeinträchtigt.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-130">In a multi-tenant environment, this approach will reduce the performance for every tenant.</span></span> <span data-ttu-id="f5bdb-131">Wenn das System eine Kombination von Mandanten mit unterschiedlichen SLAs unterstützen muss, können die Aufgaben für Mandanten mit hoher Priorität sofort durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-131">If the system must support a mix of tenants with different SLAs, the work for high-value tenants might be performed immediately.</span></span> <span data-ttu-id="f5bdb-132">Anforderungen für andere Mandanten können zurückgehalten und bearbeitet werden, wenn der Rückstand nachgelassen hat.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-132">Requests for other tenants can be held back, and handled when the backlog has eased.</span></span> <span data-ttu-id="f5bdb-133">Zur Implementierung dieser Vorgehensweise kann als Unterstützung das [Muster „Prioritätswarteschlange“][] verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-133">The [Priority Queue pattern][] could be used to help implement this approach.</span></span>

- <span data-ttu-id="f5bdb-134">Verschieben von Vorgängen, die für Anwendungen oder Mandanten mit geringerer Priorität durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-134">Deferring operations being performed on behalf of lower priority applications or tenants.</span></span> <span data-ttu-id="f5bdb-135">Diese Vorgänge können angehalten oder beschränkt werden, wobei eine Ausnahme erzeugt wird, um den Mandanten darüber zu informieren, dass das System ausgelastet ist und der Vorgang später erneut wiederholt werden sollte.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-135">These operations can be suspended or limited, with an exception generated to inform the tenant that the system is busy and that the operation should be retried later.</span></span>

<span data-ttu-id="f5bdb-136">Die Abbildung zeigt ein Flächendiagramm zum Ressourcenverbrauch (eine Kombination aus Speicher, CPU, Bandbreite und anderen Faktoren) im Zeitverlauf für Anwendungen, die auf alle drei Funktionen zurückgreifen.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-136">The figure shows an area graph for resource use (a combination of memory, CPU, bandwidth, and other factors) against time for applications that are making use of three features.</span></span> <span data-ttu-id="f5bdb-137">Ein Feature ist ein Funktionsbereich wie etwa eine Komponente, die eine bestimmte Gruppe von Aufgaben ausführt, ein Codeausschnitt, der eine komplexe Berechnung durchführt, oder ein Element, das einen Dienst bereitstellt (z.B. ein In-Memory-Cache).</span><span class="sxs-lookup"><span data-stu-id="f5bdb-137">A feature is an area of functionality, such as a component that performs a specific set of tasks, a piece of code that performs a complex calculation, or an element that provides a service such as an in-memory cache.</span></span> <span data-ttu-id="f5bdb-138">Diese Features sind mit den Buchstaben A, B und C gekennzeichnet.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-138">These features are labeled A, B, and C.</span></span>

![Abbildung 1: Diagramm zur Darstellung des Ressourcenverbrauchs im Zeitverlauf für Anwendungen, die für drei Benutzer ausgeführt werden](./_images/throttling-resource-utilization.png)


> <span data-ttu-id="f5bdb-140">Der Bereich unmittelbar unter der Linie eines Features stellt die Ressourcen dar, die von Anwendungen beim Aufrufen dieses Features verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-140">The area immediately below the line for a feature indicates the resources that are used by applications when they invoke this feature.</span></span> <span data-ttu-id="f5bdb-141">Der Bereich unterhalb der Linie von Feature A beispielsweise stellt die Ressourcen dar, die von Anwendungen verwendet werden, die Feature A verwenden, während der Bereich zwischen den Linien von Feature A und Feature B die Ressourcen darstellt, die von Anwendungen verwendet werden, die Feature B aufrufen. Die aggregierten Bereiche der einzelnen Features stellen die gesamte Ressourcennutzung des Systems dar.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-141">For example, the area below the line for Feature A shows the resources used by applications that are making use of Feature A, and the area between the lines for Feature A and Feature B indicates the resources used by applications invoking Feature B. Aggregating the areas for each feature shows the total resource use of the system.</span></span>

<span data-ttu-id="f5bdb-142">Die vorherige Abbildung zeigt die Auswirkungen bei einer Verschiebung von Vorgängen.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-142">The previous figure illustrates the effects of deferring operations.</span></span> <span data-ttu-id="f5bdb-143">Kurz vor Zeitpunkt T1 erreichen die gesamten Ressourcen, die sämtlichen diese Features nutzenden Anwendungen zugewiesen sind, einen Schwellenwert (den Grenzwert des Ressourcenverbrauchs).</span><span class="sxs-lookup"><span data-stu-id="f5bdb-143">Just prior to time T1, the total resources allocated to all applications using these features reach a threshold (the limit of resource use).</span></span> <span data-ttu-id="f5bdb-144">An diesem Punkt besteht die Gefahr, dass Anwendungen die verfügbaren Ressourcen ausschöpfen.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-144">At this point, the applications are in danger of exhausting the resources available.</span></span> <span data-ttu-id="f5bdb-145">In diesem System ist Feature B weniger entscheidend als Feature A oder Feature C. Es wird daher vorübergehend deaktiviert, und die von diesem Feature verwendeten Ressourcen werden freigegeben.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-145">In this system, Feature B is less critical than Feature A or Feature C, so it's temporarily disabled and the resources that it was using are released.</span></span> <span data-ttu-id="f5bdb-146">Im Zeitraum zwischen Zeitpunkt T1 und T2 werden die Anwendungen, die Feature A und Feature C verwenden, wie gewohnt ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-146">Between times T1 and T2, the applications using Feature A and Feature C continue running as normal.</span></span> <span data-ttu-id="f5bdb-147">Letztendlich sinkt der Ressourcenverbrauch dieser beiden Features so weit, dass bei Zeitpunkt T2 genügend Kapazitäten für die erneute Aktivierung von Feature B vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-147">Eventually, the resource use of these two features diminishes to the point when, at time T2, there is sufficient capacity to enable Feature B again.</span></span>

<span data-ttu-id="f5bdb-148">Die Vorgehensweisen zur automatischen Skalierung und Drosselung können auch kombiniert werden, um weiterhin die Reaktionsfähigkeit der Anwendungen und die Erfüllung der SLAs sicherzustellen.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-148">The autoscaling and throttling approaches can also be combined to help keep the applications responsive and within SLAs.</span></span> <span data-ttu-id="f5bdb-149">Wenn davon ausgegangen wird, dass die Nachfrage weiterhin hoch bleibt, stellt die Drosselung eine vorübergehende Lösung während der horizontalen Skalierung des Systems dar. An dieser Stelle kann die komplette Funktionalität des Systems wiederhergestellt werden.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-149">If the demand is expected to remain high, throttling provides a temporary solution while the system scales out. At this point, the full functionality of the system can be restored.</span></span>

<span data-ttu-id="f5bdb-150">Die folgende Abbildung zeigt ein Flächendiagramm zum gesamten Ressourcenverbrauch sämtlicher Anwendungen, die in einem bestimmten Zeitraum in einem System ausgeführt werden, und wie die Drosselung mit automatischer Skalierung kombiniert werden kann.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-150">The next figure shows an area graph of the overall resource use by all applications running in a system against time, and illustrates how throttling can be combined with autoscaling.</span></span>

![Abbildung 2: Diagramm zu den Auswirkungen einer Kombination von Drosselung und automatischer Skalierung](./_images/throttling-autoscaling.png)


<span data-ttu-id="f5bdb-152">Bei Zeitpunkt T1 ist der Schwellenwert erreicht, der den weichen Grenzwert des Ressourcenverbrauchs angibt.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-152">At time T1, the threshold specifying the soft limit of resource use is reached.</span></span> <span data-ttu-id="f5bdb-153">An dieser Stelle kann das System mit der horizontalen Skalierung beginnen. Wenn die neuen Ressourcen jedoch nicht schnell genug zur Verfügung stehen, werden die vorhandenen Ressourcen möglicherweise aufgebraucht, und das System könnte ausfallen.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-153">At this point, the system can start to scale out. However, if the new resources don't become available quickly enough, then the existing resources might be exhausted and the system could fail.</span></span> <span data-ttu-id="f5bdb-154">Um dies zu verhindern, wird das System wie zuvor beschrieben vorübergehend gedrosselt.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-154">To prevent this from occurring, the system is temporarily throttled, as described earlier.</span></span> <span data-ttu-id="f5bdb-155">Wenn die automatische Skalierung abgeschlossen ist und die zusätzlichen Ressourcen zur Verfügung stehen, kann die Drosselung wieder gelockert werden.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-155">When autoscaling has completed and the additional resources are available, throttling can be relaxed.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="f5bdb-156">Probleme und Überlegungen</span><span class="sxs-lookup"><span data-stu-id="f5bdb-156">Issues and considerations</span></span>

<span data-ttu-id="f5bdb-157">Bei der Entscheidung, wie dieses Muster implementiert werden soll, sind die folgenden Punkte zu beachten:</span><span class="sxs-lookup"><span data-stu-id="f5bdb-157">You should consider the following points when deciding how to implement this pattern:</span></span>

- <span data-ttu-id="f5bdb-158">Die Drosselung einer Anwendung und die anzuwendende Strategie sind Bestandteil der architekturbezogenen Entscheidung, die sich auf den gesamten Entwurf eines Systems auswirkt.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-158">Throttling an application, and the strategy to use, is an architectural decision that impacts the entire design of a system.</span></span> <span data-ttu-id="f5bdb-159">Bereits frühzeitig im Anwendungsentwurfsprozess sollte eine Drosselung in Erwägung gezogen werden, da es schwierig ist, nach der Implementierung eines Systems Ressourcen hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-159">Throttling should be considered early in the application design process because it isn't easy to add once a system has been implemented.</span></span>

- <span data-ttu-id="f5bdb-160">Eine Drosselung muss schnell erfolgen.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-160">Throttling must be performed quickly.</span></span> <span data-ttu-id="f5bdb-161">Das System muss einen Aktivitätsanstieg erkennen und entsprechend darauf reagieren können.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-161">The system must be capable of detecting an increase in activity and react accordingly.</span></span> <span data-ttu-id="f5bdb-162">Das System muss außerdem in der Lage sein, zu seinem ursprünglichen Zustand zurückzukehren, sobald sich die Last verringert hat.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-162">The system must also be able to revert to its original state quickly after the load has eased.</span></span> <span data-ttu-id="f5bdb-163">Dies setzt voraus, dass die entsprechenden Leistungsdaten kontinuierlich erfasst und überwacht werden.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-163">This requires that the appropriate performance data is continually captured and monitored.</span></span>

- <span data-ttu-id="f5bdb-164">Wenn ein Dienst vorübergehend eine Benutzeranforderung ablehnen muss, sollte dieser einen bestimmten Fehlercode zurückgeben, um die Clientanwendung darüber zu informieren, dass die Ablehnung zur Durchführung eines Vorgangs auf eine Drosselung zurückzuführen ist.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-164">If a service needs to temporarily deny a user request, it should return a specific error code so the client application understands that the reason for the refusal to perform an operation is due to throttling.</span></span> <span data-ttu-id="f5bdb-165">Die Clientanwendung wartet möglicherweise für einen gewissen Zeitraum, bis sie die Anforderung wiederholt.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-165">The client application can wait for a period before retrying the request.</span></span>

- <span data-ttu-id="f5bdb-166">Die Drosselung kann als vorübergehende Maßnahme während der automatischen Skalierung eines Systems genutzt werden.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-166">Throttling can be used as a temporary measure while a system autoscales.</span></span> <span data-ttu-id="f5bdb-167">In manchen Fällen empfiehlt es sich, beim plötzlichen Auftreten einer Aktivitätsspitze von wahrscheinlich nicht sehr langer Dauer einfach eine Drosselung anstelle einer automatischen Skalierung vorzunehmen, da eine Skalierung die laufenden Kosten deutlich in die Höhe treiben kann.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-167">In some cases it's better to simply throttle, rather than to scale, if a burst in activity is sudden and isn't expected to be long lived because scaling can add considerably to running costs.</span></span>

- <span data-ttu-id="f5bdb-168">Wenn während der automatischen Skalierung eines Systems eine Drosselung als vorübergehende Maßnahme verwendet wird und der Ressourcenbedarf sehr schnell ansteigt, kann das System möglicherweise nicht mehr funktionieren – selbst wenn es im gedrosselten Modus betrieben wird.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-168">If throttling is being used as a temporary measure while a system autoscales, and if resource demands grow very quickly, the system might not be able to continue functioning&mdash;even when operating in a throttled mode.</span></span> <span data-ttu-id="f5bdb-169">Wenn dies nicht hinnehmbar ist, sollten Sie eventuell größere Kapazitätsreserven vorhalten und eine weitreichendere automatische Skalierung konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-169">If this isn't acceptable, consider maintaining larger capacity reserves and configuring more aggressive autoscaling.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="f5bdb-170">Verwendung dieses Musters</span><span class="sxs-lookup"><span data-stu-id="f5bdb-170">When to use this pattern</span></span>

<span data-ttu-id="f5bdb-171">Verwenden Sie dieses Muster in folgenden Fällen:</span><span class="sxs-lookup"><span data-stu-id="f5bdb-171">Use this pattern:</span></span>

- <span data-ttu-id="f5bdb-172">Um sicherzustellen, dass ein System weiterhin die Vereinbarungen zum Servicelevel erfüllt</span><span class="sxs-lookup"><span data-stu-id="f5bdb-172">To ensure that a system continues to meet service level agreements.</span></span>

- <span data-ttu-id="f5bdb-173">Um zu verhindern, dass ein einzelner Mandant die von einer Anwendung bereitgestellten Ressourcen monopolisiert</span><span class="sxs-lookup"><span data-stu-id="f5bdb-173">To prevent a single tenant from monopolizing the resources provided by an application.</span></span>

- <span data-ttu-id="f5bdb-174">Um Aktivitätsspitzen zu verarbeiten</span><span class="sxs-lookup"><span data-stu-id="f5bdb-174">To handle bursts in activity.</span></span>

- <span data-ttu-id="f5bdb-175">Um die Kosten für ein System durch Beschränkung des maximalen Ressourcenbedarfs zu optimieren, der für die Aufrechterhaltung seiner Funktionsfähigkeit erforderlich ist</span><span class="sxs-lookup"><span data-stu-id="f5bdb-175">To help cost-optimize a system by limiting the maximum resource levels needed to keep it functioning.</span></span>

## <a name="example"></a><span data-ttu-id="f5bdb-176">Beispiel</span><span class="sxs-lookup"><span data-stu-id="f5bdb-176">Example</span></span>

<span data-ttu-id="f5bdb-177">Die letzte Abbildung zeigt, wie eine Drosselung in einem mehrinstanzenfähigen System implementiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-177">The final figure illustrates how throttling can be implemented in a multi-tenant system.</span></span> <span data-ttu-id="f5bdb-178">Benutzer der einzelnen Mandantenorganisationen greifen auf eine in der Cloud gehostete Anwendung zu, in der sie Umfragen ausfüllen und einreichen.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-178">Users from each of the tenant organizations access a cloud-hosted application where they fill out and submit surveys.</span></span> <span data-ttu-id="f5bdb-179">Die Anwendung beinhaltet eine Instrumentierung, die die Geschwindigkeit überwacht, mit der diese Benutzer Anforderungen an die Anwendung senden.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-179">The application contains instrumentation that monitors the rate at which these users are submitting requests to the application.</span></span>

<span data-ttu-id="f5bdb-180">Um zu verhindern, dass Benutzer eines Mandanten die Reaktionsfähigkeit und Verfügbarkeit der Anwendung für alle anderen Benutzer beeinträchtigen, wird die Anzahl der Anforderungen, die die Benutzer eines beliebigen Mandanten pro Sekunde senden können, begrenzt.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-180">In order to prevent the users from one tenant affecting the responsiveness and availability of the application for all other users, a limit is applied to the number of requests per second the users from any one tenant can submit.</span></span> <span data-ttu-id="f5bdb-181">Die Anwendung blockiert Anforderungen, die diesen Grenzwert überschreiten.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-181">The application blocks requests that exceed this limit.</span></span>

![Abbildung 3: Implementieren der Drosselung in einer mehrinstanzenfähigen Anwendung](./_images/throttling-multi-tenant.png)


## <a name="related-patterns-and-guidance"></a><span data-ttu-id="f5bdb-183">Zugehörige Muster und Anleitungen</span><span class="sxs-lookup"><span data-stu-id="f5bdb-183">Related patterns and guidance</span></span>

<span data-ttu-id="f5bdb-184">Die folgenden Muster und Anleitungen können auch relevant sein, wenn dieses Muster implementiert wird:</span><span class="sxs-lookup"><span data-stu-id="f5bdb-184">The following patterns and guidance may also be relevant when implementing this pattern:</span></span>
- <span data-ttu-id="f5bdb-185">[Instrumentations- und Telemetrieanleitungen](https://msdn.microsoft.com/library/dn589775.aspx).</span><span class="sxs-lookup"><span data-stu-id="f5bdb-185">[Instrumentation and Telemetry Guidance](https://msdn.microsoft.com/library/dn589775.aspx).</span></span> <span data-ttu-id="f5bdb-186">Für die Drosselung müssen Informationen über die Nutzlast eines Diensts gesammelt werden.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-186">Throttling depends on gathering information about how heavily a service is being used.</span></span> <span data-ttu-id="f5bdb-187">Dieser Leitfaden beschreibt, wie benutzerdefinierte Überwachungsinformationen generiert und erfasst werden.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-187">Describes how to generate and capture custom monitoring information.</span></span>
- <span data-ttu-id="f5bdb-188">[Leitfaden zur Dienstmessung](https://msdn.microsoft.com/library/dn589796.aspx):</span><span class="sxs-lookup"><span data-stu-id="f5bdb-188">[Service Metering Guidance](https://msdn.microsoft.com/library/dn589796.aspx).</span></span> <span data-ttu-id="f5bdb-189">Dieser Leitfaden beschreibt, wie die Nutzung von Diensten gemessen wird, um Einblick über deren Verwendung zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-189">Describes how to meter the use of services in order to gain an understanding of how they are used.</span></span> <span data-ttu-id="f5bdb-190">Diese Informationen können als Entscheidungshilfe zur Auswahl einer Drosselungsmethode für einen Dienst dienen.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-190">This information can be useful in determining how to throttle a service.</span></span>
- <span data-ttu-id="f5bdb-191">[Leitfaden für die automatische Skalierung](https://msdn.microsoft.com/library/dn589774.aspx):</span><span class="sxs-lookup"><span data-stu-id="f5bdb-191">[Autoscaling Guidance](https://msdn.microsoft.com/library/dn589774.aspx).</span></span> <span data-ttu-id="f5bdb-192">Die Drosselung kann als Übergangsmaßnahme während der automatischen Skalierung eines Systems oder zur Vermeidung der automatischen Skalierung eines Systems verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-192">Throttling can be used as an interim measure while a system autoscales, or to remove the need for a system to autoscale.</span></span> <span data-ttu-id="f5bdb-193">Dieser Leitfaden enthält Informationen über Strategien zur automatischen Skalierung.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-193">Contains information on autoscaling strategies.</span></span>
- <span data-ttu-id="f5bdb-194">[Muster „Warteschlangenbasierter Lastenausgleich“](queue-based-load-leveling.md):</span><span class="sxs-lookup"><span data-stu-id="f5bdb-194">[Queue-based Load Leveling pattern](queue-based-load-leveling.md).</span></span> <span data-ttu-id="f5bdb-195">Ein warteschlangenbasierter Lastenausgleich ist eine häufig verwendete Methode zur Implementierung der Drosselung.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-195">Queue-based load leveling is a commonly used mechanism for implementing throttling.</span></span> <span data-ttu-id="f5bdb-196">Eine Warteschlange kann als Puffer herangezogen werden, um die Geschwindigkeit auszugleichen, mit der die von einer Anwendung gesendeten Anforderungen an einen Dienst gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-196">A queue can act as a buffer that helps to even out the rate at which requests sent by an application are delivered to a service.</span></span>
- <span data-ttu-id="f5bdb-197">[Muster „Prioritätswarteschlange“][]:</span><span class="sxs-lookup"><span data-stu-id="f5bdb-197">[Priority Queue pattern][].</span></span> <span data-ttu-id="f5bdb-198">Ein System kann im Rahmen seiner Drosselungsstrategie Prioritätswarteschlangen einsetzen, um die Leistung von kritischen oder höherwertigen Anwendungen aufrechtzuerhalten und gleichzeitig die von weniger wichtigen Anwendungen zu reduzieren.</span><span class="sxs-lookup"><span data-stu-id="f5bdb-198">A system can use priority queuing as part of its throttling strategy to maintain performance for critical or higher value applications, while reducing the performance of less important applications.</span></span>

[Muster „Prioritätswarteschlange“]: priority-queue.md
[Priority Queue pattern]: priority-queue.md