---
title: Botschaftermuster
titleSuffix: Cloud Design Patterns
description: Erstellen Sie Hilfsdienste, die im Auftrag von Consumerdiensten oder -anwendungen Netzwerkanforderungen senden.
keywords: Entwurfsmuster
author: dragon119
ms.date: 06/23/2017
ms.custom: seodec18
ms.openlocfilehash: f03bfa0b45494ac1428aeee5cc6c413d5607ba79
ms.sourcegitcommit: 680c9cef945dff6fee5e66b38e24f07804510fa9
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 01/04/2019
ms.locfileid: "54009779"
---
# <a name="ambassador-pattern"></a><span data-ttu-id="a800f-104">Botschaftermuster</span><span class="sxs-lookup"><span data-stu-id="a800f-104">Ambassador pattern</span></span>

<span data-ttu-id="a800f-105">Erstellen Sie Hilfsdienste, die im Auftrag von Consumerdiensten oder -anwendungen Netzwerkanforderungen senden.</span><span class="sxs-lookup"><span data-stu-id="a800f-105">Create helper services that send network requests on behalf of a consumer service or application.</span></span> <span data-ttu-id="a800f-106">Ein Botschafterdienst ist ein Proxy außerhalb eines Prozesses, der sich am gleichen Ort befindet wie der Client.</span><span class="sxs-lookup"><span data-stu-id="a800f-106">An ambassador service can be thought of as an out-of-process proxy that is co-located with the client.</span></span>

<span data-ttu-id="a800f-107">Dieses Muster kann hilfreich sein, um allgemeine Clientkonnektivitätstasks sprachunabhängig auszulagern, beispielsweise Überwachung, Protokollierung, Routing, Sicherheit (z.B. TLS) sowie [Resilienzmuster][resiliency-patterns].</span><span class="sxs-lookup"><span data-stu-id="a800f-107">This pattern can be useful for offloading common client connectivity tasks such as monitoring, logging, routing, security (such as TLS), and [resiliency patterns][resiliency-patterns] in a language agnostic way.</span></span> <span data-ttu-id="a800f-108">Es wird häufig mit älteren Anwendungen oder anderen Anwendungen verwendet, die sich nicht einfach ändern lassen, um die Netzwerkfunktionen dieser Anwendungen zu erweitern.</span><span class="sxs-lookup"><span data-stu-id="a800f-108">It is often used with legacy applications, or other applications that are difficult to modify, in order to extend their networking capabilities.</span></span> <span data-ttu-id="a800f-109">Es kann es einem Spezialistenteam auch ermöglichen, diese Features zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="a800f-109">It can also enable a specialized team to implement those features.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="a800f-110">Kontext und Problem</span><span class="sxs-lookup"><span data-stu-id="a800f-110">Context and problem</span></span>

<span data-ttu-id="a800f-111">Resiliente cloudbasierte Anwendungen erfordern Features wie [Sicherung](./circuit-breaker.md), Routing, Messung und Überwachung sowie die Fähigkeit, netzwerkbezogene Konfigurationsupdates durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="a800f-111">Resilient cloud-based applications require features such as [circuit breaking](./circuit-breaker.md), routing, metering and monitoring, and the ability to make network-related configuration updates.</span></span> <span data-ttu-id="a800f-112">Es kann schwierig oder sogar unmöglich sein, ältere Anwendungen oder vorhandene Codebibliotheken zu aktualisieren und diese Features hinzuzufügen, weil der Code nicht mehr verwaltet wird oder durch das Entwicklungsteam nicht einfach geändert werden kann.</span><span class="sxs-lookup"><span data-stu-id="a800f-112">It may be difficult or impossible to update legacy applications or existing code libraries to add these features, because the code is no longer maintained or can't be easily modified by the development team.</span></span>

<span data-ttu-id="a800f-113">Netzwerkaufrufe erfordern möglicherweise auch einen hohen Konfigurationsaufwand hinsichtlich Verbindung, Authentifizierung und Autorisierung.</span><span class="sxs-lookup"><span data-stu-id="a800f-113">Network calls may also require substantial configuration for connection, authentication, and authorization.</span></span> <span data-ttu-id="a800f-114">Wenn diese Aufrufe über mehrere Anwendungen hinweg verwendet werden, die mit verschiedenen Sprachen und Frameworks erstellt wurden, müssen die Aufrufe für jede dieser Instanzen konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="a800f-114">If these calls are used across multiple applications, built using multiple languages and frameworks, the calls must be configured for each of these instances.</span></span> <span data-ttu-id="a800f-115">Darüber hinaus müssen möglicherweise Netzwerk- und Sicherheitsfunktionen durch ein zentrales Team in Ihrer Organisation verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="a800f-115">In addition, network and security functionality may need to be managed by a central team within your organization.</span></span> <span data-ttu-id="a800f-116">Bei einer umfangreichen Codebasis kann es riskant sein, wenn das Team Anwendungscode aktualisieren soll, mit dem es nicht vertraut ist.</span><span class="sxs-lookup"><span data-stu-id="a800f-116">With a large code base, it can be risky for that team to update application code they aren't familiar with.</span></span>

## <a name="solution"></a><span data-ttu-id="a800f-117">Lösung</span><span class="sxs-lookup"><span data-stu-id="a800f-117">Solution</span></span>

<span data-ttu-id="a800f-118">Platzieren Sie Clientframeworks und -bibliotheken in einen externen Prozess, der als Proxy zwischen Ihrer Anwendung und externen Diensten fungiert.</span><span class="sxs-lookup"><span data-stu-id="a800f-118">Put client frameworks and libraries into an external process that acts as a proxy between your application and external services.</span></span> <span data-ttu-id="a800f-119">Stellen Sie den Proxy in der gleichen Hostumgebung bereit wie Ihre Anwendung, um Routing-, Resilienz- und Sicherheitsfeatures steuern zu können und um Zugriffseinschränkungen aufgrund des Hosts zu verhindern.</span><span class="sxs-lookup"><span data-stu-id="a800f-119">Deploy the proxy on the same host environment as your application to allow control over routing, resiliency, security features, and to avoid any host-related access restrictions.</span></span> <span data-ttu-id="a800f-120">Sie können das Botschaftermuster auch zum Standardisieren und Erweitern der Instrumentierung verwenden.</span><span class="sxs-lookup"><span data-stu-id="a800f-120">You can also use the ambassador pattern to standardize and extend instrumentation.</span></span> <span data-ttu-id="a800f-121">Der Proxy kann Leistungsmetriken wie Latenz und Ressourcennutzung überwachen. Diese Überwachung erfolgt in der gleichen Hostumgebung, in der sich auch die Anwendung befindet.</span><span class="sxs-lookup"><span data-stu-id="a800f-121">The proxy can monitor performance metrics such as latency or resource usage, and this monitoring happens in the same host environment as the application.</span></span>

![Diagramm des Botschaftermusters](./_images/ambassador.png)

<span data-ttu-id="a800f-123">Features, die in den Botschafter ausgelagert werden, können unabhängig von der Anwendung verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="a800f-123">Features that are offloaded to the ambassador can be managed independently of the application.</span></span> <span data-ttu-id="a800f-124">Sie können den Botschafter aktualisieren und ändern, ohne die Legacyfunktionen der Anwendung zu beeinträchtigen.</span><span class="sxs-lookup"><span data-stu-id="a800f-124">You can update and modify the ambassador without disturbing the application's legacy functionality.</span></span> <span data-ttu-id="a800f-125">Das Muster ermöglicht es separaten Spezialistenteams auch, Sicherheits-, Netzwerk- oder Authentifizierungsfeatures zu implementieren und zu verwalten, die in den Botschafter verschoben wurden.</span><span class="sxs-lookup"><span data-stu-id="a800f-125">It also allows for separate, specialized teams to implement and maintain security, networking, or authentication features that have been moved to the ambassador.</span></span>

<span data-ttu-id="a800f-126">Botschafterdienste können als [Sidecar](./sidecar.md) bereitgestellt werden, um den Lebenszyklus einer konsumierenden Anwendung oder eines konsumierenden Diensts zu begleiten.</span><span class="sxs-lookup"><span data-stu-id="a800f-126">Ambassador services can be deployed as a [sidecar](./sidecar.md) to accompany the lifecycle of a consuming application or service.</span></span> <span data-ttu-id="a800f-127">Alternativ dazu kann ein Botschafter auch als Daemon oder Windows-Dienst bereitgestellt werden, wenn er von mehreren separaten Prozessen auf einem gemeinsamen Host verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="a800f-127">Alternatively, if an ambassador is shared by multiple separate processes on a common host, it can be deployed as a daemon or Windows service.</span></span> <span data-ttu-id="a800f-128">Wenn der konsumierende Dienst in Form von Containern bereitgestellt wurde, sollte der Botschafter als separater Container auf dem gleichen Host erstellt werden. Für die Kommunikation müssen die geeigneten Links konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="a800f-128">If the consuming service is containerized, the ambassador should be created as a separate container on the same host, with the appropriate links configured for communication.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="a800f-129">Probleme und Überlegungen</span><span class="sxs-lookup"><span data-stu-id="a800f-129">Issues and considerations</span></span>

- <span data-ttu-id="a800f-130">Durch den Proxy entsteht ein gewisser Latenzoverhead.</span><span class="sxs-lookup"><span data-stu-id="a800f-130">The proxy adds some latency overhead.</span></span> <span data-ttu-id="a800f-131">Überlegen Sie, ob eine Clientbibliothek, die direkt von der Anwendung aufgerufen wird, möglicherweise ein besserer Ansatz ist.</span><span class="sxs-lookup"><span data-stu-id="a800f-131">Consider whether a client library, invoked directly by the application, is a better approach.</span></span>
- <span data-ttu-id="a800f-132">Berücksichtigen Sie die möglichen Auswirkungen der Einbindung von generalisierten Features in den Proxy.</span><span class="sxs-lookup"><span data-stu-id="a800f-132">Consider the possible impact of including generalized features in the proxy.</span></span> <span data-ttu-id="a800f-133">Der Botschafter kann z.B. Wiederholungsversuche verarbeiten, dies ist aber möglicherweise keine sichere Vorgehensweise, sofern nicht alle Vorgänge idempotent sind.</span><span class="sxs-lookup"><span data-stu-id="a800f-133">For example, the ambassador could handle retries, but that might not be safe unless all operations are idempotent.</span></span>
- <span data-ttu-id="a800f-134">Ziehen Sie einen Mechanismus in Betracht, mit dem ein bestimmter Kontext vom Client an den Proxy und zurück an den Client übergeben werden kann.</span><span class="sxs-lookup"><span data-stu-id="a800f-134">Consider a mechanism to allow the client to pass some context to the proxy, as well as back to the client.</span></span> <span data-ttu-id="a800f-135">Schließen Sie z.B. HTTP-Anforderungsheader ein, um Wiederholungen zu deaktivieren oder die maximale Anzahl von Wiederholungsversuchen anzugeben.</span><span class="sxs-lookup"><span data-stu-id="a800f-135">For example, include HTTP request headers to opt out of retry or specify the maximum number of times to retry.</span></span>
- <span data-ttu-id="a800f-136">Planen Sie, wie Sie den Proxy packen und bereitstellen werden.</span><span class="sxs-lookup"><span data-stu-id="a800f-136">Consider how you will package and deploy the proxy.</span></span>
- <span data-ttu-id="a800f-137">Entscheiden Sie, ob Sie eine einzige, gemeinsam genutzte Instanz für alle Clients oder eine Instanz pro Client verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="a800f-137">Consider whether to use a single shared instance for all clients or an instance for each client.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="a800f-138">Verwendung dieses Musters</span><span class="sxs-lookup"><span data-stu-id="a800f-138">When to use this pattern</span></span>

<span data-ttu-id="a800f-139">Verwenden Sie dieses Muster in folgenden Fällen:</span><span class="sxs-lookup"><span data-stu-id="a800f-139">Use this pattern when you:</span></span>

- <span data-ttu-id="a800f-140">Sie müssen einen gemeinsamen Satz von Konnektivitätsfeatures für mehrere Sprachen oder Frameworks erstellen.</span><span class="sxs-lookup"><span data-stu-id="a800f-140">Need to build a common set of client connectivity features for multiple languages or frameworks.</span></span>
- <span data-ttu-id="a800f-141">Sie müssen übergreifende Fragen der Clientkonnektivität an Infrastrukturentwickler oder andere Spezialistenteams auslagern.</span><span class="sxs-lookup"><span data-stu-id="a800f-141">Need to offload cross-cutting client connectivity concerns to infrastructure developers or other more specialized teams.</span></span>
- <span data-ttu-id="a800f-142">Sie müssen Anforderungen an die Cloud- oder Clusterkonnektivität in einer älteren oder schwer zu ändernden Anwendung unterstützen.</span><span class="sxs-lookup"><span data-stu-id="a800f-142">Need to support cloud or cluster connectivity requirements in a legacy application or an application that is difficult to modify.</span></span>

<span data-ttu-id="a800f-143">Dieses Muster ist in folgenden Fällen möglicherweise nicht geeignet:</span><span class="sxs-lookup"><span data-stu-id="a800f-143">This pattern may not be suitable:</span></span>

- <span data-ttu-id="a800f-144">Die Latenz von Netzwerkanforderungen ist von kritischer Bedeutung.</span><span class="sxs-lookup"><span data-stu-id="a800f-144">When network request latency is critical.</span></span> <span data-ttu-id="a800f-145">Durch einen Proxy entsteht ein gewisser Overhead – wenn auch nur minimal –, und in einigen Fällen kann dies die Anwendung beeinträchtigen.</span><span class="sxs-lookup"><span data-stu-id="a800f-145">A proxy will introduce some overhead, although minimal, and in some cases this may affect the application.</span></span>
- <span data-ttu-id="a800f-146">Clientkonnektivitätsfeatures werden nur von einer einzigen Sprache genutzt.</span><span class="sxs-lookup"><span data-stu-id="a800f-146">When client connectivity features are consumed by a single language.</span></span> <span data-ttu-id="a800f-147">In diesem Fall wäre es besser, eine Clientbibliothek zu verwenden, die als Paket an die Entwicklungsteams verteilt wird.</span><span class="sxs-lookup"><span data-stu-id="a800f-147">In that case, a better option might be a client library that is distributed to the development teams as a package.</span></span>
- <span data-ttu-id="a800f-148">Konnektivitätsfeatures lassen sich nicht generalisieren und erfordern einer tiefer gehende Integration in die Clientanwendung.</span><span class="sxs-lookup"><span data-stu-id="a800f-148">When connectivity features cannot be generalized and require deeper integration with the client application.</span></span>

## <a name="example"></a><span data-ttu-id="a800f-149">Beispiel</span><span class="sxs-lookup"><span data-stu-id="a800f-149">Example</span></span>

<span data-ttu-id="a800f-150">Das folgende Diagramm zeigt eine Anwendung, die über einen Botschafterproxy eine Anforderung an einen Remotedienst sendet.</span><span class="sxs-lookup"><span data-stu-id="a800f-150">The following diagram shows an application making a request to a remote service via an ambassador proxy.</span></span> <span data-ttu-id="a800f-151">Der Botschafter sorgt für Routing, Sicherung und Protokollierung.</span><span class="sxs-lookup"><span data-stu-id="a800f-151">The ambassador provides routing, circuit breaking, and logging.</span></span> <span data-ttu-id="a800f-152">Er ruft den Remotedienst auf und gibt die Antwort an die Clientanwendung zurück:</span><span class="sxs-lookup"><span data-stu-id="a800f-152">It calls the remote service and then returns the response to the client application:</span></span>

![Beispiel für das Botschaftermuster](./_images/ambassador-example.png)

## <a name="related-guidance"></a><span data-ttu-id="a800f-154">Verwandte Leitfäden</span><span class="sxs-lookup"><span data-stu-id="a800f-154">Related guidance</span></span>

- [<span data-ttu-id="a800f-155">Sidecar-Muster</span><span class="sxs-lookup"><span data-stu-id="a800f-155">Sidecar pattern</span></span>](./sidecar.md)

<!-- links -->

[resiliency-patterns]: ./category/resiliency.md
