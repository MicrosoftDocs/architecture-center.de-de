---
title: Checkliste für die Verfügbarkeit
description: Checkliste, die Hinweise zu Überlegungen hinsichtlich der Verfügbarkeit während des Entwurfs bereitstellt.
author: dragon119
ms.date: 01/10/2018
ms.custom: checklist
ms.openlocfilehash: a09a8f77865bf127ae0a73e0da7e1d3fb8508826
ms.sourcegitcommit: fdcacbfdc77370532a4dde776c5d9b82227dff2d
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/24/2018
ms.locfileid: "49962890"
---
# <a name="availability-checklist"></a>Checkliste für die Verfügbarkeit

Verfügbarkeit ist der Zeitanteil, in dem ein System funktioniert und erreichbar ist. Sie gehört zu den [Säulen der Softwarequalität](../guide/pillars.md). Verwenden Sie diese Checkliste, um Ihre Anwendungsarchitektur vom Standpunkt der Verfügbarkeit aus zu überprüfen. 

## <a name="application-design"></a>Anwendungsentwurf

**Vermeiden Sie alle einzelnen Fehlerquellen.** Alle Komponenten, Dienste, Ressourcen und Serverinstanzen sollten in mehreren Instanzen bereitgestellt werden, um zu verhindern, dass sich eine einzelne Fehlerquelle auf die Verfügbarkeit auswirkt. Dies gilt auch für die Authentifizierungsmechanismen. Entwerfen Sie die Anwendung so, dass sie für die Verwendung mehrerer Instanzen konfiguriert werden kann, automatisch Fehler ermittelt und die Anforderungen bei einem Ausfall an einwandfreie Instanzen weiterleitet, wenn die Plattform dies nicht automatisch tut.

**Teilen Sie Workloads nach Servicelevelziel auf.** Wenn ein Dienst wichtige und weniger wichtige Workloads umfasst, verwalten Sie sie unterschiedlich, und legen Sie die Dienstfunktionen und die Anzahl von Instanzen entsprechend den jeweiligen Anforderungen an die Verfügbarkeit fest.

**Minimieren und erkennen Sie Abhängigkeiten des Dienstes.** Minimieren Sie die Anzahl der verschiedenen verwendeten Dienste, wenn möglich, und stellen Sie sicher, dass Sie alle im System vorhandenen Abhängigkeiten von Funktionen und Diensten kennen. Dazu gehört die Art dieser Abhängigkeiten und die Auswirkungen eines Ausfalls oder einer Leistungsbeeinträchtigung auf die Gesamtleistung der Anwendung.

**Entwerfen Sie Aufgaben und Nachrichten möglichst so, dass sie idempotent sind.** Ein Vorgang ist idempotent, wenn er mehrere Male wiederholt werden kann und das gleiche Ergebnis erzielt. Idempotenz kann sicherstellen, dass doppelte Anforderungen keine Probleme verursachen. Nachrichtenconsumer und die Vorgänge, die sie ausführen, müssen idempotent sein, damit die Wiederholung eines zuvor ausgeführten Vorgangs nicht zu ungültigen Ergebnissen führt. Dies kann bedeuten, dass doppelte Nachrichten erkannt werden müssen oder dass die Konsistenz durch einen optimistischen Konfliktlösungsansatz gewährleistet sein muss.

**Verwenden Sie einen Nachrichtenmakler, der für wichtige Transaktionen Hochverfügbarkeit implementiert.** Viele Cloudanwendungen verwenden Messaging, um asynchron ausgeführte Aufgaben zu initiieren. Um die Nachrichtenübermittlung zu gewährleisten, sollte das Messaging-System Hochverfügbarkeit bieten. *Azure Service Bus-Messaging* implementiert eine [Mindestens-einmal](/azure/service-bus-messaging)-Semantik. Dies bedeutet, dass keine an eine Warteschlange gesendete Nachricht verloren geht, obwohl unter bestimmten Umständen Nachrichten mehrfach übermittelt werden können. Wenn die Nachrichtenverarbeitung idempotent ist (siehe vorheriger Punkt), sollte die wiederholte Übermittlung kein Problem darstellen.

**Entwerfen Sie Anwendungen, die ihre Anforderungen ordnungsgemäß herabstufen.** Die Auslastung einer Anwendung kann die Kapazität von einem oder mehreren Teilen überschreiten und zu verringerter Verfügbarkeit und fehlgeschlagenen Verbindungen führen. Dieses Problem lässt sich durch Skalierung entschärfen, wobei jedoch eine durch andere Faktoren wie z. B. die Ressourcenverfügbarkeit oder Kosten bedingte Grenze erreicht werden kann. Wenn eine Anwendung ein Ressourcenlimit erreicht, müssen entsprechende Maßnahmen ergriffen werden, damit der Benutzer möglichst wenig beeinträchtigt wird. Wenn beispielsweise in einem E-Commerce-System das Subsystem zur Auftragsverarbeitung stark ausgelastet oder ausgefallen ist, kann es vorübergehend deaktiviert werden, während andere Funktionen wie das Durchsuchen des Produktkatalogs ausgeführt werden können. Es kann zweckmäßig sein, die Anforderungen, die an ein ausgefallenes Subsystem gesendet werden, aufzuschieben, z. B. indem zugelassen wird, dass die Kunden Bestellungen absenden, diese jedoch für die spätere Verarbeitung gespeichert werden, wenn das Subsystem für Bestellungen wieder verfügbar ist.

**Verarbeiten Sie schnelle Änderungen der Auslastung ordnungsgemäß.** Die meisten Anwendungen müssen im Laufe der Zeit unterschiedlich starke Auslastungen handhaben können. Die automatische Skalierung kann bei der Bewältigung der Last hilfreich sein, es kann jedoch einige Zeit dauern, bis weitere Instanzen online geschaltet sind und Anforderungen verarbeiten. Verhindern Sie, dass die Anwendung durch einen plötzlichen und unvorhergesehenen Anstieg der Aktivität überfordert wird. Entwerfen Sie die Anwendung deshalb so, dass Anforderungen an Dienste in Warteschlangen eingefügt werden und dass die Anwendung ordnungsgemäß herabgestuft wird, wenn die Warteschlangen ihre Kapazitätsgrenze fast erreicht haben. Stellen Sie sicher, dass unter normalen Bedingungen ausreichend Leistung und Kapazität zur Verfügung steht, um die Warteschlangen zu leeren und die ausstehenden Anforderungen zu verarbeiten. Weitere Informationen finden Sie unter [Warteschlangenbasiertes Lastenausgleichsmuster](https://msdn.microsoft.com/library/dn589783.aspx).

## <a name="deployment-and-maintenance"></a>Bereitstellung und Wartung

**Stellen Sie mehrere Instanzen von Diensten bereit.** Wenn Ihre Anwendung von einer einzelnen Instanz eines Diensts abhängig ist, entsteht dadurch ein Single Point of Failure. Durch die Bereitstellung von mehreren Instanzen werden Resilienz und Skalierbarkeit verbessert. Wählen Sie für [Azure App Service](/azure/app-service/app-service-value-prop-what-is/) einen [App Service-Plan](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/) aus, der mehrere Instanzen bietet. Konfigurieren Sie für Azure Cloud Services alle Rollen so, dass sie [mehrere Instanzen](/azure/cloud-services/cloud-services-choose-me/#scaling-and-management) verwenden. Stellen Sie für [Azure Virtual Machines (VMs)](/azure/virtual-machines/virtual-machines-windows-about/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) sicher, dass die VM-Architektur mehr als eine VM enthält und dass jede VM zu einer [Verfügbarkeitsgruppe][availability-sets] gehört.

**Erwägen Sie die Bereitstellung Ihrer Anwendung in mehreren Regionen.** Wenn Ihre Anwendung in einer einzelnen Region bereitgestellt wird, ist Ihre Anwendung nicht mehr verfügbar, falls doch einmal die gesamte Region ausfällt. Dies kann unter den Bestimmungen der SLA für Ihre Anwendung nicht akzeptabel sein. Wenn dies der Fall ist, erwägen Sie die Bereitstellung Ihrer Anwendung und der zugehörigen Dienste in mehreren Regionen.

**Automatisieren und testen Sie Bereitstellungs- und Wartungsaufgaben.** Verteilte Anwendungen bestehen aus mehreren Teilen, die zusammenarbeiten müssen. Die Bereitstellung sollte mithilfe getesteter und bewährter Mechanismen wie Skripts automatisiert werden. Diese Skripts und Bereitstellungsanwendungen können die Konfiguration aktualisieren und überprüfen und den Bereitstellungsprozess automatisieren.  Verwenden Sie [Azure Resource Manager-Vorlagen](/azure/azure-resource-manager/resource-group-authoring-templates) für die Bereitstellung von Azure-Ressourcen. Verwenden Sie außerdem automatisierte Verfahren für das Durchführen von Anwendungsupdates. Es ist wichtig, alle diese Prozesse vollständig zu testen, um sicherzustellen, dass Fehler nicht zu zusätzlichen Ausfallzeit führen. Alle Bereitstellungstools müssen geeignete Sicherheitseinschränkungen zum Schutz der bereitgestellten Anwendung aufweisen. Definieren und erzwingen Sie Bereitstellungsrichtlinien sorgfältig, und minimieren Sie den Bedarf an manuellen Eingriffen.

**Verwenden Sie die Staging- und Produktionsfunktionen der Plattform.** Azure App Service unterstützt z.B. [Bereitstellungsslots](/azure/app-service/web-sites-staged-publishing), die Sie für das Staging einer Bereitstellung verwenden können, bevor Sie sie in die Produktionsumgebung einbringen. Azure Service Fabric unterstützt [parallele Upgrades](/azure/service-fabric/service-fabric-application-upgrade) für Anwendungsdienste.

**Platzieren Sie virtuelle Computer in einer Verfügbarkeitsgruppe.** Erstellen Sie für maximale Verfügbarkeit mehrere Instanzen jeder Rolle für virtuelle Computer, und platzieren Sie diese Instanzen in derselben Verfügbarkeitsgruppe. Wenn Sie mehrere virtuelle Computer mit unterschiedlichen Rollen haben, z.B. verschiedenen Anwendungsebenen, erstellen Sie für jede Rolle eine Verfügbarkeitsgruppe. Erstellen Sie z.B. eine Verfügbarkeitsgruppe für die Webebene und eine für die Datenebene.

## <a name="data-management"></a>Datenverwaltung

**Führen Sie die Georeplikation für Daten in Azure Storage durch.** Daten in Azure Storage werden in einem Datencenter automatisch repliziert. Verwenden Sie zur Erzielung einer noch höheren Verfügbarkeit „Georedundanten Speicher mit Lesezugriff“ (Read-access geo-redundant storage, RA-GRS). Hierbei werden Ihre Daten in eine sekundäre Region repliziert, und es wird Lesezugriff auf die Daten am sekundären Standort gewährt. Die Daten bleiben auch bei einem umfassenden regionalen Ausfall oder Katastrophenfall erhalten. Weitere Informationen finden Sie unter [Azure Storage-Replikation](/azure/storage/storage-redundancy).

**Führen Sie die Georeplikation für Datenbanken durch.** Für Azure SQL-Datenbank und Cosmos DB wird jeweils die Georeplikation unterstützt, sodass Sie sekundäre Datenbankreplikate in anderen Regionen konfigurieren können. Sekundäre Datenbanken stehen für Abfragen und Failover zur Verfügung, wenn ein Rechenzentrum ausgefallen ist oder keine Verbindung mit der primären Datenbank möglich ist. Weitere Informationen finden Sie unter [Failovergruppen und aktive Georeplikation](/azure/sql-database/sql-database-geo-replication-overview) (SQL-Datenbank) und [Wie werden Daten mit Azure Cosmos DB global verteilt?](/azure/cosmos-db/distribute-data-globally).

**Verwenden Sie optimistische Parallelität und letztendliche Konsistenz.** Transaktionen, die den Zugriff auf Ressourcen durch Sperren (pessimistische Parallelität) blockieren, können die Leistung beeinträchtigen und die Verfügbarkeit erheblich reduzieren. Diese Probleme können insbesondere in verteilten Systemen akut werden. In vielen Fällen lässt sich die Wahrscheinlichkeit, dass miteinander in Konflikt stehende Aktualisierungen auftreten, durch sorgfältige Planung und Techniken, wie z. B. die Partitionierung, minimieren. Wo Daten repliziert oder aus einem separat aktualisierten Speicher gelesen werden, sind die Daten erst zum Schluss konsistent. Die Vorteile überwiegen aber in der Regel bei weitem gegenüber den Auswirkungen, die die Verwendung von Transaktionen zur Gewährleistung der sofortigen Konsistenz auf die Verfügbarkeit haben.

**Verwenden Sie regelmäßige Sicherungen und die Zeitpunktwiederherstellung**. Sichern Sie regelmäßig und automatisch Daten, die nicht an anderer Stelle gespeichert werden, und stellen Sie sicher, dass Sie die Daten und die Anwendung selbst nach einem Ausfall zuverlässig wiederherstellen können. Vergewissern Sie sich, dass Sicherungen Ihr Recovery Point Objective (RPO) erfüllen. Datenreplikation ist keine Sicherungsfunktion, da Daten in allen Replikaten durch menschliches Versagen oder schädliche Vorgänge beschädigt werden können. Der Sicherungsvorgang muss sicher sein, sodass die Daten während der Übertragung und Speicherung geschützt sind. Datenbanken oder Teile eines Datenspeichers können in der Regel mithilfe von Transaktionsprotokollen in einem Zustand wiederhergestellt werden, den sie zu einem früheren Zeitpunkt hatten. Weitere Informationen finden Sie unter [Wiederherstellung nach Datenbeschädigung oder unbeabsichtigtem Löschen](../resiliency/recovery-data-corruption.md).

## <a name="errors-and-failures"></a>Fehler und Ausfälle

**Konfigurieren Sie Anforderungstimeouts.** Dienste und Ressourcen können möglicherweise nicht mehr verfügbar sein, sodass bei Anforderungen Fehler auftreten. Stellen Sie sicher, dass Sie Timeouts festlegen, die für den jeweiligen Dienst oder die Ressource und auch für den Client geeignet sind, der auf diese zugreift. In einigen Fällen können Sie je nach Kontext und weiteren Aktionen, die der Client ausführt, ein längeres Zeitlimit für eine bestimmte Clientinstanz festlegen. Sehr kurze Timeouts können zu übermäßig vielen Wiederholungsvorgängen bei Diensten und Ressourcen mit höherer Latenz führen.  Sehr lange Timeouts können zu einer Blockade führen, wenn sich eine große Anzahl von Anforderungen in der Warteschlange befindet und darauf wartet, dass ein Dienst oder eine Ressource reagiert.

**Wiederholen Sie die fehlgeschlagenen Vorgänge, die durch vorübergehende Fehler verursacht wurden.** Entwerfen Sie eine Strategie für wiederholte Zugriffsversuche auf alle Dienste und Ressourcen, die nicht grundsätzlich eine automatische Verbindungswiederherstellung unterstützen. Verwenden Sie eine Strategie mit einer Verzögerung zwischen den Wiederholungsversuchen, die mit zunehmender Fehleranzahl zunimmt, um eine Überlastung der Ressource zu verhindern und ihr ermöglichen, sich ordnungsgemäß wiederherzustellen und die in der Warteschlange enthaltenen Anforderungen zu verarbeiten. Fortwährende Wiederholungsversuche mit sehr kurzen Verzögerungen verschlimmern das Problem wahrscheinlich eher. Weitere Informationen finden Sie unter [Wiederholungsanleitung für bestimmte Dienste](../best-practices/retry-service-specific.md).

**Implementieren Sie Verbindungsunterbrechung, um kaskadierende Fehler zu vermeiden.** Es gibt möglicherweise Situationen, in denen vorübergehende oder andere Fehler, deren Schweregrad von einer teilweisen Unterbrechung der Verbindungen bis zum vollständigen Ausfall eines Diensts reichen kann, viel länger als erwartet anhalten, bis zum normalen Betrieb zurückgekehrt werden kann. Wenn ein Dienst stark ausgelastet ist, kann ein Fehler in einem Teil des Systems zu kaskadierenden Fehlern und dazu führen, dass viele Vorgänge blockiert werden, während sie Sperren für kritische Systemressourcen halten, wie z. B. Arbeitsspeicher, Threads und Datenbankverbindungen. Anstatt kontinuierlich einen Vorgang zu wiederholen, der wahrscheinlich fehlschlägt, sollte die Anwendung schnell akzeptieren, dass der Vorgang fehlgeschlagen ist und diesen Fehler ordnungsgemäß behandeln. Verwenden Sie das Schutzschaltermuster, um für definierte Zeiträume Anforderungen für bestimmte Vorgänge abzulehnen. Weitere Informationen finden Sie unter [Circuit Breaker Pattern](../patterns/circuit-breaker.md) (Schutzschaltermuster).

**Erstellen oder nutzen Sie mehrere Komponenten.** Entwerfen Sie die Anwendungen möglichst so, dass sie mehrere Instanzen nutzen, ohne den Betrieb und die vorhandenen Verbindungen zu beeinträchtigen. Um die Verfügbarkeit zu maximieren, verwenden Sie mehrere Instanzen, teilen Sie die Anforderungen zwischen diesen Instanzen auf, erkennen Sie ausgefallene Instanzen, und vermeiden Sie das Senden von Anforderungen an ausgefallene Instanzen.

**Weichen Sie auf einen anderen Dienst oder Workflow aus.** Wenn z.B. beim Schreiben in die SQL-Datenbank ein Fehler auftritt, speichern Sie die Daten temporär im Blobspeicher oder in Redis Cache. Stellen Sie eine Möglichkeit bereit, die Schreibvorgänge in die SQL-Datenbank zu wiederholen, wenn der Dienst wieder verfügbar ist. In einigen Fällen kann für einen fehlgeschlagenen Vorgang eine alternative Aktion vorhanden sein, die das weitere Funktionieren der Anwendung ermöglicht, selbst wenn eine Komponente oder ein Dienst ausfällt. Wenn möglich, sollten Fehler erkannt und Anforderungen an andere Dienste, die eine geeignete alternative Funktionalität bieten, oder an Ersatzinstanzen oder Instanzen mit reduzierter Funktionalität weitergeleitet werden. So können wichtige Vorgänge aufrechterhalten werden, während der primäre Dienst offline ist.

## <a name="monitoring-and-disaster-recovery"></a>Überwachung und Notfallwiederherstellung

**Stellen Sie ein umfangreiches Instrumentarium für mögliche Ausfälle und Fehlerereignisse bereit**, um diese Vorkommnisse IT-Mitarbeitern zu melden. Stellen Sie für Fehler, die wahrscheinlich, aber noch nicht aufgetreten sind, ausreichend Daten bereit, um die Mitarbeiter in die Lage zu versetzen, die Ursache zu ermitteln, das Problem zu entschärfen und sicherzustellen, dass das System verfügbar bleibt. Für bereits aufgetretene Fehler sollte die Anwendung eine geeignete Fehlermeldung an den Benutzer zurückgeben und versuchen, die Ausführung trotz eingeschränkter Funktionalität fortzusetzen. In jedem Fall sollte das Überwachungssystem umfassende Details erfassen, damit die Mitarbeiter eine schnelle Wiederherstellung durchführen können und damit Designer und Entwickler ggf. das System ändern können, um ein erneutes Auftreten der Probleme zu vermeiden.

**Überwachen Sie den Systemzustand, indem Sie Prüffunktionen implementieren.** Eine Beeinträchtigung der Integrität und Leistung einer Anwendung kann über längere Zeit unbemerkt bleiben, bis ein Fehler auftritt. Implementieren Sie Prüfpunkte oder Funktionen, die regelmäßig von außerhalb der Anwendung ausgeführt werden Diese Überprüfungen können ganz einfach sein, z. B. das Messen der Antwortzeit für die Anwendung als Ganzes, für einzelne Teile der Anwendung, für einzelne von der Anwendung verwendete Dienste oder für einzelne Komponenten. Überprüfungsfunktionen können Prozesse ausführen, um sicherzustellen, dass sie gültige Ergebnisse erzeugen, die Latenzzeit messen und die Verfügbarkeit überprüfen sowie Informationen aus dem System extrahieren.

**Testen Sie regelmäßig alle Failover- und Fallback-Systeme.** Änderungen an Systemen und Vorgängen können die Failover- und Fallback-Funktionen beeinträchtigen, die Auswirkungen werden aber möglicherweise erst dann erkannt, wenn das System ausfällt oder überlastet wird. Führen Sie Tests aus, bevor diese Funktionen benötigt werden, um ein echtes Problem zur Laufzeit zu kompensieren.

**Testen Sie die Überwachungssysteme.** Sowohl automatische Failover- und Fallbacksysteme als auch die manuelle Visualisierung von Systemintegrität und -leistung mithilfe von Dashboards hängen von einer ordnungsgemäß funktionierenden Überwachung und Instrumentation ab. Wenn diese Elemente ausfallen, wichtige Informationen fehlen oder falsche Daten liefern, kann ein Operator möglicherweise nicht erkennen, dass das System instabil oder fehlerhaft ist.

**Verfolgen Sie den Fortschritt von Workflows mit langer Laufzeit, und wiederholen Sie Vorgänge bei Fehlern.** Workflows mit langer Laufzeit umfassen häufig mehrere Schritte. Stellen Sie sicher, dass jeder Schritt unabhängig ist und wiederholt werden kann, um das Risiko zu minimieren, dass der gesamte Workflow rückgängig gemacht werden muss oder mehrere ausgleichende Transaktionen ausgeführt werden müssen. Überwachen und verwalten Sie den Status Workflows mit langer Ausführungszeit, indem Sie ein Muster wie das [Scheduler Agent Supervisor Pattern](../patterns/scheduler-agent-supervisor.md)(Scheduler-Agent-Supervisor-Muster) implementieren.

**Planen Sie die Wiederherstellung im Notfall.** Erstellen Sie einen akzeptierten und vollständig getesteten Plan für die Wiederherstellung nach einer beliebigen Art von Fehler, der sich auf die Systemverfügbarkeit auswirken kann. Wählen Sie eine Architektur für eine Notfallwiederherstellung mit mehreren Standorten, die für unternehmenskritische Anwendungen bestimmt ist. Identifizieren Sie einen bestimmten Besitzer des Plans für die Notfallwiederherstellung, einschließlich Automation und Testing. Stellen Sie sicher, dass der Plan gut dokumentiert ist, und automatisieren Sie den Prozess so weit wie möglich. Richten Sie eine Sicherungsstrategie für alle Referenz- und Transaktionsdaten ein, und testen Sie die Wiederherstellung dieser Sicherungen regelmäßig. Schulen Sie Betriebspersonal in Bezug auf die Ausführung des Plans, und führen Sie regelmäßig Notfallsimulationen durch, um den Plan zu überprüfen und zu verbessern.

<!-- links -->
[availability-sets]:/azure/virtual-machines/virtual-machines-windows-manage-availability/
