---
title: CI/CD-Pipeline für containerbasierte Workloads
description: Bewährtes Szenario zur Erstellung einer DevOps-Pipeline für eine Node.js-Web-App, für die Jenkins, Azure Container Registry, Azure Kubernetes Service, Cosmos DB und Grafana verwendet werden.
author: iainfoulds
ms.date: 07/05/2018
ms.openlocfilehash: d659916e3af0caa2128db25faab441a2af8f3f6a
ms.sourcegitcommit: c49aeef818d7dfe271bc4128b230cfc676f05230
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 09/11/2018
ms.locfileid: "44389382"
---
# <a name="cicd-pipeline-for-container-based-workloads"></a><span data-ttu-id="41e9d-103">CI/CD-Pipeline für containerbasierte Workloads</span><span class="sxs-lookup"><span data-stu-id="41e9d-103">CI/CD pipeline for container-based workloads</span></span>

<span data-ttu-id="41e9d-104">Dieses Beispielszenario richtet sich an Unternehmen, die ihre Anwendungsentwicklung durch die Verwendung von Containern und DevOps-Workflows modernisieren möchten.</span><span class="sxs-lookup"><span data-stu-id="41e9d-104">This example scenario is applicable to businesses that want to modernize application development by using containers and DevOps workflows.</span></span> <span data-ttu-id="41e9d-105">In diesem Szenario wird eine Node.js-Web-App erstellt und von Jenkins in einer Azure Container Registry-Instanz und in Azure Kubernetes Service bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="41e9d-105">In this scenario, a Node.js web app is built and deployed by Jenkins into an Azure Container Registry and Azure Kubernetes Service.</span></span> <span data-ttu-id="41e9d-106">Für eine global verteilte Datenbankschicht wird Azure Cosmos DB verwendet.</span><span class="sxs-lookup"><span data-stu-id="41e9d-106">For a globally distributed database tier, Azure Cosmos DB is used.</span></span> <span data-ttu-id="41e9d-107">Zur Überwachung der Anwendungsleistung sowie zur Behandlung entsprechender Probleme wird Azure Monitor mit einer Grafana-Instanz und einem entsprechenden Dashboard verknüpft.</span><span class="sxs-lookup"><span data-stu-id="41e9d-107">To monitor and troubleshoot application performance, Azure Monitor integrates with a Grafana instance and dashboard.</span></span>

<span data-ttu-id="41e9d-108">Beispielszenarien für diese Anwendung wären etwa die Bereitstellung einer automatisierten Entwicklungsumgebung, die Überprüfung neuer Codecommits oder das Pushen neuer Bereitstellungen an Staging- oder Produktionsumgebungen.</span><span class="sxs-lookup"><span data-stu-id="41e9d-108">Example application scenarios include providing an automated development environment, validating new code commits, and pushing new deployments into staging or production environments.</span></span> <span data-ttu-id="41e9d-109">In der Vergangenheit mussten Unternehmen Anwendungen und Updates in der Regel manuell erstellen und kompilieren sowie eine umfangreiche monolithische Codebasis pflegen.</span><span class="sxs-lookup"><span data-stu-id="41e9d-109">Traditionally, businesses had to manually build and compile applications and updates, and maintain a large, monolithic code base.</span></span> <span data-ttu-id="41e9d-110">Mit einem modernen Konzept für die Anwendungsentwicklung, das auf Continuous Integration (CI) und Continuous Deployment (CD) setzt, können Sie Dienste schneller erstellen, testen und bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="41e9d-110">With a modern approach to application development that uses continuous integration (CI) and continuous deployment (CD), you can more quickly build, test, and deploy services.</span></span> <span data-ttu-id="41e9d-111">Durch diesen modernen Ansatz können Sie Anwendungen und Updates schneller für Ihre Kunden bereitstellen und flexibler auf veränderte geschäftliche Anforderungen reagieren.</span><span class="sxs-lookup"><span data-stu-id="41e9d-111">This modern approach lets you release applications and updates to your customers faster, and respond to changing business demands in a more agile manner.</span></span>

<span data-ttu-id="41e9d-112">Azure-Dienste wie Azure Kubernetes Service, Container Registry und Cosmos DB bieten Unternehmen die neuesten Techniken und Tools für die Anwendungsentwicklung und vereinfachen die Implementierung von Hochverfügbarkeit.</span><span class="sxs-lookup"><span data-stu-id="41e9d-112">By using Azure services such as Azure Kubernetes Service, Container Registry, and Cosmos DB, companies can use the latest in application development techniques and tools to simplify the process of implementing high availability.</span></span>

## <a name="related-use-cases"></a><span data-ttu-id="41e9d-113">Verwandte Anwendungsfälle</span><span class="sxs-lookup"><span data-stu-id="41e9d-113">Related use cases</span></span>

<span data-ttu-id="41e9d-114">Erwägen Sie dieses Szenario für folgende Anwendungsfälle:</span><span class="sxs-lookup"><span data-stu-id="41e9d-114">Consider this scenario for the following use cases:</span></span>

* <span data-ttu-id="41e9d-115">Modernisieren der Anwendungsentwicklung mit einem Microservice- und Container-basierten Ansatz</span><span class="sxs-lookup"><span data-stu-id="41e9d-115">Modernizing application development practices to a microservice, container-based approach.</span></span>
* <span data-ttu-id="41e9d-116">Beschleunigen von Anwendungsentwicklung und Bereitstellungslebenszyklen</span><span class="sxs-lookup"><span data-stu-id="41e9d-116">Speeding up application development and deployment lifecycles.</span></span>
* <span data-ttu-id="41e9d-117">Automatisieren von Bereitstellungen in Test- oder Akzeptanzumgebungen zu Überprüfungszwecken</span><span class="sxs-lookup"><span data-stu-id="41e9d-117">Automating deployments to test or acceptance environments for validation.</span></span>

## <a name="architecture"></a><span data-ttu-id="41e9d-118">Architecture</span><span class="sxs-lookup"><span data-stu-id="41e9d-118">Architecture</span></span>

![Übersicht über die Architektur der Azure-Komponenten für ein DevOps-Szenario mit Jenkins, Azure Container Registry und Azure Kubernetes Service][architecture]

<span data-ttu-id="41e9d-120">Dieses Szenario umfasst eine DevOps-Pipeline für eine Node.js-Webanwendung und ein Datenbank-Back-End.</span><span class="sxs-lookup"><span data-stu-id="41e9d-120">This scenario covers a DevOps pipeline for a Node.js web application and database backend.</span></span> <span data-ttu-id="41e9d-121">Die Daten durchlaufen das Szenario wie folgt:</span><span class="sxs-lookup"><span data-stu-id="41e9d-121">The data flows through the scenario as follows:</span></span>

1. <span data-ttu-id="41e9d-122">Ein Entwickler ändert den Quellcode der Node.js-Webanwendung.</span><span class="sxs-lookup"><span data-stu-id="41e9d-122">A developer makes changes to the Node.js web application source code.</span></span>
2. <span data-ttu-id="41e9d-123">Die Codeänderung wird in einem Quellcodeverwaltungsrepository wie GitHub committet.</span><span class="sxs-lookup"><span data-stu-id="41e9d-123">The code change is committed to a source control repository, such as GitHub.</span></span>
3. <span data-ttu-id="41e9d-124">Zum Starten des CI-Prozesses (Continuous Integration) löst ein GitHub-Webhook einen Jenkins-Projektbuildvorgang aus.</span><span class="sxs-lookup"><span data-stu-id="41e9d-124">To start the continuous integration (CI) process, a GitHub webhook triggers a Jenkins project build.</span></span>
4. <span data-ttu-id="41e9d-125">Der Jenkins-Buildauftrag verwendet einen dynamischen Build-Agent in Azure Kubernetes Service, um einen Containerbuildprozess auszuführen.</span><span class="sxs-lookup"><span data-stu-id="41e9d-125">The Jenkins build job uses a dynamic build agent in Azure Kubernetes Service to perform a container build process.</span></span>
5. <span data-ttu-id="41e9d-126">Auf der Grundlage des Codes in der Quellcodeverwaltung wird ein Containerimage erstellt und anschließend an Azure Container Registry gepusht.</span><span class="sxs-lookup"><span data-stu-id="41e9d-126">A container image is created from the code in source control, and is then pushed to an Azure Container Registry.</span></span>
6. <span data-ttu-id="41e9d-127">Über Continuous Deployment (CD) stellt Jenkins dieses aktualisierte Containerimage im Kubernetes-Cluster bereit.</span><span class="sxs-lookup"><span data-stu-id="41e9d-127">Through continuous deployment (CD), Jenkins deploys this updated container image to the Kubernetes cluster.</span></span>
7. <span data-ttu-id="41e9d-128">Die Node.js-Webanwendung verwendet Azure Cosmos DB als Back-End.</span><span class="sxs-lookup"><span data-stu-id="41e9d-128">The Node.js web application uses Azure Cosmos DB as it's backend.</span></span> <span data-ttu-id="41e9d-129">Sowohl Cosmos DB als auch Azure Kubernetes Service übermitteln Metriken an Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="41e9d-129">Both Cosmos DB and Azure Kubernetes Service report metrics to Azure Monitor.</span></span>
8. <span data-ttu-id="41e9d-130">Eine Grafana-Instanz bietet visuelle Dashboards zur Anwendungsleistung, die auf den Daten von Azure Monitor basieren.</span><span class="sxs-lookup"><span data-stu-id="41e9d-130">A Grafana instance provides visual dashboards of the application performance based on the data from Azure Monitor.</span></span>

### <a name="components"></a><span data-ttu-id="41e9d-131">Komponenten</span><span class="sxs-lookup"><span data-stu-id="41e9d-131">Components</span></span>

* <span data-ttu-id="41e9d-132">[Jenkins][jenkins] ist ein Open-Source-Automatisierungsserver, der sich problemlos in Azure-Dienste integrieren lässt, um Continuous Integration (CI) und Continuous Deployment (CD) zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="41e9d-132">[Jenkins][jenkins] is an open-source automation server that can integrate with Azure services to enable continuous integration (CI) and continuous deployment (CD).</span></span> <span data-ttu-id="41e9d-133">In diesem Szenario orchestriert Jenkins die Erstellung neuer Containerimages auf der Grundlage von Commits in der Quellcodeverwaltung, pusht die Images an die Azure Container Registry-Instanz und aktualisiert anschließend Anwendungsinstanzen in Azure Kubernetes Service.</span><span class="sxs-lookup"><span data-stu-id="41e9d-133">In this scenario, Jenkins orchestrates the creation of new container images based on commits to source control, pushes those images to Azure Container Registry, then updates application instances in Azure Kubernetes Service.</span></span>
* <span data-ttu-id="41e9d-134">[Virtuelle Linux-Computer in Azure][azurevm-docs] fungieren als IaaS-Plattform zum Ausführen der Jenkins- und Grafana-Instanzen.</span><span class="sxs-lookup"><span data-stu-id="41e9d-134">[Azure Linux Virtual Machines][azurevm-docs] is the IaaS platform used to run the Jenkins and Grafana instances.</span></span>
* <span data-ttu-id="41e9d-135">[Azure Container Registry][azureacr-docs] speichert und verwaltet Containerimages, die vom Azure Kubernetes Service-Cluster verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="41e9d-135">[Azure Container Registry][azureacr-docs] stores and manages container images that are used by the Azure Kubernetes Service cluster.</span></span> <span data-ttu-id="41e9d-136">Images werden sicher gespeichert und können von der Azure-Plattform in anderen Regionen repliziert werden, um die Bereitstellung zu beschleunigen.</span><span class="sxs-lookup"><span data-stu-id="41e9d-136">Images are securely stored, and can be replicated to other regions by the Azure platform to speed up deployment times.</span></span>
* <span data-ttu-id="41e9d-137">[Azure Kubernetes Service][azureaks-docs] ist eine verwaltete Kubernetes-Plattform, mit der Sie Containeranwendungen ganz ohne Kenntnisse auf dem Gebiet der Containerorchestrierung bereitstellen und verwalten können.</span><span class="sxs-lookup"><span data-stu-id="41e9d-137">[Azure Kubernetes Service][azureaks-docs] is a managed Kubernetes platform that lets you deploy and manage containerized applications without container orchestration expertise.</span></span> <span data-ttu-id="41e9d-138">Azure führt als gehosteter Kubernetes-Dienst wichtige Aufgaben für Sie aus, z.B. Systemüberwachung und Wartung.</span><span class="sxs-lookup"><span data-stu-id="41e9d-138">As a hosted Kubernetes service, Azure handles critical tasks like health monitoring and maintenance for you.</span></span>
* <span data-ttu-id="41e9d-139">[Azure Cosmos DB][azurecosmosdb-docs] ist eine global verteilte Datenbank, bei der Sie zwischen verschiedenen Datenbank- und Konsistenzmodellen wählen können, um Ihre individuellen Anforderungen zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="41e9d-139">[Azure Cosmos DB][azurecosmosdb-docs] is a globally distributed, multi-model database that allows you to choose from various database and consistency models to suit your needs.</span></span> <span data-ttu-id="41e9d-140">Mit Cosmos DB können Ihre Daten global repliziert werden, und es müssen keine Komponenten für die Clusterverwaltung oder Replikation bereitgestellt und konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="41e9d-140">With Cosmos DB, your data can be globally replicated, and there is no cluster management or replication components to deploy and configure.</span></span>
* <span data-ttu-id="41e9d-141">[Azure Monitor][azuremonitor-docs] dient zum Nachverfolgen der Leistung, Gewährleisten der Sicherheit und Identifizieren von Trends.</span><span class="sxs-lookup"><span data-stu-id="41e9d-141">[Azure Monitor][azuremonitor-docs] helps you track performance, maintain security, and identify trends.</span></span> <span data-ttu-id="41e9d-142">Metriken von Monitor können von anderen Ressourcen und Tools (etwa von Grafana) verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="41e9d-142">Metrics obtained by Monitor can be used by other resources and tools, such as Grafana.</span></span>
* <span data-ttu-id="41e9d-143">[Grafana][grafana] ist eine Open-Source-Lösung für Abfragen, Visualisierungen und Warnungen sowie zum Nachvollziehen von Metriken.</span><span class="sxs-lookup"><span data-stu-id="41e9d-143">[Grafana][grafana] is an open-source solution to query, visualize, alert, and understand metrics.</span></span> <span data-ttu-id="41e9d-144">Dank eines Datenquellen-Plug-Ins für Azure Monitor kann Grafana visuelle Dashboards zur Überwachung der Leistung Ihrer Anwendungen erstellen, die in Azure Kubernetes Service ausgeführt werden und Cosmos DB verwenden.</span><span class="sxs-lookup"><span data-stu-id="41e9d-144">A data source plugin for Azure Monitor allows Grafana to create visual dashboards to monitor the performance of your applications running in Azure Kubernetes Service and using Cosmos DB.</span></span>

### <a name="alternatives"></a><span data-ttu-id="41e9d-145">Alternativen</span><span class="sxs-lookup"><span data-stu-id="41e9d-145">Alternatives</span></span>

* <span data-ttu-id="41e9d-146">[Azure Pipelines][azure-pipelines] unterstützen Sie bei der Implementierung einer Pipeline für Continuous Integration (CI), Tests und Continuous Deployment (CD) für jede beliebige App.</span><span class="sxs-lookup"><span data-stu-id="41e9d-146">[Azure Pipelines][azure-pipelines] help you implement a continuous integration (CI), test, and deployment (CD) pipeline for any app.</span></span>
* <span data-ttu-id="41e9d-147">[Kubernetes][kubernetes] kann direkt auf virtuellen Azure-Computern ausgeführt werden und bietet so bei Bedarf ein höheres Maß an Kontrolle als bei der Ausführung über einen verwalteten Dienst.</span><span class="sxs-lookup"><span data-stu-id="41e9d-147">[Kubernetes][kubernetes] can be run directly on Azure VMs instead of via a managed service if you would like more control over the cluster.</span></span>
* <span data-ttu-id="41e9d-148">[Service Fabric][service-fabric] ist eine weitere Alternative für einen Containerorchestrator, die AKS ersetzen kann.</span><span class="sxs-lookup"><span data-stu-id="41e9d-148">[Service Fabric][service-fabric] is another alternate container orchestrator that can replace AKS.</span></span>

## <a name="considerations"></a><span data-ttu-id="41e9d-149">Überlegungen</span><span class="sxs-lookup"><span data-stu-id="41e9d-149">Considerations</span></span>

### <a name="availability"></a><span data-ttu-id="41e9d-150">Verfügbarkeit</span><span class="sxs-lookup"><span data-stu-id="41e9d-150">Availability</span></span>

<span data-ttu-id="41e9d-151">Bei diesem Szenario wird Azure Monitor mit Grafana für visuelle Dashboards kombiniert, um die Leistung Ihrer Anwendung zu überwachen und Probleme zu melden.</span><span class="sxs-lookup"><span data-stu-id="41e9d-151">To monitor your application performance and report on issues, this scenario combines Azure Monitor with Grafana for visual dashboards.</span></span> <span data-ttu-id="41e9d-152">Mithilfe dieser Tools können Sie die Leistung überwachen und entsprechende Probleme behandeln, für die ggf. Codeaktualisierungen erforderlich sind, die dann über die CI/CD-Pipeline bereitgestellt werden können.</span><span class="sxs-lookup"><span data-stu-id="41e9d-152">These tools let you monitor and troubleshoot performance issues that may require code updates, which can all then be deployed with the CI/CD pipeline.</span></span>

<span data-ttu-id="41e9d-153">Der Azure Kubernetes Service-Cluster verfügt über einen Lastenausgleich, der Anwendungsdatenverkehr an Container (Pods) verteilt, die Ihre Anwendung ausführen.</span><span class="sxs-lookup"><span data-stu-id="41e9d-153">As part of the Azure Kubernetes Service cluster, a load balancer distributes application traffic to one or more containers (pods) that run your application.</span></span> <span data-ttu-id="41e9d-154">Dieses Konzept der Ausführung von Containeranwendungen in Kubernetes stellt eine hochverfügbare Infrastruktur für Ihre Kunden bereit.</span><span class="sxs-lookup"><span data-stu-id="41e9d-154">This approach to running containerized applications in Kubernetes provides a highly available infrastructure for your customers.</span></span>

<span data-ttu-id="41e9d-155">Weitere Verfügbarkeitsthemen finden Sie im Azure Architecture Center in der [Checkliste für die Verfügbarkeit][availability].</span><span class="sxs-lookup"><span data-stu-id="41e9d-155">For other availability topics, see the [availability checklist][availability] available in the Azure Architecture Center.</span></span>

### <a name="scalability"></a><span data-ttu-id="41e9d-156">Skalierbarkeit</span><span class="sxs-lookup"><span data-stu-id="41e9d-156">Scalability</span></span>

<span data-ttu-id="41e9d-157">Azure Kubernetes Service ermöglicht die Skalierung der Anzahl von Clusterknoten, um den Anforderungen Ihrer Anwendungen gerecht zu werden.</span><span class="sxs-lookup"><span data-stu-id="41e9d-157">Azure Kubernetes Service lets you scale the number of cluster nodes to meet the demands of your applications.</span></span> <span data-ttu-id="41e9d-158">Mit zunehmender Größe Ihrer Anwendung können Sie die Anzahl von Kubernetes-Knoten für die Ausführung Ihres Diensts horizontal hochskalieren.</span><span class="sxs-lookup"><span data-stu-id="41e9d-158">As your application increases, you can scale out the number of Kubernetes nodes that run your service.</span></span>

<span data-ttu-id="41e9d-159">Anwendungsdaten werden in Azure Cosmos DB gespeichert. Dabei handelt es sich um eine global verteilte und global skalierbare Datenbank mit mehreren Modellen.</span><span class="sxs-lookup"><span data-stu-id="41e9d-159">Application data is stored in Azure Cosmos DB, a globally distributed, multi-model database that can scale globally.</span></span> <span data-ttu-id="41e9d-160">Cosmos DB abstrahiert die Notwendigkeit der Infrastrukturskalierung, wie dies bei herkömmlichen Datenbankkomponenten der Fall ist, und Sie haben die Möglichkeit, Ihre Cosmos DB-Instanz global zu replizieren, um den Anforderungen Ihrer Kunden gerecht zu werden.</span><span class="sxs-lookup"><span data-stu-id="41e9d-160">Cosmos DB abstracts the need to scale your  infrastructure as with traditional database components, and you can choose to replicate your Cosmos DB globally to meet the demands of your customers.</span></span>

<span data-ttu-id="41e9d-161">Weitere Skalierbarkeitsthemen finden Sie im Azure Architecture Center in der [Checkliste für die Skalierbarkeit][scalability].</span><span class="sxs-lookup"><span data-stu-id="41e9d-161">For other scalability topics, see the [scalability checklist][scalability] available in the Azure Architecture Center.</span></span>

### <a name="security"></a><span data-ttu-id="41e9d-162">Sicherheit</span><span class="sxs-lookup"><span data-stu-id="41e9d-162">Security</span></span>

<span data-ttu-id="41e9d-163">Zur Minimierung der Angriffsfläche wird die Jenkins-VM-Instanz in diesem Szenario nicht über HTTP verfügbar gemacht.</span><span class="sxs-lookup"><span data-stu-id="41e9d-163">To minimize the attack footprint, this scenario does not expose the Jenkins VM instance over HTTP.</span></span> <span data-ttu-id="41e9d-164">Für Verwaltungsaufgaben, die eine Interaktion mit Jenkins erfordern, wird von Ihrem lokalen Computer aus über einen SSH-Tunnel eine sichere Remoteverbindung hergestellt.</span><span class="sxs-lookup"><span data-stu-id="41e9d-164">For any management tasks that require you to interact with Jenkins, you create a secure remote connection using an SSH tunnel from your local machine.</span></span> <span data-ttu-id="41e9d-165">Für die VM-Instanzen von Jenkins und Grafana ist ausschließlich die Authentifizierung mit öffentlichem SSH-Schlüssel zulässig.</span><span class="sxs-lookup"><span data-stu-id="41e9d-165">Only SSH public key authentication is allowed for the Jenkins and Grafana VM instances.</span></span> <span data-ttu-id="41e9d-166">Kennwortbasierte Anmeldungen sind deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="41e9d-166">Password-based logins are disabled.</span></span> <span data-ttu-id="41e9d-167">Weitere Informationen finden Sie unter [Ausführen eines Jenkins-Servers in Azure](../../reference-architectures/jenkins/index.md).</span><span class="sxs-lookup"><span data-stu-id="41e9d-167">For more information, see [Run a Jenkins server on Azure](../../reference-architectures/jenkins/index.md).</span></span>

<span data-ttu-id="41e9d-168">Zur Trennung von Anmeldeinformationen und Berechtigungen verwendet dieses Szenario einen dedizierten Azure Active Directory-Dienstprinzipal.</span><span class="sxs-lookup"><span data-stu-id="41e9d-168">For separation of credentials and permissions, this scenario uses a dedicated Azure Active Directory (AD) service principal.</span></span> <span data-ttu-id="41e9d-169">Die Anmeldeinformationen für diesen Dienstprinzipal werden als Objekt mit sicheren Anmeldeinformationen in Jenkins gespeichert, damit sie nicht direkt in Skripts oder in der Buildpipeline verfügbar/sichtbar sind.</span><span class="sxs-lookup"><span data-stu-id="41e9d-169">The credentials for this service principal are stored as a secure credential object in Jenkins so that they are not directly exposed and visible within scripts or the build pipeline.</span></span>

<span data-ttu-id="41e9d-170">Allgemeine Informationen zur Entwicklung sicherer Lösungen finden Sie in der [Dokumentation zur Azure-Sicherheit][security].</span><span class="sxs-lookup"><span data-stu-id="41e9d-170">For general guidance on designing secure solutions, see the [Azure Security Documentation][security].</span></span>

### <a name="resiliency"></a><span data-ttu-id="41e9d-171">Resilienz</span><span class="sxs-lookup"><span data-stu-id="41e9d-171">Resiliency</span></span>

<span data-ttu-id="41e9d-172">In diesem Szenario wird Azure Kubernetes Service für Ihre Anwendung genutzt.</span><span class="sxs-lookup"><span data-stu-id="41e9d-172">This scenario uses Azure Kubernetes Service for your application.</span></span> <span data-ttu-id="41e9d-173">Kubernetes verfügt über integrierte Resilienzkomponenten, die die Container (Pods) überwachen und im Falle eines Problems neu starten.</span><span class="sxs-lookup"><span data-stu-id="41e9d-173">Built into Kubernetes are resiliency components that monitor and restart the containers (pods) if there is an issue.</span></span> <span data-ttu-id="41e9d-174">In Kombination mit der Ausführung mehrerer Kubernetes-Knoten kann Ihre Anwendung die Nichtverfügbarkeit eines Pods oder Knotens tolerieren.</span><span class="sxs-lookup"><span data-stu-id="41e9d-174">Combined with running multiple Kubernetes nodes, your application can tolerate a pod or node being unavailable.</span></span>

<span data-ttu-id="41e9d-175">Allgemeine Informationen zur Entwicklung robuster Lösungen finden Sie unter [Entwerfen robuster Anwendungen für Azure][resiliency].</span><span class="sxs-lookup"><span data-stu-id="41e9d-175">For general guidance on designing resilient solutions, see [Designing resilient applications for Azure][resiliency].</span></span>

## <a name="deploy-the-scenario"></a><span data-ttu-id="41e9d-176">Bereitstellen des Szenarios</span><span class="sxs-lookup"><span data-stu-id="41e9d-176">Deploy the scenario</span></span>

<span data-ttu-id="41e9d-177">**Voraussetzungen:**</span><span class="sxs-lookup"><span data-stu-id="41e9d-177">**Prerequisites.**</span></span>

* <span data-ttu-id="41e9d-178">Sie benötigen ein bestehendes Azure-Konto.</span><span class="sxs-lookup"><span data-stu-id="41e9d-178">You must have an existing Azure account.</span></span> <span data-ttu-id="41e9d-179">Wenn Sie kein Azure-Abonnement besitzen, können Sie ein [kostenloses Konto](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) erstellen, bevor Sie beginnen.</span><span class="sxs-lookup"><span data-stu-id="41e9d-179">If you don't have an Azure subscription, create a [free account](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) before you begin.</span></span>
* <span data-ttu-id="41e9d-180">Sie benötigen ein öffentliches SSH-Schlüsselpaar.</span><span class="sxs-lookup"><span data-stu-id="41e9d-180">You need an SSH public key pair.</span></span> <span data-ttu-id="41e9d-181">Informationen zum Erstellen eines öffentlichen Schlüsselpaars finden Sie unter [Schnelle Schritte: Erstellen und Verwenden eines SSH-Schlüsselpaars (öffentlich und privat) für virtuelle Linux-Computer in Azure][sshkeydocs].</span><span class="sxs-lookup"><span data-stu-id="41e9d-181">For steps on how to create a public key pair, see [Create and use an SSH key pair for Linux VMs][sshkeydocs].</span></span>
* <span data-ttu-id="41e9d-182">Für die Authentifizierung des Diensts und der Ressourcen benötigen Sie einen Azure Active Directory-Dienstprinzipal.</span><span class="sxs-lookup"><span data-stu-id="41e9d-182">You need an Azure Active Directory (AD) service principal for the authentication of service and resources.</span></span> <span data-ttu-id="41e9d-183">Bei Bedarf können Sie mit [az ad sp create-for-rbac][createsp] einen Dienstprinzipal erstellen.</span><span class="sxs-lookup"><span data-stu-id="41e9d-183">If needed, you can create a service principal with [az ad sp create-for-rbac][createsp]</span></span>

    ```azurecli-interactive
    az ad sp create-for-rbac --name myDevOpsScenario
    ```

    <span data-ttu-id="41e9d-184">Notieren Sie sich die Werte für *appId* und *password* aus der Befehlsausgabe.</span><span class="sxs-lookup"><span data-stu-id="41e9d-184">Make a note of the *appId* and *password* in the output from this command.</span></span> <span data-ttu-id="41e9d-185">Diese Werte müssen beim Bereitstellen des Szenarios in der Vorlage angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="41e9d-185">You provide these values to the template when you deploy the scenario.</span></span>

<span data-ttu-id="41e9d-186">Gehen Sie wie folgt vor, um dieses Szenario mit einer Azure Resource Manager-Vorlage bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="41e9d-186">To deploy this scenario with an Azure Resource Manager template, perform the following steps.</span></span>

1. <span data-ttu-id="41e9d-187">Klicken Sie auf die Schaltfläche **Deploy to Azure** (In Azure bereitstellen):</span><span class="sxs-lookup"><span data-stu-id="41e9d-187">Click the **Deploy to Azure** button:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Fsolution-architectures%2Fmaster%2Fapps%2Fdevops-with-aks%2Fazuredeploy.json" target="_blank"><img src="https://azuredeploy.net/deploybutton.png"/></a>
2. <span data-ttu-id="41e9d-188">Warten Sie, bis die Vorlagenbereitstellung im Azure-Portal geöffnet wurde, und führen Sie anschließend folgende Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="41e9d-188">Wait for the template deployment to open in the Azure portal, then complete the following steps:</span></span>
   * <span data-ttu-id="41e9d-189">Erstellen Sie über **Neu erstellen** eine neue Ressourcengruppe, und geben Sie einen Namen (beispielsweise *myAKSDevOpsScenario*) in das Textfeld ein.</span><span class="sxs-lookup"><span data-stu-id="41e9d-189">Choose to **Create new** resource group, then provide a name such as *myAKSDevOpsScenario* in the text box.</span></span>
   * <span data-ttu-id="41e9d-190">Wählen Sie im Dropdownfeld **Standort** eine Region aus.</span><span class="sxs-lookup"><span data-stu-id="41e9d-190">Select a region from the **Location** drop-down box.</span></span>
   * <span data-ttu-id="41e9d-191">Geben Sie die App-ID und das Kennwort Ihres Dienstprinzipals aus dem Befehl `az ad sp create-for-rbac` ein.</span><span class="sxs-lookup"><span data-stu-id="41e9d-191">Enter your service principal app ID and password from the `az ad sp create-for-rbac` command.</span></span>
   * <span data-ttu-id="41e9d-192">Geben Sie einen Benutzernamen und ein sicheres Kennwort für die Jenkins-Instanz und die Grafana-Konsole an.</span><span class="sxs-lookup"><span data-stu-id="41e9d-192">Provide a username and secure password for the Jenkins instance and Grafana console.</span></span>
   * <span data-ttu-id="41e9d-193">Geben Sie einen SSH-Schlüssel an, um Anmeldungen bei den virtuellen Linux-Computern zu schützen.</span><span class="sxs-lookup"><span data-stu-id="41e9d-193">Provide an SSH key to secure logins to the Linux VMs.</span></span>
   * <span data-ttu-id="41e9d-194">Lesen Sie die allgemeinen Geschäftsbedingungen, und aktivieren Sie dann das Kontrollkästchen **Ich stimme den oben genannten Geschäftsbedingungen zu**.</span><span class="sxs-lookup"><span data-stu-id="41e9d-194">Review the terms and conditions, then check **I agree to the terms and conditions stated above**.</span></span>
   * <span data-ttu-id="41e9d-195">Klicken Sie auf die Schaltfläche **Kaufen**.</span><span class="sxs-lookup"><span data-stu-id="41e9d-195">Select the **Purchase** button.</span></span>

<span data-ttu-id="41e9d-196">Der Bereitstellungsvorgang kann zwischen 15 und 20 Minuten dauern.</span><span class="sxs-lookup"><span data-stu-id="41e9d-196">It can take 15-20 minutes for the deployment to complete.</span></span>

## <a name="pricing"></a><span data-ttu-id="41e9d-197">Preise</span><span class="sxs-lookup"><span data-stu-id="41e9d-197">Pricing</span></span>

<span data-ttu-id="41e9d-198">Zur Ermittlung der Betriebskosten für dieses Szenario sind alle Dienste im Kostenrechner vorkonfiguriert.</span><span class="sxs-lookup"><span data-stu-id="41e9d-198">To explore the cost of running this scenario, all of the services are pre-configured in the cost calculator.</span></span> <span data-ttu-id="41e9d-199">Wenn Sie wissen möchten, welche Kosten für Ihren spezifischen Anwendungsfall entstehen, passen Sie die entsprechenden Variablen an Ihren voraussichtlichen Datenverkehr an.</span><span class="sxs-lookup"><span data-stu-id="41e9d-199">To see how the pricing would change for your particular use case, change the appropriate variables to match your expected traffic.</span></span>

<span data-ttu-id="41e9d-200">Auf der Grundlage der Anzahl der zu speichernden Containerimages und der Kubernetes-Knoten für die Ausführung Ihrer Anwendungen haben wir drei exemplarische Kostenprofile erstellt:</span><span class="sxs-lookup"><span data-stu-id="41e9d-200">We have provided three sample cost profiles based on the number of container images to store and Kubernetes nodes to run your applications.</span></span>

* <span data-ttu-id="41e9d-201">[Klein:][small-pricing] Dieses Preisbeispiel entspricht 1.000 Containerbuildvorgängen pro Monat.</span><span class="sxs-lookup"><span data-stu-id="41e9d-201">[Small][small-pricing]: this pricing example correlates to 1000 container builds per month.</span></span>
* <span data-ttu-id="41e9d-202">[Mittel:][medium-pricing] Dieses Preisbeispiel entspricht 100.000 Containerbuildvorgängen pro Monat.</span><span class="sxs-lookup"><span data-stu-id="41e9d-202">[Medium][medium-pricing]: this pricing example correlates to 100,000 container builds per month.</span></span>
* <span data-ttu-id="41e9d-203">[Groß:][large-pricing] Dieses Preisbeispiel entspricht 1.000.000 Containerbuildvorgängen pro Monat.</span><span class="sxs-lookup"><span data-stu-id="41e9d-203">[Large][large-pricing]: this pricing example correlates to 1,000,000 container builds per month.</span></span>

## <a name="related-resources"></a><span data-ttu-id="41e9d-204">Zugehörige Ressourcen</span><span class="sxs-lookup"><span data-stu-id="41e9d-204">Related Resources</span></span>

<span data-ttu-id="41e9d-205">Dieses Szenario verwendet Azure Container Registry und Azure Kubernetes Service, um Ihre containerbasierten Anwendungen zu speichern und auszuführen.</span><span class="sxs-lookup"><span data-stu-id="41e9d-205">This scenario used Azure Container Registry and Azure Kubernetes Service to store and run your container-based applications.</span></span> <span data-ttu-id="41e9d-206">Azure Container Instances kann ebenfalls zum Ausführen containerbasierter Anwendungen verwendet werden, ohne dafür Orchestrierungskomponenten bereitstellen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="41e9d-206">Azure Container Instances can also be used to run container-based applications, without having to provision any orchestration components.</span></span> <span data-ttu-id="41e9d-207">Weitere Informationen finden Sie in der [Übersicht über Azure Container Instances][azureaci-docs].</span><span class="sxs-lookup"><span data-stu-id="41e9d-207">For more information, see [Azure Container Instances overview][azureaci-docs].</span></span>

<!-- links -->
[architecture]: ./media/devops-with-aks/architecture-devops-with-aks.png
[autoscaling]: ../../best-practices/auto-scaling.md
[availability]: ../../checklist/availability.md
[azureaci-docs]: /azure/container-instances/container-instances-overview
[azureacr-docs]: /azure/container-registry/container-registry-intro
[azurecosmosdb-docs]: /azure/cosmos-db/introduction
[azureaks-docs]: /azure/aks/intro-kubernetes
[azuremonitor-docs]: /azure/monitoring-and-diagnostics/monitoring-overview
[azurevm-docs]: /azure/virtual-machines/linux/overview
[createsp]: /cli/azure/ad/sp#az-ad-sp-create
[grafana]: https://grafana.com/
[jenkins]: https://jenkins.io/
[resiliency]: ../../resiliency/index.md
[resource-groups]: /azure/azure-resource-manager/resource-group-overview
[security]: /azure/security/
[scalability]: ../../checklist/scalability.md
[sshkeydocs]: /azure/virtual-machines/linux/mac-create-ssh-keys
[azure-pipelines]: /azure/devops/pipelines
[kubernetes]: https://kubernetes.io/
[service-fabric]: /azure/service-fabric/

[small-pricing]: https://azure.com/e/841f0a75b1ea4802ba1ac8f7918a71e7
[medium-pricing]: https://azure.com/e/eea0e6d79b4e45618a96d33383ec77ba
[large-pricing]: https://azure.com/e/3faab662c54c473da55a1e93a27e0e64