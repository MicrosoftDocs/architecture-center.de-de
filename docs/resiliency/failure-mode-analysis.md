---
title: Fehlermodusanalyse
description: Anleitungen zur Durchführung der Fehlermodusanalyse für Cloudlösungen, die auf Azure basieren.
author: MikeWasson
ms.date: 05/07/2018
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.custom: resiliency
ms.openlocfilehash: 6d0f58161c5b9d5922c21f24b1b1a50bab836bb1
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 03/20/2019
ms.locfileid: "58248067"
---
# <a name="failure-mode-analysis"></a><span data-ttu-id="82dfb-103">Fehlermodusanalyse</span><span class="sxs-lookup"><span data-stu-id="82dfb-103">Failure mode analysis</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="82dfb-104">Die Fehlermodusanalyse (Failure Mode Analysis, FMA) ist ein Prozess zum Erzielen von Resilienz in einem System durch das Identifizieren möglicher Schwachstellen im System.</span><span class="sxs-lookup"><span data-stu-id="82dfb-104">Failure mode analysis (FMA) is a process for building resiliency into a system, by identifying possible failure points in the system.</span></span> <span data-ttu-id="82dfb-105">Die Fehlermodusanalyse sollte in die Planungs- und Designphasen eingebunden werden, damit Sie die Wiederherstellung nach einem Fehler von Anfang an in das System integrieren können.</span><span class="sxs-lookup"><span data-stu-id="82dfb-105">The FMA should be part of the architecture and design phases, so that you can build failure recovery into the system from the beginning.</span></span>

<span data-ttu-id="82dfb-106">Hier folgt der allgemeine Prozess zum Durchführen einer Fehlermodusanalyse:</span><span class="sxs-lookup"><span data-stu-id="82dfb-106">Here is the general process to conduct an FMA:</span></span>

1. <span data-ttu-id="82dfb-107">Identifizieren Sie alle Komponenten im System.</span><span class="sxs-lookup"><span data-stu-id="82dfb-107">Identify all of the components in the system.</span></span> <span data-ttu-id="82dfb-108">Beziehen Sie externe Abhängigkeiten ein, z. B. Identitätsanbieter, Drittanbieterdienste usw.</span><span class="sxs-lookup"><span data-stu-id="82dfb-108">Include external dependencies, such as as identity providers, third-party services, and so on.</span></span>
2. <span data-ttu-id="82dfb-109">Identifizieren Sie für jede Komponente potenzielle Fehler, die auftreten können.</span><span class="sxs-lookup"><span data-stu-id="82dfb-109">For each component, identify potential failures that could occur.</span></span> <span data-ttu-id="82dfb-110">Eine einzelne Komponente kann mehrere Fehlermodi aufweisen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-110">A single component may have more than one failure mode.</span></span> <span data-ttu-id="82dfb-111">Beispielsweise sollten Sie Lese- und Schreibfehler getrennt betrachten, da deren Auswirkung und mögliche Entschärfung unterschiedlich ausfallen werden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-111">For example, you should consider read failures and write failures separately, because the impact and possible mitigations will be different.</span></span>
3. <span data-ttu-id="82dfb-112">Bewerten Sie die einzelnen Fehlermodi nach ihrem Gesamtrisiko.</span><span class="sxs-lookup"><span data-stu-id="82dfb-112">Rate each failure mode according to its overall risk.</span></span> <span data-ttu-id="82dfb-113">Beachten Sie folgende Faktoren:</span><span class="sxs-lookup"><span data-stu-id="82dfb-113">Consider these factors:</span></span>

   - <span data-ttu-id="82dfb-114">Wie hoch ist die Fehlerwahrscheinlichkeit?</span><span class="sxs-lookup"><span data-stu-id="82dfb-114">What is the likelihood of the failure.</span></span> <span data-ttu-id="82dfb-115">Tritt der Fehler relativ häufig auf?</span><span class="sxs-lookup"><span data-stu-id="82dfb-115">Is it relatively common?</span></span> <span data-ttu-id="82dfb-116">Tritt der Fehler sehr selten auf?</span><span class="sxs-lookup"><span data-stu-id="82dfb-116">Extrememly rare?</span></span> <span data-ttu-id="82dfb-117">Sie brauchen keine exakten Zahlen. Der Zweck besteht darin, der Priorität einen Rang zuzuweisen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-117">You don't need exact numbers; the purpose is to help rank the priority.</span></span>
   - <span data-ttu-id="82dfb-118">Welche Auswirkungen hat dies auf die Anwendung in Bezug auf Verfügbarkeit, Datenverlust, Kosten und Geschäftsunterbrechung?</span><span class="sxs-lookup"><span data-stu-id="82dfb-118">What is the impact on the application, in terms of availability, data loss, monetary cost, and business disruption?</span></span>

4. <span data-ttu-id="82dfb-119">Legen Sie für jeden Fehlermodus fest, wie die Anwendung reagieren und wiederhergestellt werden soll.</span><span class="sxs-lookup"><span data-stu-id="82dfb-119">For each failure mode, determine how the application will respond and recover.</span></span> <span data-ttu-id="82dfb-120">Berücksichtigen Sie Kompromisse in Bezug auf Kosten und Anwendungskomplexität.</span><span class="sxs-lookup"><span data-stu-id="82dfb-120">Consider tradeoffs in cost and application complexity.</span></span>

<span data-ttu-id="82dfb-121">Dieser Artikel enthält als Ausgangspunkt für den FMA-Prozess einen Katalog mit möglichen Fehlerzuständen und den entsprechenden Gegenmaßnahmen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-121">As a starting point for your FMA process, this article contains a catalog of potential failure modes and their mitigations.</span></span> <span data-ttu-id="82dfb-122">Der Katalog ist nach Technologie oder Azure-Dienst sowie einer zusätzlichen allgemeinen Kategorie für das Design auf Anwendungsebene gegliedert.</span><span class="sxs-lookup"><span data-stu-id="82dfb-122">The catalog is organized by technology or Azure service, plus a general category for application-level design.</span></span> <span data-ttu-id="82dfb-123">Der Katalog ist nicht komplett, deckt aber viele der wichtigsten Azure-Dienste ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-123">The catalog is not exhaustive, but covers many of the core Azure services.</span></span>

## <a name="app-service"></a><span data-ttu-id="82dfb-124">App Service</span><span class="sxs-lookup"><span data-stu-id="82dfb-124">App Service</span></span>

<!-- markdownlint-disable MD026 -->

### <a name="app-service-app-shuts-down"></a><span data-ttu-id="82dfb-125">Die App Service-App wird heruntergefahren.</span><span class="sxs-lookup"><span data-stu-id="82dfb-125">App Service app shuts down.</span></span>

<span data-ttu-id="82dfb-126">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-126">**Detection**.</span></span> <span data-ttu-id="82dfb-127">Mögliche Ursachen:</span><span class="sxs-lookup"><span data-stu-id="82dfb-127">Possible causes:</span></span>

- <span data-ttu-id="82dfb-128">Erwartetes Herunterfahren</span><span class="sxs-lookup"><span data-stu-id="82dfb-128">Expected shutdown</span></span>

  - <span data-ttu-id="82dfb-129">Ein Operator fährt die Anwendung herunter, z. B. über das Azure-Portal.</span><span class="sxs-lookup"><span data-stu-id="82dfb-129">An operator shuts down the application; for example, using the Azure portal.</span></span>
  - <span data-ttu-id="82dfb-130">Die App wurde aufgrund von Inaktivität entladen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-130">The app was unloaded because it was idle.</span></span> <span data-ttu-id="82dfb-131">(Nur, wenn die Einstellung `Always On` deaktiviert ist.)</span><span class="sxs-lookup"><span data-stu-id="82dfb-131">(Only if the `Always On` setting is disabled.)</span></span>

- <span data-ttu-id="82dfb-132">Unerwartetes Herunterfahren</span><span class="sxs-lookup"><span data-stu-id="82dfb-132">Unexpected shutdown</span></span>

  - <span data-ttu-id="82dfb-133">Die App stürzt ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-133">The app crashes.</span></span>
  - <span data-ttu-id="82dfb-134">Eine App Service-VM-Instanz steht nicht mehr zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="82dfb-134">An App Service VM instance becomes unavailable.</span></span>

<span data-ttu-id="82dfb-135">Die „Application_End“-Protokollierung fängt das Herunterfahren der Anwendungsdomäne ab (sanfter Prozessabsturz). Dies ist die einzige Möglichkeit, das Herunterfahren der Anwendungsdomäne abzufangen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-135">Application_End logging will catch the app domain shutdown (soft process crash) and is the only way to catch the application domain shutdowns.</span></span>

<span data-ttu-id="82dfb-136">**Wiederherstellung:**</span><span class="sxs-lookup"><span data-stu-id="82dfb-136">**Recovery:**</span></span>

- <span data-ttu-id="82dfb-137">Wenn das Herunterfahren erwartet wurde, verwenden Sie das Herunterfahrereignis der Anwendung, um das Programm ordnungsgemäß herunterzufahren.</span><span class="sxs-lookup"><span data-stu-id="82dfb-137">If the shutdown was expected, use the application's shutdown event to shut down gracefully.</span></span> <span data-ttu-id="82dfb-138">Verwenden Sie z. B. in ASP.NET die Methode `Application_End`.</span><span class="sxs-lookup"><span data-stu-id="82dfb-138">For example, in ASP.NET, use the `Application_End` method.</span></span>
- <span data-ttu-id="82dfb-139">Wenn die Anwendung bei Inaktivität entladen wurde, wird sie bei der nächsten Anforderung automatisch neu gestartet.</span><span class="sxs-lookup"><span data-stu-id="82dfb-139">If the application was unloaded while idle, it is automatically restarted on the next request.</span></span> <span data-ttu-id="82dfb-140">Allerdings fallen für Sie die Kosten für den „Kaltstart“ an.</span><span class="sxs-lookup"><span data-stu-id="82dfb-140">However, you will incur the "cold start" cost.</span></span>
- <span data-ttu-id="82dfb-141">Um zu verhindern, dass die Anwendung bei Inaktivität entladen wird, aktivieren Sie die Einstellung `Always On` in der Web-App.</span><span class="sxs-lookup"><span data-stu-id="82dfb-141">To prevent the application from being unloaded while idle, enable the `Always On` setting in the web app.</span></span> <span data-ttu-id="82dfb-142">Weitere Informationen finden Sie unter [Konfigurieren von Web-Apps in Azure App Service][app-service-configure].</span><span class="sxs-lookup"><span data-stu-id="82dfb-142">See [Configure web apps in Azure App Service][app-service-configure].</span></span>
- <span data-ttu-id="82dfb-143">Um zu verhindern, dass ein Operator die Anwendung herunterfährt, legen Sie eine Ressourcensperre mit `ReadOnly`-Ebene fest.</span><span class="sxs-lookup"><span data-stu-id="82dfb-143">To prevent an operator from shutting down the app, set a resource lock with `ReadOnly` level.</span></span> <span data-ttu-id="82dfb-144">Weitere Informationen finden Sie unter [Sperren von Ressourcen mit Azure Resource Manager][rm-locks].</span><span class="sxs-lookup"><span data-stu-id="82dfb-144">See [Lock resources with Azure Resource Manager][rm-locks].</span></span>
- <span data-ttu-id="82dfb-145">Wenn die App abstürzt oder eine App Service-VM ist nicht mehr verfügbar ist, startet App Service die App automatisch neu.</span><span class="sxs-lookup"><span data-stu-id="82dfb-145">If the app crashes or an App Service VM becomes unavailable, App Service automatically restarts the app.</span></span>

<span data-ttu-id="82dfb-146">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-146">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-147">Anwendungs- und Webserverprotokolle.</span><span class="sxs-lookup"><span data-stu-id="82dfb-147">Application logs and web server logs.</span></span> <span data-ttu-id="82dfb-148">Weitere Informationen finden Sie unter [Aktivieren der Diagnoseprotokollierung für Web-Apps in Azure App Service][app-service-logging].</span><span class="sxs-lookup"><span data-stu-id="82dfb-148">See [Enable diagnostics logging for web apps in Azure App Service][app-service-logging].</span></span>

### <a name="a-particular-user-repeatedly-makes-bad-requests-or-overloads-the-system"></a><span data-ttu-id="82dfb-149">Ein bestimmter Benutzer stellt wiederholt unzulässige Anforderungen oder überlastet das System.</span><span class="sxs-lookup"><span data-stu-id="82dfb-149">A particular user repeatedly makes bad requests or overloads the system.</span></span>

<span data-ttu-id="82dfb-150">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-150">**Detection**.</span></span> <span data-ttu-id="82dfb-151">Authentifizieren Sie Benutzer, und beziehen Sie die Benutzer-ID in die Anwendungsprotokolle ein.</span><span class="sxs-lookup"><span data-stu-id="82dfb-151">Authenticate users and include user ID in application logs.</span></span>

<span data-ttu-id="82dfb-152">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-152">**Recovery:**</span></span>

- <span data-ttu-id="82dfb-153">Verwenden Sie [Azure API Management][api-management], um Anforderungen von dem Benutzer zu beschränken.</span><span class="sxs-lookup"><span data-stu-id="82dfb-153">Use [Azure API Management][api-management] to throttle requests from the user.</span></span> <span data-ttu-id="82dfb-154">Weitere Informationen finden Sie unter [Erweiterte Anforderungsbegrenzung mit Azure API Management][api-management-throttling].</span><span class="sxs-lookup"><span data-stu-id="82dfb-154">See [Advanced request throttling with Azure API Management][api-management-throttling]</span></span>
- <span data-ttu-id="82dfb-155">Blockieren Sie den Benutzer.</span><span class="sxs-lookup"><span data-stu-id="82dfb-155">Block the user.</span></span>

<span data-ttu-id="82dfb-156">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-156">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-157">Protokollieren Sie alle Authentifizierungsanforderungen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-157">Log all authentication requests.</span></span>

### <a name="a-bad-update-was-deployed"></a><span data-ttu-id="82dfb-158">Es wurde eine unzulässige Aktualisierung bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="82dfb-158">A bad update was deployed.</span></span>

<span data-ttu-id="82dfb-159">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-159">**Detection**.</span></span> <span data-ttu-id="82dfb-160">Überwachen Sie die Anwendungsintegrität über das Azure-Portal (weitere Informationen finden Sie unter [Überwachen der Azure Web App-Leistung][app-insights-web-apps]), oder implementieren Sie das [Überwachungsmuster für den Integritätsendpunkt][health-endpoint-monitoring-pattern].</span><span class="sxs-lookup"><span data-stu-id="82dfb-160">Monitor the application health through the Azure Portal (see [Monitor Azure web app performance][app-insights-web-apps]) or implement the [health endpoint monitoring pattern][health-endpoint-monitoring-pattern].</span></span>

<span data-ttu-id="82dfb-161">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-161">**Recovery:**.</span></span> <span data-ttu-id="82dfb-162">Verwenden Sie mehrere [Bereitstellungsslots][app-service-slots], und führen Sie ein Rollback auf die letzte bekannte geeignete Bereitstellung aus.</span><span class="sxs-lookup"><span data-stu-id="82dfb-162">Use multiple [deployment slots][app-service-slots] and roll back to the last-known-good deployment.</span></span> <span data-ttu-id="82dfb-163">Weitere Informationen finden Sie unter [Einfache Webanwendung][ra-web-apps-basic].</span><span class="sxs-lookup"><span data-stu-id="82dfb-163">For more information, see [Basic web application][ra-web-apps-basic].</span></span>

## <a name="azure-active-directory"></a><span data-ttu-id="82dfb-164">Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="82dfb-164">Azure Active Directory</span></span>

### <a name="openid-connect-oidc-authentication-fails"></a><span data-ttu-id="82dfb-165">Fehler bei der OpenID Connect-Authentifizierung.</span><span class="sxs-lookup"><span data-stu-id="82dfb-165">OpenID Connect (OIDC) authentication fails.</span></span>

<span data-ttu-id="82dfb-166">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-166">**Detection**.</span></span> <span data-ttu-id="82dfb-167">Mögliche Fehlermodi:</span><span class="sxs-lookup"><span data-stu-id="82dfb-167">Possible failure modes include:</span></span>

1. <span data-ttu-id="82dfb-168">Azure AD ist nicht verfügbar oder kann aufgrund eines Netzwerkproblems nicht erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-168">Azure AD is not available, or cannot be reached due to a network problem.</span></span> <span data-ttu-id="82dfb-169">Bei der Umleitung zum Authentifizierungsendpunkt ist ein Fehler aufgetreten und die OpenID Connect-Middleware (OICD) löst eine Ausnahme aus.</span><span class="sxs-lookup"><span data-stu-id="82dfb-169">Redirection to the authentication endpoint fails, and the OIDC middleware throws an exception.</span></span>
2. <span data-ttu-id="82dfb-170">Der Azure AD-Mandant ist nicht vorhanden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-170">Azure AD tenant does not exist.</span></span> <span data-ttu-id="82dfb-171">Bei der Umleitung zum Authentifizierungsendpunkt wird ein HTTP-Fehlercode zurückgegeben und die OpenID Connect-Middleware (OICD) löst eine Ausnahme aus.</span><span class="sxs-lookup"><span data-stu-id="82dfb-171">Redirection to the authentication endpoint returns an HTTP error code, and the OIDC middleware throws an exception.</span></span>
3. <span data-ttu-id="82dfb-172">Der Benutzer kann nicht authentifiziert werden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-172">User cannot authenticate.</span></span> <span data-ttu-id="82dfb-173">Es ist keine Erkennungsstrategie erforderlich. Azure AD behandelt Anmeldefehler.</span><span class="sxs-lookup"><span data-stu-id="82dfb-173">No detection strategy is necessary; Azure AD handles login failures.</span></span>

<span data-ttu-id="82dfb-174">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-174">**Recovery:**</span></span>

1. <span data-ttu-id="82dfb-175">Fangen Sie nicht behandelte Ausnahmen von der Middleware ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-175">Catch unhandled exceptions from the middleware.</span></span>
2. <span data-ttu-id="82dfb-176">Behandeln Sie `AuthenticationFailed`-Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="82dfb-176">Handle `AuthenticationFailed` events.</span></span>
3. <span data-ttu-id="82dfb-177">Leiten Sie den Benutzer zu einer Fehlerseite um.</span><span class="sxs-lookup"><span data-stu-id="82dfb-177">Redirect the user to an error page.</span></span>
4. <span data-ttu-id="82dfb-178">Der Benutzer versucht den Vorgang erneut.</span><span class="sxs-lookup"><span data-stu-id="82dfb-178">User retries.</span></span>

## <a name="azure-search"></a><span data-ttu-id="82dfb-179">Azure Search</span><span class="sxs-lookup"><span data-stu-id="82dfb-179">Azure Search</span></span>

### <a name="writing-data-to-azure-search-fails"></a><span data-ttu-id="82dfb-180">Beim Schreiben von Daten in Azure Search tritt ein Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="82dfb-180">Writing data to Azure Search fails.</span></span>

<span data-ttu-id="82dfb-181">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-181">**Detection**.</span></span> <span data-ttu-id="82dfb-182">Fangen Sie `Microsoft.Rest.Azure.CloudException`-Fehler ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-182">Catch `Microsoft.Rest.Azure.CloudException` errors.</span></span>

<span data-ttu-id="82dfb-183">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-183">**Recovery:**</span></span>

<span data-ttu-id="82dfb-184">Das [Search .NET SDK][search-sdk] versucht den Vorgang nach vorübergehenden Fehlern automatisch erneut.</span><span class="sxs-lookup"><span data-stu-id="82dfb-184">The [Search .NET SDK][search-sdk] automatically retries after transient failures.</span></span> <span data-ttu-id="82dfb-185">Alle Ausnahmen, die vom Client-SDK ausgelöst werden, sollten als nicht vorübergehende Fehler behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-185">Any exceptions thrown by the client SDK should be treated as non-transient errors.</span></span>

<span data-ttu-id="82dfb-186">Die standardmäßige Wiederholungsrichtlinie verwendet einen exponentiellen Backoff.</span><span class="sxs-lookup"><span data-stu-id="82dfb-186">The default retry policy uses exponential back-off.</span></span> <span data-ttu-id="82dfb-187">Rufen Sie `SetRetryPolicy` für die Klasse `SearchIndexClient` oder `SearchServiceClient` auf, um eine andere Wiederholungsrichtlinie zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-187">To use a different retry policy, call `SetRetryPolicy` on the `SearchIndexClient` or `SearchServiceClient` class.</span></span> <span data-ttu-id="82dfb-188">Weitere Informationen finden Sie unter [Automatische Wiederholungsversuche][auto-rest-client-retry].</span><span class="sxs-lookup"><span data-stu-id="82dfb-188">For more information, see [Automatic Retries][auto-rest-client-retry].</span></span>

<span data-ttu-id="82dfb-189">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-189">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-190">Verwenden Sie [Durchsuchen der Datenverkehrsanalyse][search-analytics].</span><span class="sxs-lookup"><span data-stu-id="82dfb-190">Use [Search Traffic Analytics][search-analytics].</span></span>

### <a name="reading-data-from-azure-search-fails"></a><span data-ttu-id="82dfb-191">Beim Lesen von Daten aus Azure Search tritt ein Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="82dfb-191">Reading data from Azure Search fails.</span></span>

<span data-ttu-id="82dfb-192">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-192">**Detection**.</span></span> <span data-ttu-id="82dfb-193">Fangen Sie `Microsoft.Rest.Azure.CloudException`-Fehler ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-193">Catch `Microsoft.Rest.Azure.CloudException` errors.</span></span>

<span data-ttu-id="82dfb-194">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-194">**Recovery:**</span></span>

<span data-ttu-id="82dfb-195">Das [Search .NET SDK][search-sdk] versucht den Vorgang nach vorübergehenden Fehlern automatisch erneut.</span><span class="sxs-lookup"><span data-stu-id="82dfb-195">The [Search .NET SDK][search-sdk]  automatically retries after transient failures.</span></span> <span data-ttu-id="82dfb-196">Alle Ausnahmen, die vom Client-SDK ausgelöst werden, sollten als nicht vorübergehende Fehler behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-196">Any exceptions thrown by the client SDK should be treated as non-transient errors.</span></span>

<span data-ttu-id="82dfb-197">Die standardmäßige Wiederholungsrichtlinie verwendet einen exponentiellen Backoff.</span><span class="sxs-lookup"><span data-stu-id="82dfb-197">The default retry policy uses exponential back-off.</span></span> <span data-ttu-id="82dfb-198">Rufen Sie `SetRetryPolicy` für die Klasse `SearchIndexClient` oder `SearchServiceClient` auf, um eine andere Wiederholungsrichtlinie zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-198">To use a different retry policy, call `SetRetryPolicy` on the `SearchIndexClient` or `SearchServiceClient` class.</span></span> <span data-ttu-id="82dfb-199">Weitere Informationen finden Sie unter [Automatische Wiederholungsversuche][auto-rest-client-retry].</span><span class="sxs-lookup"><span data-stu-id="82dfb-199">For more information, see [Automatic Retries][auto-rest-client-retry].</span></span>

<span data-ttu-id="82dfb-200">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-200">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-201">Verwenden Sie [Durchsuchen der Datenverkehrsanalyse][search-analytics].</span><span class="sxs-lookup"><span data-stu-id="82dfb-201">Use [Search Traffic Analytics][search-analytics].</span></span>

## <a name="cassandra"></a><span data-ttu-id="82dfb-202">Cassandra</span><span class="sxs-lookup"><span data-stu-id="82dfb-202">Cassandra</span></span>

### <a name="reading-or-writing-to-a-node-fails"></a><span data-ttu-id="82dfb-203">Beim Lesen aus einem Knoten oder beim Schreiben in einen Knoten ist ein Fehler aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-203">Reading or writing to a node fails.</span></span>

<span data-ttu-id="82dfb-204">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-204">**Detection**.</span></span> <span data-ttu-id="82dfb-205">Fangen Sie die Ausnahme ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-205">Catch the exception.</span></span> <span data-ttu-id="82dfb-206">Für .NET-Clients ist dies normalerweise `System.Web.HttpException`.</span><span class="sxs-lookup"><span data-stu-id="82dfb-206">For .NET clients, this will typically be `System.Web.HttpException`.</span></span> <span data-ttu-id="82dfb-207">Andere Clients weisen möglicherweise andere Ausnahmetypen auf.</span><span class="sxs-lookup"><span data-stu-id="82dfb-207">Other client may have other exception types.</span></span>  <span data-ttu-id="82dfb-208">Weitere Informationen finden Sie unter [Cassandra error handling done right](https://www.datastax.com/dev/blog/cassandra-error-handling-done-right) (Richtige Cassandra-Fehlerbehandlung).</span><span class="sxs-lookup"><span data-stu-id="82dfb-208">For more information, see [Cassandra error handling done right](https://www.datastax.com/dev/blog/cassandra-error-handling-done-right).</span></span>

<span data-ttu-id="82dfb-209">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-209">**Recovery:**</span></span>

- <span data-ttu-id="82dfb-210">Jeder [Cassandra-Client](https://wiki.apache.org/cassandra/ClientOptions) verfügt über eigene Wiederholungsrichtlinien und -funktionen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-210">Each [Cassandra client](https://wiki.apache.org/cassandra/ClientOptions) has its own retry policies and capabilities.</span></span> <span data-ttu-id="82dfb-211">Weitere Informationen finden Sie unter [Cassandra error handling done right][cassandra-error-handling] (Richtige Cassandra-Fehlerbehandlung).</span><span class="sxs-lookup"><span data-stu-id="82dfb-211">For more information, see [Cassandra error handling done right][cassandra-error-handling].</span></span>
- <span data-ttu-id="82dfb-212">Verwenden Sie eine rackfähige Bereitstellung mit Datenknoten, die über die Fehlerdomänen verteilt sind.</span><span class="sxs-lookup"><span data-stu-id="82dfb-212">Use a rack-aware deployment, with data nodes distributed across the fault domains.</span></span>
- <span data-ttu-id="82dfb-213">Nehmen Sie die Bereitstellung in mehreren Regionen mit lokaler Quorumkonsistenz vor.</span><span class="sxs-lookup"><span data-stu-id="82dfb-213">Deploy to multiple regions with local quorum consistency.</span></span> <span data-ttu-id="82dfb-214">Wenn ein nicht vorübergehender Fehler auftritt, führen Sie einen Failover in eine andere Region aus.</span><span class="sxs-lookup"><span data-stu-id="82dfb-214">If a non-transient failure occurs, fail over to another region.</span></span>

<span data-ttu-id="82dfb-215">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-215">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-216">Anwendungsprotokolle</span><span class="sxs-lookup"><span data-stu-id="82dfb-216">Application logs</span></span>

## <a name="cloud-service"></a><span data-ttu-id="82dfb-217">Clouddienst</span><span class="sxs-lookup"><span data-stu-id="82dfb-217">Cloud Service</span></span>

### <a name="web-or-worker-roles-are-unexpectedlybeing-shut-down"></a><span data-ttu-id="82dfb-218">Web- oder Workerrollen werden unerwartet heruntergefahren.</span><span class="sxs-lookup"><span data-stu-id="82dfb-218">Web or worker roles are unexpectedly being shut down.</span></span>

<span data-ttu-id="82dfb-219">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-219">**Detection**.</span></span> <span data-ttu-id="82dfb-220">Das Ereignis [RoleEnvironment.Stopping][RoleEnvironment.Stopping] wird ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="82dfb-220">The [RoleEnvironment.Stopping][RoleEnvironment.Stopping] event is fired.</span></span>

<span data-ttu-id="82dfb-221">**Wiederherstellen**.</span><span class="sxs-lookup"><span data-stu-id="82dfb-221">**Recovery**.</span></span> <span data-ttu-id="82dfb-222">Setzen Sie die Methode [RoleEntryPoint.OnStop][RoleEntryPoint.OnStop] für eine ordnungsgemäße Bereinigung außer Kraft.</span><span class="sxs-lookup"><span data-stu-id="82dfb-222">Override the [RoleEntryPoint.OnStop][RoleEntryPoint.OnStop] method to gracefully clean up.</span></span> <span data-ttu-id="82dfb-223">Weitere Informationen finden Sie unter [The Right Way to Handle Azure OnStop Events][onstop-events] (Der richtige Weg zum Behandeln von Azure OnStop-Ereignissen – Blog).</span><span class="sxs-lookup"><span data-stu-id="82dfb-223">For more information, see [The Right Way to Handle Azure OnStop Events][onstop-events] (blog).</span></span>

## <a name="cosmos-db"></a><span data-ttu-id="82dfb-224">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="82dfb-224">Cosmos DB</span></span>

### <a name="reading-data-fails"></a><span data-ttu-id="82dfb-225">Beim Lesen von Daten tritt ein Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="82dfb-225">Reading data fails.</span></span>

<span data-ttu-id="82dfb-226">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-226">**Detection**.</span></span> <span data-ttu-id="82dfb-227">Fangen Sie `System.Net.Http.HttpRequestException` oder `Microsoft.Azure.Documents.DocumentClientException` ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-227">Catch `System.Net.Http.HttpRequestException` or `Microsoft.Azure.Documents.DocumentClientException`.</span></span>

<span data-ttu-id="82dfb-228">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-228">**Recovery:**</span></span>

- <span data-ttu-id="82dfb-229">Das SDK führt bei Fehlversuchen automatisch Wiederholungsversuche durch.</span><span class="sxs-lookup"><span data-stu-id="82dfb-229">The SDK automatically retries failed attempts.</span></span> <span data-ttu-id="82dfb-230">Konfigurieren Sie zum Festlegen der Anzahl von Wiederholungsversuchen und der maximalen Wartezeit `ConnectionPolicy.RetryOptions`.</span><span class="sxs-lookup"><span data-stu-id="82dfb-230">To set the number of retries and the maximum wait time, configure `ConnectionPolicy.RetryOptions`.</span></span> <span data-ttu-id="82dfb-231">Ausnahmen, die vom Client ausgelöst werden, unterliegen entweder nicht der Wiederholungsrichtlinie oder sind keine vorübergehenden Fehler.</span><span class="sxs-lookup"><span data-stu-id="82dfb-231">Exceptions that the client raises are either beyond the retry policy or are not transient errors.</span></span>
- <span data-ttu-id="82dfb-232">Wenn Cosmos DB den Client einschränkt, wird ein HTTP 429-Fehler zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="82dfb-232">If Cosmos DB throttles the client, it returns an HTTP 429 error.</span></span> <span data-ttu-id="82dfb-233">Überprüfen Sie den Statuscode unter `DocumentClientException`.</span><span class="sxs-lookup"><span data-stu-id="82dfb-233">Check the status code in the `DocumentClientException`.</span></span> <span data-ttu-id="82dfb-234">Wenn Sie ständig den Fehler 429 erhalten, sollten Sie in Erwägung ziehen, den Durchsatzwert der Sammlung zu erhöhen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-234">If you are getting error 429 consistently, consider increasing the throughput value of the collection.</span></span>
  - <span data-ttu-id="82dfb-235">Wenn Sie die MongoDB-API verwenden, gibt der Dienst bei der Einschränkung den Fehlercode 16500 zurück.</span><span class="sxs-lookup"><span data-stu-id="82dfb-235">If you are using the MongoDB API, the service returns error code 16500 when throttling.</span></span>
- <span data-ttu-id="82dfb-236">Replizieren Sie die Cosmos DB-Datenbank über zwei oder mehr Regionen hinweg.</span><span class="sxs-lookup"><span data-stu-id="82dfb-236">Replicate the Cosmos DB database across two or more regions.</span></span> <span data-ttu-id="82dfb-237">Alle Replikate können gelesen werden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-237">All replicas are readable.</span></span> <span data-ttu-id="82dfb-238">Geben Sie den Parameter `PreferredLocations` mithilfe des Client-SDKs an.</span><span class="sxs-lookup"><span data-stu-id="82dfb-238">Using the client SDKs, specify the `PreferredLocations` parameter.</span></span> <span data-ttu-id="82dfb-239">Dies ist eine sortierte Liste von Azure-Regionen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-239">This is an ordered list of Azure regions.</span></span> <span data-ttu-id="82dfb-240">Alle Lesevorgänge werden an die erste verfügbare Region in der Liste gesendet.</span><span class="sxs-lookup"><span data-stu-id="82dfb-240">All reads will be sent to the first available region in the list.</span></span> <span data-ttu-id="82dfb-241">Wenn bei der Anforderung ein Fehler auftritt, versucht der Client die anderen Regionen in der Liste in der entsprechenden Reihenfolge.</span><span class="sxs-lookup"><span data-stu-id="82dfb-241">If the request fails, the client will try the other regions in the list, in order.</span></span> <span data-ttu-id="82dfb-242">Weitere Informationen finden Sie unter [Einrichten der globalen Verteilung von Azure Cosmos DB mithilfe der SQL-API][cosmosdb-multi-region].</span><span class="sxs-lookup"><span data-stu-id="82dfb-242">For more information, see [How to setup Azure Cosmos DB global distribution using the SQL API][cosmosdb-multi-region].</span></span>

<span data-ttu-id="82dfb-243">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-243">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-244">Protokollieren Sie alle Fehler auf der Clientseite.</span><span class="sxs-lookup"><span data-stu-id="82dfb-244">Log all errors on the client side.</span></span>

### <a name="writing-data-fails"></a><span data-ttu-id="82dfb-245">Beim Schreiben von Daten tritt ein Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="82dfb-245">Writing data fails.</span></span>

<span data-ttu-id="82dfb-246">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-246">**Detection**.</span></span> <span data-ttu-id="82dfb-247">Fangen Sie `System.Net.Http.HttpRequestException` oder `Microsoft.Azure.Documents.DocumentClientException` ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-247">Catch `System.Net.Http.HttpRequestException` or `Microsoft.Azure.Documents.DocumentClientException`.</span></span>

<span data-ttu-id="82dfb-248">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-248">**Recovery:**</span></span>

- <span data-ttu-id="82dfb-249">Das SDK führt bei Fehlversuchen automatisch Wiederholungsversuche durch.</span><span class="sxs-lookup"><span data-stu-id="82dfb-249">The SDK automatically retries failed attempts.</span></span> <span data-ttu-id="82dfb-250">Konfigurieren Sie zum Festlegen der Anzahl von Wiederholungsversuchen und der maximalen Wartezeit `ConnectionPolicy.RetryOptions`.</span><span class="sxs-lookup"><span data-stu-id="82dfb-250">To set the number of retries and the maximum wait time, configure `ConnectionPolicy.RetryOptions`.</span></span> <span data-ttu-id="82dfb-251">Ausnahmen, die vom Client ausgelöst werden, unterliegen entweder nicht der Wiederholungsrichtlinie oder sind keine vorübergehenden Fehler.</span><span class="sxs-lookup"><span data-stu-id="82dfb-251">Exceptions that the client raises are either beyond the retry policy or are not transient errors.</span></span>
- <span data-ttu-id="82dfb-252">Wenn Cosmos DB den Client einschränkt, wird ein HTTP 429-Fehler zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="82dfb-252">If Cosmos DB throttles the client, it returns an HTTP 429 error.</span></span> <span data-ttu-id="82dfb-253">Überprüfen Sie den Statuscode unter `DocumentClientException`.</span><span class="sxs-lookup"><span data-stu-id="82dfb-253">Check the status code in the `DocumentClientException`.</span></span> <span data-ttu-id="82dfb-254">Wenn Sie ständig den Fehler 429 erhalten, sollten Sie in Erwägung ziehen, den Durchsatzwert der Sammlung zu erhöhen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-254">If you are getting error 429 consistently, consider increasing the throughput value of the collection.</span></span>
- <span data-ttu-id="82dfb-255">Replizieren Sie die Cosmos DB-Datenbank über zwei oder mehr Regionen hinweg.</span><span class="sxs-lookup"><span data-stu-id="82dfb-255">Replicate the Cosmos DB database across two or more regions.</span></span> <span data-ttu-id="82dfb-256">Tritt bei der primären Region ein Fehler auf, wird eine andere Region für den Schreibvorgang höher gestuft.</span><span class="sxs-lookup"><span data-stu-id="82dfb-256">If the primary region fails, another region will be promoted to write.</span></span> <span data-ttu-id="82dfb-257">Sie können einen Failover auch manuell auslösen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-257">You can also trigger a failover manually.</span></span> <span data-ttu-id="82dfb-258">Das SDK führt die automatische Erkennung und das automatische Routing durch, sodass der Anwendungscode auch nach einem Failover weiterhin funktioniert.</span><span class="sxs-lookup"><span data-stu-id="82dfb-258">The SDK does automatic discovery and routing, so application code continues to work after a failover.</span></span> <span data-ttu-id="82dfb-259">Während der Failoverperiode (normalerweise Minuten) weisen Schreibvorgänge eine höhere Wartezeit auf, da das SDK die neue Schreibregion sucht.</span><span class="sxs-lookup"><span data-stu-id="82dfb-259">During the failover period (typically minutes), write operations will have higher latency, as the SDK finds the new write region.</span></span> <span data-ttu-id="82dfb-260">Weitere Informationen finden Sie unter [Einrichten der globalen Verteilung von Azure Cosmos DB mithilfe der SQL-API][cosmosdb-multi-region].</span><span class="sxs-lookup"><span data-stu-id="82dfb-260">For more information, see [How to setup Azure Cosmos DB global distribution using the SQL API][cosmosdb-multi-region].</span></span>
- <span data-ttu-id="82dfb-261">Als Fallback wird das Dokument in eine Sicherungswarteschlange gestellt und die Warteschlange später verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="82dfb-261">As a fallback, persist the document to a backup queue, and process the queue later.</span></span>

<span data-ttu-id="82dfb-262">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-262">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-263">Protokollieren Sie alle Fehler auf der Clientseite.</span><span class="sxs-lookup"><span data-stu-id="82dfb-263">Log all errors on the client side.</span></span>

## <a name="elasticsearch"></a><span data-ttu-id="82dfb-264">Elasticsearch</span><span class="sxs-lookup"><span data-stu-id="82dfb-264">Elasticsearch</span></span>

### <a name="reading-data-from-elasticsearch-fails"></a><span data-ttu-id="82dfb-265">Beim Lesen von Daten aus Elasticsearch tritt ein Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="82dfb-265">Reading data from Elasticsearch fails.</span></span>

<span data-ttu-id="82dfb-266">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-266">**Detection**.</span></span> <span data-ttu-id="82dfb-267">Fangen Sie die entsprechende Ausnahme für den verwendeten [Elasticsearch-Client][elasticsearch-client] ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-267">Catch the appropriate exception for the particular [Elasticsearch client][elasticsearch-client] being used.</span></span>

<span data-ttu-id="82dfb-268">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-268">**Recovery:**</span></span>

- <span data-ttu-id="82dfb-269">Verwenden Sie einen Wiederholungsmechanismus.</span><span class="sxs-lookup"><span data-stu-id="82dfb-269">Use a retry mechanism.</span></span> <span data-ttu-id="82dfb-270">Jeder Client verfügt über eigene Wiederholungsrichtlinien.</span><span class="sxs-lookup"><span data-stu-id="82dfb-270">Each client has its own retry policies.</span></span>
- <span data-ttu-id="82dfb-271">Stellen Sie mehrere Elasticsearch-Knoten bereit, und verwenden Sie die Replikation für die Hochverfügbarkeit.</span><span class="sxs-lookup"><span data-stu-id="82dfb-271">Deploy multiple Elasticsearch nodes and use replication for high availability.</span></span>

<span data-ttu-id="82dfb-272">Weitere Informationen finden Sie unter [Ausführen von Elasticsearch für Azure][elasticsearch-azure].</span><span class="sxs-lookup"><span data-stu-id="82dfb-272">For more information, see [Running Elasticsearch on Azure][elasticsearch-azure].</span></span>

<span data-ttu-id="82dfb-273">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-273">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-274">Sie können Überwachungstools für Elasticsearch verwenden oder alle Fehler auf der Clientseite mit der Nutzlast protokollieren.</span><span class="sxs-lookup"><span data-stu-id="82dfb-274">You can use monitoring tools for Elasticsearch, or log all errors on the client side with the payload.</span></span> <span data-ttu-id="82dfb-275">Weitere Informationen finden Sie im Abschnitt „Überwachung“ in [Ausführen von Elasticsearch für Azure][elasticsearch-azure].</span><span class="sxs-lookup"><span data-stu-id="82dfb-275">See the 'Monitoring' section in [Running Elasticsearch on Azure][elasticsearch-azure].</span></span>

### <a name="writing-data-to-elasticsearch-fails"></a><span data-ttu-id="82dfb-276">Beim Schreiben von Daten in Elasticsearch tritt ein Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="82dfb-276">Writing data to Elasticsearch fails.</span></span>

<span data-ttu-id="82dfb-277">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-277">**Detection**.</span></span> <span data-ttu-id="82dfb-278">Fangen Sie die entsprechende Ausnahme für den verwendeten [Elasticsearch-Client][elasticsearch-client] ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-278">Catch the appropriate exception for the particular [Elasticsearch client][elasticsearch-client] being used.</span></span>

<span data-ttu-id="82dfb-279">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-279">**Recovery:**</span></span>

- <span data-ttu-id="82dfb-280">Verwenden Sie einen Wiederholungsmechanismus.</span><span class="sxs-lookup"><span data-stu-id="82dfb-280">Use a retry mechanism.</span></span> <span data-ttu-id="82dfb-281">Jeder Client verfügt über eigene Wiederholungsrichtlinien.</span><span class="sxs-lookup"><span data-stu-id="82dfb-281">Each client has its own retry policies.</span></span>
- <span data-ttu-id="82dfb-282">Wenn die Anwendung eine reduzierte Konsistenzebene tolerieren kann, sollten Sie das Schreiben mit der `write_consistency`-Einstellung `quorum` in Betracht ziehen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-282">If the application can tolerate a reduced consistency level, consider writing with `write_consistency` setting of `quorum`.</span></span>

<span data-ttu-id="82dfb-283">Weitere Informationen finden Sie unter [Ausführen von Elasticsearch für Azure][elasticsearch-azure].</span><span class="sxs-lookup"><span data-stu-id="82dfb-283">For more information, see [Running Elasticsearch on Azure][elasticsearch-azure].</span></span>

<span data-ttu-id="82dfb-284">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-284">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-285">Sie können Überwachungstools für Elasticsearch verwenden oder alle Fehler auf der Clientseite mit der Nutzlast protokollieren.</span><span class="sxs-lookup"><span data-stu-id="82dfb-285">You can use monitoring tools for Elasticsearch, or log all errors on the client side with the payload.</span></span> <span data-ttu-id="82dfb-286">Weitere Informationen finden Sie im Abschnitt „Überwachung“ in [Ausführen von Elasticsearch für Azure][elasticsearch-azure].</span><span class="sxs-lookup"><span data-stu-id="82dfb-286">See the 'Monitoring' section in [Running Elasticsearch on Azure][elasticsearch-azure].</span></span>

## <a name="queue-storage"></a><span data-ttu-id="82dfb-287">Queue Storage</span><span class="sxs-lookup"><span data-stu-id="82dfb-287">Queue storage</span></span>

### <a name="writing-a-message-to-azure-queue-storage-fails-consistently"></a><span data-ttu-id="82dfb-288">Beim Schreiben einer Nachricht in Azure Queue Storage tritt fortlaufend ein Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="82dfb-288">Writing a message to Azure Queue storage fails consistently.</span></span>

<span data-ttu-id="82dfb-289">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-289">**Detection**.</span></span> <span data-ttu-id="82dfb-290">Nach *N* Wiederholungsversuchen tritt weiterhin ein Fehler beim Schreibvorgang auf.</span><span class="sxs-lookup"><span data-stu-id="82dfb-290">After *N* retry attempts, the write operation still fails.</span></span>

<span data-ttu-id="82dfb-291">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-291">**Recovery:**</span></span>

- <span data-ttu-id="82dfb-292">Speichern Sie die Daten in einem lokalen Cache, und leiten Sie die Schreibvorgänge zu einem späteren Zeitpunkt, wenn der Dienst verfügbar ist, an den Speicher weiter.</span><span class="sxs-lookup"><span data-stu-id="82dfb-292">Store the data in a local cache, and forward the writes to storage later, when the service becomes available.</span></span>
- <span data-ttu-id="82dfb-293">Erstellen Sie eine sekundäre Warteschlange, und schreiben Sie in diese Warteschlange, wenn die primäre Warteschlange nicht verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="82dfb-293">Create a secondary queue, and write to that queue if the primary queue is unavailable.</span></span>

<span data-ttu-id="82dfb-294">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-294">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-295">Verwenden Sie die [Speichermetriken][storage-metrics].</span><span class="sxs-lookup"><span data-stu-id="82dfb-295">Use [storage metrics][storage-metrics].</span></span>

### <a name="the-application-cannot-process-a-particular-message-from-the-queue"></a><span data-ttu-id="82dfb-296">Die Anwendung kann eine bestimmte Nachricht aus der Warteschlange nicht verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-296">The application cannot process a particular message from the queue.</span></span>

<span data-ttu-id="82dfb-297">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-297">**Detection**.</span></span> <span data-ttu-id="82dfb-298">Dies ist anwendungsspezifisch.</span><span class="sxs-lookup"><span data-stu-id="82dfb-298">Application specific.</span></span> <span data-ttu-id="82dfb-299">Die Nachricht enthält z. B. ungültige Daten oder bei der Geschäftslogik ist ein Fehler aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-299">For example, the message contains invalid data, or the business logic fails for some reason.</span></span>

<span data-ttu-id="82dfb-300">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-300">**Recovery:**</span></span>

<span data-ttu-id="82dfb-301">Verschieben Sie die Nachricht in eine separate Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="82dfb-301">Move the message to a separate queue.</span></span> <span data-ttu-id="82dfb-302">Führen Sie einen separaten Prozess aus, um die Nachrichten in der Warteschlange zu untersuchen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-302">Run a separate process to examine the messages in that queue.</span></span>

<span data-ttu-id="82dfb-303">Erwägen Sie die Verwendung von Azure Service Bus Messaging-Warteschlangen, die zu diesem Zweck eine [Warteschlange für unzustellbare Nachrichten][sb-dead-letter-queue] bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-303">Consider using Azure Service Bus Messaging queues, which provides a [dead-letter queue][sb-dead-letter-queue] functionality for this purpose.</span></span>

> [!NOTE]
> <span data-ttu-id="82dfb-304">Wenn Sie Storage-Warteschlangen mit WebJobs verwenden, stellt das WebJobs SDK eine integrierte Behandlung von nicht verarbeiteten Nachrichten bereit.</span><span class="sxs-lookup"><span data-stu-id="82dfb-304">If you are using Storage queues with WebJobs, the WebJobs SDK provides built-in poison message handling.</span></span> <span data-ttu-id="82dfb-305">Weitere Informationen finden Sie unter [Verwenden von Azure Queue Storage mit dem Webaufträge-SDK][sb-poison-message].</span><span class="sxs-lookup"><span data-stu-id="82dfb-305">See [How to use Azure queue storage with the WebJobs SDK][sb-poison-message].</span></span>

<span data-ttu-id="82dfb-306">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-306">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-307">Verwenden Sie die Anwendungsprotokollierung.</span><span class="sxs-lookup"><span data-stu-id="82dfb-307">Use application logging.</span></span>

## <a name="redis-cache"></a><span data-ttu-id="82dfb-308">Redis Cache</span><span class="sxs-lookup"><span data-stu-id="82dfb-308">Redis Cache</span></span>

### <a name="reading-from-the-cache-fails"></a><span data-ttu-id="82dfb-309">Beim Lesen aus dem Cache tritt ein Fehler aus.</span><span class="sxs-lookup"><span data-stu-id="82dfb-309">Reading from the cache fails.</span></span>

<span data-ttu-id="82dfb-310">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-310">**Detection**.</span></span> <span data-ttu-id="82dfb-311">Fangen Sie `StackExchange.Redis.RedisConnectionException` ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-311">Catch `StackExchange.Redis.RedisConnectionException`.</span></span>

<span data-ttu-id="82dfb-312">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-312">**Recovery:**</span></span>

1. <span data-ttu-id="82dfb-313">Wiederholen Sie den Vorgang bei vorübergehenden Fehlern.</span><span class="sxs-lookup"><span data-stu-id="82dfb-313">Retry on transient failures.</span></span> <span data-ttu-id="82dfb-314">Azure Redis Cache unterstützt die integrierte Wiederholung. Weitere Informationen finden Sie unter [Redis Cache-Wiederholungsrichtlinien][redis-retry].</span><span class="sxs-lookup"><span data-stu-id="82dfb-314">Azure Redis cache supports built-in retry through See [Redis Cache retry guidelines][redis-retry].</span></span>
2. <span data-ttu-id="82dfb-315">Behandeln Sie nicht vorübergehende Fehler als Cachefehler, und führen Sie einen Fallback auf die ursprüngliche Datenquelle aus.</span><span class="sxs-lookup"><span data-stu-id="82dfb-315">Treat non-transient failures as a cache miss, and fall back to the original data source.</span></span>

<span data-ttu-id="82dfb-316">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-316">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-317">Verwenden Sie die [Redis Cache-Diagnose][redis-monitor].</span><span class="sxs-lookup"><span data-stu-id="82dfb-317">Use [Redis Cache diagnostics][redis-monitor].</span></span>

### <a name="writing-to-the-cache-fails"></a><span data-ttu-id="82dfb-318">Beim Schreiben in den Cache tritt ein Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="82dfb-318">Writing to the cache fails.</span></span>

<span data-ttu-id="82dfb-319">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-319">**Detection**.</span></span> <span data-ttu-id="82dfb-320">Fangen Sie `StackExchange.Redis.RedisConnectionException` ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-320">Catch `StackExchange.Redis.RedisConnectionException`.</span></span>

<span data-ttu-id="82dfb-321">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-321">**Recovery:**</span></span>

1. <span data-ttu-id="82dfb-322">Wiederholen Sie den Vorgang bei vorübergehenden Fehlern.</span><span class="sxs-lookup"><span data-stu-id="82dfb-322">Retry on transient failures.</span></span> <span data-ttu-id="82dfb-323">Azure Redis Cache unterstützt die integrierte Wiederholung. Weitere Informationen finden Sie unter [Redis Cache-Wiederholungsrichtlinien][redis-retry].</span><span class="sxs-lookup"><span data-stu-id="82dfb-323">Azure Redis cache supports built-in retry through See [Redis Cache retry guidelines][redis-retry].</span></span>
2. <span data-ttu-id="82dfb-324">Wenn der Fehler nicht vorübergehend ist, ignorieren Sie ihn und lassen andere Transaktionen später in den Cache schreiben.</span><span class="sxs-lookup"><span data-stu-id="82dfb-324">If the error is non-transient, ignore it and let other transactions write to the cache later.</span></span>

<span data-ttu-id="82dfb-325">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-325">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-326">Verwenden Sie die [Redis Cache-Diagnose][redis-monitor].</span><span class="sxs-lookup"><span data-stu-id="82dfb-326">Use [Redis Cache diagnostics][redis-monitor].</span></span>

## <a name="sql-database"></a><span data-ttu-id="82dfb-327">SQL-Datenbank</span><span class="sxs-lookup"><span data-stu-id="82dfb-327">SQL Database</span></span>

### <a name="cannot-connect-to-the-database-in-the-primary-region"></a><span data-ttu-id="82dfb-328">Es kann keine Verbindung zur Datenbank in der primären Region hergestellt werden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-328">Cannot connect to the database in the primary region.</span></span>

<span data-ttu-id="82dfb-329">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-329">**Detection**.</span></span> <span data-ttu-id="82dfb-330">Beim Herstellen der Verbindung ist ein Fehler aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-330">Connection fails.</span></span>

<span data-ttu-id="82dfb-331">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-331">**Recovery:**</span></span>

<span data-ttu-id="82dfb-332">Voraussetzung: Die Datenbank muss für die aktive Georeplikation konfiguriert sein.</span><span class="sxs-lookup"><span data-stu-id="82dfb-332">Prerequisite: The database must be configured for active geo-replication.</span></span> <span data-ttu-id="82dfb-333">Weitere Informationen finden Sie unter [Aktive Georeplikation in Azure SQL-Datenbank][sql-db-replication].</span><span class="sxs-lookup"><span data-stu-id="82dfb-333">See [SQL Database Active Geo-Replication][sql-db-replication].</span></span>

- <span data-ttu-id="82dfb-334">Bei Abfragen lesen Sie aus einem sekundären Replikat.</span><span class="sxs-lookup"><span data-stu-id="82dfb-334">For queries, read from a secondary replica.</span></span>
- <span data-ttu-id="82dfb-335">Für Einfüge- und Aktualisierungsvorgänge führen Sie einen manuellen Failover zu einem sekundären Replikat durch.</span><span class="sxs-lookup"><span data-stu-id="82dfb-335">For inserts and updates, manually fail over to a secondary replica.</span></span> <span data-ttu-id="82dfb-336">Weitere Informationen finden Sie unter [Initiieren eines geplanten oder ungeplanten Failovers für die Azure SQL-Datenbank][sql-db-failover].</span><span class="sxs-lookup"><span data-stu-id="82dfb-336">See [Initiate a planned or unplanned failover for Azure SQL Database][sql-db-failover].</span></span>

<span data-ttu-id="82dfb-337">Das Replikat verwendet eine andere Verbindungszeichenfolge, sodass Sie die Verbindungszeichenfolge in Ihrer Anwendung aktualisieren müssen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-337">The replica uses a different connection string, so you will need to update the connection string in your application.</span></span>

### <a name="client-runs-out-of-connections-in-the-connection-pool"></a><span data-ttu-id="82dfb-338">Die Verbindungen im Verbindungspool gehen für den Client zur Neige.</span><span class="sxs-lookup"><span data-stu-id="82dfb-338">Client runs out of connections in the connection pool.</span></span>

<span data-ttu-id="82dfb-339">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-339">**Detection**.</span></span> <span data-ttu-id="82dfb-340">Fangen Sie `System.InvalidOperationException`-Fehler ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-340">Catch `System.InvalidOperationException` errors.</span></span>

<span data-ttu-id="82dfb-341">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-341">**Recovery:**</span></span>

- <span data-ttu-id="82dfb-342">Wiederholen Sie den Vorgang.</span><span class="sxs-lookup"><span data-stu-id="82dfb-342">Retry the operation.</span></span>
- <span data-ttu-id="82dfb-343">Isolieren Sie als vorbeugende Maßnahme die Verbindungspools für jeden Anwendungsfall, sodass ein Anwendungsfall nicht alle Verbindungen kontrollieren kann.</span><span class="sxs-lookup"><span data-stu-id="82dfb-343">As a mitigation plan, isolate the connection pools for each use case, so that one use case can't dominate all the connections.</span></span>
- <span data-ttu-id="82dfb-344">Erhöhen Sie die maximale Anzahl von Verbindungspools.</span><span class="sxs-lookup"><span data-stu-id="82dfb-344">Increase the maximum connection pools.</span></span>

<span data-ttu-id="82dfb-345">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-345">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-346">Anwendungsprotokolle.</span><span class="sxs-lookup"><span data-stu-id="82dfb-346">Application logs.</span></span>

### <a name="database-connection-limit-is-reached"></a><span data-ttu-id="82dfb-347">Der Grenzwert für Datenbankverbindungen wurde erreicht.</span><span class="sxs-lookup"><span data-stu-id="82dfb-347">Database connection limit is reached.</span></span>

<span data-ttu-id="82dfb-348">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-348">**Detection**.</span></span> <span data-ttu-id="82dfb-349">Azure SQL-Datenbank begrenzt die Anzahl der gleichzeitigen Worker, Anmeldungen und Sitzungen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-349">Azure SQL Database limits the number of concurrent workers, logins, and sessions.</span></span> <span data-ttu-id="82dfb-350">Die Grenzwerte hängen von der Dienstschicht ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-350">The limits depend on the service tier.</span></span> <span data-ttu-id="82dfb-351">Weitere Informationen finden Sie unter [Ressourceneinschränkungen für Azure SQL-Datenbank][sql-db-limits].</span><span class="sxs-lookup"><span data-stu-id="82dfb-351">For more information, see [Azure SQL Database resource limits][sql-db-limits].</span></span>

<span data-ttu-id="82dfb-352">Um diese Fehler zu erkennen, fangen Sie `System.Data.SqlClient.SqlException` ab, und überprüfen Sie den Wert von `SqlException.Number` für den SQL-Fehlercode.</span><span class="sxs-lookup"><span data-stu-id="82dfb-352">To detect these errors, catch `System.Data.SqlClient.SqlException` and check the value of `SqlException.Number` for the SQL error code.</span></span> <span data-ttu-id="82dfb-353">Eine Liste mit relevanten Fehlercodes finden Sie unter [SQL-Fehlercodes für SQL-Datenbank-Clientanwendungen: Datenbankverbindungsfehler und andere Probleme][sql-db-errors].</span><span class="sxs-lookup"><span data-stu-id="82dfb-353">For a list of relevant error codes, see [SQL error codes for SQL Database client applications: Database connection error and other issues][sql-db-errors].</span></span>

<span data-ttu-id="82dfb-354">**Wiederherstellen**.</span><span class="sxs-lookup"><span data-stu-id="82dfb-354">**Recovery**.</span></span> <span data-ttu-id="82dfb-355">Diese Fehler werden als vorübergehend betrachtet, sodass ein erneuter Versuch das Problem beheben kann.</span><span class="sxs-lookup"><span data-stu-id="82dfb-355">These errors are considered transient, so retrying may resolve the issue.</span></span> <span data-ttu-id="82dfb-356">Wenn Sie diese Fehler immer wieder feststellen, sollten Sie eine Skalierung der Datenbank in Betracht ziehen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-356">If you consistently hit these errors, consider scaling the database.</span></span>

<span data-ttu-id="82dfb-357">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-357">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-358">Die [sys.event_log][sys.event_log]-Abfrage gibt erfolgreiche Datenbankverbindungen, Verbindungsfehler und Deadlocks zurück.</span><span class="sxs-lookup"><span data-stu-id="82dfb-358">- The [sys.event_log][sys.event_log] query returns successful database connections, connection failures, and deadlocks.</span></span>

- <span data-ttu-id="82dfb-359">Erstellen Sie eine [Warnungsregel][azure-alerts] für fehlerhafte Verbindungen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-359">Create an [alert rule][azure-alerts] for failed connections.</span></span>
- <span data-ttu-id="82dfb-360">Aktivieren Sie die [SQL-Datenbanküberwachung][sql-db-audit], und prüfen Sie auf fehlerhafte Anmeldungen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-360">Enable [SQL Database auditing][sql-db-audit] and check for failed logins.</span></span>

## <a name="service-bus-messaging"></a><span data-ttu-id="82dfb-361">Service Bus Messaging</span><span class="sxs-lookup"><span data-stu-id="82dfb-361">Service Bus Messaging</span></span>

### <a name="reading-a-message-from-a-service-bus-queue-fails"></a><span data-ttu-id="82dfb-362">Beim Lesen einer Nachricht aus einer Service Bus-Warteschlange ist ein Fehler aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-362">Reading a message from a Service Bus queue fails.</span></span>

<span data-ttu-id="82dfb-363">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-363">**Detection**.</span></span> <span data-ttu-id="82dfb-364">Fangen Sie vom Client-SDK stammende Ausnahmen ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-364">Catch exceptions from the client SDK.</span></span> <span data-ttu-id="82dfb-365">Die Basisklasse für Service Bus-Ausnahmen ist [MessagingException][sb-messagingexception-class].</span><span class="sxs-lookup"><span data-stu-id="82dfb-365">The base class for Service Bus exceptions is [MessagingException][sb-messagingexception-class].</span></span> <span data-ttu-id="82dfb-366">Wenn es sich um einen vorübergehenden Fehler handelt, ist die `IsTransient`-Eigenschaft „true“.</span><span class="sxs-lookup"><span data-stu-id="82dfb-366">If the error is transient, the `IsTransient` property is true.</span></span>

<span data-ttu-id="82dfb-367">Weitere Informationen finden Sie unter [Service Bus-Messagingausnahmen][sb-messaging-exceptions].</span><span class="sxs-lookup"><span data-stu-id="82dfb-367">For more information, see [Service Bus messaging exceptions][sb-messaging-exceptions].</span></span>

<span data-ttu-id="82dfb-368">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-368">**Recovery:**</span></span>

1. <span data-ttu-id="82dfb-369">Wiederholen Sie den Vorgang bei vorübergehenden Fehlern.</span><span class="sxs-lookup"><span data-stu-id="82dfb-369">Retry on transient failures.</span></span> <span data-ttu-id="82dfb-370">Weitere Informationen finden Sie unter [Service Bus-Wiederholungsrichtlinien][sb-retry].</span><span class="sxs-lookup"><span data-stu-id="82dfb-370">See [Service Bus retry guidelines][sb-retry].</span></span>
2. <span data-ttu-id="82dfb-371">Nachrichten, die keinem Empfänger übermittelt werden können, befinden sich in einer *Warteschlange für unzustellbare Nachrichten*.</span><span class="sxs-lookup"><span data-stu-id="82dfb-371">Messages that cannot be delivered to any receiver are placed in a *dead-letter queue*.</span></span> <span data-ttu-id="82dfb-372">Verwenden Sie diese Warteschlange, um zu prüfen, welche Nachrichten nicht empfangen werden konnten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-372">Use this queue to see which messages could not be received.</span></span> <span data-ttu-id="82dfb-373">Es erfolgt keine automatische Bereinigung der Warteschlange für unzustellbare Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-373">There is no automatic cleanup of the dead-letter queue.</span></span> <span data-ttu-id="82dfb-374">Nachrichten verbleiben dort, bis Sie sie explizit abrufen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-374">Messages remain there until you explicitly retrieve them.</span></span> <span data-ttu-id="82dfb-375">Weitere Informationen finden Sie unter [Übersicht über Service Bus-Warteschlangen für unzustellbare Nachrichten][sb-dead-letter-queue].</span><span class="sxs-lookup"><span data-stu-id="82dfb-375">See [Overview of Service Bus dead-letter queues][sb-dead-letter-queue].</span></span>

### <a name="writing-a-message-to-a-service-bus-queue-fails"></a><span data-ttu-id="82dfb-376">Beim Schreiben einer Nachricht in eine Service Bus-Warteschlange ist ein Fehler aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-376">Writing a message to a Service Bus queue fails.</span></span>

<span data-ttu-id="82dfb-377">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-377">**Detection**.</span></span> <span data-ttu-id="82dfb-378">Fangen Sie vom Client-SDK stammende Ausnahmen ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-378">Catch exceptions from the client SDK.</span></span> <span data-ttu-id="82dfb-379">Die Basisklasse für Service Bus-Ausnahmen ist [MessagingException][sb-messagingexception-class].</span><span class="sxs-lookup"><span data-stu-id="82dfb-379">The base class for Service Bus exceptions is [MessagingException][sb-messagingexception-class].</span></span> <span data-ttu-id="82dfb-380">Wenn es sich um einen vorübergehenden Fehler handelt, ist die `IsTransient`-Eigenschaft „true“.</span><span class="sxs-lookup"><span data-stu-id="82dfb-380">If the error is transient, the `IsTransient` property is true.</span></span>

<span data-ttu-id="82dfb-381">Weitere Informationen finden Sie unter [Service Bus-Messagingausnahmen][sb-messaging-exceptions].</span><span class="sxs-lookup"><span data-stu-id="82dfb-381">For more information, see [Service Bus messaging exceptions][sb-messaging-exceptions].</span></span>

<span data-ttu-id="82dfb-382">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-382">**Recovery:**</span></span>

1. <span data-ttu-id="82dfb-383">Der Service Bus-Client wiederholt den Versuch nach einem vorübergehenden Fehler automatisch.</span><span class="sxs-lookup"><span data-stu-id="82dfb-383">The Service Bus client automatically retries after transient errors.</span></span> <span data-ttu-id="82dfb-384">Standardmäßig wird ein exponentieller Backoff verwendet.</span><span class="sxs-lookup"><span data-stu-id="82dfb-384">By default, it uses exponential back-off.</span></span> <span data-ttu-id="82dfb-385">Nach der maximalen Anzahl der Wiederholungsversuche oder der maximalen Timeoutperiode löst der Client eine Ausnahme aus.</span><span class="sxs-lookup"><span data-stu-id="82dfb-385">After the maximum retry count or maximum timeout period, the client throws an exception.</span></span> <span data-ttu-id="82dfb-386">Weitere Informationen finden Sie unter [Service Bus-Wiederholungsrichtlinien][sb-retry].</span><span class="sxs-lookup"><span data-stu-id="82dfb-386">For more information, see [Service Bus retry guidelines][sb-retry].</span></span>
2. <span data-ttu-id="82dfb-387">Wenn das Warteschlangenkontingent überschritten wird, löst der Client [QuotaExceededException][QuotaExceededException] aus.</span><span class="sxs-lookup"><span data-stu-id="82dfb-387">If the queue quota is exceeded, the client throws [QuotaExceededException][QuotaExceededException].</span></span> <span data-ttu-id="82dfb-388">Weitere Details finden Sie in der Ausnahmemeldung.</span><span class="sxs-lookup"><span data-stu-id="82dfb-388">The exception message gives more details.</span></span> <span data-ttu-id="82dfb-389">Entfernen Sie einige Nachrichten aus der Warteschlange, bevor Sie den Versuch wiederholen, und ziehen Sie in Betracht, das Trennschalter-Muster zu verwenden, um weitere Wiederholungsversuche zu vermeiden, während das Kontingent überschritten wurde.</span><span class="sxs-lookup"><span data-stu-id="82dfb-389">Drain some messages from the queue before retrying, and consider using the Circuit Breaker pattern to avoid continued retries while the quota is exceeded.</span></span> <span data-ttu-id="82dfb-390">Stellen Sie darüber hinaus sicher, dass für die [BrokeredMessage.TimeToLive]-Eigenschaft kein zu hoher Wert festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="82dfb-390">Also, make sure the [BrokeredMessage.TimeToLive] property is not set too high.</span></span>
3. <span data-ttu-id="82dfb-391">Innerhalb einer Region kann die Resilienz mithilfe von [partitionierten Warteschlangen oder Themen][sb-partition] verbessert werden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-391">Within a region, resiliency can be improved by using [partitioned queues or topics][sb-partition].</span></span> <span data-ttu-id="82dfb-392">Eine nicht partitionierte Warteschlange bzw. ein Thema ist einem Nachrichtenspeicher zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-392">A non-partitioned queue or topic is assigned to one messaging store.</span></span> <span data-ttu-id="82dfb-393">Wenn dieser Nachrichtenspeicher nicht verfügbar ist, treten für alle Vorgänge der Warteschlange oder des Themas Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="82dfb-393">If this messaging store is unavailable, all operations on that queue or topic will fail.</span></span> <span data-ttu-id="82dfb-394">Eine partitionierte Warteschlange bzw. ein Thema ist über mehrere Nachrichtenspeicher hinweg partitioniert.</span><span class="sxs-lookup"><span data-stu-id="82dfb-394">A partitioned queue or topic is partitioned across multiple messaging stores.</span></span>
4. <span data-ttu-id="82dfb-395">Erstellen Sie zur zusätzlichen Resilienz zwei Service Bus-Namespaces in verschiedenen Regionen, und replizieren Sie die Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-395">For additional resiliency, create two Service Bus namespaces in different regions, and replicate the messages.</span></span> <span data-ttu-id="82dfb-396">Sie können entweder die aktive oder die passive Replikation verwenden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-396">You can use either active replication or passive replication.</span></span>

    - <span data-ttu-id="82dfb-397">Aktive Replikation: Der Client sendet alle Nachrichten an beide Warteschlangen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-397">Active replication: The client sends every message to both queues.</span></span> <span data-ttu-id="82dfb-398">Der Empfänger lauscht an beiden Warteschlangen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-398">The receiver listens on both queues.</span></span> <span data-ttu-id="82dfb-399">Kennzeichnen Sie Nachrichten mit einem eindeutigen Bezeichner, damit der Client doppelte Nachrichten verwerfen kann.</span><span class="sxs-lookup"><span data-stu-id="82dfb-399">Tag messages with a unique identifier, so the client can discard duplicate messages.</span></span>
    - <span data-ttu-id="82dfb-400">Passive Replikation: Der Client sendet die Nachricht an eine Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="82dfb-400">Passive replication: The client sends the message to one queue.</span></span> <span data-ttu-id="82dfb-401">Wenn ein Fehler aufgetreten ist, führt der Client einen Fallback zur anderen Warteschlange aus.</span><span class="sxs-lookup"><span data-stu-id="82dfb-401">If there is an error, the client falls back to the other queue.</span></span> <span data-ttu-id="82dfb-402">Der Empfänger lauscht an beiden Warteschlangen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-402">The receiver listens on both queues.</span></span> <span data-ttu-id="82dfb-403">Dieser Ansatz reduziert die Anzahl doppelter Nachrichten, die gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-403">This approach reduces the number of duplicate messages that are sent.</span></span> <span data-ttu-id="82dfb-404">Der Empfänger muss jedoch weiterhin doppelte Nachrichten verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-404">However, the receiver must still handle duplicate messages.</span></span>

    <span data-ttu-id="82dfb-405">Weitere Informationen finden Sie unter [GeoReplication-Beispiel][sb-georeplication-sample] und [Bewährte Methoden zum Schützen von Anwendungen vor Service Bus-Ausfällen und Notfällen](/azure/service-bus-messaging/service-bus-outages-disasters/).</span><span class="sxs-lookup"><span data-stu-id="82dfb-405">For more information, see [GeoReplication sample][sb-georeplication-sample] and [Best practices for insulating applications against Service Bus outages and disasters](/azure/service-bus-messaging/service-bus-outages-disasters/).</span></span>

### <a name="duplicate-message"></a><span data-ttu-id="82dfb-406">Doppelt vorhandene Nachricht.</span><span class="sxs-lookup"><span data-stu-id="82dfb-406">Duplicate message.</span></span>

<span data-ttu-id="82dfb-407">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-407">**Detection**.</span></span> <span data-ttu-id="82dfb-408">Überprüfen Sie die Eigenschaften `MessageId` und `DeliveryCount` der Nachricht.</span><span class="sxs-lookup"><span data-stu-id="82dfb-408">Examine the `MessageId` and `DeliveryCount` properties of the message.</span></span>

<span data-ttu-id="82dfb-409">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-409">**Recovery:**</span></span>

- <span data-ttu-id="82dfb-410">Gestalten Sie Ihre Verarbeitungsvorgänge für Nachrichten nach Möglichkeit idempotent.</span><span class="sxs-lookup"><span data-stu-id="82dfb-410">If possible, design your message processing operations to be idempotent.</span></span> <span data-ttu-id="82dfb-411">Andernfalls speichern Sie Nachrichten-IDs von bereits verarbeiteten Nachrichten, und überprüfen Sie die ID vor der Verarbeitung einer Nachricht.</span><span class="sxs-lookup"><span data-stu-id="82dfb-411">Otherwise, store message IDs of messages that are already processed, and check the ID before processing a message.</span></span>
- <span data-ttu-id="82dfb-412">Aktivieren Sie die Duplikaterkennung, indem Sie beim Erstellen der Warteschlange `RequiresDuplicateDetection` auf „true“ festlegen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-412">Enable duplicate detection, by creating the queue with `RequiresDuplicateDetection` set to true.</span></span> <span data-ttu-id="82dfb-413">Mit dieser Einstellung löscht Service Bus automatisch alle Nachrichten, die mit derselben `MessageId` wie eine vorherige Nachricht gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-413">With this setting, Service Bus automatically deletes any message that is sent with the same `MessageId` as a previous message.</span></span>  <span data-ttu-id="82dfb-414">Beachten Sie Folgendes:</span><span class="sxs-lookup"><span data-stu-id="82dfb-414">Note the following:</span></span>

  - <span data-ttu-id="82dfb-415">Diese Einstellung verhindert, dass doppelte Nachrichten in die Warteschlange gestellt werden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-415">This setting prevents duplicate messages from being put into the queue.</span></span> <span data-ttu-id="82dfb-416">Sie hindert einen Empfänger nicht daran, dieselbe Nachricht mehrmals zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-416">It doesn't prevent a receiver from processing the same message more than once.</span></span>
  - <span data-ttu-id="82dfb-417">Die Duplikaterkennung verfügt über ein Zeitfenster.</span><span class="sxs-lookup"><span data-stu-id="82dfb-417">Duplicate detection has a time window.</span></span> <span data-ttu-id="82dfb-418">Wenn dieses Zeitfenster beim Senden eines Duplikats überschritten wird, kann das Duplikat nicht erkannt werden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-418">If a duplicate is sent beyond this window, it won't be detected.</span></span>

<span data-ttu-id="82dfb-419">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-419">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-420">Protokollieren Sie doppelte Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-420">Log duplicated messages.</span></span>

### <a name="the-application-cant-process-a-particular-message-from-the-queue"></a><span data-ttu-id="82dfb-421">Die Anwendung kann eine bestimmte Nachricht aus der Warteschlange nicht verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-421">The application can't process a particular message from the queue.</span></span>

<span data-ttu-id="82dfb-422">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-422">**Detection**.</span></span> <span data-ttu-id="82dfb-423">Dies ist anwendungsspezifisch.</span><span class="sxs-lookup"><span data-stu-id="82dfb-423">Application specific.</span></span> <span data-ttu-id="82dfb-424">Die Nachricht enthält z. B. ungültige Daten oder bei der Geschäftslogik ist ein Fehler aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-424">For example, the message contains invalid data, or the business logic fails for some reason.</span></span>

<span data-ttu-id="82dfb-425">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-425">**Recovery:**</span></span>

<span data-ttu-id="82dfb-426">Zwei Fehlermodi müssen berücksichtigt werden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-426">There are two failure modes to consider.</span></span>

- <span data-ttu-id="82dfb-427">Der Empfänger erkennt den Fehler.</span><span class="sxs-lookup"><span data-stu-id="82dfb-427">The receiver detects the failure.</span></span> <span data-ttu-id="82dfb-428">In diesem Fall verschieben Sie die Nachricht in die Warteschlange für unzustellbare Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-428">In this case, move the message to the dead-letter queue.</span></span> <span data-ttu-id="82dfb-429">Führen Sie später einen separaten Prozess aus, um die Nachrichten in der Warteschlange für unzustellbare Nachrichten zu untersuchen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-429">Later, run a separate process to examine the messages in the dead-letter queue.</span></span>
- <span data-ttu-id="82dfb-430">Beim Empfänger tritt während der Verarbeitung der Nachricht ein Fehler auf, z. B. ein Ausnahmefehler.</span><span class="sxs-lookup"><span data-stu-id="82dfb-430">The receiver fails in the middle of processing the message &mdash; for example, due to an unhandled exception.</span></span> <span data-ttu-id="82dfb-431">Verwenden Sie den Modus `PeekLock`, um diesen Fall zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="82dfb-431">To handle this case, use `PeekLock` mode.</span></span> <span data-ttu-id="82dfb-432">Wenn in diesem Modus die Sperre abläuft, wird die Nachricht für andere Empfänger verfügbar.</span><span class="sxs-lookup"><span data-stu-id="82dfb-432">In this mode, if the lock expires, the message becomes available to other receivers.</span></span> <span data-ttu-id="82dfb-433">Wenn die Nachricht die maximale Anzahl der Zustellungen oder die Gültigkeitsdauer überschreitet, wird die Nachricht automatisch in die Warteschlange für unzustellbare Nachrichten verschoben.</span><span class="sxs-lookup"><span data-stu-id="82dfb-433">If the message exceeds the maximum delivery count or the time-to-live, the message is automatically moved to the dead-letter queue.</span></span>

<span data-ttu-id="82dfb-434">Weitere Informationen finden Sie unter [Übersicht über Service Bus-Warteschlangen für unzustellbare Nachrichten][sb-dead-letter-queue].</span><span class="sxs-lookup"><span data-stu-id="82dfb-434">For more information, see [Overview of Service Bus dead-letter queues][sb-dead-letter-queue].</span></span>

<span data-ttu-id="82dfb-435">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-435">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-436">Sobald die Anwendung eine Nachricht in die Warteschlange für unzustellbare Nachrichten verschiebt, schreiben Sie ein Ereignis in die Anwendungsprotokolle.</span><span class="sxs-lookup"><span data-stu-id="82dfb-436">Whenever the application moves a message to the dead-letter queue, write an event to the application logs.</span></span>

## <a name="service-fabric"></a><span data-ttu-id="82dfb-437">Service Fabric</span><span class="sxs-lookup"><span data-stu-id="82dfb-437">Service Fabric</span></span>

### <a name="a-request-to-a-service-fails"></a><span data-ttu-id="82dfb-438">Bei der Anforderung eines Diensts ist ein Fehler aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-438">A request to a service fails.</span></span>

<span data-ttu-id="82dfb-439">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-439">**Detection**.</span></span> <span data-ttu-id="82dfb-440">Der Dienst gibt einen Fehler zurück.</span><span class="sxs-lookup"><span data-stu-id="82dfb-440">The service returns an error.</span></span>

<span data-ttu-id="82dfb-441">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-441">**Recovery:**</span></span>

- <span data-ttu-id="82dfb-442">Suchen Sie erneut einen Proxy (`ServiceProxy` oder `ActorProxy`), und rufen Sie die Dienst-/Actor-Methode erneut auf.</span><span class="sxs-lookup"><span data-stu-id="82dfb-442">Locate a proxy again (`ServiceProxy` or `ActorProxy`) and call the service/actor method again.</span></span>
- <span data-ttu-id="82dfb-443">**Zustandsbehafteter Dienst**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-443">**Stateful service**.</span></span> <span data-ttu-id="82dfb-444">Umschließen Sie zuverlässige Sammlungen in einer Transaktion.</span><span class="sxs-lookup"><span data-stu-id="82dfb-444">Wrap operations on reliable collections in a transaction.</span></span> <span data-ttu-id="82dfb-445">Wenn ein Fehler aufgetreten ist, wird für die Transaktion ein Rollback ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="82dfb-445">If there is an error, the transaction will be rolled back.</span></span> <span data-ttu-id="82dfb-446">Die Anforderung wird erneut verarbeitet, wenn sie per Pullvorgang aus einer Warteschlange abgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="82dfb-446">The request, if pulled from a queue, will be processed again.</span></span>
- <span data-ttu-id="82dfb-447">**Zustandsloser Dienst**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-447">**Stateless service**.</span></span> <span data-ttu-id="82dfb-448">Wenn der Dienst Daten in einem externen Speicher speichert, müssen alle Vorgänge idempotent sein.</span><span class="sxs-lookup"><span data-stu-id="82dfb-448">If the service persists data to an external store, all operations need to be idempotent.</span></span>

<span data-ttu-id="82dfb-449">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-449">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-450">Anwendungsprotokoll</span><span class="sxs-lookup"><span data-stu-id="82dfb-450">Application log</span></span>

### <a name="service-fabric-node-is-shut-down"></a><span data-ttu-id="82dfb-451">Der Service Fabric-Knoten wird heruntergefahren.</span><span class="sxs-lookup"><span data-stu-id="82dfb-451">Service Fabric node is shut down.</span></span>

<span data-ttu-id="82dfb-452">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-452">**Detection**.</span></span> <span data-ttu-id="82dfb-453">Es wird ein Abbruchtoken an die `RunAsync`-Methode des Diensts übergeben.</span><span class="sxs-lookup"><span data-stu-id="82dfb-453">A cancellation token is passed to the service's `RunAsync` method.</span></span> <span data-ttu-id="82dfb-454">Service Fabric bricht die Aufgabe vor dem Herunterfahren des Knotens ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-454">Service Fabric cancels the task before shutting down the node.</span></span>

<span data-ttu-id="82dfb-455">**Wiederherstellen**.</span><span class="sxs-lookup"><span data-stu-id="82dfb-455">**Recovery**.</span></span> <span data-ttu-id="82dfb-456">Verwenden Sie das Abbruchtoken, um das Herunterfahren zu erkennen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-456">Use the cancellation token to detect shutdown.</span></span> <span data-ttu-id="82dfb-457">Wenn der Abbruch von Service Fabric angefordert wird, beenden Sie sämtliche Arbeit und dann `RunAsync` so schnell wie möglich.</span><span class="sxs-lookup"><span data-stu-id="82dfb-457">When Service Fabric requests cancellation, finish any work and exit `RunAsync` as quickly as possible.</span></span>

<span data-ttu-id="82dfb-458">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-458">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-459">Anwendungsprotokolle</span><span class="sxs-lookup"><span data-stu-id="82dfb-459">Application logs</span></span>

## <a name="storage"></a><span data-ttu-id="82dfb-460">Storage</span><span class="sxs-lookup"><span data-stu-id="82dfb-460">Storage</span></span>

### <a name="writing-data-to-azure-storage-fails"></a><span data-ttu-id="82dfb-461">Beim Schreiben von Daten in Azure Storage ist ein Fehler aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-461">Writing data to Azure Storage fails</span></span>

<span data-ttu-id="82dfb-462">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-462">**Detection**.</span></span> <span data-ttu-id="82dfb-463">Der Client erhält beim Schreiben entsprechende Fehlermeldungen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-463">The client receives errors when writing.</span></span>

<span data-ttu-id="82dfb-464">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-464">**Recovery:**</span></span>

1. <span data-ttu-id="82dfb-465">Versuchen Sie den Vorgang erneut, um die Wiederherstellung nach vorübergehenden Fehlern zu erreichen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-465">Retry the operation, to recover from transient failures.</span></span> <span data-ttu-id="82dfb-466">Die [Wiederholungsrichtlinie][Storage.RetryPolicies] im Client-SDK verarbeitet dies automatisch.</span><span class="sxs-lookup"><span data-stu-id="82dfb-466">The [retry policy][Storage.RetryPolicies] in the client SDK handles this automatically.</span></span>
2. <span data-ttu-id="82dfb-467">Implementieren Sie das Trennschalter-Muster, um eine Überlastung des Speichers zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-467">Implement the Circuit Breaker pattern to avoid overwhelming storage.</span></span>
3. <span data-ttu-id="82dfb-468">Wenn bei N Wiederholungsversuchen Fehler auftreten, führen Sie einen ordnungsgemäßen Fallback aus.</span><span class="sxs-lookup"><span data-stu-id="82dfb-468">If N retry attempts fail, perform a graceful fallback.</span></span> <span data-ttu-id="82dfb-469">Beispiel: </span><span class="sxs-lookup"><span data-stu-id="82dfb-469">For example:</span></span>

   - <span data-ttu-id="82dfb-470">Speichern Sie die Daten in einem lokalen Cache, und leiten Sie die Schreibvorgänge zu einem späteren Zeitpunkt, wenn der Dienst verfügbar ist, an den Speicher weiter.</span><span class="sxs-lookup"><span data-stu-id="82dfb-470">Store the data in a local cache, and forward the writes to storage later, when the service becomes available.</span></span>
   - <span data-ttu-id="82dfb-471">Wenn der Schreibvorgang in einem Transaktionsbereich erfolgt ist, kompensieren Sie die Transaktion.</span><span class="sxs-lookup"><span data-stu-id="82dfb-471">If the write action was in a transactional scope, compensate the transaction.</span></span>

<span data-ttu-id="82dfb-472">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-472">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-473">Verwenden Sie die [Speichermetriken][storage-metrics].</span><span class="sxs-lookup"><span data-stu-id="82dfb-473">Use [storage metrics][storage-metrics].</span></span>

### <a name="reading-data-from-azure-storage-fails"></a><span data-ttu-id="82dfb-474">Beim Lesen von Daten aus Azure Storage tritt ein Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="82dfb-474">Reading data from Azure Storage fails.</span></span>

<span data-ttu-id="82dfb-475">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-475">**Detection**.</span></span> <span data-ttu-id="82dfb-476">Der Client erhält beim Lesen entsprechende Fehlermeldungen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-476">The client receives errors when reading.</span></span>

<span data-ttu-id="82dfb-477">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-477">**Recovery:**</span></span>

1. <span data-ttu-id="82dfb-478">Versuchen Sie den Vorgang erneut, um die Wiederherstellung nach vorübergehenden Fehlern zu erreichen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-478">Retry the operation, to recover from transient failures.</span></span> <span data-ttu-id="82dfb-479">Die [Wiederholungsrichtlinie][Storage.RetryPolicies] im Client-SDK verarbeitet dies automatisch.</span><span class="sxs-lookup"><span data-stu-id="82dfb-479">The [retry policy][Storage.RetryPolicies] in the client SDK handles this automatically.</span></span>
2. <span data-ttu-id="82dfb-480">Wenn für RA-GRS-Speicher beim Lesen aus dem primären Endpunkt ein Fehler auftritt, versuchen Sie den Lesevorgang mit einem sekundären Endpunkt.</span><span class="sxs-lookup"><span data-stu-id="82dfb-480">For RA-GRS storage, if reading from the primary endpoint fails, try reading from the secondary endpoint.</span></span> <span data-ttu-id="82dfb-481">Das Client-SDK kann dies automatisch verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-481">The client SDK can handle this automatically.</span></span> <span data-ttu-id="82dfb-482">Weitere Informationen finden Sie unter [Azure Storage-Replikation][storage-replication].</span><span class="sxs-lookup"><span data-stu-id="82dfb-482">See [Azure Storage replication][storage-replication].</span></span>
3. <span data-ttu-id="82dfb-483">Wenn bei *N* Wiederholungsversuchen Fehler auftreten, führen Sie eine Fallbackaktion zum ordnungsgemäßen Herabstufen durch.</span><span class="sxs-lookup"><span data-stu-id="82dfb-483">If *N* retry attempts fail, take a fallback action to degrade gracefully.</span></span> <span data-ttu-id="82dfb-484">Wenn z. B. ein Produktbild nicht aus dem Speicher abgerufen werden kann, zeigen Sie ein allgemeines Platzhalterbild an.</span><span class="sxs-lookup"><span data-stu-id="82dfb-484">For example, if a product image can't be retrieved from storage, show a generic placeholder image.</span></span>

<span data-ttu-id="82dfb-485">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-485">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-486">Verwenden Sie die [Speichermetriken][storage-metrics].</span><span class="sxs-lookup"><span data-stu-id="82dfb-486">Use [storage metrics][storage-metrics].</span></span>

## <a name="virtual-machine"></a><span data-ttu-id="82dfb-487">Virtueller Computer</span><span class="sxs-lookup"><span data-stu-id="82dfb-487">Virtual machine</span></span>

### <a name="connection-to-a-backend-vm-fails"></a><span data-ttu-id="82dfb-488">Beim Herstellen der Verbindung mit einer Back-End-VM ist ein Fehler aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-488">Connection to a backend VM fails.</span></span>

<span data-ttu-id="82dfb-489">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-489">**Detection**.</span></span> <span data-ttu-id="82dfb-490">Netzwerkverbindungsfehler.</span><span class="sxs-lookup"><span data-stu-id="82dfb-490">Network connection errors.</span></span>

<span data-ttu-id="82dfb-491">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-491">**Recovery:**</span></span>

- <span data-ttu-id="82dfb-492">Stellen Sie mindestens zwei Back-End-VMs in einer Verfügbarkeitsgruppe hinter einem Lastenausgleich bereit.</span><span class="sxs-lookup"><span data-stu-id="82dfb-492">Deploy at least two backend VMs in an availability set, behind a load balancer.</span></span>
- <span data-ttu-id="82dfb-493">Wenn der Verbindungsfehler vorübergehend ist, wird TCP manchmal erfolgreich versuchen, die Nachricht erneut zu senden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-493">If the connection error is transient, sometimes TCP will successfully retry sending the message.</span></span>
- <span data-ttu-id="82dfb-494">Implementieren Sie eine Wiederholungsrichtlinie in der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="82dfb-494">Implement a retry policy in the application.</span></span>
- <span data-ttu-id="82dfb-495">Für persistente oder nicht vorübergehende Fehler implementieren Sie das [Trennschalter][circuit-breaker]-Muster.</span><span class="sxs-lookup"><span data-stu-id="82dfb-495">For persistent or non-transient errors, implement the [Circuit Breaker][circuit-breaker] pattern.</span></span>
- <span data-ttu-id="82dfb-496">Überschreitet die aufrufende VM den Ausgangsgrenzwert für das Netzwerk, wird die ausgehende Warteschlange gefüllt.</span><span class="sxs-lookup"><span data-stu-id="82dfb-496">If the calling VM exceeds its network egress limit, the outbound queue will fill up.</span></span> <span data-ttu-id="82dfb-497">Wenn die ausgehende Warteschlange beständig voll ist, sollten Sie eine horizontale Skalierung in Betracht ziehen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-497">If the outbound queue is consistently full, consider scaling out.</span></span>

<span data-ttu-id="82dfb-498">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-498">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-499">Protokollieren Sie Ereignisse an den Dienstgrenzen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-499">Log events at service boundaries.</span></span>

### <a name="vm-instance-becomes-unavailable-or-unhealthy"></a><span data-ttu-id="82dfb-500">Eine VM-Instanz steht nicht mehr zur Verfügung oder ist fehlerhaft.</span><span class="sxs-lookup"><span data-stu-id="82dfb-500">VM instance becomes unavailable or unhealthy.</span></span>

<span data-ttu-id="82dfb-501">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-501">**Detection**.</span></span> <span data-ttu-id="82dfb-502">Konfigurieren Sie einen Load Balancer-[Integritätstest][lb-probe], der angibt, ob die VM-Instanz fehlerfrei ist.</span><span class="sxs-lookup"><span data-stu-id="82dfb-502">Configure a Load Balancer [health probe][lb-probe] that signals whether the VM instance is healthy.</span></span> <span data-ttu-id="82dfb-503">Der Test sollte überprüfen, ob wichtige Funktionen ordnungsgemäß reagieren.</span><span class="sxs-lookup"><span data-stu-id="82dfb-503">The probe should check whether critical functions are responding correctly.</span></span>

<span data-ttu-id="82dfb-504">**Wiederherstellen**.</span><span class="sxs-lookup"><span data-stu-id="82dfb-504">**Recovery**.</span></span> <span data-ttu-id="82dfb-505">Stellen Sie für jede Anwendungsschicht mehrere VM-Instanzen in dieselbe Verfügbarkeitsgruppe, und platzieren Sie einen Lastenausgleich vor den virtuellen Computern.</span><span class="sxs-lookup"><span data-stu-id="82dfb-505">For each application tier, put multiple VM instances into the same availability set, and place a load balancer in front of the VMs.</span></span> <span data-ttu-id="82dfb-506">Wenn beim Integritätstest ein Fehler auftritt, beendet der Load Balancer das Senden neuer Verbindungen an die fehlerhafte Instanz.</span><span class="sxs-lookup"><span data-stu-id="82dfb-506">If the health probe fails, the Load Balancer stops sending new connections to the unhealthy instance.</span></span>

<span data-ttu-id="82dfb-507">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-507">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-508">Verwenden Sie die Load Balancer-[Protokollanalysen][lb-monitor].</span><span class="sxs-lookup"><span data-stu-id="82dfb-508">- Use Load Balancer [log analytics][lb-monitor].</span></span>

- <span data-ttu-id="82dfb-509">Konfigurieren Sie Ihr Überwachungssystem so, dass es alle Endpunkte der Integritätsüberwachung überwacht.</span><span class="sxs-lookup"><span data-stu-id="82dfb-509">Configure your monitoring system to monitor all of the health monitoring endpoints.</span></span>

### <a name="operator-accidentally-shuts-down-a-vm"></a><span data-ttu-id="82dfb-510">Der Operator fährt versehentlich einen virtuellen Computer herunter.</span><span class="sxs-lookup"><span data-stu-id="82dfb-510">Operator accidentally shuts down a VM.</span></span>

<span data-ttu-id="82dfb-511">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-511">**Detection**.</span></span> <span data-ttu-id="82dfb-512">–</span><span class="sxs-lookup"><span data-stu-id="82dfb-512">N/A</span></span>

<span data-ttu-id="82dfb-513">**Wiederherstellen**.</span><span class="sxs-lookup"><span data-stu-id="82dfb-513">**Recovery**.</span></span> <span data-ttu-id="82dfb-514">Legen Sie eine Ressourcensperre mit der Stufe `ReadOnly` fest.</span><span class="sxs-lookup"><span data-stu-id="82dfb-514">Set a resource lock with `ReadOnly` level.</span></span> <span data-ttu-id="82dfb-515">Weitere Informationen finden Sie unter [Sperren von Ressourcen mit Azure Resource Manager][rm-locks].</span><span class="sxs-lookup"><span data-stu-id="82dfb-515">See [Lock resources with Azure Resource Manager][rm-locks].</span></span>

<span data-ttu-id="82dfb-516">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-516">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-517">Verwenden Sie [Azure-Aktivitätsprotokolle][azure-activity-logs].</span><span class="sxs-lookup"><span data-stu-id="82dfb-517">Use [Azure Activity Logs][azure-activity-logs].</span></span>

## <a name="webjobs"></a><span data-ttu-id="82dfb-518">WebJobs</span><span class="sxs-lookup"><span data-stu-id="82dfb-518">WebJobs</span></span>

### <a name="continuous-job-stops-running-when-the-scm-host-is-idle"></a><span data-ttu-id="82dfb-519">Wenn der SCM-Host im Leerlauf ist, wird der fortlaufende Auftrag abgebrochen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-519">Continuous job stops running when the SCM host is idle.</span></span>

<span data-ttu-id="82dfb-520">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-520">**Detection**.</span></span> <span data-ttu-id="82dfb-521">Übergeben Sie ein Abbruchtoken an die WebJob-Funktion.</span><span class="sxs-lookup"><span data-stu-id="82dfb-521">Pass a cancellation token to the WebJob function.</span></span> <span data-ttu-id="82dfb-522">Weitere Informationen finden Sie unter [Ordnungsgemäßes Herunterfahren][web-jobs-shutdown].</span><span class="sxs-lookup"><span data-stu-id="82dfb-522">For more information, see [Graceful shutdown][web-jobs-shutdown].</span></span>

<span data-ttu-id="82dfb-523">**Wiederherstellen**.</span><span class="sxs-lookup"><span data-stu-id="82dfb-523">**Recovery**.</span></span> <span data-ttu-id="82dfb-524">Aktivieren Sie die Einstellung `Always On` in der Web-App.</span><span class="sxs-lookup"><span data-stu-id="82dfb-524">Enable the `Always On` setting in the web app.</span></span> <span data-ttu-id="82dfb-525">Weitere Informationen finden Sie unter [Ausführen von Hintergrundaufgaben mit WebJobs][web-jobs].</span><span class="sxs-lookup"><span data-stu-id="82dfb-525">For more information, see [Run Background tasks with WebJobs][web-jobs].</span></span>

## <a name="application-design"></a><span data-ttu-id="82dfb-526">Anwendungsentwurf</span><span class="sxs-lookup"><span data-stu-id="82dfb-526">Application design</span></span>

### <a name="application-cant-handle-a-spike-in-incoming-requests"></a><span data-ttu-id="82dfb-527">Die Anwendung kann nicht mit einer Steigerung der eingehenden Anforderungen zurechtkommen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-527">Application can't handle a spike in incoming requests.</span></span>

<span data-ttu-id="82dfb-528">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-528">**Detection**.</span></span> <span data-ttu-id="82dfb-529">Dies hängt von der Anwendung ab.</span><span class="sxs-lookup"><span data-stu-id="82dfb-529">Depends on the application.</span></span> <span data-ttu-id="82dfb-530">Typische Symptome:</span><span class="sxs-lookup"><span data-stu-id="82dfb-530">Typical symptoms:</span></span>

- <span data-ttu-id="82dfb-531">Die Website beginnt mit der Rückgabe von „HTTP 5xx“-Fehlercodes.</span><span class="sxs-lookup"><span data-stu-id="82dfb-531">The website starts returning HTTP 5xx error codes.</span></span>
- <span data-ttu-id="82dfb-532">Abhängige Dienste wie der Datenbank- oder Speicherdienst beginnen damit, Anforderungen zu beschränken.</span><span class="sxs-lookup"><span data-stu-id="82dfb-532">Dependent services, such as database or storage, start to throttle requests.</span></span> <span data-ttu-id="82dfb-533">Suchen Sie in Abhängigkeit vom Dienst nach HTTP-Fehlern wie HTTP 429 (Zu viele Anforderungen).</span><span class="sxs-lookup"><span data-stu-id="82dfb-533">Look for HTTP errors such as HTTP 429 (Too Many Requests), depending on the service.</span></span>
- <span data-ttu-id="82dfb-534">Die Länge der HTTP-Warteschlange nimmt zu.</span><span class="sxs-lookup"><span data-stu-id="82dfb-534">HTTP queue length grows.</span></span>

<span data-ttu-id="82dfb-535">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-535">**Recovery:**</span></span>

- <span data-ttu-id="82dfb-536">Führen Sie eine horizontale Skalierung durch, um die erhöhte Workload zu bewältigen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-536">Scale out to handle increased load.</span></span>
- <span data-ttu-id="82dfb-537">Reduzieren Sie Fehler, um zu vermeiden, dass sich überlappende Fehler die gesamte Anwendung stören.</span><span class="sxs-lookup"><span data-stu-id="82dfb-537">Mitigate failures to avoid having cascading failures disrupt the entire application.</span></span> <span data-ttu-id="82dfb-538">Mögliche Lösungsstrategien:</span><span class="sxs-lookup"><span data-stu-id="82dfb-538">Mitigation strategies include:</span></span>

  - <span data-ttu-id="82dfb-539">Implementieren Sie das [Drosselungsmuster][throttling-pattern], um eine Überlastung der Back-End-Systeme zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-539">Implement the [Throttling pattern][throttling-pattern] to avoid overwhelming backend systems.</span></span>
  - <span data-ttu-id="82dfb-540">Verwenden Sie den [warteschlangenbasierten Lastenausgleich][queue-based-load-leveling], um Anforderungen zu puffern und mit angemessener Geschwindigkeit zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-540">Use [queue-based load leveling][queue-based-load-leveling] to buffer requests and process them at an appropriate pace.</span></span>
  - <span data-ttu-id="82dfb-541">Priorisieren Sie bestimmte Clients.</span><span class="sxs-lookup"><span data-stu-id="82dfb-541">Prioritize certain clients.</span></span> <span data-ttu-id="82dfb-542">Wenn die Anwendung z. B. über kostenlose und kostenpflichtige Tarife verfügt, beschränken Sie Kunden mit kostenlosen Tarifen, aber nicht Kunden mit kostenpflichtigen Tarifen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-542">For example, if the application has free and paid tiers, throttle customers on the free tier, but not paid customers.</span></span> <span data-ttu-id="82dfb-543">Weitere Informationen finden Sie unter [Muster „Prioritätswarteschlange“][priority-queue-pattern].</span><span class="sxs-lookup"><span data-stu-id="82dfb-543">See [Priority queue pattern][priority-queue-pattern].</span></span>

<span data-ttu-id="82dfb-544">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-544">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-545">Verwenden Sie die [App Service-Diagnoseprotokollierung][app-service-logging].</span><span class="sxs-lookup"><span data-stu-id="82dfb-545">Use [App Service diagnostic logging][app-service-logging].</span></span> <span data-ttu-id="82dfb-546">Verwenden Sie einen Dienst wie [Azure Log Analytics][azure-log-analytics], [Application Insights][app-insights] oder [New Relic][new-relic], um die Diagnoseprotokolle besser zu verstehen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-546">Use a service such as [Azure Log Analytics][azure-log-analytics], [Application Insights][app-insights], or [New Relic][new-relic] to help understand the diagnostic logs.</span></span>

### <a name="one-of-the-operations-in-a-workflow-or-distributed-transaction-fails"></a><span data-ttu-id="82dfb-547">Bei einem der Vorgänge in einem Workflow oder in einer verteilten Transaktion ist ein Fehler aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-547">One of the operations in a workflow or distributed transaction fails.</span></span>

<span data-ttu-id="82dfb-548">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-548">**Detection**.</span></span> <span data-ttu-id="82dfb-549">Nach *N* Wiederholungsversuchen tritt der Fehler weiterhin auf.</span><span class="sxs-lookup"><span data-stu-id="82dfb-549">After *N* retry attempts, it still fails.</span></span>

<span data-ttu-id="82dfb-550">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-550">**Recovery:**</span></span>

- <span data-ttu-id="82dfb-551">Implementieren Sie als vorbeugende Maßnahme das Muster [Scheduler-Agent-Supervisor][scheduler-agent-supervisor], um den gesamten Workflow zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-551">As a mitigation plan, implement the [Scheduler Agent Supervisor][scheduler-agent-supervisor] pattern to manage the entire workflow.</span></span>
- <span data-ttu-id="82dfb-552">Wiederholen Sie den Versuch nicht bei Timeouts.</span><span class="sxs-lookup"><span data-stu-id="82dfb-552">Don't retry on timeouts.</span></span> <span data-ttu-id="82dfb-553">Die Erfolgsquote für diesen Fehler ist gering.</span><span class="sxs-lookup"><span data-stu-id="82dfb-553">There is a low success rate for this error.</span></span>
- <span data-ttu-id="82dfb-554">Verschieben Sie die Arbeit in eine Warteschlange, um es zu einem späteren erneut zu versuchen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-554">Queue work, in order to retry later.</span></span>

<span data-ttu-id="82dfb-555">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-555">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-556">Protokollieren Sie alle Vorgänge (erfolgreiche und fehlerhafte), einschließlich der Ausgleichsmaßnahmen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-556">Log all operations (successful and failed), including compensating actions.</span></span> <span data-ttu-id="82dfb-557">Verwenden Sie Korrelations-IDs, damit Sie alle Vorgänge innerhalb einer Transaktion verfolgen können.</span><span class="sxs-lookup"><span data-stu-id="82dfb-557">Use correlation IDs, so that you can track all operations within the same transaction.</span></span>

### <a name="a-call-to-a-remote-service-fails"></a><span data-ttu-id="82dfb-558">Beim Aufruf eines Remotediensts ist ein Fehler aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="82dfb-558">A call to a remote service fails.</span></span>

<span data-ttu-id="82dfb-559">**Erkennung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-559">**Detection**.</span></span> <span data-ttu-id="82dfb-560">HTTP-Fehlercode.</span><span class="sxs-lookup"><span data-stu-id="82dfb-560">HTTP error code.</span></span>

<span data-ttu-id="82dfb-561">**Wiederherstellung**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-561">**Recovery:**</span></span>

1. <span data-ttu-id="82dfb-562">Wiederholen Sie den Vorgang bei vorübergehenden Fehlern.</span><span class="sxs-lookup"><span data-stu-id="82dfb-562">Retry on transient failures.</span></span>
2. <span data-ttu-id="82dfb-563">Wenn der Aufruf nach *N* Versuchen Fehler aufweist, führen Sie einen Fallback aus.</span><span class="sxs-lookup"><span data-stu-id="82dfb-563">If the call fails after *N* attempts, take a fallback action.</span></span> <span data-ttu-id="82dfb-564">(Dies ist anwendungsspezifisch.)</span><span class="sxs-lookup"><span data-stu-id="82dfb-564">(Application specific.)</span></span>
3. <span data-ttu-id="82dfb-565">Implementieren Sie das [Trennschalter-Muster][circuit-breaker], um überlappende Fehler zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="82dfb-565">Implement the [Circuit Breaker pattern][circuit-breaker] to avoid cascading failures.</span></span>

<span data-ttu-id="82dfb-566">**Diagnose**:</span><span class="sxs-lookup"><span data-stu-id="82dfb-566">**Diagnostics**.</span></span> <span data-ttu-id="82dfb-567">Protokollieren Sie alle Fehler von Remoteaufrufen.</span><span class="sxs-lookup"><span data-stu-id="82dfb-567">Log all remote call failures.</span></span>

## <a name="next-steps"></a><span data-ttu-id="82dfb-568">Nächste Schritte</span><span class="sxs-lookup"><span data-stu-id="82dfb-568">Next steps</span></span>

<span data-ttu-id="82dfb-569">Weitere Informationen zur Fehlermodusanalyse finden Sie unter [Resilience by design for cloud services][resilience-by-design-pdf] (Designorientierte Resilienz für Clouddienste, PDF-Download).</span><span class="sxs-lookup"><span data-stu-id="82dfb-569">For more information about the FMA process, see [Resilience by design for cloud services][resilience-by-design-pdf] (PDF download).</span></span>

<!-- markdownlint-enable MD026 -->

<!-- links -->

[api-management]: /azure/api-management/
[api-management-throttling]: /azure/api-management/api-management-sample-flexible-throttling/
[app-insights]: /azure/application-insights/app-insights-overview/
[app-insights-web-apps]: /azure/application-insights/app-insights-azure-web-apps/
[app-service-configure]: /azure/app-service-web/web-sites-configure/
[app-service-logging]: /azure/app-service-web/web-sites-enable-diagnostic-log/
[app-service-slots]: /azure/app-service-web/web-sites-staged-publishing/
[auto-rest-client-retry]: https://github.com/Azure/autorest/tree/master/docs
[azure-activity-logs]: /azure/monitoring-and-diagnostics/monitoring-overview-activity-logs/
[azure-alerts]: /azure/monitoring-and-diagnostics/insights-alerts-portal/
[azure-log-analytics]: /azure/log-analytics/log-analytics-overview/
[BrokeredMessage.TimeToLive]: https://msdn.microsoft.com/library/microsoft.servicebus.messaging.brokeredmessage.timetolive.aspx
[cassandra-error-handling]: https://www.datastax.com/dev/blog/cassandra-error-handling-done-right
[circuit-breaker]: https://msdn.microsoft.com/library/dn589784.aspx
[cosmosdb-multi-region]: /azure/cosmos-db/tutorial-global-distribution-sql-api
[elasticsearch-azure]: ../elasticsearch/index.md
[elasticsearch-client]: https://www.elastic.co/guide/en/elasticsearch/client/index.html
[health-endpoint-monitoring-pattern]: https://msdn.microsoft.com/library/dn589789.aspx
[onstop-events]: https://azure.microsoft.com/blog/the-right-way-to-handle-azure-onstop-events/
[lb-monitor]: /azure/load-balancer/load-balancer-monitor-log/
[lb-probe]: /azure/load-balancer/load-balancer-custom-probe-overview/#learn-about-the-types-of-probes
[new-relic]: https://newrelic.com/
[priority-queue-pattern]: https://msdn.microsoft.com/library/dn589794.aspx
[queue-based-load-leveling]: https://msdn.microsoft.com/library/dn589783.aspx
[QuotaExceededException]: https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.quotaexceededexception.aspx
[ra-web-apps-basic]: ../reference-architectures/app-service-web-app/basic-web-app.md
[redis-monitor]: /azure/redis-cache/cache-how-to-monitor/
[redis-retry]: ../best-practices/retry-service-specific.md#azure-redis-cache
[resilience-by-design-pdf]: https://download.microsoft.com/download/D/8/C/D8C599A4-4E8A-49BF-80EE-FE35F49B914D/Resilience_by_Design_for_Cloud_Services_White_Paper.pdf
[RoleEntryPoint.OnStop]: https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx
[RoleEnvironment.Stopping]: https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleenvironment.stopping.aspx
[rm-locks]: /azure/azure-resource-manager/resource-group-lock-resources/
[sb-dead-letter-queue]: /azure/service-bus-messaging/service-bus-dead-letter-queues/
[sb-georeplication-sample]: https://github.com/Azure-Samples/azure-servicebus-messaging-samples/tree/master/GeoReplication
[sb-messagingexception-class]: https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingexception.aspx
[sb-messaging-exceptions]: /azure/service-bus-messaging/service-bus-messaging-exceptions/
[sb-outages]: /azure/service-bus-messaging/service-bus-outages-disasters/#protecting-queues-and-topics-against-datacenter-outages-or-disasters
[sb-partition]: /azure/service-bus-messaging/service-bus-partitioning/
[sb-poison-message]: /azure/app-service-web/websites-dotnet-webjobs-sdk-storage-queues-how-to/#poison
[sb-retry]: ../best-practices/retry-service-specific.md#service-bus
[search-sdk]: https://msdn.microsoft.com/library/dn951165.aspx
[scheduler-agent-supervisor]: https://msdn.microsoft.com/library/dn589780.aspx
[search-analytics]: /azure/search/search-traffic-analytics/
[sql-db-audit]: /azure/sql-database/sql-database-auditing-get-started/
[sql-db-errors]: /azure/sql-database/sql-database-develop-error-messages/#resource-governance-errors
[sql-db-failover]: /azure/sql-database/sql-database-geo-replication-failover-portal/
[sql-db-limits]: /azure/sql-database/sql-database-resource-limits/
[sql-db-replication]: /azure/sql-database/sql-database-geo-replication-overview/
[storage-metrics]: https://msdn.microsoft.com/library/dn782843.aspx
[storage-replication]: /azure/storage/storage-redundancy/
[Storage.RetryPolicies]: https://msdn.microsoft.com/library/microsoft.windowsazure.storage.retrypolicies.aspx
[sys.event_log]: https://msdn.microsoft.com/library/dn270018.aspx
[throttling-pattern]: https://msdn.microsoft.com/library/dn589798.aspx
[web-jobs]: /azure/app-service-web/web-sites-create-web-jobs/
[web-jobs-shutdown]: /azure/app-service-web/websites-dotnet-webjobs-sdk-storage-queues-how-to/#graceful
