---
title: Leitfaden zur Datenpartitionierung
titleSuffix: Best practices for cloud applications
description: Leitfaden zum Trennen von Partitionen für die separate Verwaltung und den separaten Zugriff
author: dragon119
ms.date: 11/04/2018
ms.topic: best-practice
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.custom: seodec18
ms.openlocfilehash: 561fe6e47a4cd64aa545349dde4c76260d76e78e
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 03/20/2019
ms.locfileid: "58248955"
---
# <a name="horizontal-vertical-and-functional-data-partitioning"></a><span data-ttu-id="368c9-103">Horizontale, vertikale und funktionale Datenpartitionierung</span><span class="sxs-lookup"><span data-stu-id="368c9-103">Horizontal, vertical, and functional data partitioning</span></span>

<span data-ttu-id="368c9-104">In vielen umfangreichen Lösungen werden Daten in *Partitionen* aufgeteilt, die getrennt verwaltet werden können und auf die separat zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="368c9-104">In many large-scale solutions, data is divided into *partitions* that can be managed and accessed separately.</span></span> <span data-ttu-id="368c9-105">Partitionierung kann die Skalierbarkeit verbessern, Konflikte reduzieren und die Leistung optimieren.</span><span class="sxs-lookup"><span data-stu-id="368c9-105">Partitioning can improve scalability, reduce contention, and optimize performance.</span></span> <span data-ttu-id="368c9-106">Sie kann auch einen Mechanismus für das Unterteilen von Daten nach Verwendungsmuster bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="368c9-106">It can also provide a mechanism for dividing data by usage pattern.</span></span> <span data-ttu-id="368c9-107">Beispielsweise können Sie ältere Daten in kostengünstigeren Datenspeichern archivieren.</span><span class="sxs-lookup"><span data-stu-id="368c9-107">For example, you can archive older data in cheaper data storage.</span></span>

<span data-ttu-id="368c9-108">Die Partitionierungsstrategie muss jedoch sorgfältig ausgewählt werden, um die Vorteile zu maximieren und gleichzeitig nachteilige Auswirkungen zu minimieren.</span><span class="sxs-lookup"><span data-stu-id="368c9-108">However, the partitioning strategy must be chosen carefully to maximize the benefits while minimizing adverse effects.</span></span>

> [!NOTE]
> <span data-ttu-id="368c9-109">In diesem Artikel steht der Begriff *Partitionierung* für den Prozess der physischen Unterteilung von Daten in separate Datenspeicher.</span><span class="sxs-lookup"><span data-stu-id="368c9-109">In this article, the term *partitioning* means the process of physically dividing data into separate data stores.</span></span> <span data-ttu-id="368c9-110">Dies ist nicht dasselbe wie die SQL Server-Tabellenpartitionierung.</span><span class="sxs-lookup"><span data-stu-id="368c9-110">It is not the same as SQL Server table partitioning.</span></span>

<!-- markdownlint-disable MD026 -->

## <a name="why-partition-data"></a><span data-ttu-id="368c9-111">Gründe für Datenpartitionierung</span><span class="sxs-lookup"><span data-stu-id="368c9-111">Why partition data?</span></span>

<!-- markdownlint-enable MD026 -->

- <span data-ttu-id="368c9-112">**Verbesserung der Skalierbarkeit**.</span><span class="sxs-lookup"><span data-stu-id="368c9-112">**Improve scalability**.</span></span> <span data-ttu-id="368c9-113">Beim zentralen Hochskalieren eines einzelnen Datenbanksystems wird schließlich ein physisches Hardwarelimit erreicht.</span><span class="sxs-lookup"><span data-stu-id="368c9-113">When you scale up a single database system, it will eventually reach a physical hardware limit.</span></span> <span data-ttu-id="368c9-114">Wenn Sie Daten auf mehrere Partitionen aufteilen, die jeweils auf einem separaten Server gehostet werden, können Sie das System fast unbegrenzt horizontal hochskalieren.</span><span class="sxs-lookup"><span data-stu-id="368c9-114">If you divide data across multiple partitions, each hosted on a separate server, you can scale out the system almost indefinitely.</span></span>

- <span data-ttu-id="368c9-115">**Verbesserung der Leistung**</span><span class="sxs-lookup"><span data-stu-id="368c9-115">**Improve performance**.</span></span> <span data-ttu-id="368c9-116">Zugriffe auf Daten in jeder Partition finden über eine kleinere Datenmenge statt.</span><span class="sxs-lookup"><span data-stu-id="368c9-116">Data access operations on each partition take place over a smaller volume of data.</span></span> <span data-ttu-id="368c9-117">Bei ordnungsgemäßer Durchführung kann Partitionierung Ihr System effizienter gestalten.</span><span class="sxs-lookup"><span data-stu-id="368c9-117">Correctly done, partitioning can make your system more efficient.</span></span> <span data-ttu-id="368c9-118">Vorgänge, die mehr als eine Partition betreffen, können parallel ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-118">Operations that affect more than one partition can run in parallel.</span></span>

- <span data-ttu-id="368c9-119">**Verbesserung der Sicherheit**</span><span class="sxs-lookup"><span data-stu-id="368c9-119">**Improve security**.</span></span> <span data-ttu-id="368c9-120">In einigen Fällen können Sie sensible und nicht sensible Daten in verschiedene Partitionen unterteilen und auf die vertraulichen Daten andere Sicherheitsmaßnahmen anwenden.</span><span class="sxs-lookup"><span data-stu-id="368c9-120">In some cases, you can separate sensitive and non-sensitive data into different partitions and apply different security controls to the sensitive data.</span></span>

- <span data-ttu-id="368c9-121">**Bereitstellen von Flexibilität bei Vorgängen**.</span><span class="sxs-lookup"><span data-stu-id="368c9-121">**Provide operational flexibility**.</span></span> <span data-ttu-id="368c9-122">Partitionieren bietet viele Möglichkeiten für die Feinabstimmung von Vorgängen, das Maximieren administrativer Effizienz und die Minimierung von Kosten.</span><span class="sxs-lookup"><span data-stu-id="368c9-122">Partitioning offers many opportunities for fine tuning operations, maximizing administrative efficiency, and minimizing cost.</span></span> <span data-ttu-id="368c9-123">Sie können beispielsweise basierend auf der Wichtigkeit der Daten in jeder Partition unterschiedliche Strategien für die Verwaltung, Überwachung, Sicherung und Wiederherstellung sowie für andere administrative Aufgaben definieren.</span><span class="sxs-lookup"><span data-stu-id="368c9-123">For example, you can define different strategies for management, monitoring, backup and restore, and other administrative tasks based on the importance of the data in each partition.</span></span>

- <span data-ttu-id="368c9-124">**Übereinstimmung der Daten mit dem Anwendungsmuster**</span><span class="sxs-lookup"><span data-stu-id="368c9-124">**Match the data store to the pattern of use**.</span></span> <span data-ttu-id="368c9-125">Mithilfe der Partitionierung kann jede Partition basierend auf den Kosten und integrierten Funktionen, die dieser Datenspeicher bietet, auf einer anderen Art von Datenspeicher bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-125">Partitioning allows each partition to be deployed on a different type of data store, based on cost and the built-in features that data store offers.</span></span> <span data-ttu-id="368c9-126">Umfangreiche binäre Daten können beispielsweise in einem Blobspeicher gespeichert werden, strukturiertere Daten dagegen in einer Dokumentendatenbank.</span><span class="sxs-lookup"><span data-stu-id="368c9-126">For example, large binary data can be stored in blob storage, while more structured data can be held in a document database.</span></span> <span data-ttu-id="368c9-127">Weitere Informationen finden Sie unter [Auswählen des richtigen Datenspeichers](../guide/technology-choices/data-store-overview.md).</span><span class="sxs-lookup"><span data-stu-id="368c9-127">See [Choose the right data store](../guide/technology-choices/data-store-overview.md).</span></span>

- <span data-ttu-id="368c9-128">**Verbesserung der Verfügbarkeit**</span><span class="sxs-lookup"><span data-stu-id="368c9-128">**Improve availability**.</span></span> <span data-ttu-id="368c9-129">Das Aufteilen von Daten über mehrere Server hinweg vermeidet eine einzelne Fehlerquelle.</span><span class="sxs-lookup"><span data-stu-id="368c9-129">Separating data across multiple servers avoids a single point of failure.</span></span> <span data-ttu-id="368c9-130">Wenn eine Instanz ausfällt, sind nur die Daten in dieser Partition nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="368c9-130">If one instance fails, only the data in that partition is unavailable.</span></span> <span data-ttu-id="368c9-131">Vorgänge auf anderen Partitionen können fortgesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-131">Operations on other partitions can continue.</span></span> <span data-ttu-id="368c9-132">Für verwaltete PaaS-Datenspeicher ist dieser Aspekt weniger relevant, da diese Dienste mit integrierter Redundanz vorgesehen sind.</span><span class="sxs-lookup"><span data-stu-id="368c9-132">For managed PaaS data stores, this consideration is less relevant, because these services are designed with built-in redundancy.</span></span>

## <a name="designing-partitions"></a><span data-ttu-id="368c9-133">Entwerfen von Partitionen</span><span class="sxs-lookup"><span data-stu-id="368c9-133">Designing partitions</span></span>

<span data-ttu-id="368c9-134">Es gibt drei typische Strategien zum Partitionieren von Daten:</span><span class="sxs-lookup"><span data-stu-id="368c9-134">There are three typical strategies for partitioning data:</span></span>

- <span data-ttu-id="368c9-135">**Horizontale Partitionierung** (häufig als *Sharding* bezeichnet).</span><span class="sxs-lookup"><span data-stu-id="368c9-135">**Horizontal partitioning** (often called *sharding*).</span></span> <span data-ttu-id="368c9-136">Bei dieser Strategie stellt jede Partition einen separaten Datenspeicher dar, wobei jedoch alle Partitionen das gleiche Schema aufweisen.</span><span class="sxs-lookup"><span data-stu-id="368c9-136">In this strategy, each partition is a separate data store, but all partitions have the same schema.</span></span> <span data-ttu-id="368c9-137">Jede Partition ist als ein *Shard* bekannt und enthält eine bestimmte Teilmenge der Daten, z.B. alle Bestellungen für einen bestimmten Satz von Kunden.</span><span class="sxs-lookup"><span data-stu-id="368c9-137">Each partition is known as a *shard* and holds a specific subset of the data, such as all the orders for a specific set of customers.</span></span>

- <span data-ttu-id="368c9-138">**Vertikale Partitionierung**.</span><span class="sxs-lookup"><span data-stu-id="368c9-138">**Vertical partitioning**.</span></span> <span data-ttu-id="368c9-139">Bei dieser Strategie enthält jede Partition eine Teilmenge der Felder für Elemente im Datenspeicher.</span><span class="sxs-lookup"><span data-stu-id="368c9-139">In this strategy, each partition holds a subset of the fields for items in the data store.</span></span> <span data-ttu-id="368c9-140">Die Felder werden gemäß ihrem Verwendungsmuster unterteilt.</span><span class="sxs-lookup"><span data-stu-id="368c9-140">The fields are divided according to their pattern of use.</span></span> <span data-ttu-id="368c9-141">Beispielsweise können häufig verwendete Felder in einer vertikalen Partition und weniger häufig verwendete Felder in einer anderen Partition platziert werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-141">For example, frequently accessed fields might be placed in one vertical partition and less frequently accessed fields in another.</span></span>

- <span data-ttu-id="368c9-142">**Funktionale Partitionierung**.</span><span class="sxs-lookup"><span data-stu-id="368c9-142">**Functional partitioning**.</span></span> <span data-ttu-id="368c9-143">Bei dieser Strategie werden Daten nach der Art und Weise aggregiert, in der sie im System von jedem begrenzten Kontext verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-143">In this strategy, data is aggregated according to how it is used by each bounded context in the system.</span></span> <span data-ttu-id="368c9-144">Beispiel: Ein E-Commerce-System kann Rechnungsdaten in einer Partition und Daten zum Produktbestand in einer anderen speichern.</span><span class="sxs-lookup"><span data-stu-id="368c9-144">For example, an e-commerce system might store invoice data in one partition and product inventory data in another.</span></span>

<span data-ttu-id="368c9-145">Diese Strategien können kombiniert werden, und es empfiehlt sich, sie alle beim Entwurf eines Partitionierungsschemas zu berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="368c9-145">These strategies can be combined, and we recommend that you consider them all when you design a partitioning scheme.</span></span> <span data-ttu-id="368c9-146">Beispielsweise könnten Sie Daten in Shards unterteilen und dann die Daten mittels vertikaler Partitionierung innerhalb der einzelnen Shards weiter unterteilen.</span><span class="sxs-lookup"><span data-stu-id="368c9-146">For example, you might divide data into shards and then use vertical partitioning to further subdivide the data in each shard.</span></span>

### <a name="horizontal-partitioning-sharding"></a><span data-ttu-id="368c9-147">Horizontale Partitionierung (Sharding)</span><span class="sxs-lookup"><span data-stu-id="368c9-147">Horizontal partitioning (sharding)</span></span>

<span data-ttu-id="368c9-148">Abbildung 1 zeigt horizontale Partitionierung oder Sharding.</span><span class="sxs-lookup"><span data-stu-id="368c9-148">Figure 1 shows horizontal partitioning or sharding.</span></span> <span data-ttu-id="368c9-149">In diesem Beispiel werden Warenbestandsdaten basierend auf dem Produktschlüssel in Shards unterteilt.</span><span class="sxs-lookup"><span data-stu-id="368c9-149">In this example, product inventory data is divided into shards based on the product key.</span></span> <span data-ttu-id="368c9-150">Jedes Shard enthält die Daten für einen zusammenhängenden Bereich von Shard-Schlüsseln (A-G und H-Z) in alphabetischer Anordnung.</span><span class="sxs-lookup"><span data-stu-id="368c9-150">Each shard holds the data for a contiguous range of shard keys (A-G and H-Z), organized alphabetically.</span></span> <span data-ttu-id="368c9-151">Durch Sharding wird die Last auf mehrere Computer verteilt, was Konflikte reduziert und die Leistung verbessert.</span><span class="sxs-lookup"><span data-stu-id="368c9-151">Sharding spreads the load over more computers, which reduces contention and improves performance.</span></span>

![Horizontale Partitionierung (Sharding) von Daten auf Grundlage eines Partitionsschlüssels](./images/data-partitioning/DataPartitioning01.png)

<span data-ttu-id="368c9-153">*Abbildung 1: Horizontale Partitionierung (Sharding) von Daten auf Grundlage eines Partitionsschlüssels*</span><span class="sxs-lookup"><span data-stu-id="368c9-153">*Figure 1. Horizontally partitioning (sharding) data based on a partition key.*</span></span>

<span data-ttu-id="368c9-154">Der wichtigste Faktor ist die Wahl des Shardschlüssels.</span><span class="sxs-lookup"><span data-stu-id="368c9-154">The most important factor is the choice of a sharding key.</span></span> <span data-ttu-id="368c9-155">Es kann schwierig sein, den Schlüssel zu ändern, nachdem das System in Betrieb ist.</span><span class="sxs-lookup"><span data-stu-id="368c9-155">It can be difficult to change the key after the system is in operation.</span></span> <span data-ttu-id="368c9-156">Der Schlüssel muss sicherstellen, dass Daten auf eine Weise partitioniert werden, die die Workload möglichst gleichmäßig über die Shards hinweg verteilt.</span><span class="sxs-lookup"><span data-stu-id="368c9-156">The key must ensure that data is partitioned to spread the workload as evenly as possible across the shards.</span></span>

<span data-ttu-id="368c9-157">Die Shards müssen nicht dieselbe Größe aufweisen.</span><span class="sxs-lookup"><span data-stu-id="368c9-157">The shards don't have to be the same size.</span></span> <span data-ttu-id="368c9-158">Es ist wichtiger, die Anzahl der Anforderungen auszugleichen.</span><span class="sxs-lookup"><span data-stu-id="368c9-158">It's more important to balance the number of requests.</span></span> <span data-ttu-id="368c9-159">Einige Shards sind möglicherweise sehr groß, aber es gibt nur eine geringe Anzahl von Zugriffsvorgängen für jedes Element.</span><span class="sxs-lookup"><span data-stu-id="368c9-159">Some shards might be very large, but each item has a low number of access operations.</span></span> <span data-ttu-id="368c9-160">Andere Shards können kleiner sein, aber es wird viel häufiger auf jedes Element zugegriffen.</span><span class="sxs-lookup"><span data-stu-id="368c9-160">Other shards might be smaller, but each item is accessed much more frequently.</span></span> <span data-ttu-id="368c9-161">Außerdem ist es wichtig sicherzustellen, dass kein einzelner Shard die Skalierungsgrenzen (im Hinblick auf Kapazität und Verarbeitungsressourcen) des Datenspeichers überschreitet.</span><span class="sxs-lookup"><span data-stu-id="368c9-161">It's also important to ensure that a single shard does not exceed the scale limits (in terms of capacity and processing resources) of the data store.</span></span>

<span data-ttu-id="368c9-162">Vermeiden Sie das Erstellen von „heißen“ Partitionen, die möglicherweise die Leistung und Verfügbarkeit beeinträchtigen.</span><span class="sxs-lookup"><span data-stu-id="368c9-162">Avoid creating "hot" partitions that can affect performance and availability.</span></span> <span data-ttu-id="368c9-163">Beispielsweise führt das Verwenden des ersten Buchstabens eines Kundennamens zu einer ungleichmäßigen Verteilung, da einige Buchstaben häufiger vorkommen. Verwenden Sie stattdessen den Hash einer Kunden-ID, um Daten gleichmäßig auf Partitionen zu verteilen.</span><span class="sxs-lookup"><span data-stu-id="368c9-163">For example, using the first letter of a customer’s name causes an unbalanced distribution, because some letters are more common Instead, use a hash of a customer identifier to distribute data more evenly across partitions.</span></span>

<span data-ttu-id="368c9-164">Wählen Sie einen Shardschlüssel, der die Notwendigkeit minimiert, zu einem späteren Zeitpunkt große Shards aufteilen, kleinere Shards in größeren Partitionen zusammenfügen oder das Schema ändern zu müssen.</span><span class="sxs-lookup"><span data-stu-id="368c9-164">Choose a sharding key that minimizes any future requirements to split large shards, coalesce small shards into larger partitions, or change the schema.</span></span> <span data-ttu-id="368c9-165">Diese Vorgänge können sehr zeitaufwendig sein und erfordern es möglicherweise, während der Ausführung einen oder mehrere Shards offline zu schalten.</span><span class="sxs-lookup"><span data-stu-id="368c9-165">These operations can be very time consuming, and might require taking one or more shards offline while they are performed.</span></span>

<span data-ttu-id="368c9-166">Wenn Shards repliziert werden, ist es eventuell möglich, einige der Replikate online zu halten, während andere Replikate geteilt, zusammengeführt oder neu konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-166">If shards are replicated, it might be possible to keep some of the replicas online while others are split, merged, or reconfigured.</span></span> <span data-ttu-id="368c9-167">Das System muss jedoch möglicherweise die Vorgänge begrenzen, die für die Daten während die Neukonfiguration ausgeführt werden können.</span><span class="sxs-lookup"><span data-stu-id="368c9-167">However, the system might need to limit the operations that can be performed during the reconfiguration.</span></span> <span data-ttu-id="368c9-168">Beispielsweise können die Daten in den Replikaten als schreibgeschützt markiert werden, um Inkonsistenzen der Daten zu verhindern.</span><span class="sxs-lookup"><span data-stu-id="368c9-168">For example, the data in the replicas might be marked as read-only to prevent data inconsistences.</span></span>

<span data-ttu-id="368c9-169">Weitere Informationen zur horizontalen Partitionierung finden Sie unter [Sharding-Muster].</span><span class="sxs-lookup"><span data-stu-id="368c9-169">For more information about horizontal partitioning, see [Sharding pattern].</span></span>

### <a name="vertical-partitioning"></a><span data-ttu-id="368c9-170">Vertikale Partitionierung</span><span class="sxs-lookup"><span data-stu-id="368c9-170">Vertical partitioning</span></span>

<span data-ttu-id="368c9-171">Die häufigste Verwendung für die vertikale Partitionierung ist, die E/A und die Leistungskosten zu reduzieren, die mit dem Abrufen von Elementen verknüpft sind, auf die häufig zugegriffen wird.</span><span class="sxs-lookup"><span data-stu-id="368c9-171">The most common use for vertical partitioning is to reduce the I/O and performance costs associated with fetching items that are frequently accessed.</span></span> <span data-ttu-id="368c9-172">Abbildung 2 zeigt ein Beispiel für die vertikale Partitionierung.</span><span class="sxs-lookup"><span data-stu-id="368c9-172">Figure 2 shows an example of vertical partitioning.</span></span> <span data-ttu-id="368c9-173">In diesem Beispiel sind verschiedene Eigenschaften eines Elements in verschiedenen Partitionen gespeichert.</span><span class="sxs-lookup"><span data-stu-id="368c9-173">In this example, different properties of an item are stored in different partitions.</span></span> <span data-ttu-id="368c9-174">Eine Partition enthält Daten, auf die häufiger zugegriffen wird, einschließlich Name, Beschreibung und Preisinformationen für Produkte.</span><span class="sxs-lookup"><span data-stu-id="368c9-174">One partition holds data that is accessed more frequently, including product name, description, and price.</span></span> <span data-ttu-id="368c9-175">Eine andere Partition enthält Bestandsdaten: die Bestandsmenge und das Datum der letzten Bestellung.</span><span class="sxs-lookup"><span data-stu-id="368c9-175">Another partition holds inventory data: the stock count and last-ordered date.</span></span>

![Vertikale Partitionierung von Daten nach Verwendungsmuster](./images/data-partitioning/DataPartitioning02.png)

<span data-ttu-id="368c9-177">*Abbildung 2: Vertikale Partitionierung von Daten nach Verwendungsmuster*</span><span class="sxs-lookup"><span data-stu-id="368c9-177">*Figure 2. Vertically partitioning data by its pattern of use.*</span></span>

<span data-ttu-id="368c9-178">In diesem Beispiel fragt die Anwendung regelmäßig den Produktnamen, die Beschreibung und den Preis ab, wenn Kunden Produktdetails angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-178">In this example, the application regularly queries the product name, description, and price when displaying the product details to customers.</span></span> <span data-ttu-id="368c9-179">Bestandsmenge und Datum der letzten Bestellung werden in einer getrennten Partition gespeichert, da diese beiden Elemente häufig zusammen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-179">Stock count and last- ordered date are held in a separate partition because these two items are commonly used together.</span></span>

<span data-ttu-id="368c9-180">Weitere Vorteile der vertikalen Partitionierung:</span><span class="sxs-lookup"><span data-stu-id="368c9-180">Other advantages of vertical partitioning:</span></span>

- <span data-ttu-id="368c9-181">Daten, die sich relativ langsam bewegen (Produktname, Beschreibung und Preis), können von den dynamischeren Daten (Lagerbestand und Datum der letzten Bestellung) getrennt werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-181">Relatively slow-moving data (product name, description, and price) can be separated from the more dynamic data (stock level and last ordered date).</span></span> <span data-ttu-id="368c9-182">Daten, die sich langsam bewegen, eignen sich gut für die Zwischenspeicherung im Arbeitsspeicher durch eine Anwendung.</span><span class="sxs-lookup"><span data-stu-id="368c9-182">Slow moving data is a good candidate for an application to cache in memory.</span></span>

- <span data-ttu-id="368c9-183">Vertrauliche Daten können in einer separaten Partition mit zusätzlichen Sicherheitsmaßnahmen gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-183">Sensitive data can be stored in a separate partition with additional security controls.</span></span>

- <span data-ttu-id="368c9-184">Eine vertikale Partitionierung kann die erforderlichen gleichzeitigen Zugriffe verringern.</span><span class="sxs-lookup"><span data-stu-id="368c9-184">Vertical partitioning can reduce the amount of concurrent access that's needed.</span></span>

<span data-ttu-id="368c9-185">Vertikale Partitionierung findet auf der Entitätsebene in einem Datenspeicher statt, wobei eine Entität teilweise normalisiert wird, um sie von einem *breiten* Element in einen Satz *schmaler Elemente* aufzuschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="368c9-185">Vertical partitioning operates at the entity level within a data store, partially normalizing an entity to break it down from a *wide* item to a set of *narrow* items.</span></span> <span data-ttu-id="368c9-186">Es eignet sich ideal für spaltenorientierte Datenspeicher wie z. B. HBase und Cassandra.</span><span class="sxs-lookup"><span data-stu-id="368c9-186">It is ideally suited for column-oriented data stores such as HBase and Cassandra.</span></span> <span data-ttu-id="368c9-187">Wenn es unwahrscheinlich ist, dass sich Daten in einer Auflistung von Spalten ändern, können Sie auch in Betracht ziehen, Spaltenspeicher im SQL Server zu nutzen.</span><span class="sxs-lookup"><span data-stu-id="368c9-187">If the data in a collection of columns is unlikely to change, you can also consider using column stores in SQL Server.</span></span>

### <a name="functional-partitioning"></a><span data-ttu-id="368c9-188">Funktionale Partitionierung</span><span class="sxs-lookup"><span data-stu-id="368c9-188">Functional partitioning</span></span>

<span data-ttu-id="368c9-189">Wenn ein gebundener Kontext für jeden bestimmten Geschäftsbereich identifiziert werden kann, ist die funktionale Partitionierung eine Möglichkeit zur Verbesserung der Isolation und Datenzugriffsleistung.</span><span class="sxs-lookup"><span data-stu-id="368c9-189">When it's possible to identify a bounded context for each distinct business area in an application, functional partitioning is a way to improve isolation and data access performance.</span></span> <span data-ttu-id="368c9-190">Darüber hinaus wird die funktionale Partitionierung häufig verwendet, um Lese/Schreibdaten von schreibgeschützten Daten zu trennen.</span><span class="sxs-lookup"><span data-stu-id="368c9-190">Another common use for functional partitioning is to separate read-write data from read-only data.</span></span> <span data-ttu-id="368c9-191">Abbildung 3 zeigt eine Übersicht einer funktionalen Partitionierung, in der Bestandsdaten von Kundendaten getrennt werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-191">Figure 3 shows an overview of functional partitioning where inventory data is separated from customer data.</span></span>

![Funktionale Datenpartitionierung nach begrenztem Kontext oder Unterdomäne](./images/data-partitioning/DataPartitioning03.png)

<span data-ttu-id="368c9-193">*Abbildung 3: Funktionale Datenpartitionierung nach begrenztem Kontext oder Unterdomäne*</span><span class="sxs-lookup"><span data-stu-id="368c9-193">*Figure 3. Functionally partitioning data by bounded context or subdomain.*</span></span>

<span data-ttu-id="368c9-194">Diese Partitionierungsstrategie kann helfen, Datenzugriffskonflikte über verschiedene Teile eines Systems hinweg zu reduzieren.</span><span class="sxs-lookup"><span data-stu-id="368c9-194">This partitioning strategy can help reduce data access contention across different parts of a system.</span></span>

## <a name="designing-partitions-for-scalability"></a><span data-ttu-id="368c9-195">Entwerfen von Partitionen für Skalierbarkeit</span><span class="sxs-lookup"><span data-stu-id="368c9-195">Designing partitions for scalability</span></span>

<span data-ttu-id="368c9-196">Es ist wichtig, die Größe und Workload für jede Partition zu berücksichtigen und auszubalancieren, um die Daten so zu verteilen, dass eine maximale Skalierbarkeit erreicht wird.</span><span class="sxs-lookup"><span data-stu-id="368c9-196">It's vital to consider size and workload for each partition and balance them so that data is distributed to achieve maximum scalability.</span></span> <span data-ttu-id="368c9-197">Allerdings müssen Sie die Daten auch so partitionieren, dass nicht die Skalierungsgrenzen des Speicherplatzes der einzelnen Partitionen überschritten werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-197">However, you must also partition the data so that it does not exceed the scaling limits of a single partition store.</span></span>

<span data-ttu-id="368c9-198">Gehen Sie beim Entwerfen von Partitionen für maximale Skalierbarkeit folgendermaßen vor:</span><span class="sxs-lookup"><span data-stu-id="368c9-198">Follow these steps when designing partitions for scalability:</span></span>

1. <span data-ttu-id="368c9-199">Analysieren Sie die Anwendung, um die Datenzugriffsmuster zu verstehen, wie z. B. die Größe des Resultsets jeder Abfrage, die Häufigkeit des Zugriffs, die inhärente Latenz und die serverseitige Anforderungen an die Rechenleistung.</span><span class="sxs-lookup"><span data-stu-id="368c9-199">Analyze the application to understand the data access patterns, such as the size of the result set returned by each query, the frequency of access, the inherent latency, and the server-side compute processing requirements.</span></span> <span data-ttu-id="368c9-200">In vielen Fällen werden einige Hauptentitäten den Großteil der Verarbeitungsressourcen anfordern.</span><span class="sxs-lookup"><span data-stu-id="368c9-200">In many cases, a few major entities will demand most of the processing resources.</span></span>
2. <span data-ttu-id="368c9-201">Verwenden Sie diese Analyse, um die aktuellen und zukünftigen Skalierbarkeitsziele wie z. B. die Größe der Daten und die Workload festzulegen.</span><span class="sxs-lookup"><span data-stu-id="368c9-201">Use this analysis to determine the current and future scalability targets, such as data size and workload.</span></span> <span data-ttu-id="368c9-202">Anschließend verteilen Sie die Daten auf die Partitionen, um das Skalierbarkeitsziel zu erreichen.</span><span class="sxs-lookup"><span data-stu-id="368c9-202">Then distribute the data across the partitions to meet the scalability target.</span></span> <span data-ttu-id="368c9-203">Für horizontale Partitionierung ist die Auswahl des richtigen Shardschlüssels wichtig, um sicherzustellen, dass die Verteilung gleichmäßig erfolgt ist.</span><span class="sxs-lookup"><span data-stu-id="368c9-203">For horizontal partitioning, choosing the right shard key is important to make sure distribution is even.</span></span> <span data-ttu-id="368c9-204">Weitere Informationen finden Sie unter [Sharding-Muster].</span><span class="sxs-lookup"><span data-stu-id="368c9-204">For more information, see the [Sharding pattern].</span></span>
3. <span data-ttu-id="368c9-205">Stellen Sie sicher, dass jede Partition über genügend Ressourcen verfügt, um den Anforderungen an die Skalierbarkeit im Hinblick auf die Größe der Daten und den Durchsatz zu entsprechen.</span><span class="sxs-lookup"><span data-stu-id="368c9-205">Make sure each partition has enough resources to handle the scalability requirements, in terms of data size and throughput.</span></span> <span data-ttu-id="368c9-206">Je nach Datenspeicher gibt es möglicherweise ein Grenzwert für die Menge an Speicherplatz, Verarbeitungsleistung oder Netzwerkbandbreite pro Partition.</span><span class="sxs-lookup"><span data-stu-id="368c9-206">Depending on the data store, there might be a limit on the amount of storage space, processing power, or network bandwidth per partition.</span></span> <span data-ttu-id="368c9-207">Wenn die Anforderungen diese Grenzwerte wahrscheinlich überschreiten werden, müssen Sie Ihre Partitionierungsstrategie u.U. verfeinern oder Daten noch weiter aufteilen, möglicherweise durch das Kombinieren von zwei oder mehr Strategien.</span><span class="sxs-lookup"><span data-stu-id="368c9-207">If the requirements are likely to exceed these limits, you may need to refine your partitioning strategy or split data out further, possibly combining two or more strategies.</span></span>
4. <span data-ttu-id="368c9-208">Überwachen Sie das System, um sicherzustellen, dass Daten wie erwartet verteilt werden und die Partitionen die Last verarbeiten können.</span><span class="sxs-lookup"><span data-stu-id="368c9-208">Monitor the system to verify that data is distributed as expected and that the partitions can handle the load.</span></span> <span data-ttu-id="368c9-209">Die tatsächliche Nutzung stimmt nicht immer damit überein, was eine Analyse vorhersagt.</span><span class="sxs-lookup"><span data-stu-id="368c9-209">Actual usage does not always match what an analysis predicts.</span></span> <span data-ttu-id="368c9-210">In einem solchen Fall ist es möglich, die Partitionen neu auszurichten, oder einige Teile des Systems anderweitig umzugestalten, um die erforderliche Balance zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="368c9-210">If so, it might be possible to rebalance the partitions, or else redesign some parts of the system to gain the required balance.</span></span>

<span data-ttu-id="368c9-211">Einige Cloudumgebungen ordnen Ressourcen gemäß Infrastrukturgrenzen zu.</span><span class="sxs-lookup"><span data-stu-id="368c9-211">Some cloud environments allocate resources in terms of infrastructure boundaries.</span></span> <span data-ttu-id="368c9-212">Stellen Sie sicher, dass die Limits der von Ihnen ausgewählten Infrastrukturgrenze hinsichtlich Datenspeicherung, Verarbeitungsleistung und Bandbreite ausreichend Platz für das erwartete Wachstum der Datenmenge bieten.</span><span class="sxs-lookup"><span data-stu-id="368c9-212">Ensure that the limits of your selected boundary provide enough room for any anticipated growth in the volume of data, in terms of data storage, processing power, and bandwidth.</span></span>

<span data-ttu-id="368c9-213">Beispiel: Wenn Sie Azure-Tabellenspeicher verwenden, ist die Menge von Anforderungen, die von einer einzelnen Partition in einem bestimmten Zeitraum verarbeitet werden können, begrenzt.</span><span class="sxs-lookup"><span data-stu-id="368c9-213">For example, if you use Azure table storage, there is a limit to the volume of requests that can be handled by a single partition in a particular period of time.</span></span> <span data-ttu-id="368c9-214">(Informationen hierzu finden Sie unter [Skalierbarkeits- und Leistungsziele für Azure Storage].) Ein ausgelasteter Shard erfordert möglicherweise mehr Ressourcen, als eine einzelne Partition verarbeiten kann.</span><span class="sxs-lookup"><span data-stu-id="368c9-214">(See [Azure storage scalability and performance targets].) A busy shard might require more resources than a single partition can handle.</span></span> <span data-ttu-id="368c9-215">In diesem Fall muss der Shard womöglich neu partitioniert werden, um die Last zu verteilen.</span><span class="sxs-lookup"><span data-stu-id="368c9-215">If so, the shard might need to be repartitioned to spread the load.</span></span> <span data-ttu-id="368c9-216">Wenn die Gesamtgröße oder der Gesamtdurchsatz dieser Tabellen die Kapazität eines Speicherkontos überschreitet, müssen Sie u.U. zusätzliche Speicherkonten erstellen und die Tabellen auf diese Konten verteilen.</span><span class="sxs-lookup"><span data-stu-id="368c9-216">If the total size or throughput of these tables exceeds the capacity of a storage account, you might need to create additional storage accounts and spread the tables across these accounts.</span></span>

## <a name="designing-partitions-for-query-performance"></a><span data-ttu-id="368c9-217">Entwerfen von Partitionen für die Abfrageleistung</span><span class="sxs-lookup"><span data-stu-id="368c9-217">Designing partitions for query performance</span></span>

<span data-ttu-id="368c9-218">Die Abfrageleistung kann oft mit kleineren Datensätzen und der parallelen Ausführung von Abfragen erhöht werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-218">Query performance can often be boosted by using smaller data sets and by running parallel queries.</span></span> <span data-ttu-id="368c9-219">Jede Partition sollte einen kleinen Anteil des gesamten Datasets enthalten.</span><span class="sxs-lookup"><span data-stu-id="368c9-219">Each partition should contain a small proportion of the entire data set.</span></span> <span data-ttu-id="368c9-220">Diese Reduzierung des Volumens kann die Leistung von Abfragen verbessern.</span><span class="sxs-lookup"><span data-stu-id="368c9-220">This reduction in volume can improve the performance of queries.</span></span> <span data-ttu-id="368c9-221">Allerdings ist das Partitionieren keine Alternative zum angemessenen Entwerfen und Konfigurieren einer Datenbank.</span><span class="sxs-lookup"><span data-stu-id="368c9-221">However, partitioning is not an alternative for designing and configuring a database appropriately.</span></span> <span data-ttu-id="368c9-222">Stellen Sie z.B. sicher, dass Sie über die erforderlichen Indizes verfügen.</span><span class="sxs-lookup"><span data-stu-id="368c9-222">For example, make sure that you have the necessary indexes in place.</span></span>

<span data-ttu-id="368c9-223">Gehen Sie beim Entwerfen von Partitionen für maximale Abfrageleistung folgendermaßen vor:</span><span class="sxs-lookup"><span data-stu-id="368c9-223">Follow these steps when designing partitions for query performance:</span></span>

1. <span data-ttu-id="368c9-224">Überprüfen Sie die Anwendungsanforderungen und Leistung:</span><span class="sxs-lookup"><span data-stu-id="368c9-224">Examine the application requirements and performance:</span></span>

   - <span data-ttu-id="368c9-225">Bestimmen Sie die kritischen Anfragen, die stets schnell ausgeführt werden müssen, anhand von Unternehmensanforderungen.</span><span class="sxs-lookup"><span data-stu-id="368c9-225">Use business requirements to determine the critical queries that must always perform quickly.</span></span>
   - <span data-ttu-id="368c9-226">Überwachen Sie das System, um Abfragen zu identifizieren, die nur langsam durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-226">Monitor the system to identify any queries that perform slowly.</span></span>
   - <span data-ttu-id="368c9-227">Ermitteln Sie, welche Abfragen am häufigsten ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-227">Find which queries are performed most frequently.</span></span> <span data-ttu-id="368c9-228">Selbst wenn eine einzelne Abfrage nur minimale Kosten verursacht, kann der kumulative Ressourcenverbrauch erheblich sein.</span><span class="sxs-lookup"><span data-stu-id="368c9-228">Even if a single query has a minimal cost, the cumulative resource consumption could be significant.</span></span>

2. <span data-ttu-id="368c9-229">Partitionieren Sie die Daten, die für eine geringe Leistung verantwortlich sind:</span><span class="sxs-lookup"><span data-stu-id="368c9-229">Partition the data that is causing slow performance:</span></span>
   - <span data-ttu-id="368c9-230">Beschränken Sie die Größe der einzelnen Partitionen, sodass die Abfrageantwortzeit innerhalb des Ziels liegt.</span><span class="sxs-lookup"><span data-stu-id="368c9-230">Limit the size of each partition so that the query response time is within target.</span></span>
   - <span data-ttu-id="368c9-231">Wenn Sie horizontale Partitionierung verwenden, entwerfen Sie den Shardschlüssel so, dass die Anwendung problemlos die richtige Partition auswählen kann.</span><span class="sxs-lookup"><span data-stu-id="368c9-231">If you use horizontal partitioning, design the shard key so that the application can easily select the right partition.</span></span> <span data-ttu-id="368c9-232">Dies verhindert, dass die Abfrage jede Partition durchsuchen muss.</span><span class="sxs-lookup"><span data-stu-id="368c9-232">This prevents the query from having to scan through every partition.</span></span>
   - <span data-ttu-id="368c9-233">Berücksichtigen Sie den Speicherort einer Partition.</span><span class="sxs-lookup"><span data-stu-id="368c9-233">Consider the location of a partition.</span></span> <span data-ttu-id="368c9-234">Versuchen Sie nach Möglichkeit die Daten in Partitionen zu belassen, die geografisch dicht bei den Anwendungen und Benutzern liegen, die darauf zugreifen.</span><span class="sxs-lookup"><span data-stu-id="368c9-234">If possible, try to keep data in partitions that are geographically close to the applications and users that access it.</span></span>

3. <span data-ttu-id="368c9-235">Besitzt eine Entität Durchsatz und Anforderungen an die Abfrageleistung, verwenden Sie funktionale Partitionierung basierend auf dieser Entität.</span><span class="sxs-lookup"><span data-stu-id="368c9-235">If an entity has throughput and query performance requirements, use functional partitioning based on that entity.</span></span> <span data-ttu-id="368c9-236">Wenn die Anforderungen dadurch immer noch nicht erfüllt sind, wenden Sie auch eine horizontale Partitionierung an.</span><span class="sxs-lookup"><span data-stu-id="368c9-236">If this still doesn't satisfy the requirements, apply horizontal partitioning as well.</span></span> <span data-ttu-id="368c9-237">In den meisten Fällen reicht eine einzelne Partitionierungsstrategie, aber in einigen Fällen ist es effizienter, beide Strategien zu kombinieren.</span><span class="sxs-lookup"><span data-stu-id="368c9-237">In most cases a single partitioning strategy will suffice, but in some cases it is more efficient to combine both strategies.</span></span>

4. <span data-ttu-id="368c9-238">Erwägen Sie das parallele Ausführen von Abfragen über Partitionen hinweg, um die Leistung zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="368c9-238">Consider running queries in parallel across partitions to improve performance.</span></span>

## <a name="designing-partitions-for-availability"></a><span data-ttu-id="368c9-239">Entwerfen von Partitionen für Verfügbarkeit</span><span class="sxs-lookup"><span data-stu-id="368c9-239">Designing partitions for availability</span></span>

<span data-ttu-id="368c9-240">Partitionieren von Daten kann die Verfügbarkeit von Anwendungen verbessern, indem Sie sicherstellen, dass das gesamte Dataset keine einzelne Fehlerquelle darstellt und einzelne Teilmengen des Datasets unabhängig voneinander verwaltet werden können.</span><span class="sxs-lookup"><span data-stu-id="368c9-240">Partitioning data can improve the availability of applications by ensuring that the entire dataset does not constitute a single point of failure and that individual subsets of the dataset can be managed independently.</span></span>

<span data-ttu-id="368c9-241">Berücksichtigen Sie die folgenden Faktoren, die sich auf die Verfügbarkeit auswirken:</span><span class="sxs-lookup"><span data-stu-id="368c9-241">Consider the following factors that affect availability:</span></span>

<span data-ttu-id="368c9-242">**Wie kritisch sind die Daten für den Geschäftsbetrieb?**</span><span class="sxs-lookup"><span data-stu-id="368c9-242">**How critical the data is to business operations**.</span></span> <span data-ttu-id="368c9-243">Ermitteln Sie, welche Daten kritische geschäftliche Informationen wie z.B. Transaktionen sind, und welche Daten weniger kritische operative Daten sind, z.B. Protokolldateien.</span><span class="sxs-lookup"><span data-stu-id="368c9-243">Identify which data is critical business information, such as transactions, and which data is less critical operational data, such as log files.</span></span>

- <span data-ttu-id="368c9-244">Erwägen Sie das Speichern von kritischen Daten in hochverfügbaren Partitionen mit einem geeigneten Sicherungsplan.</span><span class="sxs-lookup"><span data-stu-id="368c9-244">Consider storing critical data in highly-available partitions with an appropriate backup plan.</span></span>

- <span data-ttu-id="368c9-245">Richten Sie separate Verwaltungs- und Überwachungsverfahren für die verschiedenen Datasets ein.</span><span class="sxs-lookup"><span data-stu-id="368c9-245">Establish separate management and monitoring procedures for the different datasets.</span></span>

- <span data-ttu-id="368c9-246">Speichern Sie Daten der gleichen Wichtigkeitsstufe in der gleichen Partition, sodass sie mit angemessener Häufigkeit zusammen gesichert werden können.</span><span class="sxs-lookup"><span data-stu-id="368c9-246">Place data that has the same level of criticality in the same partition so that it can be backed up together at an appropriate frequency.</span></span> <span data-ttu-id="368c9-247">Partitionen, die Transaktionsdaten enthalten, müssen z.B. häufiger gesichert werden als Partitionen mit Protokollierungs- oder Nachverfolgungsinformationen.</span><span class="sxs-lookup"><span data-stu-id="368c9-247">For example, partitions that hold transaction data might need to be backed up more frequently than partitions that hold logging or trace information.</span></span>

<span data-ttu-id="368c9-248">**Wie werden die einzelnen Partitionen verwaltet?**</span><span class="sxs-lookup"><span data-stu-id="368c9-248">**How individual partitions can be managed**.</span></span> <span data-ttu-id="368c9-249">Das Entwerfen von Partitionen, um unabhängige Verwaltung und Wartung zu unterstützen, bietet mehrere Vorteile.</span><span class="sxs-lookup"><span data-stu-id="368c9-249">Designing partitions to support independent management and maintenance provides several advantages.</span></span> <span data-ttu-id="368c9-250">Beispiel: </span><span class="sxs-lookup"><span data-stu-id="368c9-250">For example:</span></span>

- <span data-ttu-id="368c9-251">Wenn eine Partition ausfällt, kann sie ohne Anwendungen, die auf Daten in anderen Partitionen zugreifen, unabhängig wiederhergestellt werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-251">If a partition fails, it can be recovered independently without applications that access data in other partitions.</span></span>

- <span data-ttu-id="368c9-252">Das Partitionieren von Daten nach geografischem Bereich ermöglicht die Ausführung von geplanten Wartungsaufgaben außerhalb der Spitzenzeiten für jeden Standort.</span><span class="sxs-lookup"><span data-stu-id="368c9-252">Partitioning data by geographical area allows scheduled maintenance tasks to occur at off-peak hours for each location.</span></span> <span data-ttu-id="368c9-253">Stellen Sie sicher, dass die Partitionen nicht zu groß sind, um zu verhindern, dass eine geplante Wartung während dieses Zeitraums abgeschlossen wird.</span><span class="sxs-lookup"><span data-stu-id="368c9-253">Ensure that partitions are not too big to prevent any planned maintenance from being completed during this period.</span></span>

<span data-ttu-id="368c9-254">**Sollen kritische Daten partitionsübergreifend repliziert werden?**</span><span class="sxs-lookup"><span data-stu-id="368c9-254">**Whether to replicate critical data across partitions**.</span></span> <span data-ttu-id="368c9-255">Diese Strategie kann zwar die Verfügbarkeit und Leistung verbessern, jedoch auch zu Konsistenzproblemen führen.</span><span class="sxs-lookup"><span data-stu-id="368c9-255">This strategy can improve availability and performance, but can also introduce consistency issues.</span></span> <span data-ttu-id="368c9-256">Das Synchronisieren von Änderungen mit allen Replikaten kostet Zeit.</span><span class="sxs-lookup"><span data-stu-id="368c9-256">It takes time to synchronize changes with every replica.</span></span> <span data-ttu-id="368c9-257">Während dieses Zeitraums enthalten verschiedene Partitionen unterschiedliche Datenwerte.</span><span class="sxs-lookup"><span data-stu-id="368c9-257">During this period, different partitions will contain different data values.</span></span>

## <a name="application-design-considerations"></a><span data-ttu-id="368c9-258">Überlegungen zum Anwendungsentwurf</span><span class="sxs-lookup"><span data-stu-id="368c9-258">Application design considerations</span></span>

<span data-ttu-id="368c9-259">Durch Partitionierung werden der Entwurf und die Entwicklung des Systems komplexer.</span><span class="sxs-lookup"><span data-stu-id="368c9-259">Partitioning adds complexity to the design and development of your system.</span></span> <span data-ttu-id="368c9-260">Betrachten Sie die Partitionierung als grundlegenden Bestandteil des Systementwurfs, selbst wenn das System zunächst nur eine Partition umfasst.</span><span class="sxs-lookup"><span data-stu-id="368c9-260">Consider partitioning as a fundamental part of system design even if the system initially only contains a single partition.</span></span> <span data-ttu-id="368c9-261">Wenn Sie sich erst im Nachhinein mit der Partitionierung befassen, wird es schwieriger, da Sie bereits ein Livesystem zu verwalten haben:</span><span class="sxs-lookup"><span data-stu-id="368c9-261">If you address partitioning as an afterthought, it will be more challenging because you already have a live system to maintain:</span></span>

- <span data-ttu-id="368c9-262">Datenzugriffslogik muss geändert werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-262">Data access logic will need to be modified.</span></span>
- <span data-ttu-id="368c9-263">Möglicherweise müssen große Mengen an vorhandenen Daten migriert werden, um sie auf Partitionen zu verteilen.</span><span class="sxs-lookup"><span data-stu-id="368c9-263">Large quantities of existing data may need to be migrated, to distribute it across partitions</span></span>
- <span data-ttu-id="368c9-264">Benutzer erwarten, dass das System während der Migration weiter verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="368c9-264">Users expect to be able to continue using the system during the migration.</span></span>

<span data-ttu-id="368c9-265">In einigen Fällen wird die Partitionierung nicht als wichtig angesehen, da das ursprüngliche Dataset klein ist und problemlos von einem einzelnen Server verarbeitet werden kann.</span><span class="sxs-lookup"><span data-stu-id="368c9-265">In some cases, partitioning is not considered important because the initial dataset is small and can be easily handled by a single server.</span></span> <span data-ttu-id="368c9-266">Für einige Workloads mag dies möglich sein, aber viele kommerzielle Systeme müssen mit steigender Benutzeranzahl erweitert werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-266">This might be true for some workloads, but many commercial systems need to expand as the number of users increases.</span></span>

<span data-ttu-id="368c9-267">Außerdem ist Partitionierung nicht nur für große Datenspeicher von Vorteil.</span><span class="sxs-lookup"><span data-stu-id="368c9-267">Moreover, it's not only large data stores that benefit from partitioning.</span></span> <span data-ttu-id="368c9-268">Beispielsweise kann auf einen kleinen Datenspeicher  von mehreren hundert gleichzeitigen Clients intensiv zugegriffen werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-268">For example, a small data store might be heavily accessed by hundreds of concurrent clients.</span></span> <span data-ttu-id="368c9-269">Das Partitionieren der Daten kann in dieser Situation helfen, Konflikte zu minimieren und den Durchsatz verbessern.</span><span class="sxs-lookup"><span data-stu-id="368c9-269">Partitioning the data in this situation can help to reduce contention and improve throughput.</span></span>

<span data-ttu-id="368c9-270">Beachten Sie beim Entwerfen eines Schemas für die Datenpartitionierung folgende Punkte:</span><span class="sxs-lookup"><span data-stu-id="368c9-270">Consider the following points when you design a data partitioning scheme:</span></span>

<span data-ttu-id="368c9-271">**Minimieren Sie partitionsübergreifende Datenzugriffsvorgänge**.</span><span class="sxs-lookup"><span data-stu-id="368c9-271">**Minimize cross-partition data access operations**.</span></span> <span data-ttu-id="368c9-272">Halten Sie die Daten für die am häufigsten verwendeten Datenbankvorgänge nach Möglichkeit in jeder Partition zusammen, um partitionsübergreifende Datenzugriffsvorgänge zu minimieren.</span><span class="sxs-lookup"><span data-stu-id="368c9-272">Where possible, keep data for the most common database operations together in each partition to minimize cross-partition data access operations.</span></span> <span data-ttu-id="368c9-273">Das Abfragen über Partitionen hinweg kann mehr Zeit in Anspruch nehmen als das Abfragen innerhalb einer einzelnen Partition. Das Optimieren der Partitionen für eine Reihe von Abfragen könnte jedoch andere Sätze von Abfragen beeinträchtigen.</span><span class="sxs-lookup"><span data-stu-id="368c9-273">Querying across partitions can be more time-consuming than querying within a single partition, but optimizing partitions for one set of queries might adversely affect other sets of queries.</span></span> <span data-ttu-id="368c9-274">Wenn Sie partitionsübergreifende Abfragen ausführen müssen, minimieren Sie die Abfragezeit, indem Sie parallele Abfragen ausführen und die Ergebnisse innerhalb der Anwendung aggregieren.</span><span class="sxs-lookup"><span data-stu-id="368c9-274">If you must query across partitions, minimize query time by running parallel queries and aggregating the results within the application.</span></span> <span data-ttu-id="368c9-275">(Diese Herangehensweise lässt sich möglicherweise nicht in allen Fällen umsetzen, z.B. wenn das Ergebnis aus einer bestimmten Abfrage in der nächsten Abfrage verwendet wird.)</span><span class="sxs-lookup"><span data-stu-id="368c9-275">(This approach might not be possible in some cases, such as when the result from one query is used in the next query.)</span></span>

<span data-ttu-id="368c9-276">**Ziehen Sie in Betracht, statische Referenzdaten zu replizieren.**</span><span class="sxs-lookup"><span data-stu-id="368c9-276">**Consider replicating static reference data.**</span></span> <span data-ttu-id="368c9-277">Wenn in Abfragen relativ statische Referenzdaten genutzt werden, z.B. Tabellen mit Postleitzahlen oder Produktlisten, sollten Sie erwägen, diese Daten in allen Partitionen zu replizieren, um separate Suchvorgänge in verschiedenen Partitionen zu reduzieren.</span><span class="sxs-lookup"><span data-stu-id="368c9-277">If queries use relatively static reference data, such as postal code tables or product lists, consider replicating this data in all of the partitions to reduce separate lookup operations in different partitions.</span></span> <span data-ttu-id="368c9-278">Dadurch lässt sich auch die Wahrscheinlichkeit verringern, dass Referenzdaten zu einem „heißen“ Dataset mit umfangreichem Datenverkehr aus dem gesamten System werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-278">This approach can also reduce the likelihood of the reference data becoming a "hot" dataset, with heavy traffic from across the entire system.</span></span> <span data-ttu-id="368c9-279">Das Synchronisieren von Änderungen, die an diesen Referenzdaten vorgenommen werden, ist aber mit zusätzlichem Aufwand verbunden.</span><span class="sxs-lookup"><span data-stu-id="368c9-279">However, there is an additional cost associated with synchronizing any changes to the reference data.</span></span>

<span data-ttu-id="368c9-280">**Minimieren Sie partitionsübergreifende Verknüpfungen.**</span><span class="sxs-lookup"><span data-stu-id="368c9-280">**Minimize cross-partition joins.**</span></span> <span data-ttu-id="368c9-281">Minimieren Sie nach Möglichkeit die Anforderungen für referenzielle Integrität über vertikale und funktionale Partitionen hinweg.</span><span class="sxs-lookup"><span data-stu-id="368c9-281">Where possible, minimize requirements for referential integrity across vertical and functional partitions.</span></span> <span data-ttu-id="368c9-282">In diesen Schemen ist die Anwendung für die Wahrung der referenziellen Integrität über Partitionen hinweg verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="368c9-282">In these schemes, the application is responsible for maintaining referential integrity across partitions.</span></span> <span data-ttu-id="368c9-283">Abfragen, die Daten über mehrere Partitionen hinweg verknüpfen, sind ineffizient, da die Anwendung in der Regel aufeinanderfolgende Abfragen basierend auf einem Schlüssel und dann auf einem Fremdschlüssel durchführen muss.</span><span class="sxs-lookup"><span data-stu-id="368c9-283">Queries that join data across multiple partitions are inefficient because the application typically needs to perform consecutive queries based on a key and then a foreign key.</span></span> <span data-ttu-id="368c9-284">Ziehen Sie stattdessen in Betracht, die relevanten Daten zu replizieren oder zu denormalisieren.</span><span class="sxs-lookup"><span data-stu-id="368c9-284">Instead, consider replicating or de-normalizing the relevant data.</span></span> <span data-ttu-id="368c9-285">Wenn partitionsübergreifende Verknüpfungen notwendig sind, führen Sie parallele Abfragen über die Partitionen hinweg aus, und verknüpfen Sie die Daten innerhalb der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="368c9-285">If cross-partition joins are necessary, run parallel queries over the partitions and join the data within the application.</span></span>

<span data-ttu-id="368c9-286">**Implementieren Sie die letztliche Konsistenz**.</span><span class="sxs-lookup"><span data-stu-id="368c9-286">**Embrace eventual consistency**.</span></span> <span data-ttu-id="368c9-287"> Überprüfen Sie, ob eine hohe Konsistenz tatsächlich erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="368c9-287">Evaluate whether strong consistency is actually a requirement.</span></span> <span data-ttu-id="368c9-288">Eine gängige Vorgehensweise in verteilten Systemen ist das Implementieren von letztendlicher Konsistenz.</span><span class="sxs-lookup"><span data-stu-id="368c9-288">A common approach in distributed systems is to implement eventual consistency.</span></span> <span data-ttu-id="368c9-289">Die Daten in jeder Partition werden separat aktualisiert, und die Anwendungslogik stellt sicher, dass alle Updates erfolgreich abgeschlossen werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-289">The data in each partition is updated separately, and the application logic ensures that the updates are all completed successfully.</span></span> <span data-ttu-id="368c9-290">Die Logik verarbeitet auch alle Inkonsistenzen, die durch Abfragen von Daten während eines letztlich konsistenten Vorgangs entstehen.</span><span class="sxs-lookup"><span data-stu-id="368c9-290">It also handles the inconsistencies that can arise from querying data while an eventually consistent operation is running.</span></span>

<span data-ttu-id="368c9-291">**Überlegen Sie, wie Abfragen die richtige Partition finden.**</span><span class="sxs-lookup"><span data-stu-id="368c9-291">**Consider how queries locate the correct partition**.</span></span> <span data-ttu-id="368c9-292">Wenn eine Abfrage alle Partitionen durchsuchen muss, um die erforderlichen Daten zu finden, wirkt sich das erheblich auf die Leistung aus, auch wenn mehrere parallele Abfragen ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-292">If a query must scan all partitions to locate the required data, there is a significant impact on performance, even when multiple parallel queries are running.</span></span> <span data-ttu-id="368c9-293">Mit vertikalen und funktionalen Partitionierungsstrategien können Abfragen natürlich die Partition angeben.</span><span class="sxs-lookup"><span data-stu-id="368c9-293">With vertical and functional partitioning, queries can naturally specify the partition.</span></span> <span data-ttu-id="368c9-294">Bei horizontaler Partitionierung kann das Auffinden eines Elements dagegen schwierig sein, da jeder Shard über das gleiche Schema verfügt.</span><span class="sxs-lookup"><span data-stu-id="368c9-294">Horizontal partitioning, on the other hand, can make locating an item difficult, because every shard has the same schema.</span></span> <span data-ttu-id="368c9-295">Eine typische Lösung ist die Verwaltung einer Zuordnung, die verwendet wird, um den Shard-Speicherort für bestimmte Elemente zu suchen.</span><span class="sxs-lookup"><span data-stu-id="368c9-295">A typical solution to maintain a map that is used to look up the shard location for specific items.</span></span> <span data-ttu-id="368c9-296">Diese Zuordnung kann in der Shardinglogik der Anwendung implementiert sein oder vom Datenspeicher verwaltet werden, wenn transparentes Sharding unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="368c9-296">This map can be implemented in the sharding logic of the application, or maintained by the data store if it supports transparent sharding.</span></span>

<span data-ttu-id="368c9-297">**Erwägen Sie eine Neuverteilung von Shards in regelmäßigen Abständen**.</span><span class="sxs-lookup"><span data-stu-id="368c9-297">**Consider periodically rebalancing shards**.</span></span> <span data-ttu-id="368c9-298">Bei horizontaler Partitionierung kann eine Neuverteilung von Shards dazu beitragen, die Daten nach Größe und Workload gleichmäßig zu verteilen, um Hotspots zu minimieren, die Abfrageleistung zu maximieren und physische Speichereinschränkungen zu umgehen.</span><span class="sxs-lookup"><span data-stu-id="368c9-298">With horizontal partitioning, rebalancing shards can help distribute the data evenly by size and by workload to minimize hotspots, maximize query performance, and work around physical storage limitations.</span></span> <span data-ttu-id="368c9-299">Dies ist jedoch eine komplexe Aufgabe, die häufig ein benutzerdefiniertes Tool oder einen benutzerdefinierten Prozess erfordert.</span><span class="sxs-lookup"><span data-stu-id="368c9-299">However, this is a complex task that often requires the use of a custom tool or process.</span></span>

<span data-ttu-id="368c9-300">**Replizieren Sie Partitionen.**</span><span class="sxs-lookup"><span data-stu-id="368c9-300">**Replicate partitions.**</span></span> <span data-ttu-id="368c9-301">Die Replikation jeder Partition bietet zusätzlichen Schutz vor Ausfällen.</span><span class="sxs-lookup"><span data-stu-id="368c9-301">If you replicate each partition, it provides additional protection against failure.</span></span> <span data-ttu-id="368c9-302">Wenn ein einzelnes Replikat fehlschlägt, können Abfragen gegen eine Arbeitskopie geleitet werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-302">If a single replica fails, queries can be directed towards a working copy.</span></span>

<span data-ttu-id="368c9-303">**Wenn die physischen Grenzen einer Partitionierungsstrategie erreicht sind, müssen Sie die Skalierbarkeit auf eine andere Ebene erweitern.**</span><span class="sxs-lookup"><span data-stu-id="368c9-303">**If you reach the physical limits of a partitioning strategy, you might need to extend the scalability to a different level**.</span></span> <span data-ttu-id="368c9-304">Wurde die Partitionierung beispielsweise auf Datenbankebene implementiert, müssen Sie möglicherweise Partitionen in mehreren Datenbanken suchen oder replizieren.</span><span class="sxs-lookup"><span data-stu-id="368c9-304">For example, if partitioning is at the database level, you might need to locate or replicate partitions in multiple databases.</span></span> <span data-ttu-id="368c9-305">Wenn die Partitionierung bereits auf Datenbankebene implementiert wurde und physische Einschränkungen ein Problem sind, kann dies bedeuten, dass Sie Partitionen in mehreren Hostingkonten suchen oder replizieren müssen.</span><span class="sxs-lookup"><span data-stu-id="368c9-305">If partitioning is already at the database level, and physical limitations are an issue, it might mean that you need to locate or replicate partitions in multiple hosting accounts.</span></span>

<span data-ttu-id="368c9-306">**Vermeiden Sie Transaktionen, die auf Daten in mehreren Partitionen zugreifen.**</span><span class="sxs-lookup"><span data-stu-id="368c9-306">**Avoid transactions that access data in multiple partitions**.</span></span> <span data-ttu-id="368c9-307">Einige Datenspeicher implementieren Transaktionskonsistenz und -integrität für Vorgänge, die Daten ändern, aber nur, wenn sich diese in einer einzelnen Partition befinden.</span><span class="sxs-lookup"><span data-stu-id="368c9-307">Some data stores implement transactional consistency and integrity for operations that modify data, but only when the data is located in a single partition.</span></span> <span data-ttu-id="368c9-308">Wenn Sie Transaktionsunterstützung über mehrere Partitionen benötigen, müssen Sie diese wahrscheinlich als Teil Ihrer Anwendungslogik implementieren, da die meisten Partitionierungssysteme keine systemeigene Unterstützung bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="368c9-308">If you need transactional support across multiple partitions, you will probably need to implement this as part of your application logic because most partitioning systems do not provide native support.</span></span>

<span data-ttu-id="368c9-309">Alle Datenspeicher erfordern ein gewisses Maß an Betriebsverwaltung und Überwachung.</span><span class="sxs-lookup"><span data-stu-id="368c9-309">All data stores require some operational management and monitoring activity.</span></span> <span data-ttu-id="368c9-310">Die Aufgaben können vom Laden der Daten, Backup und Wiederherstellen der Daten bis Neuorganisieren der Daten reichen und stellen sicher, dass das System ordnungsgemäß und effizient arbeitet.</span><span class="sxs-lookup"><span data-stu-id="368c9-310">The tasks can range from loading data, backing up and restoring data, reorganizing data, and ensuring that the system is performing correctly and efficiently.</span></span>

<span data-ttu-id="368c9-311">Berücksichtigen Sie die folgenden Faktoren, die sich auf die Betriebsverwaltung auswirken:</span><span class="sxs-lookup"><span data-stu-id="368c9-311">Consider the following factors that affect operational management:</span></span>

- <span data-ttu-id="368c9-312">**Wie werden die notwendigen verwaltungsbezogenen und operativen Aufgaben implementiert, wenn die Daten partitioniert sind?**</span><span class="sxs-lookup"><span data-stu-id="368c9-312">**How to implement appropriate management and operational tasks when the data is partitioned**.</span></span> <span data-ttu-id="368c9-313">Hierzu können Aufgaben zur Sicherung und Wiederherstellung, Datenarchivierung, Systemüberwachung sowie weitere administrative Aufgaben gehören.</span><span class="sxs-lookup"><span data-stu-id="368c9-313">These tasks might include backup and restore, archiving data, monitoring the system, and other administrative tasks.</span></span> <span data-ttu-id="368c9-314">Beispielsweise kann das Verwalten von logischer Konsistenz bei Backup- und Wiederherstellungsvorgängen schwierig sein.</span><span class="sxs-lookup"><span data-stu-id="368c9-314">For example, maintaining logical consistency during backup and restore operations can be a challenge.</span></span>

- <span data-ttu-id="368c9-315">**Wie werden Daten in die verschiedenen Partitionen geladen und neue Daten aus anderen Quellen hinzugefügt?**</span><span class="sxs-lookup"><span data-stu-id="368c9-315">**How to load the data into multiple partitions and add new data that's arriving from other sources**.</span></span> <span data-ttu-id="368c9-316">Einige Tools und Hilfsprogramme unterstützen Datenvorgänge in Shards wie das Laden von Daten in die richtige Partition möglicherweise nicht.</span><span class="sxs-lookup"><span data-stu-id="368c9-316">Some tools and utilities might not support sharded data operations such as loading data into the correct partition.</span></span>

- <span data-ttu-id="368c9-317">**Wie werden die Daten in regelmäßigen Abständen archiviert und gelöscht?**</span><span class="sxs-lookup"><span data-stu-id="368c9-317">**How to archive and delete the data on a regular basis**.</span></span> <span data-ttu-id="368c9-318">Um ein übermäßiges Wachstum der Partitionen zu verhindern, müssen Daten in regelmäßigen Abständen (z. B. monatlich) archiviert und gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-318">To prevent the excessive growth of partitions, you need to archive and delete data on a regular basis (perhaps monthly).</span></span> <span data-ttu-id="368c9-319">Es kann notwendig sein, die Daten zu transformieren, um einem anderen Archivschema zu entsprechen.</span><span class="sxs-lookup"><span data-stu-id="368c9-319">It might be necessary to transform the data to match a different archive schema.</span></span>

- <span data-ttu-id="368c9-320">**Wie werden Datenintegritätsprobleme ermittelt?**</span><span class="sxs-lookup"><span data-stu-id="368c9-320">**How to locate data integrity issues**.</span></span> <span data-ttu-id="368c9-321">Es empfiehlt sich, einen regelmäßigen Prozess zum Ermitteln möglicher Datenintegritätsprobleme auszuführen, wie z.B. Daten in einer Partition, die auf nicht vorhandene Informationen in einer anderen Partition verweisen.</span><span class="sxs-lookup"><span data-stu-id="368c9-321">Consider running a periodic process to locate any data integrity issues, such as data in one partition that references missing information in another.</span></span> <span data-ttu-id="368c9-322">Der Prozess kann entweder versuchen, diese Probleme automatisch zu beheben, oder einfach einen Bericht für die manuelle Überprüfung generieren.</span><span class="sxs-lookup"><span data-stu-id="368c9-322">The process can either attempt to fix these issues automatically or simply generate a report for manual review.</span></span>

## <a name="rebalancing-partitions"></a><span data-ttu-id="368c9-323">Neuverteilen von Partitionen</span><span class="sxs-lookup"><span data-stu-id="368c9-323">Rebalancing partitions</span></span>

<span data-ttu-id="368c9-324">Im Zuge der Weiterentwicklung eines Systems müssen Sie möglicherweise das Partitionierungsschema anpassen.</span><span class="sxs-lookup"><span data-stu-id="368c9-324">As a system matures, you might have to adjust the partitioning scheme.</span></span> <span data-ttu-id="368c9-325">Beispielsweise ist es möglich, dass in einzelnen Partitionen ein unverhältnismäßig großes Datenverkehrsvolumen auftritt, sodass diese Partitionen zu „heißen“ Partitionen werden, was zu übermäßigen Konflikten führt.</span><span class="sxs-lookup"><span data-stu-id="368c9-325">For example, individual partitions might start get a disproportionate volume of traffic and become hot, leading to excessive contention.</span></span> <span data-ttu-id="368c9-326">Oder Sie haben möglicherweise die Datenmenge in einigen Partitionen unterschätzt, sodass einige Partitionen bald an die Kapazitätsgrenzen stoßen.</span><span class="sxs-lookup"><span data-stu-id="368c9-326">Or you might have underestimated the volume of data in some partitions, causing some partitions to approach capacity limits.</span></span>

<span data-ttu-id="368c9-327">Einige Datenspeicher wie Cosmos DB können die Partitionen automatisch neu verteilen.</span><span class="sxs-lookup"><span data-stu-id="368c9-327">Some data stores, such as Cosmos DB, can automatically rebalance partitions.</span></span> <span data-ttu-id="368c9-328">In anderen Fällen ist das Neuverteilen eine administrative Aufgabe, die aus zwei Schritten besteht:</span><span class="sxs-lookup"><span data-stu-id="368c9-328">In other cases, rebalancing is an administrative task that consists of two stages:</span></span>

1. <span data-ttu-id="368c9-329">Bestimmen Sie eine neue Partitionierungsstrategie.</span><span class="sxs-lookup"><span data-stu-id="368c9-329">Determine a new partitioning strategy.</span></span>

    - <span data-ttu-id="368c9-330">Welche Partitionen müssen aufgeteilt (oder möglicherweise kombiniert) werden?</span><span class="sxs-lookup"><span data-stu-id="368c9-330">Which partitions need to be split (or possibly combined)?</span></span>
    - <span data-ttu-id="368c9-331">Was ist der neue Partitionsschlüssel?</span><span class="sxs-lookup"><span data-stu-id="368c9-331">What is the new partition key?</span></span>

2. <span data-ttu-id="368c9-332">Migrieren Sie Daten vom alten Partitionierungsschema in den neuen Satz von Partitionen.</span><span class="sxs-lookup"><span data-stu-id="368c9-332">Migrate data from the old partitioning scheme to the new set of partitions.</span></span>

<span data-ttu-id="368c9-333">Je nach Datenspeicher können Sie Daten möglicherweise zwischen Partitionen migrieren, während sie verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-333">Depending on the data store, you might be able to migrate data between partitions while they are in use.</span></span> <span data-ttu-id="368c9-334">Dies wird als *Onlinemigration* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="368c9-334">This is called *online migration*.</span></span> <span data-ttu-id="368c9-335">Wenn dies nicht möglich ist, müssen Sie die Verfügbarkeit von Partitionen vorübergehend aufheben, während die Daten verschoben werden (*Offlinemigration*).</span><span class="sxs-lookup"><span data-stu-id="368c9-335">If that's not possible, you might need to make partitions unavailable while the data is relocated (*offline migration*).</span></span>

### <a name="offline-migration"></a><span data-ttu-id="368c9-336">Offlinemigration</span><span class="sxs-lookup"><span data-stu-id="368c9-336">Offline migration</span></span>

<span data-ttu-id="368c9-337">Die Offlinemigration ist im Allgemeinen einfacher, da sie die Wahrscheinlichkeit von Konflikten reduziert.</span><span class="sxs-lookup"><span data-stu-id="368c9-337">Offline migration is generally simpler, because it reduces the chances of contention occurring.</span></span> <span data-ttu-id="368c9-338">Vom Konzept her funktioniert die Offlinemigration wie folgt:</span><span class="sxs-lookup"><span data-stu-id="368c9-338">Conceptually, offline migration works as follows:</span></span>

1. <span data-ttu-id="368c9-339">Markieren Sie die Partition als offline.</span><span class="sxs-lookup"><span data-stu-id="368c9-339">Mark the partition offline.</span></span>
2. <span data-ttu-id="368c9-340">Teilen Sie die Daten auf bzw. führen Sie sie zusammen, und verschieben Sie sie in die neuen Partitionen.</span><span class="sxs-lookup"><span data-stu-id="368c9-340">Split-merge and move the data to the new partitions.</span></span>
3. <span data-ttu-id="368c9-341">Überprüfen Sie die Daten.</span><span class="sxs-lookup"><span data-stu-id="368c9-341">Verify the data.</span></span>
4. <span data-ttu-id="368c9-342">Schalten Sie die neuen Partitionen online.</span><span class="sxs-lookup"><span data-stu-id="368c9-342">Bring the new partitions online.</span></span>
5. <span data-ttu-id="368c9-343">Entfernen Sie die alte Partition.</span><span class="sxs-lookup"><span data-stu-id="368c9-343">Remove the old partition.</span></span>

<span data-ttu-id="368c9-344">Sie haben in Schritt 1 die Option, eine Partition als schreibgeschützt zu markieren, damit Anwendungen die Daten weiterhin lesen können, während diese verschoben werden.</span><span class="sxs-lookup"><span data-stu-id="368c9-344">Optionally, you can mark a partition as read-only in step 1, so that applications can still read the data while it is being moved.</span></span>

## <a name="online-migration"></a><span data-ttu-id="368c9-345">Onlinemigration</span><span class="sxs-lookup"><span data-stu-id="368c9-345">Online migration</span></span>

<span data-ttu-id="368c9-346">Die Ausführung der Onlinemigration ist komplexer, aber sie ist weniger störend.</span><span class="sxs-lookup"><span data-stu-id="368c9-346">Online migration is more complex to perform but less disruptive.</span></span> <span data-ttu-id="368c9-347">Der Prozess ähnelt der Offlinemigration, außer dass die ursprüngliche Partition nicht als offline markiert wird.</span><span class="sxs-lookup"><span data-stu-id="368c9-347">The process is similar to offline migration, except the original partition is not marked offline.</span></span> <span data-ttu-id="368c9-348">Je nach Granularität des Migrationsvorgangs (z.B. abhängig davon, ob der Vorgang Element für Element oder Shard für Shard ausgeführt wird) muss der Datenzugriffscode in den Clientanwendungen Daten an zwei Orten lesen und schreiben (in der ursprünglichen und der neuen Partition).</span><span class="sxs-lookup"><span data-stu-id="368c9-348">Depending on the granularity of the migration process (for example, item by item versus shard by shard), the data access code in the client applications might have to handle reading and writing data that's held in two locations, the original partition and the new partition.</span></span>

## <a name="related-patterns"></a><span data-ttu-id="368c9-349">Verwandte Muster</span><span class="sxs-lookup"><span data-stu-id="368c9-349">Related patterns</span></span>

<span data-ttu-id="368c9-350">Die folgenden Entwurfsmuster können für Ihr Szenario relevant sein:</span><span class="sxs-lookup"><span data-stu-id="368c9-350">The following design patterns might be relevant to your scenario:</span></span>

- <span data-ttu-id="368c9-351">Das [Sharding-Muster](../patterns/sharding.md) beschreibt einige allgemeine Strategien für das Sharding von Daten.</span><span class="sxs-lookup"><span data-stu-id="368c9-351">The [sharding pattern](../patterns/sharding.md) describes some common strategies for sharding data.</span></span>

- <span data-ttu-id="368c9-352">Das [Indextabellenmuster](../patterns/index-table.md) zeigt das Erstellen von sekundären Indizes für Daten.</span><span class="sxs-lookup"><span data-stu-id="368c9-352">The [index table pattern](../patterns/index-table.md) shows how to create secondary indexes over data.</span></span> <span data-ttu-id="368c9-353">Mit diesem Ansatz kann eine Anwendung Daten durch Abfragen, die nicht auf den Primärschlüssel einer Sammlung verweisen, schnell abrufen.</span><span class="sxs-lookup"><span data-stu-id="368c9-353">An application can quickly retrieve data with this approach, by using queries that do not reference the primary key of a collection.</span></span>

- <span data-ttu-id="368c9-354">Das [Muster für materialisierte Sichten](../patterns/materialized-view.md) erläutert, wie Sie vorab aufgefüllte Ansichten generieren können, die Daten zusammenfassen, um schnelle Abfragevorgänge zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="368c9-354">The [materialized view pattern](../patterns/materialized-view.md) describes how to generate pre-populated views that summarize data to support fast query operations.</span></span> <span data-ttu-id="368c9-355">Dieser Ansatz kann in einem partitionierten Datenspeicher hilfreich sein, wenn die Partitionen, die die Daten enthalten, die zusammengefasst werden, über mehrere Standorte verteilt sind.</span><span class="sxs-lookup"><span data-stu-id="368c9-355">This approach can be useful in a partitioned data store if the partitions that contain the data being summarized are distributed across multiple sites.</span></span>

## <a name="next-steps"></a><span data-ttu-id="368c9-356">Nächste Schritte</span><span class="sxs-lookup"><span data-stu-id="368c9-356">Next steps</span></span>

- <span data-ttu-id="368c9-357">Erfahren Sie mehr über Partitionierungsstrategien für bestimmte Azure-Dienste.</span><span class="sxs-lookup"><span data-stu-id="368c9-357">Learn about partitioning strategies for specific Azure services.</span></span> <span data-ttu-id="368c9-358">Siehe [Strategien für die Datenpartitionierung](./data-partitioning-strategies.md)</span><span class="sxs-lookup"><span data-stu-id="368c9-358">See [Data partitioning strategies](./data-partitioning-strategies.md)</span></span>

[Skalierbarkeits- und Leistungsziele für Azure Storage]: /azure/storage/storage-scalability-targets
[Azure Storage Scalability and Performance Targets]: /azure/storage/storage-scalability-targets
