---
title: Leitfaden zum API-Design
titleSuffix: Best practices for cloud applications
description: Leitfaden zum Erstellen einer sorgfältig entworfenen Web-API
author: dragon119
ms.date: 01/12/2018
ms.topic: best-practice
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.custom: seodec18
ms.openlocfilehash: 06090b0862a7c737d9ee93512f851d3fcf2e2d9f
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 04/17/2019
ms.locfileid: "59640871"
---
# <a name="api-design"></a><span data-ttu-id="3d018-103">API-Design</span><span class="sxs-lookup"><span data-stu-id="3d018-103">API design</span></span>

<span data-ttu-id="3d018-104">Die meisten modernen Webanwendungen machen APIs verfügbar, die Clients für die Interaktion mit der Anwendung nutzen können.</span><span class="sxs-lookup"><span data-stu-id="3d018-104">Most modern web applications expose APIs that clients can use to interact with the application.</span></span> <span data-ttu-id="3d018-105">Eine gut entworfene Web-API sollte Folgendes unterstützen:</span><span class="sxs-lookup"><span data-stu-id="3d018-105">A well-designed web API should aim to support:</span></span>

- <span data-ttu-id="3d018-106">**Unabhängigkeit von der Plattform**.</span><span class="sxs-lookup"><span data-stu-id="3d018-106">**Platform independence**.</span></span> <span data-ttu-id="3d018-107">Jeder Client muss die API unabhängig von ihrer internen Implementierung aufrufen können.</span><span class="sxs-lookup"><span data-stu-id="3d018-107">Any client should be able to call the API, regardless of how the API is implemented internally.</span></span> <span data-ttu-id="3d018-108">Dies erfordert Standardprotokolle und einen Mechanismus, der es dem Client und dem Webdienst ermöglicht, sich bezüglich des Formats der auszutauschenden Daten zu verständigen.</span><span class="sxs-lookup"><span data-stu-id="3d018-108">This requires using standard protocols, and having a mechanism whereby the client and the web service can agree on the format of the data to exchange.</span></span>

- <span data-ttu-id="3d018-109">**Serviceentwicklung**.</span><span class="sxs-lookup"><span data-stu-id="3d018-109">**Service evolution**.</span></span> <span data-ttu-id="3d018-110">Die Web-API sollte weiterentwickelt werden können, und Funktionen sollten sich unabhängig von Clientanwendungen hinzufügen lassen.</span><span class="sxs-lookup"><span data-stu-id="3d018-110">The web API should be able to evolve and add functionality independently from client applications.</span></span> <span data-ttu-id="3d018-111">Während der Weiterentwicklung der API müssen vorhandene Clientanwendungen weiterhin ohne Änderungen funktionieren.</span><span class="sxs-lookup"><span data-stu-id="3d018-111">As the API evolves, existing client applications should continue to function without modification.</span></span> <span data-ttu-id="3d018-112">Alle Funktionen müssen auffindbar sein, damit Clientanwendungen sie vollständig nutzen können.</span><span class="sxs-lookup"><span data-stu-id="3d018-112">All functionality should be discoverable so that client applications can fully use it.</span></span>

<span data-ttu-id="3d018-113">Dieser Leitfaden enthält Informationen zu den Aspekten, die beim Entwerfen einer Web-API zu berücksichtigen sind.</span><span class="sxs-lookup"><span data-stu-id="3d018-113">This guidance describes issues that you should consider when designing a web API.</span></span>

## <a name="introduction-to-rest"></a><span data-ttu-id="3d018-114">Einführung in REST</span><span class="sxs-lookup"><span data-stu-id="3d018-114">Introduction to REST</span></span>

<span data-ttu-id="3d018-115">Im Jahr 2000 schlug Roy Fielding REST (Representational State Transfer) als Architekturansatz zum Entwerfen von Webdiensten vor.</span><span class="sxs-lookup"><span data-stu-id="3d018-115">In 2000, Roy Fielding proposed Representational State Transfer (REST) as an architectural approach to designing web services.</span></span> <span data-ttu-id="3d018-116">REST ist ein Architekturstil zum Erstellen verteilter Systeme, die auf Hypermedia basieren.</span><span class="sxs-lookup"><span data-stu-id="3d018-116">REST is an architectural style for building distributed systems based on hypermedia.</span></span> <span data-ttu-id="3d018-117">REST ist unabhängig von zugrundeliegenden Protokollen und nicht unbedingt an HTTP gebunden.</span><span class="sxs-lookup"><span data-stu-id="3d018-117">REST is independent of any underlying protocol and is not necessarily tied to HTTP.</span></span> <span data-ttu-id="3d018-118">Die meisten gängigen REST-Implementierungen verwenden jedoch HTTP als Anwendungsprotokoll, und dieses Handbuch behandelt insbesondere den Entwurf von REST-APIs für HTTP.</span><span class="sxs-lookup"><span data-stu-id="3d018-118">However, most common REST implementations use HTTP as the application protocol, and this guide focuses on designing REST APIs for HTTP.</span></span>

<span data-ttu-id="3d018-119">Ein wichtiger Vorteil von REST gegenüber HTTP besteht darin, dass es offene Standards nutzt und die Implementierung der API oder der Clientanwendungen nicht an eine bestimmte Implementierung bindet.</span><span class="sxs-lookup"><span data-stu-id="3d018-119">A primary advantage of REST over HTTP is that it uses open standards, and does not bind the implementation of the API or the client applications to any specific implementation.</span></span> <span data-ttu-id="3d018-120">Beispielsweise könnte ein REST-Webdienst in ASP.NET geschrieben werden, und Clientanwendungen können alle Sprachen und Toolsets verwenden, die HTTP-Anforderungen generieren und HTTP-Antworten analysieren können.</span><span class="sxs-lookup"><span data-stu-id="3d018-120">For example, a REST web service could be written in ASP.NET, and client applications can use any language or toolset that can generate HTTP requests and parse HTTP responses.</span></span>

<span data-ttu-id="3d018-121">Hier finden Sie einige der wichtigsten Entwurfsprinzipien von RESTful-APIs mit HTTP:</span><span class="sxs-lookup"><span data-stu-id="3d018-121">Here are some of the main design principles of RESTful APIs using HTTP:</span></span>

- <span data-ttu-id="3d018-122">REST-APIs wurden mit Fokus auf *Ressourcen* entwickelt, bei denen es sich um eine beliebige Art von Objekten, Daten oder Diensten handelt, auf die der Client zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="3d018-122">REST APIs are designed around *resources*, which are any kind of object, data, or service that can be accessed by the client.</span></span>

- <span data-ttu-id="3d018-123">Eine Ressource weist einen *Bezeichner* auf. Dies ist ein URI, der die Ressource eindeutig identifiziert.</span><span class="sxs-lookup"><span data-stu-id="3d018-123">A resource has an *identifier*, which is a URI that uniquely identifies that resource.</span></span> <span data-ttu-id="3d018-124">Der URI für eine bestimmte Kundenbestellung kann z.B. wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="3d018-124">For example, the URI for a particular customer order might be:</span></span>

    ```HTTP
    https://adventure-works.com/orders/1
    ```

- <span data-ttu-id="3d018-125">Clients interagieren mit einem Dienst durch den Austausch von *Darstellungen* von Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="3d018-125">Clients interact with a service by exchanging *representations* of resources.</span></span> <span data-ttu-id="3d018-126">Viele Web-APIs verwenden JSON als Austauschformat.</span><span class="sxs-lookup"><span data-stu-id="3d018-126">Many web APIs use JSON as the exchange format.</span></span> <span data-ttu-id="3d018-127">Beispielsweise könnte eine GET-Anforderung an den oben aufgeführten URI diesen Antworttext zurückgeben:</span><span class="sxs-lookup"><span data-stu-id="3d018-127">For example, a GET request to the URI listed above might return this response body:</span></span>

    ```json
    {"orderId":1,"orderValue":99.90,"productId":1,"quantity":1}
    ```

- <span data-ttu-id="3d018-128">REST-APIs verwenden eine einheitliche Schnittstelle, was zur Entkopplung der Client- und der Dienstimplementierungen beiträgt.</span><span class="sxs-lookup"><span data-stu-id="3d018-128">REST APIs use a uniform interface, which helps to decouple the client and service implementations.</span></span> <span data-ttu-id="3d018-129">Für REST-APIs, die auf HTTP basieren, umfasst die einheitliche Schnittstelle die Verwendung von HTTP-Standardverben zum Ausführen von Vorgängen für Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="3d018-129">For REST APIs built on HTTP, the uniform interface includes using standard HTTP verbs to perform operations on resources.</span></span> <span data-ttu-id="3d018-130">Die häufigsten Vorgänge sind GET, POST, PUT, PATCH und DELETE.</span><span class="sxs-lookup"><span data-stu-id="3d018-130">The most common operations are GET, POST, PUT, PATCH, and DELETE.</span></span>

- <span data-ttu-id="3d018-131">REST-APIs verwenden ein zustandsloses Anforderungsmodell.</span><span class="sxs-lookup"><span data-stu-id="3d018-131">REST APIs use a stateless request model.</span></span> <span data-ttu-id="3d018-132">HTTP-Anforderungen müssen unabhängig sein und können in beliebiger Reihenfolge erfolgen, sodass das Beibehalten von Übergangsstatusinformationen zwischen Anforderungen nicht möglich ist.</span><span class="sxs-lookup"><span data-stu-id="3d018-132">HTTP requests should be independent and may occur in any order, so keeping transient state information between requests is not feasible.</span></span> <span data-ttu-id="3d018-133">Informationen werden ausschließlich in den Ressourcen selbst gespeichert, und jede Anforderung sollte eine atomare Operation sein.</span><span class="sxs-lookup"><span data-stu-id="3d018-133">The only place where information is stored is in the resources themselves, and each request should be an atomic operation.</span></span> <span data-ttu-id="3d018-134">Diese Einschränkung ermöglicht eine hohe Skalierbarkeit von Webdiensten, da keine Affinität zwischen Clients und bestimmten Servern beibehalten werden muss.</span><span class="sxs-lookup"><span data-stu-id="3d018-134">This constraint enables web services to be highly scalable, because there is no need to retain any affinity between clients and specific servers.</span></span> <span data-ttu-id="3d018-135">Jeder Server kann jede Anforderung von jedem beliebigen Client verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="3d018-135">Any server can handle any request from any client.</span></span> <span data-ttu-id="3d018-136">Allerdings können andere Faktoren die Skalierbarkeit einschränken.</span><span class="sxs-lookup"><span data-stu-id="3d018-136">That said, other factors can limit scalability.</span></span> <span data-ttu-id="3d018-137">Beispielsweise schreiben viele Webdienste in einen Back-End-Datenspeicher, dessen horizontale Hochskalierung schwierig sein kann. (Im Artikel [Datenpartitionierung](./data-partitioning.md) werden Strategien zur horizontalen Hochskalierung eines Datenspeichers beschrieben.)</span><span class="sxs-lookup"><span data-stu-id="3d018-137">For example, many web services write to a backend data store, which may be hard to scale out. (The article [Data Partitioning](./data-partitioning.md) describes strategies to scale out a data store.)</span></span>

- <span data-ttu-id="3d018-138">REST-APIs werden von Hypermedia Links gesteuert, die in der Darstellung enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="3d018-138">REST APIs are driven by hypermedia links that are contained in the representation.</span></span> <span data-ttu-id="3d018-139">Das folgende Beispiel zeigt die JSON-Darstellung einer Bestellung.</span><span class="sxs-lookup"><span data-stu-id="3d018-139">For example, the following shows a JSON representation of an order.</span></span> <span data-ttu-id="3d018-140">Es enthält Links zum Abrufen oder Aktualisieren des Kunden, der der Bestellung zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="3d018-140">It contains links to get or update the customer associated with the order.</span></span>

    ```json
    {
        "orderID":3,
        "productID":2,
        "quantity":4,
        "orderValue":16.60,
        "links": [
            {"rel":"product","href":"https://adventure-works.com/customers/3", "action":"GET" },
            {"rel":"product","href":"https://adventure-works.com/customers/3", "action":"PUT" }
        ]
    }
    ```

<span data-ttu-id="3d018-141">Leonard Richardson hat 2008 das folgende [Reifemodell](https://martinfowler.com/articles/richardsonMaturityModel.html) für Web-APIs vorgeschlagen:</span><span class="sxs-lookup"><span data-stu-id="3d018-141">In 2008, Leonard Richardson proposed the following [maturity model](https://martinfowler.com/articles/richardsonMaturityModel.html) for web APIs:</span></span>

- <span data-ttu-id="3d018-142">Ebene 0: Definieren Sie einen einzelnen URI. (Alle Vorgänge sind POST-Anforderungen an diesen URI.)</span><span class="sxs-lookup"><span data-stu-id="3d018-142">Level 0: Define one URI, and all operations are POST requests to this URI.</span></span>
- <span data-ttu-id="3d018-143">Ebene 1: Erstellen Sie separate URIs für einzelne Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="3d018-143">Level 1: Create separate URIs for individual resources.</span></span>
- <span data-ttu-id="3d018-144">Ebene 2: Definieren Sie mithilfe von HTTP-Methoden Vorgänge für Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="3d018-144">Level 2: Use HTTP methods to define operations on resources.</span></span>
- <span data-ttu-id="3d018-145">Ebene 3: Verwenden Sie Hypermedia (HATEOAS, unten beschriebenen).</span><span class="sxs-lookup"><span data-stu-id="3d018-145">Level 3: Use hypermedia (HATEOAS, described below).</span></span>

<span data-ttu-id="3d018-146">Ebene 3 entspricht einer echten RESTful-API gemäß der Definition von Fielding.</span><span class="sxs-lookup"><span data-stu-id="3d018-146">Level 3 corresponds to a truly RESTful API according to Fielding's definition.</span></span> <span data-ttu-id="3d018-147">In der Praxis fallen viele veröffentlichte Web-APIs in den Bereich von Ebene 2.</span><span class="sxs-lookup"><span data-stu-id="3d018-147">In practice, many published web APIs fall somewhere around level 2.</span></span>

## <a name="organize-the-api-around-resources"></a><span data-ttu-id="3d018-148">Organisieren der API unter Berücksichtigung von Ressourcen</span><span class="sxs-lookup"><span data-stu-id="3d018-148">Organize the API around resources</span></span>

<span data-ttu-id="3d018-149">Konzentrieren sich auf die Geschäftseinheiten, die die Web-API verfügbar macht.</span><span class="sxs-lookup"><span data-stu-id="3d018-149">Focus on the business entities that the web API exposes.</span></span> <span data-ttu-id="3d018-150">In einem E-Commerce-System können die primären Entitäten beispielsweise Kunden und Bestellungen sein.</span><span class="sxs-lookup"><span data-stu-id="3d018-150">For example, in an e-commerce system, the primary entities might be customers and orders.</span></span> <span data-ttu-id="3d018-151">Eine Bestellung kann durch Senden einer HTTP POST-Anforderung erstellt werden, welche die Bestellinformationen enthält.</span><span class="sxs-lookup"><span data-stu-id="3d018-151">Creating an order can be achieved by sending an HTTP POST request that contains the order information.</span></span> <span data-ttu-id="3d018-152">Die HTTP-Antwort gibt an, ob die Bestellung erfolgreich aufgegeben wurde oder nicht.</span><span class="sxs-lookup"><span data-stu-id="3d018-152">The HTTP response indicates whether the order was placed successfully or not.</span></span> <span data-ttu-id="3d018-153">Sofern möglich sollten Ressourcen-URIs auf Nomen (Ressource) und nicht auf Verben (die Vorgänge für die Ressource) basieren.</span><span class="sxs-lookup"><span data-stu-id="3d018-153">When possible, resource URIs should be based on nouns (the resource) and not verbs (the operations on the resource).</span></span>

```HTTP
https://adventure-works.com/orders // Good

https://adventure-works.com/create-order // Avoid
```

<span data-ttu-id="3d018-154">Eine Ressource muss nicht auf einem einzelnen physischen Datenelement basieren.</span><span class="sxs-lookup"><span data-stu-id="3d018-154">A resource does not have to be based on a single physical data item.</span></span> <span data-ttu-id="3d018-155">Beispielsweise kann eine Bestellressource intern als mehrere Tabellen in einer relationalen Datenbank implementiert werden, auf dem Client jedoch als einzelne Entität angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="3d018-155">For example, an order resource might be implemented internally as several tables in a relational database, but presented to the client as a single entity.</span></span> <span data-ttu-id="3d018-156">Vermeiden Sie das Erstellen von APIs, die einfach die interne Struktur einer Datenbank widerspiegeln.</span><span class="sxs-lookup"><span data-stu-id="3d018-156">Avoid creating APIs that simply mirror the internal structure of a database.</span></span> <span data-ttu-id="3d018-157">Der Zweck von REST ist das Modellieren von Entitäten und der Vorgänge, die eine Anwendung für diese Entitäten ausführen kann.</span><span class="sxs-lookup"><span data-stu-id="3d018-157">The purpose of REST is to model entities and the operations that an application can perform on those entities.</span></span> <span data-ttu-id="3d018-158">Ein Client sollte nicht für die interne Implementierung verfügbar gemacht werden.</span><span class="sxs-lookup"><span data-stu-id="3d018-158">A client should not be exposed to the internal implementation.</span></span>

<span data-ttu-id="3d018-159">Entitäten sind häufig in Sammlungen (Bestellungen, Kunden) gruppiert.</span><span class="sxs-lookup"><span data-stu-id="3d018-159">Entities are often grouped together into collections (orders, customers).</span></span> <span data-ttu-id="3d018-160">Eine Sammlung ist als Ressource vom Element innerhalb der Sammlung getrennt und muss über einen eigenen URI verfügen.</span><span class="sxs-lookup"><span data-stu-id="3d018-160">A collection is a separate resource from the item within the collection, and should have its own URI.</span></span> <span data-ttu-id="3d018-161">Der folgende URI könnte z.B. die Sammlung von Bestellungen darstellen:</span><span class="sxs-lookup"><span data-stu-id="3d018-161">For example, the following URI might represent the collection of orders:</span></span>

```HTTP
https://adventure-works.com/orders
```

<span data-ttu-id="3d018-162">Durch Senden einer HTTP GET-Anforderung an den URI der Sammlung wird eine Liste von Elementen in der Sammlung abgerufen.</span><span class="sxs-lookup"><span data-stu-id="3d018-162">Sending an HTTP GET request to the collection URI retrieves a list of items in the collection.</span></span> <span data-ttu-id="3d018-163">Jedes Element in der Sammlung verfügt auch über einen eigenen eindeutigen URI.</span><span class="sxs-lookup"><span data-stu-id="3d018-163">Each item in the collection also has its own unique URI.</span></span> <span data-ttu-id="3d018-164">Eine HTTP GET-Anforderung an den URI eines Elements gibt die Details dieses Elements zurück.</span><span class="sxs-lookup"><span data-stu-id="3d018-164">An HTTP GET request to the item's URI returns the details of that item.</span></span>

<span data-ttu-id="3d018-165">Führen Sie eine konsistente Benennungskonvention für URIs ein.</span><span class="sxs-lookup"><span data-stu-id="3d018-165">Adopt a consistent naming convention in URIs.</span></span> <span data-ttu-id="3d018-166">Im Allgemeinen ist es hilfreich, Nomen in Pluralform für URIs zu verwenden, die auf Sammlungen verweisen.</span><span class="sxs-lookup"><span data-stu-id="3d018-166">In general, it helps to use plural nouns for URIs that reference collections.</span></span> <span data-ttu-id="3d018-167">Es wird empfohlen, URIs für Sammlungen und Elemente in einer Hierarchie zu organisieren.</span><span class="sxs-lookup"><span data-stu-id="3d018-167">It's a good practice to organize URIs for collections and items into a hierarchy.</span></span> <span data-ttu-id="3d018-168">Beispiel: `/customers` ist der Pfad zur Sammlung „Kunden“, und `/customers/5` ist der Pfad zum Kunden mit der ID 5.</span><span class="sxs-lookup"><span data-stu-id="3d018-168">For example, `/customers` is the path to the customers collection, and `/customers/5` is the path to the customer with ID equal to 5.</span></span> <span data-ttu-id="3d018-169">Dieser Ansatz trägt dazu bei, dass die Web-API intuitiv bleibt.</span><span class="sxs-lookup"><span data-stu-id="3d018-169">This approach helps to keep the web API intuitive.</span></span> <span data-ttu-id="3d018-170">Darüber hinaus können viele Web-API-Frameworks Anforderungen auf Grundlage von parametrisierte URI-Pfaden weiterleiten, sodass Sie eine Route für den Pfad `/customers/{id}` definieren könnten.</span><span class="sxs-lookup"><span data-stu-id="3d018-170">Also, many web API frameworks can route requests based on parameterized URI paths, so you could define a route for the path `/customers/{id}`.</span></span>

<span data-ttu-id="3d018-171">Berücksichtigen Sie auch die Beziehungen zwischen verschiedenen Ressourcentypen und wie Sie diese Zuordnungen verfügbar machen können.</span><span class="sxs-lookup"><span data-stu-id="3d018-171">Also consider the relationships between different types of resources and how you might expose these associations.</span></span> <span data-ttu-id="3d018-172">Beispielsweise kann `/customers/5/orders` alle Bestellungen für Kunde 5 darstellen.</span><span class="sxs-lookup"><span data-stu-id="3d018-172">For example, the `/customers/5/orders` might represent all of the orders for customer 5.</span></span> <span data-ttu-id="3d018-173">Sie könnten auch in die andere Richtung gehen und die Zuordnung einer Bestellung an einen Kunden mit einem URI umgekehrt darstellen, z.B. `/orders/99/customer`.</span><span class="sxs-lookup"><span data-stu-id="3d018-173">You could also go in the other direction, and represent the association from an order back to a customer with a URI such as `/orders/99/customer`.</span></span> <span data-ttu-id="3d018-174">Eine zu umfangreiche Erweiterung dieses Modells kann jedoch aufwendig zu implementieren sein.</span><span class="sxs-lookup"><span data-stu-id="3d018-174">However, extending this model too far can become cumbersome to implement.</span></span> <span data-ttu-id="3d018-175">Eine bessere Lösung ist das Bereitstellen navigierbarer Links zu zugeordneten Ressourcen im Text der HTTP-Antwortnachricht.</span><span class="sxs-lookup"><span data-stu-id="3d018-175">A better solution is to provide navigable links to associated resources in the body of the HTTP response message.</span></span> <span data-ttu-id="3d018-176">Dieser Mechanismus wird im Abschnitt [Verwenden von HATEOAS, um die Navigation zu verwandten Ressourcen zu ermöglichen](#use-hateoas-to-enable-navigation-to-related-resources) ausführlicher beschrieben.</span><span class="sxs-lookup"><span data-stu-id="3d018-176">This mechanism is described in more detail in the section [Use HATEOAS to enable navigation to related resources](#use-hateoas-to-enable-navigation-to-related-resources).</span></span>

<span data-ttu-id="3d018-177">In komplexeren Systemen kann es attraktiv erscheinen, URIs bereitzustellen, die einem Client das Navigieren über mehrere Beziehungsebenen hinweg ermöglichen, z.B. `/customers/1/orders/99/products`.</span><span class="sxs-lookup"><span data-stu-id="3d018-177">In more complex systems, it can be tempting to provide URIs that enable a client to navigate through several levels of relationships, such as `/customers/1/orders/99/products`.</span></span> <span data-ttu-id="3d018-178">Dieses Maß an Komplexität kann jedoch schwierig zu verwalten sein und ist unflexibel, wenn sich die Beziehungen zwischen Ressourcen in der Zukunft ändern.</span><span class="sxs-lookup"><span data-stu-id="3d018-178">However, this level of complexity can be difficult to maintain and is inflexible if the relationships between resources change in the future.</span></span> <span data-ttu-id="3d018-179">Versuchen Sie stattdessen, URIs relativ einfach zu halten.</span><span class="sxs-lookup"><span data-stu-id="3d018-179">Instead, try to keep URIs relatively simple.</span></span> <span data-ttu-id="3d018-180">Sobald eine Anwendung über einen Verweis auf eine Ressource verfügt, kann dieser Verweis zum Suchen von Elementen im Zusammenhang mit dieser Ressource verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="3d018-180">Once an application has a reference to a resource, it should be possible to use this reference to find items related to that resource.</span></span> <span data-ttu-id="3d018-181">Die vorhergehende Abfrage kann durch den URI `/customers/1/orders` ersetzt werden, um alle Bestellungen für Kunde 1 zu finden, und dann durch `/orders/99/products` ersetzt werden, um die Produkte in einer Bestellung zu finden.</span><span class="sxs-lookup"><span data-stu-id="3d018-181">The preceding query can be replaced with the URI `/customers/1/orders` to find all the orders for customer 1, and then `/orders/99/products` to find the products in this order.</span></span>

> [!TIP]
> <span data-ttu-id="3d018-182">Vermeiden Sie, dass komplexere Ressourcen-URIs als *Auflistung/Element/Auflistung* erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="3d018-182">Avoid requiring resource URIs more complex than *collection/item/collection*.</span></span>

<span data-ttu-id="3d018-183">Dazu kommt, dass alle Webanforderungen den Webserver belasten.</span><span class="sxs-lookup"><span data-stu-id="3d018-183">Another factor is that all web requests impose a load on the web server.</span></span> <span data-ttu-id="3d018-184">Je mehr Anforderungen, desto größer die Last.</span><span class="sxs-lookup"><span data-stu-id="3d018-184">The more requests, the bigger the load.</span></span> <span data-ttu-id="3d018-185">Versuchen Sie daher, „geschwätzige“ Web-APIs vermeiden, die eine große Anzahl von kleinen Ressourcen verfügbar machen.</span><span class="sxs-lookup"><span data-stu-id="3d018-185">Therefore, try to avoid "chatty" web APIs that expose a large number of small resources.</span></span> <span data-ttu-id="3d018-186">Eine solche API erfordert möglicherweise, dass eine Clientanwendung mehrere Anforderungen sendet, um alle erforderlichen Daten zu finden.</span><span class="sxs-lookup"><span data-stu-id="3d018-186">Such an API may require a client application to send multiple requests to find all of the data that it requires.</span></span> <span data-ttu-id="3d018-187">Stattdessen sollten Sie die Daten denormalisieren und zugehörige Informationen zu größeren Ressourcen zusammenzufassen, die mit einer einzelnen Anforderung abgerufen werden können.</span><span class="sxs-lookup"><span data-stu-id="3d018-187">Instead, you might want to denormalize the data and combine related information into bigger resources that can be retrieved with a single request.</span></span> <span data-ttu-id="3d018-188">Diesen Ansatz müssen Sie jedoch gegen den Aufwand für das Abrufen von Daten abwägen, die für den Client nicht erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="3d018-188">However, you need to balance this approach against the overhead of fetching data that the client doesn't need.</span></span> <span data-ttu-id="3d018-189">Das Abrufen von großen Objekten kann die Latenz einer Anforderung erhöhen und zusätzliche Bandbreitenkosten verursachen.</span><span class="sxs-lookup"><span data-stu-id="3d018-189">Retrieving large objects can increase the latency of a request and incur additional bandwidth costs.</span></span> <span data-ttu-id="3d018-190">Weitere Informationen zu diesen leistungsbezogenen Antimustern finden Sie unter [Zu viele E/A-Vorgänge](../antipatterns/chatty-io/index.md) und [Irrelevante Abrufe](../antipatterns/extraneous-fetching/index.md).</span><span class="sxs-lookup"><span data-stu-id="3d018-190">For more information about these performance antipatterns, see [Chatty I/O](../antipatterns/chatty-io/index.md) and [Extraneous Fetching](../antipatterns/extraneous-fetching/index.md).</span></span>

<span data-ttu-id="3d018-191">Vermeiden Sie das Einführen von Abhängigkeiten zwischen der Web-API und den zugrunde liegenden Datenquellen.</span><span class="sxs-lookup"><span data-stu-id="3d018-191">Avoid introducing dependencies between the web API and the underlying data sources.</span></span> <span data-ttu-id="3d018-192">Sind Ihre Daten beispielsweise in einer relationalen Datenbank gespeichert, muss die Web-API nicht jede Tabelle als Sammlung von Ressourcen verfügbar machen.</span><span class="sxs-lookup"><span data-stu-id="3d018-192">For example, if your data is stored in a relational database, the web API doesn't need to expose each table as a collection of resources.</span></span> <span data-ttu-id="3d018-193">Tatsächlich ist dies wahrscheinlich ein schlechter Entwurf.</span><span class="sxs-lookup"><span data-stu-id="3d018-193">In fact, that's probably a poor design.</span></span> <span data-ttu-id="3d018-194">Stellen Sie sich die Web-API stattdessen als eine Abstraktion der Datenbank vor.</span><span class="sxs-lookup"><span data-stu-id="3d018-194">Instead, think of the web API as an abstraction of the database.</span></span> <span data-ttu-id="3d018-195">Führen Sie bei Bedarf eine Zuordnungsebene zwischen der Datenbank und der Web-API ein.</span><span class="sxs-lookup"><span data-stu-id="3d018-195">If necessary, introduce a mapping layer between the database and the web API.</span></span> <span data-ttu-id="3d018-196">Auf diese Weise sind Clientanwendungen von Änderungen am zugrunde liegenden Datenbankschema isoliert.</span><span class="sxs-lookup"><span data-stu-id="3d018-196">That way, client applications are isolated from changes to the underlying database scheme.</span></span>

<span data-ttu-id="3d018-197">Schließlich ist es auch möglich, dass nicht jeder von einer Web-API für eine bestimmte Ressource implementierte Vorgang zugeordnet werden kann.</span><span class="sxs-lookup"><span data-stu-id="3d018-197">Finally, it might not be possible to map every operation implemented by a web API to a specific resource.</span></span> <span data-ttu-id="3d018-198">Sie können solche Szenarien *ohne Ressourcen* z.B. über HTTP-Anforderungen behandeln, die eine Funktion aufrufen und die Ergebnisse als HTTP-Antwortnachricht zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="3d018-198">You can handle such *non-resource* scenarios through HTTP requests that invoke a function and return the results as an HTTP response message.</span></span> <span data-ttu-id="3d018-199">Beispiel: Eine Web-API, die einfache Rechenvorgänge wie Addition und Subtraktion implementiert, könnte URIs bereitstellen, die diese Vorgänge als Pseudoressourcen verfügbar machen und die Abfragezeichenfolge zum Angeben der erforderlichen Parameter verwenden.</span><span class="sxs-lookup"><span data-stu-id="3d018-199">For example, a web API that implements simple calculator operations such as add and subtract could provide URIs that expose these operations as pseudo resources and use the query string to specify the parameters required.</span></span> <span data-ttu-id="3d018-200">Eine GET-Anforderung an den URI */add?operand1=99&operand2=1* würde z.B. eine Antwortnachricht mit dem Wert 100 im Text zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="3d018-200">For example a GET request to the URI */add?operand1=99&operand2=1* would return a response message with the body containing the value 100.</span></span> <span data-ttu-id="3d018-201">Verwenden Sie diese URI-Formen jedoch nur sparsam.</span><span class="sxs-lookup"><span data-stu-id="3d018-201">However, only use these forms of URIs sparingly.</span></span>

## <a name="define-operations-in-terms-of-http-methods"></a><span data-ttu-id="3d018-202">Definieren von Vorgängen im Hinblick auf HTTP-Methoden</span><span class="sxs-lookup"><span data-stu-id="3d018-202">Define operations in terms of HTTP methods</span></span>

<span data-ttu-id="3d018-203">Das HTTP-Protokoll definiert eine Reihe von Methoden, die einer Anforderung semantische Bedeutung zuweisen.</span><span class="sxs-lookup"><span data-stu-id="3d018-203">The HTTP protocol defines a number of methods that assign semantic meaning to a request.</span></span> <span data-ttu-id="3d018-204">Diese allgemeinen HTTP-Methoden werden von den meisten RESTful-Web-APIs verwendet:</span><span class="sxs-lookup"><span data-stu-id="3d018-204">The common HTTP methods used by most RESTful web APIs are:</span></span>

- <span data-ttu-id="3d018-205">**GET** ruft eine Kopie der Ressource am angegebenen URI ab.</span><span class="sxs-lookup"><span data-stu-id="3d018-205">**GET** retrieves a representation of the resource at the specified URI.</span></span> <span data-ttu-id="3d018-206">Der Text der Antwortnachricht enthält die Details der angeforderten Ressource.</span><span class="sxs-lookup"><span data-stu-id="3d018-206">The body of the response message contains the details of the requested resource.</span></span>
- <span data-ttu-id="3d018-207">**POST** erstellt eine neue Ressource am angegebenen URI.</span><span class="sxs-lookup"><span data-stu-id="3d018-207">**POST** creates a new resource at the specified URI.</span></span> <span data-ttu-id="3d018-208">Der Text der Anforderungsnachricht enthält die Details der neuen Ressource.</span><span class="sxs-lookup"><span data-stu-id="3d018-208">The body of the request message provides the details of the new resource.</span></span> <span data-ttu-id="3d018-209">Beachten Sie, dass POST auch zum Auslösen von Vorgängen verwendet werden kann, die nicht tatsächlich Ressourcen erstellen.</span><span class="sxs-lookup"><span data-stu-id="3d018-209">Note that POST can also be used to trigger operations that don't actually create resources.</span></span>
- <span data-ttu-id="3d018-210">**PUT** erstellt oder ersetzt die Ressource am angegebenen URI.</span><span class="sxs-lookup"><span data-stu-id="3d018-210">**PUT** either creates or replaces the resource at the specified URI.</span></span> <span data-ttu-id="3d018-211">Der Text der Anforderungsnachricht gibt die zu erstellende oder zu aktualisierende Ressource an.</span><span class="sxs-lookup"><span data-stu-id="3d018-211">The body of the request message specifies the resource to be created or updated.</span></span>
- <span data-ttu-id="3d018-212">**PATCH** führt eine partielle Aktualisierung einer Ressource durch.</span><span class="sxs-lookup"><span data-stu-id="3d018-212">**PATCH** performs a partial update of a resource.</span></span> <span data-ttu-id="3d018-213">Der Anforderungstext gibt die Menge der auf die Ressource anzuwendenden Änderungen an.</span><span class="sxs-lookup"><span data-stu-id="3d018-213">The request body specifies the set of changes to apply to the resource.</span></span>
- <span data-ttu-id="3d018-214">**DELETE** entfernt die Ressource am angegebenen URI.</span><span class="sxs-lookup"><span data-stu-id="3d018-214">**DELETE** removes the resource at the specified URI.</span></span>

<span data-ttu-id="3d018-215">Die Auswirkungen einer bestimmten Anforderung sollten davon abhängen, ob die Ressource, eine Sammlung oder ein einzelnes Element ist.</span><span class="sxs-lookup"><span data-stu-id="3d018-215">The effect of a specific request should depend on whether the resource is a collection or an individual item.</span></span> <span data-ttu-id="3d018-216">In der folgende Tabelle sind anhand des e-Commerce-Beispiels die allgemeinen Konventionen zusammengefasst, die bei den meisten RESTful-Implementierungen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="3d018-216">The following table summarizes the common conventions adopted by most RESTful implementations using the ecommerce example.</span></span> <span data-ttu-id="3d018-217">Beachten Sie, dass u. U. nicht alle diese Anforderungen implementiert werden; dies hängt vom jeweiligen Szenario ab.</span><span class="sxs-lookup"><span data-stu-id="3d018-217">Note that not all of these requests might be implemented; it depends on the specific scenario.</span></span>

| <span data-ttu-id="3d018-218">**Ressource**</span><span class="sxs-lookup"><span data-stu-id="3d018-218">**Resource**</span></span> | <span data-ttu-id="3d018-219">**POST**</span><span class="sxs-lookup"><span data-stu-id="3d018-219">**POST**</span></span> | <span data-ttu-id="3d018-220">**GET**</span><span class="sxs-lookup"><span data-stu-id="3d018-220">**GET**</span></span> | <span data-ttu-id="3d018-221">**PUT**</span><span class="sxs-lookup"><span data-stu-id="3d018-221">**PUT**</span></span> | <span data-ttu-id="3d018-222">**DELETE**</span><span class="sxs-lookup"><span data-stu-id="3d018-222">**DELETE**</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="3d018-223">/Kunden</span><span class="sxs-lookup"><span data-stu-id="3d018-223">/customers</span></span> |<span data-ttu-id="3d018-224">Neuen Kunden erstellen</span><span class="sxs-lookup"><span data-stu-id="3d018-224">Create a new customer</span></span> |<span data-ttu-id="3d018-225">Alle Kunden abrufen</span><span class="sxs-lookup"><span data-stu-id="3d018-225">Retrieve all customers</span></span> |<span data-ttu-id="3d018-226">Massenaktualisierung aller Kunden</span><span class="sxs-lookup"><span data-stu-id="3d018-226">Bulk update of customers</span></span> |<span data-ttu-id="3d018-227">Alle Kunden entfernen</span><span class="sxs-lookup"><span data-stu-id="3d018-227">Remove all customers</span></span> |
| <span data-ttu-id="3d018-228">/Kunden/1</span><span class="sxs-lookup"><span data-stu-id="3d018-228">/customers/1</span></span> |<span data-ttu-id="3d018-229">Error</span><span class="sxs-lookup"><span data-stu-id="3d018-229">Error</span></span> |<span data-ttu-id="3d018-230">Details für Kunden 1 abrufen</span><span class="sxs-lookup"><span data-stu-id="3d018-230">Retrieve the details for customer 1</span></span> |<span data-ttu-id="3d018-231">Details von Kunde 1 aktualisieren, falls vorhanden</span><span class="sxs-lookup"><span data-stu-id="3d018-231">Update the details of customer 1 if it exists</span></span> |<span data-ttu-id="3d018-232">Kunde 1 entfernen</span><span class="sxs-lookup"><span data-stu-id="3d018-232">Remove customer 1</span></span> |
| <span data-ttu-id="3d018-233">/Kunden/1/Bestellungen</span><span class="sxs-lookup"><span data-stu-id="3d018-233">/customers/1/orders</span></span> |<span data-ttu-id="3d018-234">Neue Bestellung für Kunden 1 erstellen</span><span class="sxs-lookup"><span data-stu-id="3d018-234">Create a new order for customer 1</span></span> |<span data-ttu-id="3d018-235">Alle Bestellungen für Kunde 1 abrufen</span><span class="sxs-lookup"><span data-stu-id="3d018-235">Retrieve all orders for customer 1</span></span> |<span data-ttu-id="3d018-236">Massenaktualisierung von Bestellungen für Kunde 1</span><span class="sxs-lookup"><span data-stu-id="3d018-236">Bulk update of orders for customer 1</span></span> |<span data-ttu-id="3d018-237">Alle Bestellungen für Kunde 1 entfernen</span><span class="sxs-lookup"><span data-stu-id="3d018-237">Remove all orders for customer 1</span></span> |

<span data-ttu-id="3d018-238">Die Unterschiede zwischen POST, PUT und PATCH können verwirrend sein.</span><span class="sxs-lookup"><span data-stu-id="3d018-238">The differences between POST, PUT, and PATCH can be confusing.</span></span>

- <span data-ttu-id="3d018-239">Eine POST-Anforderung erstellt eine Ressource.</span><span class="sxs-lookup"><span data-stu-id="3d018-239">A POST request creates a resource.</span></span> <span data-ttu-id="3d018-240">Der Server weist einen URI für die neue Ressource zu und gibt diesen URI an den Client zurück.</span><span class="sxs-lookup"><span data-stu-id="3d018-240">The server assigns a URI for the new resource, and returns that URI to the client.</span></span> <span data-ttu-id="3d018-241">Im REST-Modell wenden Sie häufig POST-Anforderungen auf Sammlungen an.</span><span class="sxs-lookup"><span data-stu-id="3d018-241">In the REST model, you frequently apply POST requests to collections.</span></span> <span data-ttu-id="3d018-242">Die neue Ressource wird der Sammlung hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="3d018-242">The new resource is added to the collection.</span></span> <span data-ttu-id="3d018-243">Eine POST-Anforderung kann auch verwendet werden, um Daten zur Verarbeitung an eine vorhandene Ressource zu senden, ohne dass eine neue Ressource erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="3d018-243">A POST request can also be used to submit data for processing to an existing resource, without any new resource being created.</span></span>

- <span data-ttu-id="3d018-244">Eine PUT-Anforderung erstellt eine Ressource *oder* aktualisiert eine vorhandene Ressource.</span><span class="sxs-lookup"><span data-stu-id="3d018-244">A PUT request creates a resource *or* updates an existing resource.</span></span> <span data-ttu-id="3d018-245">Der Client gibt den URI für die Ressource an.</span><span class="sxs-lookup"><span data-stu-id="3d018-245">The client specifies the URI for the resource.</span></span> <span data-ttu-id="3d018-246">Der Anforderungstext enthält eine vollständige Darstellung der Ressource.</span><span class="sxs-lookup"><span data-stu-id="3d018-246">The request body contains a complete representation of the resource.</span></span> <span data-ttu-id="3d018-247">Wenn bereits eine Ressource mit diesem URI vorhanden ist, wird sie ersetzt.</span><span class="sxs-lookup"><span data-stu-id="3d018-247">If a resource with this URI already exists, it is replaced.</span></span> <span data-ttu-id="3d018-248">Andernfalls wird eine neue Ressource erstellt, wenn der Server diese Vorgehensweise unterstützt.</span><span class="sxs-lookup"><span data-stu-id="3d018-248">Otherwise a new resource is created, if the server supports doing so.</span></span> <span data-ttu-id="3d018-249">PUT-Anforderungen werden am häufigsten auf Ressourcen angewendet, bei denen es sich um einzelne Elemente handelt, z.B. einen bestimmten Kunden anstatt von Sammlungen.</span><span class="sxs-lookup"><span data-stu-id="3d018-249">PUT requests are most frequently applied to resources that are individual items, such as a specific customer, rather than collections.</span></span> <span data-ttu-id="3d018-250">Ein Server kann Aktualisierungen über PUT unterstützen, die Erstellung jedoch möglicherweise nicht.</span><span class="sxs-lookup"><span data-stu-id="3d018-250">A server might support updates but not creation via PUT.</span></span> <span data-ttu-id="3d018-251">Die Unterstützung der Erstellung über PUT hängt davon ab, ob der Client einen URI auf sinnvolle Weise einer Ressource zuweisen kann, bevor diese vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="3d018-251">Whether to support creation via PUT depends on whether the client can meaningfully assign a URI to a resource before it exists.</span></span> <span data-ttu-id="3d018-252">Ist dies nicht der Fall, verwenden Sie POST zum Erstellen und PUT oder PATCH zum Aktualisieren von Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="3d018-252">If not, then use POST to create resources and PUT or PATCH to update.</span></span>

- <span data-ttu-id="3d018-253">Eine PATCH-Anforderung führt eine *partielle Aktualisierung* einer vorhandenen Ressource durch.</span><span class="sxs-lookup"><span data-stu-id="3d018-253">A PATCH request performs a *partial update* to an existing resource.</span></span> <span data-ttu-id="3d018-254">Der Client gibt den URI für die Ressource an.</span><span class="sxs-lookup"><span data-stu-id="3d018-254">The client specifies the URI for the resource.</span></span> <span data-ttu-id="3d018-255">Der Anforderungstext gibt einen Satz von auf die Ressource anzuwendenden *Änderungen* an.</span><span class="sxs-lookup"><span data-stu-id="3d018-255">The request body specifies a set of *changes* to apply to the resource.</span></span> <span data-ttu-id="3d018-256">Dies kann effizienter als die Verwendung von PUT sein, da der Client nur die Änderungen sendet, nicht die gesamte Darstellung der Ressource.</span><span class="sxs-lookup"><span data-stu-id="3d018-256">This can be more efficient than using PUT, because the client only sends the changes, not the entire representation of the resource.</span></span> <span data-ttu-id="3d018-257">Technisch gesehen kann PATCH kann auch eine neue Ressource erstellen (durch Angabe einer Reihe von Aktualisierungen für eine NULL-Ressource), wenn der Server dies unterstützt.</span><span class="sxs-lookup"><span data-stu-id="3d018-257">Technically PATCH can also create a new resource (by specifying a set of updates to a "null" resource), if the server supports this.</span></span>

<span data-ttu-id="3d018-258">PUT-Anforderungen müssen idempotent sein.</span><span class="sxs-lookup"><span data-stu-id="3d018-258">PUT requests must be idempotent.</span></span> <span data-ttu-id="3d018-259">Wenn ein Client die gleiche PUT-Anforderung mehrmals sendet, sollten die Ergebnisse immer identisch sein (dieselbe Ressource wird mit den gleichen Werten geändert).</span><span class="sxs-lookup"><span data-stu-id="3d018-259">If a client submits the same PUT request multiple times, the results should always be the same (the same resource will be modified with the same values).</span></span> <span data-ttu-id="3d018-260">Bei POST- und PATCH-Anforderungen besteht keine Garantie für Idempotenz.</span><span class="sxs-lookup"><span data-stu-id="3d018-260">POST and PATCH requests are not guaranteed to be idempotent.</span></span>

## <a name="conform-to-http-semantics"></a><span data-ttu-id="3d018-261">Einhaltung der HTTP-Semantik</span><span class="sxs-lookup"><span data-stu-id="3d018-261">Conform to HTTP semantics</span></span>

<span data-ttu-id="3d018-262">Dieser Abschnitt beschreibt einige typische Überlegungen zum Entwerfen einer API, die der HTTP-Spezifikation entspricht.</span><span class="sxs-lookup"><span data-stu-id="3d018-262">This section describes some typical considerations for designing an API that conforms to the HTTP specification.</span></span> <span data-ttu-id="3d018-263">Es wird jedoch nicht jedes mögliche Detail oder Szenario abgedeckt.</span><span class="sxs-lookup"><span data-stu-id="3d018-263">However, it doesn't cover every possible detail or scenario.</span></span> <span data-ttu-id="3d018-264">Lesen Sie im Zweifelsfall die Informationen zu den HTTP-Spezifikationen.</span><span class="sxs-lookup"><span data-stu-id="3d018-264">When in doubt, consult the HTTP specifications.</span></span>

### <a name="media-types"></a><span data-ttu-id="3d018-265">Medientypen</span><span class="sxs-lookup"><span data-stu-id="3d018-265">Media types</span></span>

<span data-ttu-id="3d018-266">Wie bereits erwähnt tauschen Clients und Server Darstellungen von Ressourcen aus.</span><span class="sxs-lookup"><span data-stu-id="3d018-266">As mentioned earlier, clients and servers exchange representations of resources.</span></span> <span data-ttu-id="3d018-267">In einer POST-Anforderung z.B. enthält der Anforderungstext eine Darstellung der Ressource, die zu erstellen ist.</span><span class="sxs-lookup"><span data-stu-id="3d018-267">For example, in a POST request, the request body contains a representation of the resource to create.</span></span> <span data-ttu-id="3d018-268">In einer GET-Anforderung enthält der Antworttext eine Darstellung der abgerufenen Ressource.</span><span class="sxs-lookup"><span data-stu-id="3d018-268">In a GET request, the response body contains a representation of the fetched resource.</span></span>

<span data-ttu-id="3d018-269">Im HTTP-Protokoll werden Formate durch die Verwendung von *Medientypen* angegeben, die auch als „MIME-Typen“ bezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="3d018-269">In the HTTP protocol, formats are specified through the use of *media types*, also called MIME types.</span></span> <span data-ttu-id="3d018-270">Für nicht binäre Daten unterstützen die meisten Web-APIs JSON (media type = application/json) und möglicherweise XML (media type = application/xml).</span><span class="sxs-lookup"><span data-stu-id="3d018-270">For non-binary data, most web APIs support JSON (media type = application/json) and possibly XML (media type = application/xml).</span></span>

<span data-ttu-id="3d018-271">Der Content-Type-Header in einer Anforderung oder Antwort gibt das Format der Darstellung an.</span><span class="sxs-lookup"><span data-stu-id="3d018-271">The Content-Type header in a request or response specifies the format of the representation.</span></span> <span data-ttu-id="3d018-272">Hier ist ein Beispiel für eine POST-Anforderung, die JSON-Daten enthält:</span><span class="sxs-lookup"><span data-stu-id="3d018-272">Here is an example of a POST request that includes JSON data:</span></span>

```HTTP
POST https://adventure-works.com/orders HTTP/1.1
Content-Type: application/json; charset=utf-8
Content-Length: 57

{"Id":1,"Name":"Gizmo","Category":"Widgets","Price":1.99}
```

<span data-ttu-id="3d018-273">Wenn der Server den Medientyp nicht unterstützt, muss er den HTTP-Statuscode 415 (Nicht unterstützter Medientyp) zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="3d018-273">If the server doesn't support the media type, it should return HTTP status code 415 (Unsupported Media Type).</span></span>

<span data-ttu-id="3d018-274">Eine Clientanforderung kann einen Accept-Header beinhalten, der eine Liste von Medientypen enthält, die der Client in der Antwortnachricht vom Server akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="3d018-274">A client request can include an Accept header that contains a list of media types the client will accept from the server in the response message.</span></span> <span data-ttu-id="3d018-275">Beispiel: </span><span class="sxs-lookup"><span data-stu-id="3d018-275">For example:</span></span>

```HTTP
GET https://adventure-works.com/orders/2 HTTP/1.1
Accept: application/json
```

<span data-ttu-id="3d018-276">Wenn der Server keinen der Medientypen auf der Liste anbieten kann, muss er den HTTP-Statuscode 406 (Nicht akzeptabel) zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="3d018-276">If the server cannot match any of the media type(s) listed, it should return HTTP status code 406 (Not Acceptable).</span></span>

### <a name="get-methods"></a><span data-ttu-id="3d018-277">GET-Methoden</span><span class="sxs-lookup"><span data-stu-id="3d018-277">GET methods</span></span>

<span data-ttu-id="3d018-278">Eine erfolgreiche GET-Methode gibt in der Regel den HTTP-Statuscode 200 (OK) zurück.</span><span class="sxs-lookup"><span data-stu-id="3d018-278">A successful GET method typically returns HTTP status code 200 (OK).</span></span> <span data-ttu-id="3d018-279">Wenn die Ressource nicht gefunden werden kann, sollte die Methode 404 (Nicht gefunden) zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="3d018-279">If the resource cannot be found, the method should return 404 (Not Found).</span></span>

### <a name="post-methods"></a><span data-ttu-id="3d018-280">POST-Methoden</span><span class="sxs-lookup"><span data-stu-id="3d018-280">POST methods</span></span>

<span data-ttu-id="3d018-281">Wenn eine POST-Methode eine neue Ressource erstellt, wird der HTTP-Statuscode 201 (Erstellt) zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="3d018-281">If a POST method creates a new resource, it returns HTTP status code 201 (Created).</span></span> <span data-ttu-id="3d018-282">Der URI der neuen Ressource ist im Location-Header der Antwort enthalten.</span><span class="sxs-lookup"><span data-stu-id="3d018-282">The URI of the new resource is included in the Location header of the response.</span></span> <span data-ttu-id="3d018-283">Der Antworttext enthält eine Darstellung der Ressource.</span><span class="sxs-lookup"><span data-stu-id="3d018-283">The response body contains a representation of the resource.</span></span>

<span data-ttu-id="3d018-284">Wenn die Methode etwas verarbeitet, jedoch keine neue Ressource erstellt, kann sie den HTTP-Statuscode 200 zurückgegeben und das Ergebnis des Vorgangs in den Antworttext aufnehmen.</span><span class="sxs-lookup"><span data-stu-id="3d018-284">If the method does some processing but does not create a new resource, the method can return HTTP status code 200 and include the result of the operation in the response body.</span></span> <span data-ttu-id="3d018-285">Als Alternative kann die Methode auch den HTTP-Statuscode 204 (Kein Inhalt) ohne Antworttext zurückgeben, wenn kein Ergebnis zum Zurückgeben vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="3d018-285">Alternatively, if there is no result to return, the method can return HTTP status code 204 (No Content) with no response body.</span></span>

<span data-ttu-id="3d018-286">Wenn der Client ungültige Daten in die Anforderung einfügt, muss der Server den HTTP-Statuscode 400 (Ungültige Anforderung) zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="3d018-286">If the client puts invalid data into the request, the server should return HTTP status code 400 (Bad Request).</span></span> <span data-ttu-id="3d018-287">Der Antworttext kann zusätzliche Informationen über den Fehler oder einen Link zu einem URI enthalten, unter dem weitere Details verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="3d018-287">The response body can contain additional information about the error or a link to a URI that provides more details.</span></span>

### <a name="put-methods"></a><span data-ttu-id="3d018-288">PUT-Methoden</span><span class="sxs-lookup"><span data-stu-id="3d018-288">PUT methods</span></span>

<span data-ttu-id="3d018-289">Wenn eine PUT-Methode eine neue Ressource erstellt, wird wie bei einer POST-Methode der HTTP-Statuscode 201 (Erstellt) zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="3d018-289">If a PUT method creates a new resource, it returns HTTP status code 201 (Created), as with a POST method.</span></span> <span data-ttu-id="3d018-290">Wenn die Methode eine vorhandene Ressource aktualisiert, wird entweder 200 (OK) oder 204 (Kein Inhalt) zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="3d018-290">If the method updates an existing resource, it returns either 200 (OK) or 204 (No Content).</span></span> <span data-ttu-id="3d018-291">In einigen Fällen ist es u.U. nicht möglich, eine vorhandene Ressource zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="3d018-291">In some cases, it might not be possible to update an existing resource.</span></span> <span data-ttu-id="3d018-292">In diesem Fall empfiehlt es sich, den HTTP-Statuscode 409 (Konflikt) zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="3d018-292">In that case, consider returning HTTP status code 409 (Conflict).</span></span>

<span data-ttu-id="3d018-293">Erwägen Sie das Implementieren von HTTP PUT-Massenvorgängen, die Stapelaktualisierungen für mehrere Ressourcen in einer Auflistung durchführen können.</span><span class="sxs-lookup"><span data-stu-id="3d018-293">Consider implementing bulk HTTP PUT operations that can batch updates to multiple resources in a collection.</span></span> <span data-ttu-id="3d018-294">Die PUT-Anforderung sollte den URI der Auflistung angeben, und Anforderungstext sollte die Details der zu ändernden Ressourcen angeben.</span><span class="sxs-lookup"><span data-stu-id="3d018-294">The PUT request should specify the URI of the collection, and the request body should specify the details of the resources to be modified.</span></span> <span data-ttu-id="3d018-295">Dieser Ansatz trägt zum Reduzieren von „Geschwätzigkeit“ und zur Leistungssteigerung bei.</span><span class="sxs-lookup"><span data-stu-id="3d018-295">This approach can help to reduce chattiness and improve performance.</span></span>

### <a name="patch-methods"></a><span data-ttu-id="3d018-296">PATCH-Methoden</span><span class="sxs-lookup"><span data-stu-id="3d018-296">PATCH methods</span></span>

<span data-ttu-id="3d018-297">Mit einer PATCH-Anforderung sendet der Client einen Satz von Aktualisierungen in Form eines *Patch-Dokuments* an eine vorhandene Ressource.</span><span class="sxs-lookup"><span data-stu-id="3d018-297">With a PATCH request, the client sends a set of updates to an existing resource, in the form of a *patch document*.</span></span> <span data-ttu-id="3d018-298">Der Server verarbeitet das Patch-Dokument, um die Aktualisierung durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="3d018-298">The server processes the patch document to perform the update.</span></span> <span data-ttu-id="3d018-299">Das Patch-Dokument beschreibt nicht die gesamte Ressource, nur einen Satz von anzuwendenden Änderungen.</span><span class="sxs-lookup"><span data-stu-id="3d018-299">The patch document doesn't describe the whole resource, only a set of changes to apply.</span></span> <span data-ttu-id="3d018-300">In der Spezifikation für die PATCH-Methode ([RFC 5789](https://tools.ietf.org/html/rfc5789)) ist kein bestimmtes Format für Patch-Dokumente festgelegt.</span><span class="sxs-lookup"><span data-stu-id="3d018-300">The specification for the PATCH method ([RFC 5789](https://tools.ietf.org/html/rfc5789)) doesn't define a particular format for patch documents.</span></span> <span data-ttu-id="3d018-301">Das Format muss vom Medientyp in der Anforderung abgeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="3d018-301">The format must be inferred from the media type in the request.</span></span>

<span data-ttu-id="3d018-302">JSON ist wahrscheinlich das gängigste Datenformat für Web-APIs.</span><span class="sxs-lookup"><span data-stu-id="3d018-302">JSON is probably the most common data format for web APIs.</span></span> <span data-ttu-id="3d018-303">Es gibt zwei JSON-basierte Patch-Hauptformate, die *JSON Patch* und *JSON Merge Patch* heißen.</span><span class="sxs-lookup"><span data-stu-id="3d018-303">There are two main JSON-based patch formats, called *JSON patch* and *JSON merge patch*.</span></span>

<span data-ttu-id="3d018-304">JSON Merge Patch ist etwas einfacher.</span><span class="sxs-lookup"><span data-stu-id="3d018-304">JSON merge patch is somewhat simpler.</span></span> <span data-ttu-id="3d018-305">Das Patch-Dokument hat die gleiche Struktur wie die ursprüngliche JSON-Ressource, enthält jedoch nur die Teilmenge von Feldern, die geändert oder hinzugefügt werden soll.</span><span class="sxs-lookup"><span data-stu-id="3d018-305">The patch document has the same structure as the original JSON resource, but includes just the subset of fields that should be changed or added.</span></span> <span data-ttu-id="3d018-306">Außerdem kann ein Feld gelöscht werden, indem im Patch-Dokument `null` als Feldwert angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="3d018-306">In addition, a field can be deleted by specifying `null` for the field value in the patch document.</span></span> <span data-ttu-id="3d018-307">(Merge Patch ist daher nicht geeignet, wenn die ursprüngliche Ressource explizite NULL-Werte enthalten kann.)</span><span class="sxs-lookup"><span data-stu-id="3d018-307">(That means merge patch is not suitable if the original resource can have explicit null values.)</span></span>

<span data-ttu-id="3d018-308">Beispiel: Angenommen, die ursprüngliche Ressource weist die folgende JSON-Darstellung auf:</span><span class="sxs-lookup"><span data-stu-id="3d018-308">For example, suppose the original resource has the following JSON representation:</span></span>

```json
{
    "name":"gizmo",
    "category":"widgets",
    "color":"blue",
    "price":10
}
```

<span data-ttu-id="3d018-309">Hier ist ein möglicher JSON Merge Patch für diese Ressource:</span><span class="sxs-lookup"><span data-stu-id="3d018-309">Here is a possible JSON merge patch for this resource:</span></span>

```json
{
    "price":12,
    "color":null,
    "size":"small"
}
```

<span data-ttu-id="3d018-310">Dieser weist den Server an, `price` zu aktualisieren, `color` zu löschen und `size` hinzuzufügen. `name` und `category` werden nicht geändert.</span><span class="sxs-lookup"><span data-stu-id="3d018-310">This tells the server to update `price`, delete `color`, and add `size` &mdash; `name` and `category` are not modified.</span></span> <span data-ttu-id="3d018-311">Die genauen Details zu JSON Merge Patch finden Sie unter [RFC 7396](https://tools.ietf.org/html/rfc7396).</span><span class="sxs-lookup"><span data-stu-id="3d018-311">For the exact details of JSON merge patch, see [RFC 7396](https://tools.ietf.org/html/rfc7396).</span></span> <span data-ttu-id="3d018-312">Der Medientyp für JSON Merge Patch lautet `application/merge-patch+json`.</span><span class="sxs-lookup"><span data-stu-id="3d018-312">The media type for JSON merge patch is `application/merge-patch+json`.</span></span>

<span data-ttu-id="3d018-313">Merge Patch ist nicht geeignet, wenn die ursprüngliche Ressource aufgrund der besonderen Bedeutung von `null` im Patch-Dokument explizite NULL-Werte enthalten kann.</span><span class="sxs-lookup"><span data-stu-id="3d018-313">Merge patch is not suitable if the original resource can contain explicit null values, due to the special meaning of `null` in the patch document.</span></span> <span data-ttu-id="3d018-314">Außerdem gibt das Patch-Dokument nicht die Reihenfolge an, in welcher der Server die Aktualisierungen durchführen soll.</span><span class="sxs-lookup"><span data-stu-id="3d018-314">Also, the patch document doesn't specify the order that the server should apply the updates.</span></span> <span data-ttu-id="3d018-315">Dies kann je nach Daten und Domäne von Bedeutung sein oder nicht.</span><span class="sxs-lookup"><span data-stu-id="3d018-315">That may or may not matter, depending on the data and the domain.</span></span> <span data-ttu-id="3d018-316">JSON Patch, in [RFC 6902](https://tools.ietf.org/html/rfc6902) definiert, ist flexibler.</span><span class="sxs-lookup"><span data-stu-id="3d018-316">JSON patch, defined in [RFC 6902](https://tools.ietf.org/html/rfc6902), is more flexible.</span></span> <span data-ttu-id="3d018-317">Es gibt die Änderungen als eine Sequenz von anzuwendenden Vorgängen an.</span><span class="sxs-lookup"><span data-stu-id="3d018-317">It specifies the changes as a sequence of operations to apply.</span></span> <span data-ttu-id="3d018-318">Zu Vorgängen gehören das Hinzufügen, Entfernen, Ersetzen, Kopieren und Testen (zum Überprüfen von Werten).</span><span class="sxs-lookup"><span data-stu-id="3d018-318">Operations include add, remove, replace, copy, and test (to validate values).</span></span> <span data-ttu-id="3d018-319">Der Medientyp für JSON Patch lautet `application/json-patch+json`.</span><span class="sxs-lookup"><span data-stu-id="3d018-319">The media type for JSON patch is `application/json-patch+json`.</span></span>

<span data-ttu-id="3d018-320">Hier sehen Sie einige typische Fehlerzustände, die beim Verarbeiten einer PATCH-Anforderung auftreten können, zusammen mit den entsprechenden HTTP-Statuscodes.</span><span class="sxs-lookup"><span data-stu-id="3d018-320">Here are some typical error conditions that might be encountered when processing a PATCH request, along with the appropriate HTTP status code.</span></span>

| <span data-ttu-id="3d018-321">Fehlerzustand</span><span class="sxs-lookup"><span data-stu-id="3d018-321">Error condition</span></span> | <span data-ttu-id="3d018-322">HTTP-Statuscode</span><span class="sxs-lookup"><span data-stu-id="3d018-322">HTTP status code</span></span> |
|-----------|------------|
| <span data-ttu-id="3d018-323">Das Format des Patch-Dokuments wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="3d018-323">The patch document format isn't supported.</span></span> | <span data-ttu-id="3d018-324">415 (Nicht unterstützter Medientyp)</span><span class="sxs-lookup"><span data-stu-id="3d018-324">415 (Unsupported Media Type)</span></span> |
| <span data-ttu-id="3d018-325">Falsch formatiertes Patch-Dokument.</span><span class="sxs-lookup"><span data-stu-id="3d018-325">Malformed patch document.</span></span> | <span data-ttu-id="3d018-326">400 (Ungültige Anforderung)</span><span class="sxs-lookup"><span data-stu-id="3d018-326">400 (Bad Request)</span></span> |
| <span data-ttu-id="3d018-327">Das Patch-Dokument ist gültig, aber die Änderungen können auf die Ressource in ihrem aktuellen Zustand nicht angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="3d018-327">The patch document is valid, but the changes can't be applied to the resource in its current state.</span></span> | <span data-ttu-id="3d018-328">409 (Konflikt)</span><span class="sxs-lookup"><span data-stu-id="3d018-328">409 (Conflict)</span></span>

### <a name="delete-methods"></a><span data-ttu-id="3d018-329">DELETE-Methoden</span><span class="sxs-lookup"><span data-stu-id="3d018-329">DELETE methods</span></span>

<span data-ttu-id="3d018-330">Wenn der Löschvorgang erfolgreich ist, sollte der Webserver mit dem HTTP-Statuscode 204 reagieren, der angibt, dass der Prozess erfolgreich verarbeitet wurde, der Antworttext jedoch keine weiteren Informationen enthält.</span><span class="sxs-lookup"><span data-stu-id="3d018-330">If the delete operation is successful, the web server should respond with HTTP status code 204, indicating that the process has been successfully handled, but that the response body contains no further information.</span></span> <span data-ttu-id="3d018-331">Wenn die Ressource nicht vorhanden ist, kann der Webserver „HTTP 404“ (Nicht gefunden) zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="3d018-331">If the resource doesn't exist, the web server can return HTTP 404 (Not Found).</span></span>

### <a name="asynchronous-operations"></a><span data-ttu-id="3d018-332">Asynchrone Vorgänge</span><span class="sxs-lookup"><span data-stu-id="3d018-332">Asynchronous operations</span></span>

<span data-ttu-id="3d018-333">In einigen Fällen kann ein POST-, PUT-, PATCH- oder DELETE-Vorgang eine Verarbeitung erfordern, die einige Zeit in Anspruch nimmt.</span><span class="sxs-lookup"><span data-stu-id="3d018-333">Sometimes a POST, PUT, PATCH, or DELETE operation might require processing that takes awhile to complete.</span></span> <span data-ttu-id="3d018-334">Wenn Sie vor dem Senden einer Antwort an den Client den Abschluss abwarten, kann dies zu einer nicht akzeptablen Wartezeit führen.</span><span class="sxs-lookup"><span data-stu-id="3d018-334">If you wait for completion before sending a response to the client, it may cause unacceptable latency.</span></span> <span data-ttu-id="3d018-335">Wenn dies der Fall ist, erwägen Sie die Verwendung eines asynchronen Vorgangs.</span><span class="sxs-lookup"><span data-stu-id="3d018-335">If so, consider making the operation asynchronous.</span></span> <span data-ttu-id="3d018-336">Geben Sie den HTTP-Statuscode 202 (Akzeptiert) zurück, um anzugeben, dass die Anforderung zur Verarbeitung angenommen wurde, aber noch nicht abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="3d018-336">Return HTTP status code 202 (Accepted) to indicate the request was accepted for processing but is not completed.</span></span>

<span data-ttu-id="3d018-337">Sie müssen einen Endpunkt verfügbar machen, der den Status einer asynchronen Anforderung zurückgibt, damit der Client den Status durch Abfragen des Statusendpunkts überwachen kann.</span><span class="sxs-lookup"><span data-stu-id="3d018-337">You should expose an endpoint that returns the status of an asynchronous request, so the client can monitor the status by polling the status endpoint.</span></span> <span data-ttu-id="3d018-338">Nehmen Sie den URI des Statusendpunkts in den Location-Header der 202-Antwort auf.</span><span class="sxs-lookup"><span data-stu-id="3d018-338">Include the URI of the status endpoint in the Location header of the 202 response.</span></span> <span data-ttu-id="3d018-339">Beispiel: </span><span class="sxs-lookup"><span data-stu-id="3d018-339">For example:</span></span>

```HTTP
HTTP/1.1 202 Accepted
Location: /api/status/12345
```

<span data-ttu-id="3d018-340">Wenn der Client eine GET-Anforderung an diesen Endpunkt sendet, muss die Antwort auf den aktuellen Status der Anforderung enthalten.</span><span class="sxs-lookup"><span data-stu-id="3d018-340">If the client sends a GET request to this endpoint, the response should contain the current status of the request.</span></span> <span data-ttu-id="3d018-341">Optional kann sie auch die geschätzte Zeit bis zum Abschluss oder einen Link zum Abbrechen des Vorgangs enthalten.</span><span class="sxs-lookup"><span data-stu-id="3d018-341">Optionally, it could also include an estimated time to completion or a link to cancel the operation.</span></span>

```HTTP
HTTP/1.1 200 OK
Content-Type: application/json

{
    "status":"In progress",
    "link": { "rel":"cancel", "method":"delete", "href":"/api/status/12345" }
}
```

<span data-ttu-id="3d018-342">Wenn der asynchrone Vorgang eine neue Ressource erstellt, muss der Statusendpunkt nach Abschluss des Vorgangs den Statuscode 303 (See Other [Siehe anderswo]) zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="3d018-342">If the asynchronous operation creates a new resource, the status endpoint should return status code 303 (See Other) after the operation completes.</span></span> <span data-ttu-id="3d018-343">Nehmen Sie in die 303-Antwort einen Location-Header auf, der den URI der neuen Ressource angibt:</span><span class="sxs-lookup"><span data-stu-id="3d018-343">In the 303 response, include a Location header that gives the URI of the new resource:</span></span>

```HTTP
HTTP/1.1 303 See Other
Location: /api/orders/12345
```

<span data-ttu-id="3d018-344">Weitere Informationen finden Sie unter [Asynchronous operations in REST](https://www.adayinthelifeof.nl/2011/06/02/asynchronous-operations-in-rest/) (Asynchrone Vorgänge in REST).</span><span class="sxs-lookup"><span data-stu-id="3d018-344">For more information, see [Asynchronous operations in REST](https://www.adayinthelifeof.nl/2011/06/02/asynchronous-operations-in-rest/).</span></span>

## <a name="filter-and-paginate-data"></a><span data-ttu-id="3d018-345">Filtern und Paginieren von Daten</span><span class="sxs-lookup"><span data-stu-id="3d018-345">Filter and paginate data</span></span>

<span data-ttu-id="3d018-346">Das Verfügbarmachen einer Sammlung von Ressourcen durch einen einzigen URI kann dazu führen, dass Anwendungen große Datenmengen abrufen, auch wenn nur eine Teilmenge der Informationen erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="3d018-346">Exposing a collection of resources through a single URI can lead to applications fetching large amounts of data when only a subset of the information is required.</span></span> <span data-ttu-id="3d018-347">Beispiel: Angenommen, eine Clientanwendung muss alle Bestellungen mit Kosten über einem bestimmten Wert finden.</span><span class="sxs-lookup"><span data-stu-id="3d018-347">For example, suppose a client application needs to find all orders with a cost over a specific value.</span></span> <span data-ttu-id="3d018-348">Dazu könnte sie alle Bestellungen vom URI */orders* abrufen und diese Bestellungen auf Clientseite filtern.</span><span class="sxs-lookup"><span data-stu-id="3d018-348">It might retrieve all orders from the */orders* URI and then filter these orders on the client side.</span></span> <span data-ttu-id="3d018-349">Dieser Prozess ist eindeutig sehr ineffizient.</span><span class="sxs-lookup"><span data-stu-id="3d018-349">Clearly this process is highly inefficient.</span></span> <span data-ttu-id="3d018-350">Er verschwendet Netzwerkbandbreite und Verarbeitungsleistung auf dem Server, der die Web-API hostet.</span><span class="sxs-lookup"><span data-stu-id="3d018-350">It wastes network bandwidth and processing power on the server hosting the web API.</span></span>

<span data-ttu-id="3d018-351">Stattdessen kann die API zulassen, dass ein in der Abfragezeichenfolge des URIs ein Filter wie */orders?minCost=n* übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="3d018-351">Instead, the API can allow passing a filter in the query string of the URI, such as */orders?minCost=n*.</span></span> <span data-ttu-id="3d018-352">Dann ist die Web-API für die Analyse und Verarbeitung der `minCost`-Parameter in der Abfragezeichenfolge und das Zurückgeben der gefilterten Ergebnisse auf Serverseite verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="3d018-352">The web API is then responsible for parsing and handling the `minCost` parameter in the query string and returning the filtered results on the server side.</span></span>

<span data-ttu-id="3d018-353">GET-Anforderungen über Sammlungsressourcen geben u.U. eine große Anzahl von Elementen zurück.</span><span class="sxs-lookup"><span data-stu-id="3d018-353">GET requests over collection resources can potentially return a large number of items.</span></span> <span data-ttu-id="3d018-354">Entwerfen Sie daher eine Web-API so, dass die von jeder einzelnen Anforderung zurückgegebene Datenmenge begrenzt ist.</span><span class="sxs-lookup"><span data-stu-id="3d018-354">You should design a web API to limit the amount of data returned by any single request.</span></span> <span data-ttu-id="3d018-355">Erwägen Sie die Unterstützung von Abfragezeichenfolgen, welche die maximale Anzahl von abzurufenden Elementen angeben, und ein Startoffset in der Sammlung.</span><span class="sxs-lookup"><span data-stu-id="3d018-355">Consider supporting query strings that specify the maximum number of items to retrieve and a starting offset into the collection.</span></span> <span data-ttu-id="3d018-356">Beispiel: </span><span class="sxs-lookup"><span data-stu-id="3d018-356">For example:</span></span>

```HTTP
/orders?limit=25&offset=50
```

<span data-ttu-id="3d018-357">Erwägen Sie auch das Festlegen einer Obergrenze für die Anzahl der zurückgegebenen Elemente, um Denial-of-Service-Angriffe zu verhindern.</span><span class="sxs-lookup"><span data-stu-id="3d018-357">Also consider imposing an upper limit on the number of items returned, to help prevent Denial of Service attacks.</span></span> <span data-ttu-id="3d018-358">Zur Unterstützung von Clientanwendungen sollten GET-Anforderungen, die paginierte Daten zurückgeben, auch Metadaten enthalten, die die Gesamtanzahl der in der Auflistung verfügbaren Ressourcen angeben.</span><span class="sxs-lookup"><span data-stu-id="3d018-358">To assist client applications, GET requests that return paginated data should also include some form of metadata that indicate the total number of resources available in the collection.</span></span>

<span data-ttu-id="3d018-359">Sie können eine ähnliche Strategie zum Sortieren von Daten während des Abrufvorgangs nutzen. Dazu stellen Sie einen Sortierparameter bereit, der einen Feldnamen als Wert verwendet, z.B. */orders?sort=ProductID*.</span><span class="sxs-lookup"><span data-stu-id="3d018-359">You can use a similar strategy to sort data as it is fetched, by providing a sort parameter that takes a field name as the value, such as */orders?sort=ProductID*.</span></span> <span data-ttu-id="3d018-360">Dieser Ansatz kann jedoch die Zwischenspeicherung beeinträchtigen, da Abfragezeichenfolgen-Parameter einen Teil des Ressourcenbezeichners darstellen, der von zahlreichen Cacheimplementierungen als Schlüssel für zwischengespeicherte Daten verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="3d018-360">However, this approach can have a negative effect on caching, because query string parameters form part of the resource identifier used by many cache implementations as the key to cached data.</span></span>

<span data-ttu-id="3d018-361">Sie können diesen Ansatz erweitern, um die zurückgegebenen Felder für die einzelnen Elemente zu begrenzen, wenn jedes Element eine große Datenmenge enthält.</span><span class="sxs-lookup"><span data-stu-id="3d018-361">You can extend this approach to limit the fields returned for each item, if each item contains a large amount of data.</span></span> <span data-ttu-id="3d018-362">Sie können beispielsweise einen Abfragezeichenfolgen-Parameter verwenden, der eine durch Trennzeichen getrennte Liste der Felder akzeptiert, z.B. */Bestellungen?Felder=ProductID,Menge*.</span><span class="sxs-lookup"><span data-stu-id="3d018-362">For example, you could use a query string parameter that accepts a comma-delimited list of fields, such as */orders?fields=ProductID,Quantity*.</span></span>

<span data-ttu-id="3d018-363">Geben Sie für alle optionalen Parameter in Abfragezeichenfolgen aussagekräftige Standardwerte an.</span><span class="sxs-lookup"><span data-stu-id="3d018-363">Give all optional parameters in query strings meaningful defaults.</span></span> <span data-ttu-id="3d018-364">Legen Sie z. B. den `limit`-Parameter auf 10 und den `offset`-Parameter auf 0 fest, wenn Sie die Paginierung implementieren; legen Sie den Sortierungsparameter auf den Schlüssel der Ressource fest, wenn Sie Bestellungen implementieren, und legen Sie den `fields`-Parameter auf alle Felder in der Ressource fest, wenn Sie Projektionen unterstützen.</span><span class="sxs-lookup"><span data-stu-id="3d018-364">For example, set the `limit` parameter to 10 and the `offset` parameter to 0 if you implement pagination, set the sort parameter to the key of the resource if you implement ordering, and set the `fields` parameter to all fields in the resource if you support projections.</span></span>

## <a name="support-partial-responses-for-large-binary-resources"></a><span data-ttu-id="3d018-365">Unterstützung von partielle Antworten für große binäre Ressourcen</span><span class="sxs-lookup"><span data-stu-id="3d018-365">Support partial responses for large binary resources</span></span>

<span data-ttu-id="3d018-366">Eine Ressource kann große binäre Felder wie z.B. Dateien oder Bilder enthalten.</span><span class="sxs-lookup"><span data-stu-id="3d018-366">A resource may contain large binary fields, such as files or images.</span></span> <span data-ttu-id="3d018-367">Zum Beheben von Problemen, die durch unzuverlässige und unterbrochene Verbindungen verursacht werden, und zur Verbesserung der Antwortzeiten können Sie zulassen, dass solche Ressourcen in Blöcken abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="3d018-367">To overcome problems caused by unreliable and intermittent connections and to improve response times, consider enabling such resources to be retrieved in chunks.</span></span> <span data-ttu-id="3d018-368">Dazu muss die Web-API den Accept-Ranges-Header für GET-Anforderungen für große Ressourcen unterstützen.</span><span class="sxs-lookup"><span data-stu-id="3d018-368">To do this, the web API should support the Accept-Ranges header for GET requests for large resources.</span></span> <span data-ttu-id="3d018-369">Dieser Header gibt an, dass der GET-Vorgang partielle Anforderungen unterstützt.</span><span class="sxs-lookup"><span data-stu-id="3d018-369">This header indicates that the GET operation supports partial requests.</span></span> <span data-ttu-id="3d018-370">Die Clientanwendung kann GET-Anforderungen senden, die eine Teilmenge einer Ressource zurückgeben, die als Bytebereich angegeben ist.</span><span class="sxs-lookup"><span data-stu-id="3d018-370">The client application can submit GET requests that return a subset of a resource, specified as a range of bytes.</span></span>

<span data-ttu-id="3d018-371">Erwägen Sie auch die Implementierung von HTTP HEAD-Anforderungen für diese Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="3d018-371">Also, consider implementing HTTP HEAD requests for these resources.</span></span> <span data-ttu-id="3d018-372">Eine HEAD-Anforderung ähnelt einer GET-Anforderung, gibt jedoch nur die HTTP-Header zurück, welche die Ressource beschreiben, sowie einen leeren Nachrichtentext.</span><span class="sxs-lookup"><span data-stu-id="3d018-372">A HEAD request is similar to a GET request, except that it only returns the HTTP headers that describe the resource, with an empty message body.</span></span> <span data-ttu-id="3d018-373">Eine Clientanwendung kann eine HEAD-Anforderung ausgeben, um zu bestimmen, ob eine Ressource mithilfe von partiellen GET-Anforderungen abgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="3d018-373">A client application can issue a HEAD request to determine whether to fetch a resource by using partial GET requests.</span></span> <span data-ttu-id="3d018-374">Beispiel: </span><span class="sxs-lookup"><span data-stu-id="3d018-374">For example:</span></span>

```HTTP
HEAD https://adventure-works.com/products/10?fields=productImage HTTP/1.1
```

<span data-ttu-id="3d018-375">Hier ist ein Beispiel für eine Antwortnachricht:</span><span class="sxs-lookup"><span data-stu-id="3d018-375">Here is an example response message:</span></span>

```HTTP
HTTP/1.1 200 OK

Accept-Ranges: bytes
Content-Type: image/jpeg
Content-Length: 4580
```

<span data-ttu-id="3d018-376">Der Content-Length-Header gibt die Gesamtgröße der Ressource an, und der Accept-Ranges-Header gibt an, dass der entsprechende GET-Vorgang Teilergebnisse unterstützt.</span><span class="sxs-lookup"><span data-stu-id="3d018-376">The Content-Length header gives the total size of the resource, and the Accept-Ranges header indicates that the corresponding GET operation supports partial results.</span></span> <span data-ttu-id="3d018-377">Die Clientanwendung kann diese Informationen verwenden, um das Bild in kleineren Blöcken abzurufen.</span><span class="sxs-lookup"><span data-stu-id="3d018-377">The client application can use this information to retrieve the image in smaller chunks.</span></span> <span data-ttu-id="3d018-378">Die erste Anforderung Ruft die ersten 2500 Bytes mithilfe des Range-Headers ab:</span><span class="sxs-lookup"><span data-stu-id="3d018-378">The first request fetches the first 2500 bytes by using the Range header:</span></span>

```HTTP
GET https://adventure-works.com/products/10?fields=productImage HTTP/1.1
Range: bytes=0-2499
```

<span data-ttu-id="3d018-379">Die Antwortnachricht gibt an, dass dies eine partielle Antwort ist, in dem der Statuscode „HTTP 206“ zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="3d018-379">The response message indicates that this is a partial response by returning HTTP status code 206.</span></span> <span data-ttu-id="3d018-380">Der Content-Length-Header gibt die tatsächliche Anzahl der im Nachrichtentext (nicht die Größe der Ressource) zurückgegebenen Bytes an, und der Content-Range-Header gibt an, um welchen Teil der Ressource es sich handelt (0 – 2499 von 4580 Bytes):</span><span class="sxs-lookup"><span data-stu-id="3d018-380">The Content-Length header specifies the actual number of bytes returned in the message body (not the size of the resource), and the Content-Range header indicates which part of the resource this is (bytes 0-2499 out of 4580):</span></span>

```HTTP
HTTP/1.1 206 Partial Content

Accept-Ranges: bytes
Content-Type: image/jpeg
Content-Length: 2500
Content-Range: bytes 0-2499/4580

[...]
```

<span data-ttu-id="3d018-381">Eine nachfolgende Anforderung von der Clientanwendung kann den Rest der Ressource abrufen.</span><span class="sxs-lookup"><span data-stu-id="3d018-381">A subsequent request from the client application can retrieve the remainder of the resource.</span></span>

## <a name="use-hateoas-to-enable-navigation-to-related-resources"></a><span data-ttu-id="3d018-382">Verwenden von HATEOAS, um die Navigation zu verwandten Ressourcen zu ermöglichen</span><span class="sxs-lookup"><span data-stu-id="3d018-382">Use HATEOAS to enable navigation to related resources</span></span>

<span data-ttu-id="3d018-383">Eine Hauptmotivation hinter REST besteht darin, dass der gesamte Ressourcensatz navigiert werden kann, ohne dass zuvor Kenntnisse des URI-Schemas erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="3d018-383">One of the primary motivations behind REST is that it should be possible to navigate the entire set of resources without requiring prior knowledge of the URI scheme.</span></span> <span data-ttu-id="3d018-384">Jede HTTP GET-Anforderung sollte über Hyperlinks in der Antwort die erforderlichen Informationen zum Finden der direkt auf das angeforderte Objekt bezogenen Ressourcen enthalten; außerdem sollten Informationen bereitgestellt werden, die die für jede dieser Ressourcen verfügbaren Vorgänge beschreiben.</span><span class="sxs-lookup"><span data-stu-id="3d018-384">Each HTTP GET request should return the information necessary to find the resources related directly to the requested object through hyperlinks included in the response, and it should also be provided with information that describes the operations available on each of these resources.</span></span> <span data-ttu-id="3d018-385">Dieses Prinzip wird als Hypertext als das Modul des Anwendungszustands (HATEOAS, Hypertext as the Engine of Application State) bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="3d018-385">This principle is known as HATEOAS, or Hypertext as the Engine of Application State.</span></span> <span data-ttu-id="3d018-386">Beim System handelt es sich im Grunde um einen finiten Statuscomputer, und die Antwort auf jede Anforderung enthält die notwendigen Informationen für den Wechseln von einem Zustand in einen anderen; weitere Informationen sollten nicht erforderlich sein.</span><span class="sxs-lookup"><span data-stu-id="3d018-386">The system is effectively a finite state machine, and the response to each request contains the information necessary to move from one state to another; no other information should be necessary.</span></span>

> [!NOTE]
> <span data-ttu-id="3d018-387">Derzeit sind keine Standards oder Spezifikationen vorhanden, die die Modellierung des HATEOAS-Prinzips definieren.</span><span class="sxs-lookup"><span data-stu-id="3d018-387">Currently there are no standards or specifications that define how to model the HATEOAS principle.</span></span> <span data-ttu-id="3d018-388">Die Beispiele in diesem Abschnitt veranschaulichen eine mögliche Lösung.</span><span class="sxs-lookup"><span data-stu-id="3d018-388">The examples shown in this section illustrate one possible solution.</span></span>

<span data-ttu-id="3d018-389">Beispielsweise kann die Darstellung einer Bestellung zur Verarbeitung der Beziehung zwischen der Bestellung und dem Kunden Links enthalten, welche die verfügbaren Vorgänge für den Kunden der Bestellung identifizieren.</span><span class="sxs-lookup"><span data-stu-id="3d018-389">For example, to handle the relationship between an order and a customer, the representation of an order could include links that identify the available operations for the customer of the order.</span></span> <span data-ttu-id="3d018-390">Hier ist eine mögliche Darstellung:</span><span class="sxs-lookup"><span data-stu-id="3d018-390">Here is a possible representation:</span></span>

```json
{
  "orderID":3,
  "productID":2,
  "quantity":4,
  "orderValue":16.60,
  "links":[
    {
      "rel":"customer",
      "href":"https://adventure-works.com/customers/3",
      "action":"GET",
      "types":["text/xml","application/json"]
    },
    {
      "rel":"customer",
      "href":"https://adventure-works.com/customers/3",
      "action":"PUT",
      "types":["application/x-www-form-urlencoded"]
    },
    {
      "rel":"customer",
      "href":"https://adventure-works.com/customers/3",
      "action":"DELETE",
      "types":[]
    },
    {
      "rel":"self",
      "href":"https://adventure-works.com/orders/3",
      "action":"GET",
      "types":["text/xml","application/json"]
    },
    {
      "rel":"self",
      "href":"https://adventure-works.com/orders/3",
      "action":"PUT",
      "types":["application/x-www-form-urlencoded"]
    },
    {
      "rel":"self",
      "href":"https://adventure-works.com/orders/3",
      "action":"DELETE",
      "types":[]
    }]
}
```

<span data-ttu-id="3d018-391">In diesem Beispiel weist das `links`-Array einen Satz von Links auf.</span><span class="sxs-lookup"><span data-stu-id="3d018-391">In this example, the `links` array has a set of links.</span></span> <span data-ttu-id="3d018-392">Jeder Link stellt einen Vorgang für eine verknüpfte Entität dar.</span><span class="sxs-lookup"><span data-stu-id="3d018-392">Each link represents an operation on a related entity.</span></span> <span data-ttu-id="3d018-393">Die Daten für jeden Link beinhalten die Beziehung („Kunde“), den URI (`https://adventure-works.com/customers/3`), die HTTP-Methode und die unterstützten MIME-Typen.</span><span class="sxs-lookup"><span data-stu-id="3d018-393">The data for each link includes the relationship ("customer"), the URI (`https://adventure-works.com/customers/3`), the HTTP method, and the supported MIME types.</span></span> <span data-ttu-id="3d018-394">Dies sind alle Informationen, die eine Clientanwendung zum Aufrufen des Vorgangs benötigt.</span><span class="sxs-lookup"><span data-stu-id="3d018-394">This is all the information that a client application needs to be able to invoke the operation.</span></span>

<span data-ttu-id="3d018-395">Das `links`-Array enthält auch auf sich selbst verweisende Informationen über die abgerufene Ressource selbst.</span><span class="sxs-lookup"><span data-stu-id="3d018-395">The `links` array also includes self-referencing information about the resource itself that has been retrieved.</span></span> <span data-ttu-id="3d018-396">Diese weisen die Beziehung *self* (selbst) auf.</span><span class="sxs-lookup"><span data-stu-id="3d018-396">These have the relationship *self*.</span></span>

<span data-ttu-id="3d018-397">Die Gruppe der zurückgegebenen Links kann sich je nach dem Zustand der Ressource ändern.</span><span class="sxs-lookup"><span data-stu-id="3d018-397">The set of links that are returned may change, depending on the state of the resource.</span></span> <span data-ttu-id="3d018-398">Dies ist damit gemeint, dass Hypertext das Modul des Anwendungszustands (HATEOAS, Hypertext as the Engine of Application State) ist.</span><span class="sxs-lookup"><span data-stu-id="3d018-398">This is what is meant by hypertext being the "engine of application state."</span></span>

## <a name="versioning-a-restful-web-api"></a><span data-ttu-id="3d018-399">Versionsverwaltung einer RESTful-Web-API</span><span class="sxs-lookup"><span data-stu-id="3d018-399">Versioning a RESTful web API</span></span>

<span data-ttu-id="3d018-400">Es ist sehr unwahrscheinlich, dass eine Web-API statisch bleibt.</span><span class="sxs-lookup"><span data-stu-id="3d018-400">It is highly unlikely that a web API will remain static.</span></span> <span data-ttu-id="3d018-401">Aufgrund von veränderten Unternehmensanforderungen werden u. U. neue Auflistungen von Ressourcen hinzugefügt, die Beziehungen zwischen Ressourcen können sich ändern, und die Struktur der Daten in Ressourcen wird möglicherweise geändert.</span><span class="sxs-lookup"><span data-stu-id="3d018-401">As business requirements change new collections of resources may be added, the relationships between resources might change, and the structure of the data in resources might be amended.</span></span> <span data-ttu-id="3d018-402">Das Aktualisieren einer Web-API, um neue oder unterschiedliche Anforderungen zu behandeln, ist ein relativ unkomplizierter Prozess. Sie müssen jedoch die Auswirkungen solcher Änderungen auf Client-Anwendungen berücksichtigen, die die Web-API nutzen.</span><span class="sxs-lookup"><span data-stu-id="3d018-402">While updating a web API to handle new or differing requirements is a relatively straightforward process, you must consider the effects that such changes will have on client applications consuming the web API.</span></span> <span data-ttu-id="3d018-403">Das Problem ist, dass der Entwickler, der eine Web-API entwirft und implementiert, zwar die vollständige Kontrolle über diese API hat, jedoch nicht das gleiche Maß an Kontrolle über Clientanwendungen hat, die u. U. von remote agierenden Drittanbietern erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="3d018-403">The issue is that although the developer designing and implementing a web API has full control over that API, the developer does not have the same degree of control over client applications which may be built by third party organizations operating remotely.</span></span> <span data-ttu-id="3d018-404">Es kommt primär darauf an, dass vorhandene Clientanwendungen unverändert weiter ausgeführt werden können, und dass neue Clientanwendungen neue Features und Ressourcen nutzen können.</span><span class="sxs-lookup"><span data-stu-id="3d018-404">The primary imperative is to enable existing client applications to continue functioning unchanged while allowing new client applications to take advantage of new features and resources.</span></span>

<span data-ttu-id="3d018-405">Die Versionsverwaltung ermöglicht einer Web-API das Angeben der Funktionen und Ressourcen, die sie verfügbar macht, und eine Clientanwendung kann Anforderungen an eine bestimmte Version einer Funktion oder einer Ressource senden.</span><span class="sxs-lookup"><span data-stu-id="3d018-405">Versioning enables a web API to indicate the features and resources that it exposes, and a client application can submit requests that are directed to a specific version of a feature or resource.</span></span> <span data-ttu-id="3d018-406">In den folgenden Abschnitten sind verschiedene Ansätze mit ihren jeweiligen Vor- und Nachteilen beschrieben.</span><span class="sxs-lookup"><span data-stu-id="3d018-406">The following sections describe several different approaches, each of which has its own benefits and trade-offs.</span></span>

### <a name="no-versioning"></a><span data-ttu-id="3d018-407">Keine Versionsverwaltung</span><span class="sxs-lookup"><span data-stu-id="3d018-407">No versioning</span></span>

<span data-ttu-id="3d018-408">Dies ist der einfachste Ansatz und ist möglicherweise für einige interne APIs akzeptabel.</span><span class="sxs-lookup"><span data-stu-id="3d018-408">This is the simplest approach, and may be acceptable for some internal APIs.</span></span> <span data-ttu-id="3d018-409">Umfassende Änderungen können als neue Ressourcen oder neue Links dargestellt werden.</span><span class="sxs-lookup"><span data-stu-id="3d018-409">Big changes could be represented as new resources or new links.</span></span> <span data-ttu-id="3d018-410">Das Hinzufügen von Inhalt zu vorhandenen Ressourcen stellt möglicherweise keine fehlerhafte Änderung dar, da Clientanwendungen, die diesen Inhalt nicht erwarten, ihn einfach ignorieren.</span><span class="sxs-lookup"><span data-stu-id="3d018-410">Adding content to existing resources might not present a breaking change as client applications that are not expecting to see this content will simply ignore it.</span></span>

<span data-ttu-id="3d018-411">Beispielsweise sollte eine Anforderung an den URI `https://adventure-works.com/customers/3` die Details eines einzelnen Kunden mit den von der Clientanwendung erwarteten Feldern `id`, `name` und `address` zurückgeben:</span><span class="sxs-lookup"><span data-stu-id="3d018-411">For example, a request to the URI `https://adventure-works.com/customers/3` should return the details of a single customer containing `id`, `name`, and `address` fields expected by the client application:</span></span>

```HTTP
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{"id":3,"name":"Contoso LLC","address":"1 Microsoft Way Redmond WA 98053"}
```

> [!NOTE]
> <span data-ttu-id="3d018-412">Der Einfachheit halber enthalten die in diesem Abschnitt gezeigten Beispielantworten keine HATEOAS-Links.</span><span class="sxs-lookup"><span data-stu-id="3d018-412">For simplicity, the example responses shown in this section do not include HATEOAS links.</span></span>

<span data-ttu-id="3d018-413">Wenn dem Schema der Kundenressource das `DateCreated` Feld hinzugefügt wird, sieht die Antwort wie folgt aus:</span><span class="sxs-lookup"><span data-stu-id="3d018-413">If the `DateCreated` field is added to the schema of the customer resource, then the response would look like this:</span></span>

```HTTP
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{"id":3,"name":"Contoso LLC","dateCreated":"2014-09-04T12:11:38.0376089Z","address":"1 Microsoft Way Redmond WA 98053"}
```

<span data-ttu-id="3d018-414">Vorhandene Clientanwendungen werden möglicherweise weiterhin ordnungsgemäß ausgeführt, wenn sie in der Lage sind, unbekannte Felder zu ignorieren. Neue Clientanwendungen können für die Behandlung dieses neuen Felds konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="3d018-414">Existing client applications might continue functioning correctly if they are capable of ignoring unrecognized fields, while new client applications can be designed to handle this new field.</span></span> <span data-ttu-id="3d018-415">Allerdings können radikalere Änderungen am Schema von Ressourcen (z. B. das Entfernen oder Umbenennen von Feldern) oder Änderungen an den Beziehungen zwischen Ressourcen fehlerhafte Änderungen darstellen, die verhindern, dass vorhandene Clientanwendungen nicht ordnungsgemäß funktioniert.</span><span class="sxs-lookup"><span data-stu-id="3d018-415">However, if more radical changes to the schema of resources occur (such as removing or renaming fields) or the relationships between resources change then these may constitute breaking changes that prevent existing client applications from functioning correctly.</span></span> <span data-ttu-id="3d018-416">In diesen Fällen sollten Sie einen der folgenden Ansätze in Betracht ziehen.</span><span class="sxs-lookup"><span data-stu-id="3d018-416">In these situations you should consider one of the following approaches.</span></span>

### <a name="uri-versioning"></a><span data-ttu-id="3d018-417">URI-Versionsverwaltung</span><span class="sxs-lookup"><span data-stu-id="3d018-417">URI versioning</span></span>

<span data-ttu-id="3d018-418">Bei jeder Änderung der Web-API oder des Ressourcenschemas fügen Sie eine für jede Ressource eine Versionsnummer für den URI hinzu.</span><span class="sxs-lookup"><span data-stu-id="3d018-418">Each time you modify the web API or change the schema of resources, you add a version number to the URI for each resource.</span></span> <span data-ttu-id="3d018-419">Die bereits vorhandenen URIs sollten weiterhin Ressourcen zurückgeben, die ihrem ursprünglichen Schema entsprechen.</span><span class="sxs-lookup"><span data-stu-id="3d018-419">The previously existing URIs should continue to operate as before, returning resources that conform to their original schema.</span></span>

<span data-ttu-id="3d018-420">Erweiterung des vorherigen Beispiels: Wenn das Feld `address` in untergeordnete Felder umstrukturiert wird, die jeweils einzelne Teile der Adresse enthalten (etwa `streetAddress`, `city`, `state` und `zipCode`), kann diese Version der Ressource über einen URI verfügbar gemacht werden, der eine Versionsnummer enthält (beispielsweise `https://adventure-works.com/v2/customers/3`):</span><span class="sxs-lookup"><span data-stu-id="3d018-420">Extending the previous example, if the `address` field is restructured into sub-fields containing each constituent part of the address (such as `streetAddress`, `city`, `state`, and `zipCode`), this version of the resource could be exposed through a URI containing a version number, such as `https://adventure-works.com/v2/customers/3`:</span></span>

```HTTP
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{"id":3,"name":"Contoso LLC","dateCreated":"2014-09-04T12:11:38.0376089Z","address":{"streetAddress":"1 Microsoft Way","city":"Redmond","state":"WA","zipCode":98053}}
```

<span data-ttu-id="3d018-421">Dieser Versionsverwaltungsmechanismus ist sehr einfach, hängt jedoch vom Server ab, der die Anforderung an das entsprechende Endgerät weiterleitet.</span><span class="sxs-lookup"><span data-stu-id="3d018-421">This versioning mechanism is very simple but depends on the server routing the request to the appropriate endpoint.</span></span> <span data-ttu-id="3d018-422">Dieser Mechanismus kann jedoch schwerfällig werden, wenn die API mehrere Iterationen durchläuft und der Server eine Reihe von verschiedenen Versionen unterstützen muss.</span><span class="sxs-lookup"><span data-stu-id="3d018-422">However, it can become unwieldy as the web API matures through several iterations and the server has to support a number of different versions.</span></span> <span data-ttu-id="3d018-423">Aus der Sicht einer Puristen rufen die Clientanwendungen außerdem in allen Fällen dieselben Daten (Kunde 3) ab; daher sollte sich der URI im Grunde nicht abhängig von der Version unterscheiden.</span><span class="sxs-lookup"><span data-stu-id="3d018-423">Also, from a purist’s point of view, in all cases the client applications are fetching the same data (customer 3), so the URI should not really be different depending on the version.</span></span> <span data-ttu-id="3d018-424">Dieses Schema erschwert zudem die Implementierung von HATEOAS, da alle Links die Versionsnummer in den URIs enthalten müssen.</span><span class="sxs-lookup"><span data-stu-id="3d018-424">This scheme also complicates implementation of HATEOAS as all links will need to include the version number in their URIs.</span></span>

### <a name="query-string-versioning"></a><span data-ttu-id="3d018-425">Versionsverwaltung der Abfragezeichenfolge</span><span class="sxs-lookup"><span data-stu-id="3d018-425">Query string versioning</span></span>

<span data-ttu-id="3d018-426">Anstatt mehrere URIs bereitzustellen, können Sie auch die Version der Ressource angeben, indem Sie in der Abfragezeichenfolge einen Parameter an die HTTP-Anforderung anfügen (Beispiel: `https://adventure-works.com/customers/3?version=2`).</span><span class="sxs-lookup"><span data-stu-id="3d018-426">Rather than providing multiple URIs, you can specify the version of the resource by using a parameter within the query string appended to the HTTP request, such as `https://adventure-works.com/customers/3?version=2`.</span></span> <span data-ttu-id="3d018-427">Der Versionsparameter sollte einen aussagekräftigen Standardwert wie z. B. „1“ aufweisen, wenn er von älteren Clientanwendungen weggelassen wird.</span><span class="sxs-lookup"><span data-stu-id="3d018-427">The version parameter should default to a meaningful value such as 1 if it is omitted by older client applications.</span></span>

<span data-ttu-id="3d018-428">Dieser Ansatz hat den semantischen Vorteil, dass dieselbe Ressource immer vom gleichen URI abgerufen wird; er hängt jedoch davon ab, dass der Code, der die Anforderung behandelt, die Abfragezeichenfolge analysiert und die entsprechende HTTP-Antwort zurücksendet.</span><span class="sxs-lookup"><span data-stu-id="3d018-428">This approach has the semantic advantage that the same resource is always retrieved from the same URI, but it depends on the code that handles the request to parse the query string and send back the appropriate HTTP response.</span></span> <span data-ttu-id="3d018-429">Dieser Ansatz bringt beim Implementieren von HATEOAS dieselben Schwierigkeiten mit sich, wie der Mechanismus für die URI-Versionsverwaltung.</span><span class="sxs-lookup"><span data-stu-id="3d018-429">This approach also suffers from the same complications for implementing HATEOAS as the URI versioning mechanism.</span></span>

> [!NOTE]
> <span data-ttu-id="3d018-430">Einige ältere Webbrowser und Webproxys speichern keine Anforderungen zwischen, deren URI eine Abfragezeichenfolge enthält.</span><span class="sxs-lookup"><span data-stu-id="3d018-430">Some older web browsers and web proxies will not cache responses for requests that include a query string in the URI.</span></span> <span data-ttu-id="3d018-431">Dies kann sich negativ auf die Leistung von Webanwendungen auswirken, die eine Web-API verwenden und in einem solchen Webbrowser ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="3d018-431">This can degrade performance for web applications that use a web API and that run from within such a web browser.</span></span>

### <a name="header-versioning"></a><span data-ttu-id="3d018-432">Header-Versionsverwaltung</span><span class="sxs-lookup"><span data-stu-id="3d018-432">Header versioning</span></span>

<span data-ttu-id="3d018-433">Anstatt die Versionsnummer als Abfragezeichenfolgen-Parameter hinzuzufügen, können Sie einen benutzerdefinierten Header implementieren, der die Version der Ressource angibt.</span><span class="sxs-lookup"><span data-stu-id="3d018-433">Rather than appending the version number as a query string parameter, you could implement a custom header that indicates the version of the resource.</span></span> <span data-ttu-id="3d018-434">Dieser Ansatz erfordert, dass die Clientanwendung allen Anforderungen den entsprechenden Header hinzufügt; der Code, der die Clientanforderung behandelt, kann jedoch einen Standardwert (Version 1) verwenden, wenn der Versionsheader fehlt.</span><span class="sxs-lookup"><span data-stu-id="3d018-434">This approach requires that the client application adds the appropriate header to any requests, although the code handling the client request could use a default value (version 1) if the version header is omitted.</span></span> <span data-ttu-id="3d018-435">In den folgenden Beispielen wird ein benutzerdefinierter Header mit dem Namen *Custom-Header* verwendet.</span><span class="sxs-lookup"><span data-stu-id="3d018-435">The following examples use a custom header named *Custom-Header*.</span></span> <span data-ttu-id="3d018-436">Der Wert dieses Headers gibt die Version der Web-API an.</span><span class="sxs-lookup"><span data-stu-id="3d018-436">The value of this header indicates the version of web API.</span></span>

<span data-ttu-id="3d018-437">Version 1:</span><span class="sxs-lookup"><span data-stu-id="3d018-437">Version 1:</span></span>

```HTTP
GET https://adventure-works.com/customers/3 HTTP/1.1
Custom-Header: api-version=1
```

```HTTP
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{"id":3,"name":"Contoso LLC","address":"1 Microsoft Way Redmond WA 98053"}
```

<span data-ttu-id="3d018-438">Version 2:</span><span class="sxs-lookup"><span data-stu-id="3d018-438">Version 2:</span></span>

```HTTP
GET https://adventure-works.com/customers/3 HTTP/1.1
Custom-Header: api-version=2
```

```HTTP
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{"id":3,"name":"Contoso LLC","dateCreated":"2014-09-04T12:11:38.0376089Z","address":{"streetAddress":"1 Microsoft Way","city":"Redmond","state":"WA","zipCode":98053}}
```

<span data-ttu-id="3d018-439">Beachten Sie, dass die HATEOAS-Implementierung wie auch bei den beiden vorhergehenden Ansätzen die Angabe der entsprechenden benutzerdefinierten Header in allen Links erfordert.</span><span class="sxs-lookup"><span data-stu-id="3d018-439">Note that as with the previous two approaches, implementing HATEOAS requires including the appropriate custom header in any links.</span></span>

### <a name="media-type-versioning"></a><span data-ttu-id="3d018-440">Versionsverwaltung des Medientyps</span><span class="sxs-lookup"><span data-stu-id="3d018-440">Media type versioning</span></span>

<span data-ttu-id="3d018-441">Wenn eine Clientanwendung eine HTTP GET-Anforderung an einen Webserver sendet, sollte sie wie weiter oben in diesem Handbuch beschrieben anhand eines Accept-Headers das Format des Inhalts vorgeben, den sie verarbeiten kann.</span><span class="sxs-lookup"><span data-stu-id="3d018-441">When a client application sends an HTTP GET request to a web server it should stipulate the format of the content that it can handle by using an Accept header, as described earlier in this guidance.</span></span> <span data-ttu-id="3d018-442">Der Zweck des *Accept*-Headers besteht häufig darin, dass die Clientanwendung angeben kann, ob der Text der Antwort im XML-, JSON- oder einem anderen gängigen Format vorliegt, das der Client analysieren kann.</span><span class="sxs-lookup"><span data-stu-id="3d018-442">Frequently the purpose of the *Accept* header is to allow the client application to specify whether the body of the response should be XML, JSON, or some other common format that the client can parse.</span></span> <span data-ttu-id="3d018-443">Allerdings ist es möglich, benutzerdefinierte Medientypen zu definieren, die Informationen enthalten, die es der Clientanwendung ermöglichen, die erwartete Version einer Ressource anzugeben.</span><span class="sxs-lookup"><span data-stu-id="3d018-443">However, it is possible to define custom media types that include information enabling the client application to indicate which version of a resource it is expecting.</span></span> <span data-ttu-id="3d018-444">Das folgende Beispiel zeigt eine Anforderung die einen *Accept*-Header mit dem Wert *application/vnd.adventure-works.v1+json* angibt.</span><span class="sxs-lookup"><span data-stu-id="3d018-444">The following example shows a request that specifies an *Accept* header with the value *application/vnd.adventure-works.v1+json*.</span></span> <span data-ttu-id="3d018-445">Das Element *vnd.adventure works.v1* weist den Webserver an, Version 1 der Ressource zurückzugeben, während das Element *json* angibt, dass der Antworttext im JSON-Format zurückgegeben werden soll:</span><span class="sxs-lookup"><span data-stu-id="3d018-445">The *vnd.adventure-works.v1* element indicates to the web server that it should return version 1 of the resource, while the *json* element specifies that the format of the response body should be JSON:</span></span>

```HTTP
GET https://adventure-works.com/customers/3 HTTP/1.1
Accept: application/vnd.adventure-works.v1+json
```

<span data-ttu-id="3d018-446">Der Code zum Verarbeiten der Anforderung ist dafür verantwortlich, den *Accept*-Header zu verarbeiten und so weit wie möglich zu berücksichtigen. (Die Clientanwendung kann im *Accept*-Header mehrere Formate angeben. In diesem Fall kann der Webserver das am besten geeignete Format für den Antworttext auswählen.)</span><span class="sxs-lookup"><span data-stu-id="3d018-446">The code handling the request is responsible for processing the *Accept* header and honoring it as far as possible (the client application may specify multiple formats in the *Accept* header, in which case the web server can choose the most appropriate format for the response body).</span></span> <span data-ttu-id="3d018-447">Der Webserver bestätigt das Format der Daten im Antworttext mithilfe des Content-Type-Headers:</span><span class="sxs-lookup"><span data-stu-id="3d018-447">The web server confirms the format of the data in the response body by using the Content-Type header:</span></span>

```HTTP
HTTP/1.1 200 OK
Content-Type: application/vnd.adventure-works.v1+json; charset=utf-8

{"id":3,"name":"Contoso LLC","address":"1 Microsoft Way Redmond WA 98053"}
```

<span data-ttu-id="3d018-448">Wenn im Accept-Header keine bekannten Medientypen angegeben sind, kann der Webserver eine Antwortnachricht vom Typ HTTP 406 (Nicht akzeptabel) generieren oder eine Nachricht mit einem Standardmedientyp zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="3d018-448">If the Accept header does not specify any known media types, the web server could generate an HTTP 406 (Not Acceptable) response message or return a message with a default media type.</span></span>

<span data-ttu-id="3d018-449">Dieser Ansatz ist wohl der ursprünglichste Mechanismus zur Versionsverwaltung und eignet sich natürlich für das HATEOAS-Prinzip, bei dem der MIME-Typ der zugehörigen Daten in Ressourcenlinks enthalten sein kann.</span><span class="sxs-lookup"><span data-stu-id="3d018-449">This approach is arguably the purest of the versioning mechanisms and lends itself naturally to HATEOAS, which can include the MIME type of related data in resource links.</span></span>

> [!NOTE]
> <span data-ttu-id="3d018-450">Beim Auswählen einer Strategie für die Versionsverwaltung sollten Sie auch die Auswirkungen auf die Leistung berücksichtigen, insbesondere auf die Zwischenspeicherung auf dem Webserver.</span><span class="sxs-lookup"><span data-stu-id="3d018-450">When you select a versioning strategy, you should also consider the implications on performance, especially caching on the web server.</span></span> <span data-ttu-id="3d018-451">Die Schemas der URI- und Abfragezeichenfolge-Versionsverwaltung sind insofern cachefreundlich, dass dieselbe Kombination aus URI und Abfragezeichenfolge jedes Mal auf dieselben Daten verweist.</span><span class="sxs-lookup"><span data-stu-id="3d018-451">The URI versioning and Query String versioning schemes are cache-friendly inasmuch as the same URI/query string combination refers to the same data each time.</span></span>
>
> <span data-ttu-id="3d018-452">Die Versionsverwaltungsmechanismen für Header und Medientyp erfordern in der Regel zusätzliche Logik, um die Werte im benutzerdefinierten Header oder im Accept-Header zu untersuchen.</span><span class="sxs-lookup"><span data-stu-id="3d018-452">The Header versioning and Media Type versioning mechanisms typically require additional logic to examine the values in the custom header or the Accept header.</span></span> <span data-ttu-id="3d018-453">In einer umfangreichen Umgebung können zahlreiche Clients, die verschiedene Versionen einer Web-API verwenden, zu einer erheblichen Menge von doppelt vorhandenen Daten in einem serverseitigen Cache führen.</span><span class="sxs-lookup"><span data-stu-id="3d018-453">In a large-scale environment, many clients using different versions of a web API can result in a significant amount of duplicated data in a server-side cache.</span></span> <span data-ttu-id="3d018-454">Dieses Problem wird akut, wenn eine Clientanwendung mit einem Webserver über einen Proxy kommuniziert, der Zwischenspeicherung implementiert und eine Anforderung nur an den Webserver weiterleitet, wenn sein Cache derzeit keine Kopie der angeforderten Daten enthält.</span><span class="sxs-lookup"><span data-stu-id="3d018-454">This issue can become acute if a client application communicates with a web server through a proxy that implements caching, and that only forwards a request to the web server if it does not currently hold a copy of the requested data in its cache.</span></span>

## <a name="open-api-initiative"></a><span data-ttu-id="3d018-455">Open API Initiative</span><span class="sxs-lookup"><span data-stu-id="3d018-455">Open API Initiative</span></span>

<span data-ttu-id="3d018-456">Die [Open API Initiative](https://www.openapis.org/) wurde von einem Branchenkonsortium ins Leben gerufen, um REST-API-Beschreibungen anbieterübergreifend zu standardisieren.</span><span class="sxs-lookup"><span data-stu-id="3d018-456">The [Open API Initiative](https://www.openapis.org/) was created by an industry consortium to standardize REST API descriptions across vendors.</span></span> <span data-ttu-id="3d018-457">Im Rahmen dieser Initiative wurde die Swagger 2.0-Spezifikation in OpenAPI Specification (OAS) umbenannt und in die Open API Initiative integriert.</span><span class="sxs-lookup"><span data-stu-id="3d018-457">As part of this initiative, the Swagger 2.0 specification was renamed the OpenAPI Specification (OAS) and brought under the Open API Initiative.</span></span>

<span data-ttu-id="3d018-458">Es kann ratsam sein, OpenAPI für Ihre Web-APIs zu nutzen.</span><span class="sxs-lookup"><span data-stu-id="3d018-458">You may want to adopt OpenAPI for your web APIs.</span></span> <span data-ttu-id="3d018-459">Zu berücksichtigende Punkte:</span><span class="sxs-lookup"><span data-stu-id="3d018-459">Some points to consider:</span></span>

- <span data-ttu-id="3d018-460">Die OpenAPI-Spezifikation umfasst eine Reihe von wertenden Richtlinien zum Entwurf einer REST-API.</span><span class="sxs-lookup"><span data-stu-id="3d018-460">The OpenAPI Specification comes with a set of opinionated guidelines on how a REST API should be designed.</span></span> <span data-ttu-id="3d018-461">Hierdurch ergeben sich Vorteile bei der Interoperabilität, aber Sie müssen Ihre API mit mehr Sorgfalt entwerfen, damit sie mit der Spezifikation konform ist.</span><span class="sxs-lookup"><span data-stu-id="3d018-461">That has advantages for interoperability, but requires more care when designing your API to conform to the specification.</span></span>

- <span data-ttu-id="3d018-462">Für OpenAPI wird ein Ansatz genutzt, bei dem der Vertrag im Vordergrund steht, und nicht die Implementierung.</span><span class="sxs-lookup"><span data-stu-id="3d018-462">OpenAPI promotes a contract-first approach, rather than an implementation-first approach.</span></span> <span data-ttu-id="3d018-463">Dies bedeutet, dass Sie zuerst den API-Vertrag (die Schnittstelle) entwerfen und dann Code schreiben, mit dem der Vertrag implementiert wird.</span><span class="sxs-lookup"><span data-stu-id="3d018-463">Contract-first means you design the API contract (the interface) first and then write code that implements the contract.</span></span>

- <span data-ttu-id="3d018-464">Mit Tools wie Swagger können Clientbibliotheken oder Dokumentationen aus API-Verträgen generiert werden.</span><span class="sxs-lookup"><span data-stu-id="3d018-464">Tools like Swagger can generate client libraries or documentation from API contracts.</span></span> <span data-ttu-id="3d018-465">Informationen hierzu finden Sie beispielsweise unter [ASP.NET Core-Web-API-Hilfeseiten mit Swagger](/aspnet/core/tutorials/web-api-help-pages-using-swagger).</span><span class="sxs-lookup"><span data-stu-id="3d018-465">For example, see [ASP.NET Web API Help Pages using Swagger](/aspnet/core/tutorials/web-api-help-pages-using-swagger).</span></span>

## <a name="more-information"></a><span data-ttu-id="3d018-466">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="3d018-466">More information</span></span>

- <span data-ttu-id="3d018-467">[REST-API-Richtlinien von Microsoft](https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md).</span><span class="sxs-lookup"><span data-stu-id="3d018-467">[Microsoft REST API Guidelines](https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md).</span></span> <span data-ttu-id="3d018-468">Ausführliche Empfehlungen für das Entwerfen von öffentlichen REST-APIs.</span><span class="sxs-lookup"><span data-stu-id="3d018-468">Detailed recommendations for designing public REST APIs.</span></span>

- <span data-ttu-id="3d018-469">[Web-API-Checkliste](https://mathieu.fenniak.net/the-api-checklist/).</span><span class="sxs-lookup"><span data-stu-id="3d018-469">[Web API Checklist](https://mathieu.fenniak.net/the-api-checklist/).</span></span> <span data-ttu-id="3d018-470">Eine nützliche Liste der zu berücksichtigenden Punkte beim Entwerfen und Implementieren einer Web-API.</span><span class="sxs-lookup"><span data-stu-id="3d018-470">A useful list of items to consider when designing and implementing a web API.</span></span>

- <span data-ttu-id="3d018-471">[Open API Initiative](https://www.openapis.org/).</span><span class="sxs-lookup"><span data-stu-id="3d018-471">[Open API Initiative](https://www.openapis.org/).</span></span> <span data-ttu-id="3d018-472">Dokumentation und Implementierungsdetails zu Open-API.</span><span class="sxs-lookup"><span data-stu-id="3d018-472">Documentation and implementation details on Open API.</span></span>
