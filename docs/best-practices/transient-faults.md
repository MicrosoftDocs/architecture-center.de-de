---
title: Allgemeiner Leitfaden zum Wiederholen von Vorgängen
description: Anleitungen für die Vorgangswiederholung zur Behandlung vorübergehender Fehler.
author: dragon119
ms.date: 07/13/2016
pnp.series.title: Best Practices
ms.openlocfilehash: 9562e3447b2219fe2f3df96cfca24b845efa39b0
ms.sourcegitcommit: c53adf50d3a787956fc4ebc951b163a10eeb5d20
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/23/2017
---
# <a name="transient-fault-handling"></a><span data-ttu-id="febd0-103">Behandeln vorübergehender Fehler</span><span class="sxs-lookup"><span data-stu-id="febd0-103">Transient fault handling</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="febd0-104">Alle Anwendungen, die mit Remotediensten und Ressourcen kommunizieren, müssen gegenüber vorübergehenden Fehlern empfindlich sein.</span><span class="sxs-lookup"><span data-stu-id="febd0-104">All applications that communicate with remote services and resources must be sensitive to transient faults.</span></span> <span data-ttu-id="febd0-105">Dies gilt insbesondere für Anwendungen, die in der Cloud ausgeführt werden und die Art der Umgebung und Konnektivität über das Internet bedeuten, dass diese Typen von Fehlern häufiger auftreten können.</span><span class="sxs-lookup"><span data-stu-id="febd0-105">This is especially the case for applications that run in the cloud, where the nature of the environment and connectivity over the Internet means these types of faults are likely to be encountered more often.</span></span> <span data-ttu-id="febd0-106">Vorübergehende Fehler umschließen den vorübergehenden Verlust der Netzwerkkonnektivität mit Komponenten und Diensten, die vorübergehende Nichtverfügbarkeit eines Diensts oder Timeouts, die auftreten, wenn ein Dienst ausgelastet ist.</span><span class="sxs-lookup"><span data-stu-id="febd0-106">Transient faults include the momentary loss of network connectivity to components and services, the temporary unavailability of a service, or timeouts that arise when a service is busy.</span></span> <span data-ttu-id="febd0-107">Diese Fehler werden häufig automatisch behoben und wenn die Aktion nach einer angemessenen Verzögerung wiederholt wird, wird sie wahrscheinlich erfolgreich ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="febd0-107">These faults are often self-correcting, and if the action is repeated after a suitable delay it is likely succeed.</span></span>

<span data-ttu-id="febd0-108">Dieses Dokument bietet einen allgemeinen Leitfaden zum Behandeln vorübergehender Fehler.</span><span class="sxs-lookup"><span data-stu-id="febd0-108">This document covers general guidance for transient fault handling.</span></span> <span data-ttu-id="febd0-109">Informationen zur Behandlung von vorübergehenden Fehlern bei Verwendung von Microsoft Azure-Diensten finden Sie unter [Dienstspezifische Azure-Wiederholungsrichtlinien](./retry-service-specific.md).</span><span class="sxs-lookup"><span data-stu-id="febd0-109">For information about handling transient faults when using Microsoft Azure services, see [Azure service-specific retry guidelines](./retry-service-specific.md).</span></span>

## <a name="why-do-transient-faults-occur-in-the-cloud"></a><span data-ttu-id="febd0-110">Warum treten vorübergehende Fehler in der Cloud auf?</span><span class="sxs-lookup"><span data-stu-id="febd0-110">Why do transient faults occur in the cloud?</span></span>
<span data-ttu-id="febd0-111">Vorübergehende Fehler können in jeder Umgebung auf jeder Plattform und jedem Betriebssystem und bei jeder Anwendung auftreten.</span><span class="sxs-lookup"><span data-stu-id="febd0-111">Transient faults can occur in any environment, on any platform or operating system, and in any kind of application.</span></span> <span data-ttu-id="febd0-112">Bei Lösungen, die über eine lokale Infrastruktur laufen, werden Leistung und Verfügbarkeit der Anwendung sowie ihre Komponenten in der Regel durch teure und häufig zu selten genutzte Hardware-Redundanz verwaltet und die Komponenten und Ressourcen befinden sich nah beieinander.</span><span class="sxs-lookup"><span data-stu-id="febd0-112">In solutions that run on local, on-premises infrastructure, performance and availability of the application and its components is typically maintained through expensive and often under-used hardware redundancy, and components and resources are located close to each another.</span></span> <span data-ttu-id="febd0-113">Während dadurch zwar die Wahrscheinlichkeit eines Fehlers verringert wird, kann dies dennoch zu vorübergehenden Fehler führen - und sogar zu einem Ausfall durch unvorhergesehene Ereignisse, wie z. B. Probleme mit der externen Stromversorgung und Netzwerken oder durch andere Notfallszenarien.</span><span class="sxs-lookup"><span data-stu-id="febd0-113">While this makes a failure less likely, it can still result in transient faults - and even an outage through unforeseen events such as external power supply or network issues, or other disaster scenarios.</span></span>

<span data-ttu-id="febd0-114">Cloud-Hosting, einschließlich privater Cloud-Systeme, kann eine höhere allgemeine Verfügbarkeit bieten, und zwar durch Verwenden gemeinsamer Ressourcen, Redundanz, automatisches Failover und dynamische Zuordnung von Ressourcen über eine große Anzahl herkömmlicher Compute-Knoten.</span><span class="sxs-lookup"><span data-stu-id="febd0-114">Cloud hosting, including private cloud systems, can offer a higher overall availability by using shared resources, redundancy, automatic failover, and dynamic resource allocation across a huge number of commodity compute nodes.</span></span> <span data-ttu-id="febd0-115">Die Art dieser Umgebungen kann jedoch bedeuten, dass ein Auftreten vorübergehender Fehler wahrscheinlicher ist.</span><span class="sxs-lookup"><span data-stu-id="febd0-115">However, the nature of these environments can mean that transient faults are more likely to occur.</span></span> <span data-ttu-id="febd0-116">Dafür gibt es mehrere Gründe:</span><span class="sxs-lookup"><span data-stu-id="febd0-116">There are several reasons for this:</span></span>

* <span data-ttu-id="febd0-117">Viele Ressourcen in einer Cloud-Umgebung werden gemeinsam genutzt und der Zugriff auf diese Ressourcen unterliegt einer bestimmten Einschränkung, um die Ressource zu schützen.</span><span class="sxs-lookup"><span data-stu-id="febd0-117">Many resources in a cloud environment are shared, and access to these resources is subject to throttling in order to protect the resource.</span></span> <span data-ttu-id="febd0-118">Wenn die Auslastung auf eine bestimmte Ebene steigt oder eine maximale Durchsatzrate erreicht wird, werden einige Dienste Verbindungen verweigern, um die Verarbeitung von vorhandenen Anforderungen zu ermöglichen und die Leistung des Dienstes für alle Benutzer zu wahren.</span><span class="sxs-lookup"><span data-stu-id="febd0-118">Some services will refuse connections when the load rises to a specific level, or a maximum throughput rate is reached, in order to allow processing of existing requests and to maintain performance of the service for all users.</span></span> <span data-ttu-id="febd0-119">Die Drosselung trägt dazu bei, die Qualität des Dienstes für Nachbarn und andere Mandanten, die die gemeinsamen Ressource nutzen, beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="febd0-119">Throttling helps to maintain the quality of service for neighbors and other tenants using the shared resource.</span></span>
* <span data-ttu-id="febd0-120">Cloud-Umgebungen basieren auf einer sehr großen Anzahl herkömmlicher Hardware-Einheiten.</span><span class="sxs-lookup"><span data-stu-id="febd0-120">Cloud environments are built using vast numbers of commodity hardware units.</span></span> <span data-ttu-id="febd0-121">Sie bieten Leistung, indem sie die die Last dynamisch über mehrere Computer-Einheiten und Infrastrukturkomponenten verteilen, und arbeiten zuverlässig, indem sie fehlerhafte Einheiten automatisch wiederverwerten oder austauschen.</span><span class="sxs-lookup"><span data-stu-id="febd0-121">They deliver performance by dynamically distributing the load across multiple computing units and infrastructure components, and deliver reliability by automatically recycling or replacing failed units.</span></span> <span data-ttu-id="febd0-122">Diese Dynamik bedeutet, dass vorübergehende Fehler und temporäre Verbindungsfehler gelegentlich auftreten können.</span><span class="sxs-lookup"><span data-stu-id="febd0-122">This dynamic nature means that transient faults and temporary connection failures may occasionally occur.</span></span>
* <span data-ttu-id="febd0-123">Es gibt häufig weitere Hardwarekomponenten, einschließlich der Netzwerkinfrastruktur, wie z. B. Router und Load Balancers, zwischen der Anwendung und den Ressourcen sowie Diensten, die sie verwendet.</span><span class="sxs-lookup"><span data-stu-id="febd0-123">There are often more hardware components, including network infrastructure such as routers and load balancers, between the application and the resources and services it uses.</span></span> <span data-ttu-id="febd0-124">Diese zusätzliche Infrastruktur kann gelegentlich zu zusätzlicher Verbindungslatenz und vorübergehenden Verbindungsfehlern führen.</span><span class="sxs-lookup"><span data-stu-id="febd0-124">This additional infrastructure can occasionally introduce additional connection latency and transient connection faults.</span></span>
* <span data-ttu-id="febd0-125">Die Netzwerkbedingungen zwischen dem Client und dem Server sind möglicherweise variabel, insbesondere wenn die Kommunikation über das Internet läuft.</span><span class="sxs-lookup"><span data-stu-id="febd0-125">Network conditions between the client and the server may be variable, especially when communication crosses the Internet.</span></span> <span data-ttu-id="febd0-126">Auch in lokalen Standorten kann sehr starker Datenverkehr die Kommunikation verlangsamen und dazu führen, dass zeitweise Verbindungsfehler auftreten.</span><span class="sxs-lookup"><span data-stu-id="febd0-126">Even in on-premises locations, very heavy traffic loads may slow communication and cause intermittent connection failures.</span></span>

## <a name="challenges"></a><span data-ttu-id="febd0-127">Herausforderungen</span><span class="sxs-lookup"><span data-stu-id="febd0-127">Challenges</span></span>
<span data-ttu-id="febd0-128">Vorübergehende Fehler können eine enorme Auswirkung auf die empfundene Verfügbarkeit einer Anwendung haben, selbst wenn diese unter allen vorhersehbaren Umständen gründlich getestet wurde.</span><span class="sxs-lookup"><span data-stu-id="febd0-128">Transient faults can have a huge impact on the perceived availability of an application, even if it has been thoroughly tested under all foreseeable circumstances.</span></span> <span data-ttu-id="febd0-129">Um sicherzustellen, dass Cloud-gehostete Anwendungen zuverlässig ausgeführt werden, müssen sie auf die folgenden Herausforderungen reagieren können:</span><span class="sxs-lookup"><span data-stu-id="febd0-129">To ensure that cloud-hosted applications operate reliably, they must be able to respond to the following challenges:</span></span>

* <span data-ttu-id="febd0-130">Die Anwendung muss in der Lage sein, Fehler zu entdecken, sobald diese auftreten, und bestimmen können, ob diese Fehler eher vorübergehende, lang andauernde oder terminale Fehler sind.</span><span class="sxs-lookup"><span data-stu-id="febd0-130">The application must be able to detect faults when they occur, and determine if these faults are likely to be transient, more long-lasting, or are terminal failures.</span></span> <span data-ttu-id="febd0-131">Verschiedene Ressourcen senden wahrscheinlich unterschiedliche Antworten zurück, wenn ein Fehler auftritt, und diese Antworten können je nach Kontext des Vorgangs auch variieren. Beispielsweise kann sich die Antwort für einen Fehler beim Lesen aus dem Speicher von einer Antwort für einen Fehler beim Schreiben in den Speicher unterscheiden.</span><span class="sxs-lookup"><span data-stu-id="febd0-131">Different resources are likely to return different responses when a fault occurs, and these responses may also vary depending on the context of the operation; for example, the response for an error when reading from storage may be different from response for an error when writing to storage.</span></span> <span data-ttu-id="febd0-132">Viele Ressourcen und Dienste verfügen über gut dokumentierte vorübergehende Fehlerverträge.</span><span class="sxs-lookup"><span data-stu-id="febd0-132">Many resources and services have well-documented transient failure contracts.</span></span> <span data-ttu-id="febd0-133">Wenn derartige Informationen jedoch nicht verfügbar sind, ist es möglicherweise schwierig, die Art des Fehlers zu ermitteln, und ob er wahrscheinlich vorübergehend ist.</span><span class="sxs-lookup"><span data-stu-id="febd0-133">However, where such information is not available, it may be difficult to discover the nature of the fault and whether it is likely to be transient.</span></span>
* <span data-ttu-id="febd0-134">Die Anwendung muss in der Lage sein, den Vorgang zu wiederholen, wenn festgestellt wird, dass der Fehler wahrscheinlich vorübergehend ist, sowie die Anzahl der Wiederholungsversuche für der Vorgang verfolgen können.</span><span class="sxs-lookup"><span data-stu-id="febd0-134">The application must be able to retry the operation if it determines that the fault is likely to be transient and keep track of the number of times the operation was retried.</span></span>
* <span data-ttu-id="febd0-135">Die Anwendung muss eine geeignete Strategie für die Wiederholungen verwenden.</span><span class="sxs-lookup"><span data-stu-id="febd0-135">The application must use an appropriate strategy for the retries.</span></span> <span data-ttu-id="febd0-136">Diese Strategie gibt die Anzahl der Wiederholungsversuche, die Verzögerung zwischen jedem Versuch und die Aktionen an, die nach jedem fehlgeschlagenen Versuch vorzunehmen sind.</span><span class="sxs-lookup"><span data-stu-id="febd0-136">This strategy specifies the number of times it should retry, the delay between each attempt, and the actions to take after a failed attempt.</span></span> <span data-ttu-id="febd0-137">Die entsprechende Anzahl der Versuche und die Verzögerung zwischen jedem einzelnen sind oft schwierig zu bestimmen und variieren basierend auf der Art der Anwendung sowie auf den aktuellen Betriebsbedingungen der Ressource und der Anwendung selbst.</span><span class="sxs-lookup"><span data-stu-id="febd0-137">The appropriate number of attempts and the delay between each one are often difficult to determine, and vary based on the type of resource as well as the current operating conditions of the resource and the application itself.</span></span>

## <a name="general-guidelines"></a><span data-ttu-id="febd0-138">Allgemeine Richtlinien</span><span class="sxs-lookup"><span data-stu-id="febd0-138">General guidelines</span></span>
<span data-ttu-id="febd0-139">Die folgenden Richtlinien werden Ihnen helfen, für Ihre Anwendungen einen geeigneten Mechanismus zum Behandeln von vorübergehenden Fehlern zu entwerfen:</span><span class="sxs-lookup"><span data-stu-id="febd0-139">The following guidelines will help you to design a suitable transient fault handing mechanism for your applications:</span></span>

* <span data-ttu-id="febd0-140">**Bestimmen Sie, ob ein integrierter Wiederholungsmechanismus vorhanden ist:**</span><span class="sxs-lookup"><span data-stu-id="febd0-140">**Determine if there is a built-in retry mechanism:**</span></span>
  * <span data-ttu-id="febd0-141">Viele Dienste bieten eine SDK oder Client-Bibliothek, die einen Behandlungsmechanismus für vorübergehende Fehler enthält.</span><span class="sxs-lookup"><span data-stu-id="febd0-141">Many services provide an SDK or client library that contains a transient fault handling mechanism.</span></span> <span data-ttu-id="febd0-142">Die von ihm verwendete Wiederholungsrichtlinie ist in der Regel auf die Art und die Anforderungen des Zieldienstes zugeschnitten.</span><span class="sxs-lookup"><span data-stu-id="febd0-142">The retry policy it uses is typically tailored to the nature and requirements of the target service.</span></span> <span data-ttu-id="febd0-143">Alternativ können REST-Schnittstellen für Dienste auch Informationen zurückgeben, die hilfreich sind, um zu bestimmen, ob eine Wiederholung angemessen ist und wie lange vor dem nächsten Wiederholungsversuch gewartet werden sollte.</span><span class="sxs-lookup"><span data-stu-id="febd0-143">Alternatively, REST interfaces for services may return information that is useful in determining whether a retry is appropriate, and how long to wait before the next retry attempt.</span></span>
  * <span data-ttu-id="febd0-144">Verwenden Sie den integrierten Wiederholungsmechanismus, wenn einer verfügbar ist, es sei denn, Sie haben bestimmte und altbewährte Anforderungen, für die ein anderes Wiederholungsverhalten besser geeignet ist.</span><span class="sxs-lookup"><span data-stu-id="febd0-144">Use the built-in retry mechanism where one is available unless you have specific and well-understood requirements that mean a different retry behavior is more appropriate.</span></span>
* <span data-ttu-id="febd0-145">**Bestimmen Sie, ob der Vorgang für die Wiederholung geeignet ist**:</span><span class="sxs-lookup"><span data-stu-id="febd0-145">**Determine if the operation is suitable for retrying**:</span></span>
  * <span data-ttu-id="febd0-146">Sie sollten Vorgänge nur bei vorübergehenden Fehlern wiederholen (in der Regel durch die Art des Fehlers angegeben) und wenn zumindest eine gewisse Wahrscheinlichkeit besteht, dass der Vorgang bei einem erneuten Versuch erfolgreich ist.</span><span class="sxs-lookup"><span data-stu-id="febd0-146">You should only retry operations where the faults are transient (typically indicated by the nature of the error), and if there is at least some likelihood that the operation will succeed when reattempted.</span></span> <span data-ttu-id="febd0-147">Es ist ziemlich sinnlos Vorgänge erneut zu versuchen, die einen ungültigen Vorgang angeben, wie z. B. eine Datenbank-Aktualisierung für ein Element, das nicht  vorhanden ist, oder Anforderungen an einen Dienst oder eine Ressource, bei dem/der ein schwerwiegender aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="febd0-147">There is no point in reattempting operations that indicate an invalid operation such as a database update to an item that does not exist, or requests to a service or resource that has suffered a fatal error</span></span>
  * <span data-ttu-id="febd0-148">Im Allgemeinen sollten Sie Wiederholungen nur implementieren, wenn die vollständige Auswirkung bestimmt werden kann, und die Bedingungen gut verstanden und überprüft werden können.</span><span class="sxs-lookup"><span data-stu-id="febd0-148">In general, you should implement retries only where the full impact of this can be determined, and the conditions are well understood and can be validated.</span></span> <span data-ttu-id="febd0-149">Wenn dies nicht der Fall ist, überlassen Sie es dem aufrufenden Code, Wiederholungen zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="febd0-149">If not, leave it to the calling code to implement retries.</span></span> <span data-ttu-id="febd0-150">Denken Sie daran, dass sich die von Ressourcen und Diensten zurückgesendeten Fehler außerhalb Ihrer Kontrolle im Laufe der Zeit weiterentwickeln können und Sie dementsprechend womöglich Ihre Logik zur Erkennung vorübergehender Fehler überdenken müssen.</span><span class="sxs-lookup"><span data-stu-id="febd0-150">Remember that the errors returned from resources and services outside your control may evolve over time, and you may need to revisit your transient fault detection logic.</span></span>
  * <span data-ttu-id="febd0-151">Wenn Sie Dienste oder Komponenten erstellen, dann ziehen Sie in Betracht, Fehlercodes und -meldungen zu implementieren, die Clients helfen werden, zu bestimmen, ob sie fehlgeschlagene Vorgänge wiederholen sollten oder nicht.</span><span class="sxs-lookup"><span data-stu-id="febd0-151">When you create services or components, consider implementing error codes and messages that will help clients determine whether they should retry failed operations.</span></span> <span data-ttu-id="febd0-152">Insbesondere sollten Sie angeben, ob der Client den Vorgang wiederholen (vielleicht durch Rückgabe eines **IsTransient** -Werts) und eine geeignete Verzögerung vor dem nächsten Wiederholungsversuch vorschlagen sollte.</span><span class="sxs-lookup"><span data-stu-id="febd0-152">In particular, indicate if the client should retry the operation (perhaps by returning an **isTransient** value) and suggest a suitable delay before the next retry attempt.</span></span> <span data-ttu-id="febd0-153">Wenn Sie einen Webdienst erstellen, sollten Sie erwägen, benutzerdefinierte Fehler zurückzusenden, die in Ihren Serviceverträgen definiert sind.</span><span class="sxs-lookup"><span data-stu-id="febd0-153">If you build a web service, consider returning custom errors defined within your service contracts.</span></span> <span data-ttu-id="febd0-154">Auch wenn generische Clients diese womöglich nicht lesen können, werden sie beim Erstellen von benutzerdefinierten Clients nützlich sein.</span><span class="sxs-lookup"><span data-stu-id="febd0-154">Even though generic clients may not be able to read these, they will be useful when building custom clients.</span></span>
* <span data-ttu-id="febd0-155">**Bestimmen Sie eine geeignete Wiederholungsanzahl und ein dementsprechendes Intervall:**</span><span class="sxs-lookup"><span data-stu-id="febd0-155">**Determine an appropriate retry count and interval:**</span></span>
  * <span data-ttu-id="febd0-156">Es ist wichtig, die Anzahl der Wiederholungsversuche und das Intervall dem Typ des Anwendungsfalls entsprechend zu optimieren.</span><span class="sxs-lookup"><span data-stu-id="febd0-156">It is vital to optimize the retry count and the interval to the type of use case.</span></span> <span data-ttu-id="febd0-157">Wenn Sie zu wenige Wiederholungsversuche vornehmen, ist die Anwendung nicht in der Lage, den Vorgang abzuschließen und es wird wahrscheinlich ein Fehler auftreten.</span><span class="sxs-lookup"><span data-stu-id="febd0-157">If you do not retry a sufficient number of times, the application will be unable to complete the operation and is likely to experience a failure.</span></span> <span data-ttu-id="febd0-158">Wenn Sie zu viele Wiederholungsversuche vornehmen oder die Intervalle zwischen den einzelnen Versuchen zu kurz sind, kann die Anwendung potenziell Ressourcen enthalten wie z. B. Threads, Verbindungen und Speicher für lange Zeiträume, die sich negativ auf die Integrität der Anwendung auswirken.</span><span class="sxs-lookup"><span data-stu-id="febd0-158">If you retry too many times, or with too short an interval between tries, the application can potentially hold resources such as threads, connections, and memory for long periods, which will adversely affect the health of the application.</span></span>
  * <span data-ttu-id="febd0-159">Die angemessenen Werte für das Zeitintervall und die Anzahl der Wiederholungsversuche hängen von der Art des versuchten Vorgangs ab.</span><span class="sxs-lookup"><span data-stu-id="febd0-159">The appropriate values for the time interval and the number of retry attempts depend on the type of operation being attempted.</span></span> <span data-ttu-id="febd0-160">Wenn der Vorgang beispielsweise Teil einer Benutzerinteraktion ist, sollte das Intervall kurz sein und es sollten nur wenige Wiederholungsversuche unternommen werden, um zu verhindern, dass Benutzer auf eine Antwort warten müssen (was Verbindungen offen hält und die Verfügbarkeit für andere Benutzer verringern kann).</span><span class="sxs-lookup"><span data-stu-id="febd0-160">For example, if the operation is part of a user interaction, the interval should be short and only a few retries attempted to avoid making users wait for a response (which holds open connections and can reduce availability for other users).</span></span> <span data-ttu-id="febd0-161">Wenn der Vorgang Teil eines langen oder kritischen Workflows ist, für den ein Abbrechen oder Neustarten des Prozesses teuer oder zeitaufwändig ist, ist es angebracht, zwischen den Versuchen länger zu warten und den Vorgang öfter zu wiederholen.</span><span class="sxs-lookup"><span data-stu-id="febd0-161">If the operation is part of a long running or critical workflow, where cancelling and restarting the process is expensive or time-consuming, it is appropriate to wait longer between attempts and retry more times.</span></span>
  * <span data-ttu-id="febd0-162">Bestimmen der geeigneten Intervalle zwischen Wiederholungen ist der schwierigste Teil beim Entwerfen einer erfolgreichen Strategie.</span><span class="sxs-lookup"><span data-stu-id="febd0-162">Determining the appropriate intervals between retries is the most difficult part of designing a successful strategy.</span></span> <span data-ttu-id="febd0-163">Typische Strategien verwenden die folgenden Typen von Wiederholungsintervallen:</span><span class="sxs-lookup"><span data-stu-id="febd0-163">Typical strategies use the following types of retry interval:</span></span>
    * <span data-ttu-id="febd0-164">**Exponentielles Backoff**.</span><span class="sxs-lookup"><span data-stu-id="febd0-164">**Exponential back-off**.</span></span> <span data-ttu-id="febd0-165">Die Anwendung wartet vor dem ersten Wiederholungsversuch kurz und verlängert dann exponentiell die Abstände zwischen jedem nachfolgenden Wiederholungsintervall.</span><span class="sxs-lookup"><span data-stu-id="febd0-165">The application waits a short time before the first retry, and then exponentially increasing times between each subsequent retry.</span></span> <span data-ttu-id="febd0-166">Z. B. wird der Vorgang nach 3 Sekunden, 12 Sekunden, 30 Sekunden, usw. wiederholt.</span><span class="sxs-lookup"><span data-stu-id="febd0-166">For example, it may retry the operation after 3 seconds, 12 seconds, 30 seconds, and so on.</span></span>
    * <span data-ttu-id="febd0-167">**Inkrementelle Intervalle**.</span><span class="sxs-lookup"><span data-stu-id="febd0-167">**Incremental intervals**.</span></span> <span data-ttu-id="febd0-168">Die Anwendung wartet vor dem ersten Wiederholungsversuch kurz und verlängert dann inkrementell die Abstände zwischen jedem nachfolgenden Wiederholungsintervall.</span><span class="sxs-lookup"><span data-stu-id="febd0-168">The application waits a short time before the first retry, and then incrementally increasing times between each subsequent retry.</span></span> <span data-ttu-id="febd0-169">Z. B. wird der Vorgang nach 3 Sekunden, 7 Sekunden, 13 Sekunden, usw. wiederholt.</span><span class="sxs-lookup"><span data-stu-id="febd0-169">For example, it may retry the operation after 3 seconds, 7 seconds, 13 seconds, and so on.</span></span>
    * <span data-ttu-id="febd0-170">**Regelmäßige Intervalle**.</span><span class="sxs-lookup"><span data-stu-id="febd0-170">**Regular intervals**.</span></span> <span data-ttu-id="febd0-171">Die Anwendung wartet zwischen jedem Versuch gleich lang.</span><span class="sxs-lookup"><span data-stu-id="febd0-171">The application waits for the same period of time between each attempt.</span></span> <span data-ttu-id="febd0-172">Beispielsweise wird der Vorgang alle 3 Sekunden wiederholt.</span><span class="sxs-lookup"><span data-stu-id="febd0-172">For example, it may retry the operation every 3 seconds.</span></span>
    * <span data-ttu-id="febd0-173">**Sofortiger Wiederholungsversuch**.</span><span class="sxs-lookup"><span data-stu-id="febd0-173">**Immediate retry**.</span></span> <span data-ttu-id="febd0-174">Manchmal ist ein vorübergehender Fehler sehr kurz, vielleicht durch ein Ereignis verursacht, wie z. B. einen Netzwerk-Paket-Konflikt oder einen Spike in einer Hardwarekomponente.</span><span class="sxs-lookup"><span data-stu-id="febd0-174">Sometimes a transient fault is extremely short, perhaps caused by an event such as a network packet collision or a spike in a hardware component.</span></span> <span data-ttu-id="febd0-175">In diesem Fall ist das sofortige Wiederholen des Vorgangs geeignet, da dies erfolgreich sein kann, wenn der Fehler in der Zeit behoben wurde, die die Anwendung benötigt, um die nächste Anforderung zusammenzustellen und zu senden.</span><span class="sxs-lookup"><span data-stu-id="febd0-175">In this case, retrying the operation immediately is appropriate because it may succeed if the fault has cleared in the time it takes the application to assemble and send the next request.</span></span> <span data-ttu-id="febd0-176">Allerdings sollte nie mehr als ein sofortiger Wiederholungsversuch unternommen werden und Sie sollten auf alternative Strategien zurückgreifen, wie z. B. exponentielles Backoff oder Fallback-Aktionen, wenn die sofortige Wiederholung fehlschlägt.</span><span class="sxs-lookup"><span data-stu-id="febd0-176">However, there should never be more than one immediate retry attempt, and you should switch to alternative strategies, such as such as exponential back-off or fallback actions, if the immediate retry fails.</span></span>
    * <span data-ttu-id="febd0-177">**Zufällige Anordnung**.</span><span class="sxs-lookup"><span data-stu-id="febd0-177">**Randomization**.</span></span> <span data-ttu-id="febd0-178">Jeder der zuvor erwähnten Strategien kann zufällige Anordnung umschließen, um zu verhindern, dass mehrere Instanzen des Client zur gleichen Zeit weitere Wiederholungsversuche senden.</span><span class="sxs-lookup"><span data-stu-id="febd0-178">Any of the retry strategies listed above may include a randomization to prevent multiple instances of the client sending subsequent retry attempts at the same time.</span></span> <span data-ttu-id="febd0-179">Beispielsweise kann eine Instanz den Vorgang nach 3 Sekunden, 11 Sekunden, 28 Sekunden usw. wiederholen, während eine andere Instanz den Vorgang nach 4 Sekunden, 12 Sekunden, 26 Sekunden usw. wiederholen kann.</span><span class="sxs-lookup"><span data-stu-id="febd0-179">For example, one instance may retry the operation after 3 seconds, 11 seconds, 28 seconds, and so on while another instance may retry the operation after 4 seconds, 12 seconds, 26 seconds, and so on.</span></span> <span data-ttu-id="febd0-180">Die zufällige Anordnung ist eine nützliche Technik, die mit anderen Strategien kombiniert werden kann.</span><span class="sxs-lookup"><span data-stu-id="febd0-180">Randomization is a useful technique that may be combined with other strategies.</span></span>  
  * <span data-ttu-id="febd0-181">Verwenden Sie als allgemeine Richtlinie eine exponentielle Backoff-Strategie für Hintergrundoperationen und sofortige oder regelmäßige Intervall-Wiederholungsstrategien für interaktive Vorgänge.</span><span class="sxs-lookup"><span data-stu-id="febd0-181">As a general guideline, use an exponential back-off strategy for background operations, and immediate or regular interval retry strategies for interactive operations.</span></span> <span data-ttu-id="febd0-182">In beiden Fällen sollten Sie die Verzögerung und die Anzahl der Wiederholungsversuche so auswählen, dass die die maximale Latenz für alle Wiederholungsversuche innerhalb der erforderlichen End-to-End-Latenzzeit liegt.</span><span class="sxs-lookup"><span data-stu-id="febd0-182">In both cases, you should choose the delay and the retry count so that the maximum latency for all retry attempts is within the required end-to-end latency requirement.</span></span>
  * <span data-ttu-id="febd0-183">Berücksichtigen Sie die Kombination aller Faktoren, die zum maximalen Timeout für einen wiederholten Vorgang beitragen.</span><span class="sxs-lookup"><span data-stu-id="febd0-183">Take into account the combination of all the factors that contribute to the overall maximum timeout for a retried operation.</span></span> <span data-ttu-id="febd0-184">Zu diesen Faktoren zählen die Zeit, die eine fehlgeschlagene Verbindung für eine Antwort benötigt (in der Regel durch einen Timeoutwert auf dem Client festgelegt), sowie die Verzögerung zwischen den Wiederholungsversuchen und die maximale Anzahl von Wiederholungen.</span><span class="sxs-lookup"><span data-stu-id="febd0-184">These factors include the time taken for a failed connection to produce a response (typically set by a timeout value in the client) as well as the delay between retry attempts and the maximum number of retries.</span></span> <span data-ttu-id="febd0-185">Die Gesamtdauer kann zu einer sehr langen Gesamtvorgangszeit führen, insbesondere wenn eine exponentielle Verzögerungsstrategie verwendet wird, bei der die Intervalle zwischen Wiederholungen nach jedem Fehler größer werden.</span><span class="sxs-lookup"><span data-stu-id="febd0-185">The total of all these times can result in very large overall operation times, especially when using an exponential delay strategy where the interval between retries grows rapidly after each failure.</span></span> <span data-ttu-id="febd0-186">Wenn ein Prozess eine bestimmte Vereinbarung zum Servicelevel (SLA) erfüllen muss, muss die Gesamtvorgangszeit, einschließlich aller Timeouts und Verzögerungen, innerhalb der im SLA definierten liegen.</span><span class="sxs-lookup"><span data-stu-id="febd0-186">If a process must meet a specific service level agreement (SLA), the overall operation time, including all timeouts and delays, must be within that defined in the SLA</span></span>
  * <span data-ttu-id="febd0-187">Überaggressive Wiederholungsstrategien, die zu kurze Intervalle haben oder zu viele Wiederholungen vorsehen, können sich negativ auf die Zielressource oder den Zieldienst auswirken.</span><span class="sxs-lookup"><span data-stu-id="febd0-187">Over-aggressive retry strategies, which have too short intervals or too may retries, can have an adverse effect on the target resource or service.</span></span> <span data-ttu-id="febd0-188">Das kann verhindern, dass sich die Ressource oder der Dienst von ihrer/seiner Überlastung erholen kann, wodurch er/sie weiterhin die Anforderungen blockieren oder ablehnen wird.</span><span class="sxs-lookup"><span data-stu-id="febd0-188">This may prevent the resource or service from recovering from its overloaded state, and it will continue to block or refuse requests.</span></span> <span data-ttu-id="febd0-189">Dies führt zu einem Teufelskreis, in dem mehr und mehr Anforderungen an die Ressource oder den Dienst gesendet werden, und somit die Möglichkeit zur Wiederherstellung weiter reduziert wird.</span><span class="sxs-lookup"><span data-stu-id="febd0-189">This results in a vicious circle where more and more requests are sent to the resource or service, and consequently its ability to recover is further reduced.</span></span>
  * <span data-ttu-id="febd0-190">Berücksichtigen Sie das Timeout der Vorgänge bei der Auswahl der Wiederholungsintervalle, um zu vermeiden, sofort einen weiteren Versuch zu starten (z. B. wenn der Timeout-Zeitraum dem Wiederholungsintervall entspricht).</span><span class="sxs-lookup"><span data-stu-id="febd0-190">Take into account the timeout of the operations when choosing the retry intervals to avoid launching a subsequent attempt immediately (for example, if the timeout period is similar to the retry interval).</span></span> <span data-ttu-id="febd0-191">Überlegen Sie auch, ob Sie den insgesamt möglichen Zeitraum (das Zeitlimit plus die Wiederholungsintervalle) unter einer bestimmten Gesamtzeit behalten müssen.</span><span class="sxs-lookup"><span data-stu-id="febd0-191">Also consider if you need to keep the total possible period (the timeout plus the retry intervals) to below a specific total time.</span></span> <span data-ttu-id="febd0-192">Vorgänge, die ungewöhnlich kurze oder sehr lange Timeouts haben, können die Wartezeit und die Anzahl der Wiederholungsversuche für den Vorgang beeinflussen.</span><span class="sxs-lookup"><span data-stu-id="febd0-192">Operations that have unusually short or very long timeouts may influence how long to wait, and how often to retry the operation.</span></span>
  * <span data-ttu-id="febd0-193">Verwenden Sie den Typ der Ausnahme und alle darin enthaltenen Daten oder die Fehlercodes und Meldungen, die vom Dienst zurückgegeben werden, um das Intervall und die Anzahl von Wiederholungen zu optimieren.</span><span class="sxs-lookup"><span data-stu-id="febd0-193">Use the type of the exception and any data it contains, or the error codes and messages returned from the service, to optimize the interval and the number of retries.</span></span> <span data-ttu-id="febd0-194">Zum Beispiel können einige Ausnahmen oder Fehlercodes (wie HTTP-Code 503 „Dienst nicht verfügbar“ mit einem Retry-After-Header in der Antwort) angeben, wie lange der Fehler dauern kann, oder dass der Dienst ausgefallen ist und nicht auf einen anschließenden Versuch reagieren wird.</span><span class="sxs-lookup"><span data-stu-id="febd0-194">For example, some exceptions or error codes (such as the HTTP code 503 Service Unavailable with a Retry-After header in the response) may indicate how long the error might last, or that the service has failed and will not respond to any subsequent attempt.</span></span>
* <span data-ttu-id="febd0-195">**Vermeiden Sie Antimuster**</span><span class="sxs-lookup"><span data-stu-id="febd0-195">**Avoid anti-patterns**:</span></span>
  * <span data-ttu-id="febd0-196">In den meisten Fällen sollten Sie Implementierungen vermeiden, die duplizierte Ebenen des Wiederholungscodes enthalten.</span><span class="sxs-lookup"><span data-stu-id="febd0-196">In the vast majority of cases, you should avoid implementations that include duplicated layers of retry code.</span></span> <span data-ttu-id="febd0-197">Vermeiden Sie Entwürfe, die kaskadierende Wiederholungsmechanismen enthalten oder in jeder Phase eines Vorgangs, der eine Hierarchie von Anforderungen umschließt, eine Wiederholung implementieren, es sei denn, Sie haben spezielle Anforderungen, die dies erfordern.</span><span class="sxs-lookup"><span data-stu-id="febd0-197">Avoid designs that include cascading retry mechanisms, or that implement retry at every stage of an operation that involves a hierarchy of requests, unless you have specific requirements that demand this.</span></span> <span data-ttu-id="febd0-198">Verwenden Sie unter diesen besonderen Umständen Richtlinien, die eine übertriebene Anzahl an Wiederholungen und Verzögerungszeiträumen verhindern, und stellen Sie sicher, dass Sie die Folgen kennen.</span><span class="sxs-lookup"><span data-stu-id="febd0-198">In these exceptional circumstances, use policies that prevent excessive numbers of retries and delay periods, and make sure you understand the consequences.</span></span> <span data-ttu-id="febd0-199">Wenn eine Komponente beispielsweise eine Anforderung an eine andere stellt, die dann auf den Zieldienst zugreift, und Sie für beide Aufrufe eine Wiederholung auf drei implementieren, dann gibt es insgesamt neun Wiederholungsversuche für den Dienst.</span><span class="sxs-lookup"><span data-stu-id="febd0-199">For example, if one component makes a request to another, which then accesses the target service, and you implement retry with a count of three on both calls there will be nine retry attempts in total against the service.</span></span> <span data-ttu-id="febd0-200">Viele Dienste und Ressourcen implementieren einen integrierten Wiederholungsmechanismus und Sie sollten nachforschen, wie Sie diesen deaktivieren oder ändern können, wenn Wiederholungen auf einer höheren Ebene implementiert werden müssen.</span><span class="sxs-lookup"><span data-stu-id="febd0-200">Many services and resources implement a built-in retry mechanism and you should investigate how you can disable or modify this if you need to implement retries at a higher level.</span></span>
  * <span data-ttu-id="febd0-201">Implementieren Sie niemals einen endlosen Wiederholungsmechanismus.</span><span class="sxs-lookup"><span data-stu-id="febd0-201">Never implement an endless retry mechanism.</span></span> <span data-ttu-id="febd0-202">Dadurch wird wahrscheinlich verhindert, dass eine Überladung der Ressource oder des Diensts  ausgeglichen wird, und kann zu einer Drosselung und Verbindungsverweigerung über einen längeren Zeitraum hinweg führen.</span><span class="sxs-lookup"><span data-stu-id="febd0-202">This is likely to prevent the resource or service recovering from overload situations, and cause throttling and refused connections to continue for a longer period.</span></span> <span data-ttu-id="febd0-203">Verwenden Sie eine endliche Anzahl oder Wiederholungen oder implementieren Sie ein Muster, z.B. einen [Schaltkreisunterbrecher](http://msdn.microsoft.com/library/dn589784.aspx), damit der Dienst wiederhergestellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="febd0-203">Use a finite number or retries, or implement a pattern such as [Circuit Breaker](http://msdn.microsoft.com/library/dn589784.aspx) to allow the service to recover.</span></span>
  * <span data-ttu-id="febd0-204">Führen Sie nie öfter als einmal eine sofortige Wiederholung durch.</span><span class="sxs-lookup"><span data-stu-id="febd0-204">Never perform an immediate retry more than once.</span></span>
  * <span data-ttu-id="febd0-205">Vermeiden Sie die Verwendung eines regulären Wiederholungsintervalls, insbesondere bei einer großen Anzahl von Wiederholungsversuchen, wenn Sie auf Dienste und Ressourcen in Azure zugreifen.</span><span class="sxs-lookup"><span data-stu-id="febd0-205">Avoid using a regular retry interval, especially when you have a large number of retry attempts, when accessing services and resources in Azure.</span></span> <span data-ttu-id="febd0-206">Der optimale Ansatz ist eine exponentielle Backoff-Strategie mit einer schaltkreisunterbrechenden Funktion.</span><span class="sxs-lookup"><span data-stu-id="febd0-206">The optimum approach is this scenario is an exponential back-off strategy with a circuit-breaking capability.</span></span>
  * <span data-ttu-id="febd0-207">Vermeiden Sie, dass mehrere Instanzen desselben Client oder mehrere Instanzen verschiedener Clients zur gleichen Zeit Wiederholungen senden.</span><span class="sxs-lookup"><span data-stu-id="febd0-207">Prevent multiple instances of the same client, or multiple instances of different clients, from sending retries at the same times.</span></span> <span data-ttu-id="febd0-208">Besteht dafür eine hohe Wahrscheinlichkeit, dann führen Sie eine zufällige Anordnung in die Wiederholungsintervalle ein.</span><span class="sxs-lookup"><span data-stu-id="febd0-208">If this is likely to occur, introduce randomization into the retry intervals.</span></span>
* <span data-ttu-id="febd0-209">**Testen Sie Ihre Wiederholungsstrategie und die Implementierung:**</span><span class="sxs-lookup"><span data-stu-id="febd0-209">**Test your retry strategy and implementation:**</span></span>
  * <span data-ttu-id="febd0-210">Stellen Sie sicher, dass Sie Ihre Wiederholungsstrategie unter so vielen Bedingungen wie möglich vollständig testen, insbesondere wenn die Anwendung und die Zielressourcen oder Zieldienste diese bei extremer Auslastung nutzen.</span><span class="sxs-lookup"><span data-stu-id="febd0-210">Ensure you fully test your retry strategy implementation under as wide a set of circumstances as possible, especially when both the application and the target resources or services it uses are under extreme load.</span></span> <span data-ttu-id="febd0-211">Um das Verhalten während der Tests zu überprüfen, können Sie folgende Aktionen ausführen:</span><span class="sxs-lookup"><span data-stu-id="febd0-211">To check behavior during testing, you can:</span></span>
    * <span data-ttu-id="febd0-212">Vorübergehende und dauerhafte Fehler in den Dienst einfügen.</span><span class="sxs-lookup"><span data-stu-id="febd0-212">Inject transient and non-transient faults into the service.</span></span> <span data-ttu-id="febd0-213">Senden Sie beispielsweise ungültige Anforderungen oder fügen Sie einen Code hinzu, der Testanforderungen und Antworten mit unterschiedlichen Fehlerarten erkennt.</span><span class="sxs-lookup"><span data-stu-id="febd0-213">For example, send invalid requests or add code that detects test requests and responds with different types of errors.</span></span> <span data-ttu-id="febd0-214">Ein Beispiel für die Verwendung von TestApi finden Sie unter [Fault Injection Testing with TestApi](http://msdn.microsoft.com/magazine/ff898404.aspx) (Fehlereinschleusungstests mit TestApi) und [Introduction to TestApi – Part 5: Managed Code Fault Injection APIs](http://blogs.msdn.com/b/ivo_manolov/archive/2009/11/25/9928447.aspx) (Einführung in TestApi – Teil 5: APIs für die Fehlereinschleusung in verwalteten Code).</span><span class="sxs-lookup"><span data-stu-id="febd0-214">For an example using TestApi, see [Fault Injection Testing with TestApi](http://msdn.microsoft.com/magazine/ff898404.aspx) and [Introduction to TestApi – Part 5: Managed Code Fault Injection APIs](http://blogs.msdn.com/b/ivo_manolov/archive/2009/11/25/9928447.aspx).</span></span>
    * <span data-ttu-id="febd0-215">Täuschen Sie die Ressource oder den Dienst vor, die/der einen Bereich von Fehlern zurückgibt, die der tatsächliche Dienst womöglich zurückgeben wird.</span><span class="sxs-lookup"><span data-stu-id="febd0-215">Create a mock of the resource or service that returns a range of errors that the real service may return.</span></span> <span data-ttu-id="febd0-216">Stellen Sie sicher, dass Sie alle Arten von Fehler behandeln, die Ihre Wiederholungsstrategie erkennen soll.</span><span class="sxs-lookup"><span data-stu-id="febd0-216">Ensure you cover all the types of error that your retry strategy is designed to detect.</span></span>
    * <span data-ttu-id="febd0-217">Erzwingen Sie das Auftreten vorübergehender Fehler, indem Sie vorübergehend den Dienst deaktivieren, wenn der von Ihnen erstellte und bereitgestellte Dienst benutzerdefiniert ist (Sie sollten natürlich nicht freigegebene Ressourcen oder freigegebene Dienste innerhalb Azure überladen).</span><span class="sxs-lookup"><span data-stu-id="febd0-217">Force transient errors to occur by temporarily disabling or overloading the service if it is a custom service that you created and deployed (you should not, of course, attempt to overload any shared resources or shared services within Azure).</span></span>
    * <span data-ttu-id="febd0-218">Für HTTP-basierte APIs sollten Sie in Erwägung ziehen, in Ihren automatisierten Tests die FiddlerCore-Bibliothek zu verwenden, um das Ergebnis der HTTP-Anforderungen durch Hinzufügen zusätzlicher Roundtrip-Zeiten oder durch Ändern der Antwort (z. B. den HTTP-Statuscode, Header, Text oder andere Faktoren) zu ändern.</span><span class="sxs-lookup"><span data-stu-id="febd0-218">For HTTP-based APIs, consider using the FiddlerCore library in your automated tests to change the outcome of HTTP requests, either by adding extra roundtrip times or by changing the response (such as the HTTP status code, headers, body, or other factors).</span></span> <span data-ttu-id="febd0-219">Dies ermöglicht das deterministische Testen einer Teilmenge der Fehlerbedingungen, egal ob vorübergehende Fehler oder andere Fehlertypen.</span><span class="sxs-lookup"><span data-stu-id="febd0-219">This enables deterministic testing of a subset of the failure conditions, whether transient faults or other types of failure.</span></span> <span data-ttu-id="febd0-220">Weitere Informationen finden Sie unter [FiddlerCore](http://www.telerik.com/fiddler/fiddlercore).</span><span class="sxs-lookup"><span data-stu-id="febd0-220">For more information, see [FiddlerCore](http://www.telerik.com/fiddler/fiddlercore).</span></span> <span data-ttu-id="febd0-221">Überprüfen Sie für Beispiele für die Verwendung der Bibliothek, insbesondere der **HttpMangler**-Klasse, den [Quellcode für Azure Storage SDK](https://github.com/Azure/azure-storage-net/tree/master/Test).</span><span class="sxs-lookup"><span data-stu-id="febd0-221">For examples of how to use the library, particularly the **HttpMangler** class, examine the [source code for the Azure Storage SDK](https://github.com/Azure/azure-storage-net/tree/master/Test).</span></span>
    * <span data-ttu-id="febd0-222">Führen Sie hohe Ladefaktor und gleichzeitige Tests durch, um sicherzustellen, dass der Wiederholungsmechanismus und die Strategie unter diesen Bedingungen ordnungsgemäß funktionieren und sich nicht nachteilig auf den Betrieb des Clients auswirken oder dazu führen, dass Kreuzkontaminationen zwischen Anforderungen entstehen.</span><span class="sxs-lookup"><span data-stu-id="febd0-222">Perform high load factor and concurrent tests to ensure that the retry mechanism and strategy works correctly under these conditions, and does not have an adverse effect on the operation of the client or cause cross-contamination between requests.</span></span>
* <span data-ttu-id="febd0-223">**Verwalten Sie die Konfigurationen von Wiederholungsrichtlinien:**</span><span class="sxs-lookup"><span data-stu-id="febd0-223">**Manage retry policy configurations:**</span></span>
  * <span data-ttu-id="febd0-224">Eine *Wiederholungsrichtlinie* ist eine Kombination aller Elemente Ihrer Wiederholungsstrategie.</span><span class="sxs-lookup"><span data-stu-id="febd0-224">A *retry policy* is a combination of all of the elements of your retry strategy.</span></span> <span data-ttu-id="febd0-225">Sie definiert den Erkennungsmechanismus, der bestimmt, ob ein Fehler wahrscheinlich vorübergehend ist, sowie den Typ des zu verwendenden Intervalls (z. B. regelmäßig, exponentielles Backoff und zufällige Anordnung), den/die tatsächlichen Intervallwert(e) und die Anzahl der Wiederholungen bestimmt.</span><span class="sxs-lookup"><span data-stu-id="febd0-225">It defines the detection mechanism that determines whether a fault is likely to be transient, the type of interval to use (such as regular, exponential back-off, and randomization), the actual interval value(s), and the number of times to retry.</span></span>
  * <span data-ttu-id="febd0-226">Wiederholungen müssen selbst bei der einfachsten Anwendung an vielen Stellen sowie in jeder Ebene der komplexeren Anwendungen implementiert werden.</span><span class="sxs-lookup"><span data-stu-id="febd0-226">Retries must be implemented in many places within even the simplest application, and in every layer of more complex applications.</span></span> <span data-ttu-id="febd0-227">Anstatt einer Hartcodierung der Elemente jeder einzelnen Richtlinien an mehreren Standorten sollten Sie in Erwägung ziehen, einen zentralen Punkt zum Speichern aller Richtlinien zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="febd0-227">Rather than hard-coding the elements of each policy at multiple locations, consider using a central point for storing all the policies.</span></span> <span data-ttu-id="febd0-228">Speichern Sie beispielsweise die Werte, wie die Intervalle und die Wiederholungsanzahl, in Anwendungskonfigurationsdateien, lesen Sie diese zur Laufzeit und erstellen Sie programmgesteuerte Wiederholungsrichtlinien.</span><span class="sxs-lookup"><span data-stu-id="febd0-228">For example, store the values such as the interval and retry count in application configuration files, read them at runtime, and programmatically build the retry policies.</span></span> <span data-ttu-id="febd0-229">Dies erleichtert die Verwaltung der Einstellungen sowie die Änderung und die Anpassung der Werte, um auf sich ändernde Anforderungen und Szenarien zu reagieren.</span><span class="sxs-lookup"><span data-stu-id="febd0-229">This makes it easier to manage the settings, and to modify and fine tune the values in order to respond to changing requirements and scenarios.</span></span> <span data-ttu-id="febd0-230">Entwerfen Sie jedoch das System, um die Werte zu speichern, statt jedes Mal eine Konfigurationsdatei neu zu lesen, und stellen Sie sicher, dass geeignete Standardwerte verwendet werden, wenn die Werte aus der Konfiguration nicht abgerufen werden können.</span><span class="sxs-lookup"><span data-stu-id="febd0-230">However, design the system to store the values rather than rereading a configuration file every time, and ensure suitable defaults are used if the values cannot be obtained from configuration.</span></span>
  * <span data-ttu-id="febd0-231">Bei einer Azure-Cloud-Dienste-Anwendung sollten Sie in Erwägung ziehen, die Werte zu speichern, mit denen die Wiederholungsrichtlinien zur Laufzeit in der Dienstkonfigurationsdatei erstellt werden, damit sie ohne Neustart der Anwendung geändert werden können.</span><span class="sxs-lookup"><span data-stu-id="febd0-231">In an Azure Cloud Services application, consider storing the values that are used to build the retry policies at runtime in the service configuration file so that they can be changed without needing to restart the application.</span></span>
  * <span data-ttu-id="febd0-232">Nutzen Sie integrierte oder standardmäßige Wiederholungsstrategien, die in den Client-APIs verfügbar sind, doch nur insofern sie sich für Ihr Szenario eignen.</span><span class="sxs-lookup"><span data-stu-id="febd0-232">Take advantage of built-in or default retry strategies available in the client APIs you use, but only where they are appropriate for your scenario.</span></span> <span data-ttu-id="febd0-233">Diese Strategien sind in der Regel allgemein.</span><span class="sxs-lookup"><span data-stu-id="febd0-233">These strategies are typically general-purpose.</span></span> <span data-ttu-id="febd0-234">Für einige Szenarien ist womöglich nichts weiter erforderlich, aber in anderen Szenarien bieten sie vielleicht nicht die gesamte Palette von Optionen an, die Ihre Anforderungen benötigen.</span><span class="sxs-lookup"><span data-stu-id="febd0-234">In some scenarios they may be all that is required, but in other scenarios they may not offer the full range of options to suit your specific requirements.</span></span> <span data-ttu-id="febd0-235">Sie müssen verstehen, wie die Einstellungen Ihre Anwendung durch Tests beeinflussen wird, um die geeignetsten Werte zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="febd0-235">You must understand how the settings will affect your application through testing to determine the most appropriate values.</span></span>
* <span data-ttu-id="febd0-236">**Melden Sie sich an und verfolgen Sie vorübergehende und dauerhafte Fehler:**</span><span class="sxs-lookup"><span data-stu-id="febd0-236">**Log and track transient and non-transient faults:**</span></span>
  * <span data-ttu-id="febd0-237">Schließen Sie als Teil Ihrer Wiederholungsstrategie die Ausnahmebehandlung und eine andere Instrumentation ein, die protokolliert, wenn Wiederholungsversuche erfolgen.</span><span class="sxs-lookup"><span data-stu-id="febd0-237">As part of your retry strategy, include exception handling and other instrumentation that logs when retry attempts are made.</span></span> <span data-ttu-id="febd0-238">Während ein gelegentlicher vorübergehender Fehler und Wiederholungsversuch zu erwarten sind und auf kein Problem verweisen, sind regelmäßige und zunehmende Wiederholungen häufig ein Hinweis auf ein Problem, das zu einem Fehler führen kann, oder wirken sich aktuell auf die Leistung und Verfügbarkeit aus.</span><span class="sxs-lookup"><span data-stu-id="febd0-238">While an occasional transient failure and retry are to be expected, and do not indicate a problem, regular and increasing numbers of retries are often an indicator of an issue that may cause a failure, or is currently impacting application performance and availability.</span></span>
  * <span data-ttu-id="febd0-239">Protokollieren Sie vorübergehende Fehler als Warnungs- statt Fehlereinträge, damit Überwachungssysteme diese nicht als Anwendungsfehler erkennen, die womöglich falsche Warnungen auslösen.</span><span class="sxs-lookup"><span data-stu-id="febd0-239">Log transient faults as Warning entries rather than Error entries so that monitoring systems do not detect them as application errors that may trigger false alerts.</span></span>
  * <span data-ttu-id="febd0-240">Überlegen Sie einen Wert in Ihren Protokolleinträgen zu speichern, der angibt, ob die Wiederholungen durch Drosselung des Diensts oder andere Fehlerarten verursacht wurden, wie z. B. Verbindungsfehler, sodass Sie diese während der Datenanalyse unterscheiden können.  </span><span class="sxs-lookup"><span data-stu-id="febd0-240">Consider storing a value in your log entries that indicates if the retries were caused by throttling in the service, or by other types of faults such as connection failures, so that you can differentiate them during analysis of the data.</span></span> <span data-ttu-id="febd0-241">Eine Zunahme der Anzahl der Drosselungsfehler ist häufig ein Hinweis auf einen Designfehler in der Anwendung oder auf die Notwendigkeit, zu einem Premium-Dienst zu wechseln, der dedizierte Hardware bietet.</span><span class="sxs-lookup"><span data-stu-id="febd0-241">An increase in the number of throttling errors is often an indicator of a design flaw in the application or the need to switch to a premium service that offers dedicated hardware.</span></span>  
  * <span data-ttu-id="febd0-242">Überlegen Sie die Gesamtzeit zu messen und zu protokollieren, die für Vorgänge benötigt wurden, die einen Wiederholungsmechanismus enthalten.</span><span class="sxs-lookup"><span data-stu-id="febd0-242">Consider measuring and logging the overall time taken for operations that include a retry mechanism.</span></span> <span data-ttu-id="febd0-243">Dies ist ein guter Indikator für die Gesamtauswirkung der vorübergehenden Fehler auf die Antwortzeiten der Benutzer, Prozess-Latenz und die Effizienz der Anwendungsfälle der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="febd0-243">This is a good indicator of the overall effect of transient faults on user response times, process latency, and the efficiency of the application use cases.</span></span> <span data-ttu-id="febd0-244">Protokollieren Sie auch die Anzahl der aufgetretenen Wiederholungen, um die Faktoren zu verstehen, die die Antwortzeit beeinflusst haben.</span><span class="sxs-lookup"><span data-stu-id="febd0-244">Also log the number of retries occurred in order to understand the factors that contributed to the response time.</span></span>
  * <span data-ttu-id="febd0-245">Ziehen Sie das Implementieren einer Telemetrie und eines Überwachungssystems in Betracht, das Warnungen auslöst, wenn die Zahl und Rate von Fehlern, die durchschnittliche Anzahl von Wiederholungen oder die für eine erfolgreiche Ausführung von Vorgängen benötigte Gesamtzeit zunimmt.</span><span class="sxs-lookup"><span data-stu-id="febd0-245">Consider implementing a telemetry and monitoring system that can raise alerts when the number and rate of failures, the average number of retries, or the overall times taken for operations to succeed, is increasing.</span></span>
* <span data-ttu-id="febd0-246">**Verwalten Sie Vorgänge, die ständig fehlschlagen:**</span><span class="sxs-lookup"><span data-stu-id="febd0-246">**Manage operations that continually fail:**</span></span>
  
  * <span data-ttu-id="febd0-247">Unter bestimmten Umständen wird der Vorgang weiterhin bei jedem Versuch fehlschlagen und es ist wichtig zu berücksichtigen, wie Sie mit dieser Situation umgehen:</span><span class="sxs-lookup"><span data-stu-id="febd0-247">There will be circumstances where the operation continues to fail at every attempt, and it is vital to consider how you will handle this situation:</span></span>
    * <span data-ttu-id="febd0-248">Obwohl eine Wiederholungsstrategie definiert, wie oft ein Vorgang höchstens wiederholt werden sollte, verhindert sie nicht, dass die Anwendung den Vorgang mit der gleichen Anzahl an Wiederholungen erneut wiederholt.</span><span class="sxs-lookup"><span data-stu-id="febd0-248">Although a retry strategy will define the maximum number of times that an operation should be retried, it does not prevent the application repeating the operation again, with the same number of retries.</span></span> <span data-ttu-id="febd0-249">Schlägt beispielsweise ein Dienst zur Bestellverarbeitung mit einem schwerwiegendem Fehler fehl, der diesen Dienst dauerhaft außer Betrieb setzt, könnte die Wiederholungsstrategie ein Verbindungs-Timeout erkennen und dies als vorübergehenden Fehler betrachten.</span><span class="sxs-lookup"><span data-stu-id="febd0-249">For example, if an order processing service fails with a fatal error that puts it out of action permanently, the retry strategy may detect a connection timeout and consider it to be a transient fault.</span></span> <span data-ttu-id="febd0-250">Der Code wird den Vorgang eine bestimmte Anzahl an Versuchen wiederholen und dann aufgeben.</span><span class="sxs-lookup"><span data-stu-id="febd0-250">The code will retry the operation a specified number of times and then give up.</span></span> <span data-ttu-id="febd0-251">Wenn jedoch ein anderer Kunde eine Bestellung aufgibt, wird der Vorgang erneut versucht, obwohl er mit Sicherheit jedes Mal fehlschlagen wird.</span><span class="sxs-lookup"><span data-stu-id="febd0-251">However, when another customer places an order, the operation will be attempted again - even though it is sure to fail every time.</span></span>
    * <span data-ttu-id="febd0-252">Implementieren Sie das [Trennschalter-Muster](http://msdn.microsoft.com/library/dn589784.aspx), um die kontinuierliche Wiederholungen von Vorgängen zu vermeiden, die ständig fehlschlagen.</span><span class="sxs-lookup"><span data-stu-id="febd0-252">To prevent continual retries for operations that continually fail, consider implementing the [Circuit Breaker pattern](http://msdn.microsoft.com/library/dn589784.aspx).</span></span> <span data-ttu-id="febd0-253">In diesem Muster werden Anforderungen, wenn die Anzahl der Fehler in einem angegebenen Zeitfenster den Schwellenwert überschreitet, sofort an den Aufrufer als Fehler zurückgegeben, ohne zu versuchen, auf die ausgefallene Ressource oder den Dienst zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="febd0-253">In this pattern, if the number of failures within a specified time window exceeds the threshold, requests are returned to the caller immediately as errors, without attempting to access the failed resource or service.</span></span>
    * <span data-ttu-id="febd0-254">Die Anwendung kann in regelmäßigen Abständen und mit langen Abständen zwischen den Intervallen den Dienst testen, um zu erkennen, wann er wieder verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="febd0-254">The application can periodically test the service, on an intermittent basis and with very long intervals between requests, to detect when it becomes available.</span></span> <span data-ttu-id="febd0-255">Welches Intervall angemessen ist, hängt vom jeweiligen Szenario ab, wie z. B. die Kritikalität des Vorgangs und der Art des Diensts, und kann von wenigen Minuten bis mehreren Stunden dauern.</span><span class="sxs-lookup"><span data-stu-id="febd0-255">An appropriate interval will depend on the scenario, such as the criticality of the operation and the nature of the service, and might be anything between a few minutes and several hours.</span></span> <span data-ttu-id="febd0-256">An dem Punkt, wo der Test erfolgreich ist, kann die Anwendung normal fortgesetzt werden und Anforderungen an den wiederhergestellten Dienst übergeben.</span><span class="sxs-lookup"><span data-stu-id="febd0-256">At the point where the test succeeds, the application can resume normal operations and pass requests to the newly recovered service.</span></span>
    * <span data-ttu-id="febd0-257">In der Zwischenzeit kann es möglich sein, auf eine andere Instanz des Diensts (z. B. in einem anderen Datencenter oder eine Anwendung) zurückzugreifen, einen ähnlichen Dienst zu verwenden, der eine kompatible (vielleicht einfachere) Funktion bietet, oder einige alternative Vorgänge auszuführen, in der Hoffnung, dass der Dienst schnell wieder verfügbar wird.</span><span class="sxs-lookup"><span data-stu-id="febd0-257">In the meantime, it may be possible to fall back to another instance of the service (perhaps in a different datacenter or application), use a similar service that offers compatible (perhaps simpler) functionality, or perform some alternative operations in the hope that the service will become available soon.</span></span> <span data-ttu-id="febd0-258">Es könnte beispielsweise angebracht sein, die Anforderungen für den Dienst in einer Warteschlange oder einem Datenspeicher zu speichern und sie später wiederzugeben.</span><span class="sxs-lookup"><span data-stu-id="febd0-258">For example, it may be appropriate to store requests for the service in a queue or data store and replay them later.</span></span> <span data-ttu-id="febd0-259">Andernfalls können Sie möglicherweise den Benutzer an eine andere Instanz leiten, die Leistung der Anwendung bei immer noch akzeptabler Funktion verschlechtern oder einfach eine Nachricht an den Benutzer zurückgeben, aus der hervorgeht, dass die Anwendung derzeit nicht verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="febd0-259">Otherwise you might be able to redirect the user to an alternative instance of the application, degrade the performance of the application but still offer acceptable functionality, or just return a message to the user indicating that the application is not available at present.</span></span>
* <span data-ttu-id="febd0-260">**Weitere Überlegungen**</span><span class="sxs-lookup"><span data-stu-id="febd0-260">**Other considerations**</span></span>
  
  * <span data-ttu-id="febd0-261">Wenn Sie die Werte für die Anzahl der Wiederholungen und die Wiederholungsintervalle für eine Richtlinie festlegen, sollten Sie bedenken, ob der Dienst oder die Ressource Teil eines lang andauernden oder aus mehreren Schritten bestehenden Vorgangs ist.</span><span class="sxs-lookup"><span data-stu-id="febd0-261">When deciding on the values for the number of retries and the retry intervals for a policy, consider if the operation on the service or resource is part of a long-running or multi-step operation.</span></span> <span data-ttu-id="febd0-262">Es kann schwierig oder teuer sein, alle anderen Verfahrensschritte zu kompensieren, die bereits erfolgreich abgeschlossen wurden, wenn einer fehlschlägt.</span><span class="sxs-lookup"><span data-stu-id="febd0-262">It may be difficult or expensive to compensate all the other operational steps that have already succeeded when one fails.</span></span> <span data-ttu-id="febd0-263">In diesem Fall könnten ein sehr langes Intervall und eine große Anzahl von Wiederholungen akzeptabel sein, solange diese keine anderen Vorgänge blockieren, indem knappe Ressourcen zurückgehalten oder gesperrt werden.</span><span class="sxs-lookup"><span data-stu-id="febd0-263">In this case, a very long interval and a large number of retries may be acceptable as long as it does not block other operations by holding or locking scarce resources.</span></span>
  * <span data-ttu-id="febd0-264">Überlegen Sie, ob eine Wiederholung des gleichen Vorgangs zu inkonsistenten Daten führen könnte.</span><span class="sxs-lookup"><span data-stu-id="febd0-264">Consider if retrying the same operation may cause inconsistencies in data.</span></span> <span data-ttu-id="febd0-265">Wenn einige Teile eines aus mehreren Schritten bestehenden Prozesses wiederholt werden und die Vorgänge nicht idempotent sind, kann dies zu einer Inkonsistenz führen.</span><span class="sxs-lookup"><span data-stu-id="febd0-265">If some parts of a multi-step process are repeated, and the operations are not idempotent, it may result in an inconsistency.</span></span> <span data-ttu-id="febd0-266">Beispielsweise erzeugt ein Vorgang, der bei Wiederholung einen Wert inkrementiert, ein ungültiges Ergebnis.</span><span class="sxs-lookup"><span data-stu-id="febd0-266">For example, an operation that increments a value, if repeated, will produce an invalid result.</span></span> <span data-ttu-id="febd0-267">Einen Vorgang zu wiederholen, der eine Nachricht an eine Warteschlange sendet, kann eine Inkonsistenz im Nachrichtenconsumer verursachen, wenn er doppelte Nachrichten nicht ermitteln kann.</span><span class="sxs-lookup"><span data-stu-id="febd0-267">Repeating an operation that sends a message to a queue may cause an inconsistency in the message consumer if it cannot detect duplicate messages.</span></span> <span data-ttu-id="febd0-268">Um dies zu vermeiden, stellen Sie sicher, dass Sie jeden Schritt als idempotenten Vorgang entwerfen.</span><span class="sxs-lookup"><span data-stu-id="febd0-268">To prevent this, ensure that you design each step as an idempotent operation.</span></span> <span data-ttu-id="febd0-269">Weitere Informationen zu Idempotenz finden Sie unter [Idempotenz-Muster][idempotency-patterns].</span><span class="sxs-lookup"><span data-stu-id="febd0-269">For more information about idempotency, see [Idempotency Patterns][idempotency-patterns].</span></span>
  * <span data-ttu-id="febd0-270">Berücksichtigen Sie den Bereich der Vorgänge, die wiederholt werden.</span><span class="sxs-lookup"><span data-stu-id="febd0-270">Consider the scope of the operations that will be retried.</span></span> <span data-ttu-id="febd0-271">Beispielsweise ist es möglicherweise einfacher, einen Wiederholungscode auf einer Ebene zu implementieren, die mehrere Vorgänge umfasst, und sie alle zu wiederholen, wenn einer fehlschlägt.</span><span class="sxs-lookup"><span data-stu-id="febd0-271">For example, it may be easier to implement retry code at a level that encompasses several operations, and retry them all if one fails.</span></span> <span data-ttu-id="febd0-272">Allerdings kann dies zu Idempotenz-Problemen oder unnötigen Rollback-Operationen führen.</span><span class="sxs-lookup"><span data-stu-id="febd0-272">However, doing this may result in idempotency issues or unnecessary rollback operations.</span></span>
  * <span data-ttu-id="febd0-273">Wenn Sie einen Wiederholungsbereich auswählen, der mehrere Vorgänge umfasst, berücksichtigen Sie die gesamte Latenz beim Bestimmen der Wiederholungsintervalle, beim Überwachen des Zeitaufwands und vor dem Auslösen von Warnungen vor Fehlern.</span><span class="sxs-lookup"><span data-stu-id="febd0-273">If you choose a retry scope that encompasses several operations, take into account the total latency of all of them when determining the retry intervals, when monitoring the time taken, and before raising alerts for failures.</span></span>
  * <span data-ttu-id="febd0-274">Beachten Sie, wie Ihre Wiederholungsstrategie Nachbarn und andere Mandanten in einer freigegebenen Anwendung beeinflussen kann, oder bei Verwendung von freigegebenen Ressourcen und Diensten.</span><span class="sxs-lookup"><span data-stu-id="febd0-274">Consider how your retry strategy may affect neighbors and other tenants in a shared application, or when using shared resources and services.</span></span> <span data-ttu-id="febd0-275">Aggressive Wiederholungsrichtlinien können für diese anderen Benutzer und für Anwendungen, die Ressourcen und Dienste teilen, vermehrt zu vorübergehenden Fehlern führen.</span><span class="sxs-lookup"><span data-stu-id="febd0-275">Aggressive retry policies can cause an increasing number of transient faults to occur for these other users and for applications that share the resources and services.</span></span> <span data-ttu-id="febd0-276">Ebenso kann Ihre Anwendung von den Wiederholungsrichtlinien, die von anderen Benutzern der Ressourcen und Dienste implementiert wurden, beeinträchtigt werden.</span><span class="sxs-lookup"><span data-stu-id="febd0-276">Likewise, your application may be affected by the retry policies implemented by other users of the resources and services.</span></span> <span data-ttu-id="febd0-277">Möglicherweise entscheiden Sie sich für erfolgskritische Anwendungen zur Verwendung von Premiumdiensten, die nicht gemeinsam genutzt werden.</span><span class="sxs-lookup"><span data-stu-id="febd0-277">For mission-critical applications, you may decide to use premium services that are not shared.</span></span> <span data-ttu-id="febd0-278">Dadurch erhalten Sie wesentlich mehr Kontrolle über das Laden und die sich daraus ergebende Drosselung dieser Ressourcen und Dienste, was Ihnen helfen kann, die zusätzlichen Kosten zu rechtfertigen.</span><span class="sxs-lookup"><span data-stu-id="febd0-278">This provides you with much more control over the load and consequent throttling of these resources and services, which can help to justify the additional cost.</span></span>

## <a name="more-information"></a><span data-ttu-id="febd0-279">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="febd0-279">More information</span></span>
* [<span data-ttu-id="febd0-280">Dienstspezifische Azure Wiederholungsrichtlinien</span><span class="sxs-lookup"><span data-stu-id="febd0-280">Azure service-specific retry guidelines</span></span>](./retry-service-specific.md)
* [<span data-ttu-id="febd0-281">Anwendungsblock zum Behandeln vorübergehender Fehler</span><span class="sxs-lookup"><span data-stu-id="febd0-281">The Transient Fault Handling Application Block</span></span>](http://msdn.microsoft.com/library/hh680934.aspx)
* [<span data-ttu-id="febd0-282">Trennschalter-Muster</span><span class="sxs-lookup"><span data-stu-id="febd0-282">Circuit Breaker Pattern</span></span>](http://msdn.microsoft.com/library/dn589784.aspx)
* [<span data-ttu-id="febd0-283">Muster für eine ausgleichende Transaktion</span><span class="sxs-lookup"><span data-stu-id="febd0-283">Compensating Transaction Pattern</span></span>](http://msdn.microsoft.com/library/dn589804.aspx)
* <span data-ttu-id="febd0-284">[Idempotenz-Muster][idempotency-patterns]</span><span class="sxs-lookup"><span data-stu-id="febd0-284">[Idempotency Patterns][idempotency-patterns]</span></span>

[idempotency-patterns]: http://blog.jonathanoliver.com/idempotency-patterns/

