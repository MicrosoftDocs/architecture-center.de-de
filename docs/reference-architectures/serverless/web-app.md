---
title: Serverlose Webanwendung
description: Referenzarchitektur zur Veranschaulichung einer serverlosen Webanwendung und Web-API
author: MikeWasson
ms.date: 10/16/2018
ms.openlocfilehash: c2b46a60a57381ac3fd3f77cffe53b2dab2dacd6
ms.sourcegitcommit: 113a7248b9793c670b0f2d4278d30ad8616abe6c
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/16/2018
ms.locfileid: "49349954"
---
# <a name="serverless-web-application"></a><span data-ttu-id="247e5-103">Serverlose Webanwendung</span><span class="sxs-lookup"><span data-stu-id="247e5-103">Serverless web application</span></span> 

<span data-ttu-id="247e5-104">Diese Referenzarchitektur zeigt eine serverlose Webanwendung.</span><span class="sxs-lookup"><span data-stu-id="247e5-104">This reference architecture shows a serverless web application.</span></span> <span data-ttu-id="247e5-105">Die Anwendung stellt statische Inhalte aus Azure Blob Storage bereit und implementiert eine API mit Azure Functions.</span><span class="sxs-lookup"><span data-stu-id="247e5-105">The application serves static content from Azure Blob Storage, and implements an API using Azure Functions.</span></span> <span data-ttu-id="247e5-106">Die API liest Daten aus Cosmos DB und gibt die Ergebnisse für die Web-App zurück.</span><span class="sxs-lookup"><span data-stu-id="247e5-106">The API reads data from Cosmos DB and returns the results to the web app.</span></span> <span data-ttu-id="247e5-107">Eine Referenzimplementierung für diese Architektur ist auf [GitHub][github] verfügbar.</span><span class="sxs-lookup"><span data-stu-id="247e5-107">A reference implementation for this architecture is available on [GitHub][github].</span></span>

![](./_images/serverless-web-app.png)
 
<span data-ttu-id="247e5-108">Der Begriff „serverlos“ hat zwei separate Bedeutungen, die aber miteinander zusammenhängen:</span><span class="sxs-lookup"><span data-stu-id="247e5-108">The term serverless has two distinct but related meanings:</span></span>

- <span data-ttu-id="247e5-109">**Back-End-as-a-Service** (BaaS).</span><span class="sxs-lookup"><span data-stu-id="247e5-109">**Backend as a service** (BaaS).</span></span> <span data-ttu-id="247e5-110">Back-End-Clouddienste, z.B. Datenbanken und Speicher, stellen APIs bereit, mit denen Clientanwendungen eine direkte Verbindung mit diesen Diensten herstellen können.</span><span class="sxs-lookup"><span data-stu-id="247e5-110">Backend cloud services, such as databases and storage, provide APIs that enable client applications to connect directly to these services.</span></span> 
- <span data-ttu-id="247e5-111">**Functions-as-a-Service** (FaaS).</span><span class="sxs-lookup"><span data-stu-id="247e5-111">**Functions as a service** (FaaS).</span></span> <span data-ttu-id="247e5-112">Bei diesem Modell ist eine „Funktion“ ein Codeabschnitt, der in der Cloud bereitgestellt und in einer Hostumgebung ausgeführt wird, in der die Server für die Ausführung des Codes vollständig abstrahiert werden.</span><span class="sxs-lookup"><span data-stu-id="247e5-112">In this model, a "function" is a piece of code that is deployed to the cloud and runs inside a hosting environment that completely abstracts the servers that run the code.</span></span> 

<span data-ttu-id="247e5-113">Für beide Definitionen steckt die Idee dahinter, dass Entwickler und DevOps-Benutzer keine Server bereitstellen, konfigurieren oder verwalten müssen.</span><span class="sxs-lookup"><span data-stu-id="247e5-113">Both definitions have in common the idea that developers and DevOps personnel don't need to deploy, configure, or manage servers.</span></span> <span data-ttu-id="247e5-114">Bei dieser Referenzarchitektur liegt der Schwerpunkt auf FaaS mit Azure Functions, aber die Bereitstellung von Webinhalten aus Azure Blob Storage ist ein Beispiel für BaaS.</span><span class="sxs-lookup"><span data-stu-id="247e5-114">This reference architecture focuses on FaaS using Azure Functions, although serving web content from Azure Blob Storage is an example of BaaS.</span></span> <span data-ttu-id="247e5-115">Hier sind einige wichtige Merkmale von FaaS angegeben:</span><span class="sxs-lookup"><span data-stu-id="247e5-115">Some important characteristics of FaaS are:</span></span>

1. <span data-ttu-id="247e5-116">Computeressourcen werden je nach den Anforderungen der Plattform dynamisch zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="247e5-116">Compute resources are allocated dynamically as needed by the platform.</span></span>
1. <span data-ttu-id="247e5-117">Nutzungsbasierte Preise: Ihnen werden nur die Computeressourcen berechnet, die zum Ausführen des Codes verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="247e5-117">Consumption-based pricing: You are charged only for the compute resources used to execute your code.</span></span>
1. <span data-ttu-id="247e5-118">Die Computeressourcen werden bedarfsabhängig anhand des Datenverkehrs skaliert, ohne dass der Entwickler eine Konfiguration durchführen muss.</span><span class="sxs-lookup"><span data-stu-id="247e5-118">The compute resources scale on demand based on traffic, without the developer needing to do any configuration.</span></span>

<span data-ttu-id="247e5-119">Die Funktionen werden ausgeführt, wenn ein externer Auslöser vorliegt, z.B. eine HTTP-Anforderung oder der Empfang einer Nachricht in einer Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="247e5-119">Functions are executed when an external trigger occurs, such as an HTTP request or a message arriving on a queue.</span></span> <span data-ttu-id="247e5-120">Daher ist ein [ereignisgesteuerter Architekturstil][event-driven] die natürliche Wahl für serverlose Architekturen.</span><span class="sxs-lookup"><span data-stu-id="247e5-120">This makes an [event-driven architecture style][event-driven] natural for serverless architectures.</span></span> <span data-ttu-id="247e5-121">Für die Koordinierung der Arbeit zwischen den Komponenten der Architektur können Sie erwägen, Nachrichtenbroker oder Pub/Sub-Muster zu nutzen.</span><span class="sxs-lookup"><span data-stu-id="247e5-121">To coordinate work between components in the architecture, consider using message brokers or pub/sub patterns.</span></span> <span data-ttu-id="247e5-122">Hilfe zur Wahl zwischen Messagingtechnologien in Azure finden Sie unter [Wählen zwischen Azure-Diensten für die Nachrichtenübermittlung][azure-messaging].</span><span class="sxs-lookup"><span data-stu-id="247e5-122">For help choosing between messaging technologies in Azure, see [Choose between Azure services that deliver messages][azure-messaging].</span></span>

## <a name="architecture"></a><span data-ttu-id="247e5-123">Architektur</span><span class="sxs-lookup"><span data-stu-id="247e5-123">Architecture</span></span>
<span data-ttu-id="247e5-124">Die Architektur umfasst die folgenden Komponenten.</span><span class="sxs-lookup"><span data-stu-id="247e5-124">The architecture consists of the following components.</span></span>

<span data-ttu-id="247e5-125">**Blobspeicher**.</span><span class="sxs-lookup"><span data-stu-id="247e5-125">**Blob Storage**.</span></span> <span data-ttu-id="247e5-126">Statische Webinhalte, z.B. HTML-, CSS- und JavaScript-Dateien, werden in Azure Blob Storage gespeichert und für Clients bereitgestellt, indem das [Hosten von statischen Websites][static-hosting] verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="247e5-126">Static web content, such as HTML, CSS, and JavaScript files, are stored in Azure Blob Storage and served to clients by using [static website hosting][static-hosting].</span></span> <span data-ttu-id="247e5-127">Alle dynamischen Interaktionen erfolgen über JavaScript-Code, mit dem die Back-End-APIs aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="247e5-127">All dynamic interaction happens through JavaScript code making calls to the backend APIs.</span></span> <span data-ttu-id="247e5-128">Es ist kein serverseitiger Code zum Rendern der Webseite vorhanden.</span><span class="sxs-lookup"><span data-stu-id="247e5-128">There is no server-side code to render the web page.</span></span> <span data-ttu-id="247e5-129">Für das Hosten statischer Websites werden Indexdokumente und benutzerdefinierte 404-Fehlerseiten unterstützt.</span><span class="sxs-lookup"><span data-stu-id="247e5-129">Static website hosting supports index documents and custom 404 error pages.</span></span>

> [!NOTE]
> <span data-ttu-id="247e5-130">Das Hosten statischer Websites befindet sich derzeit in der [Vorschauphase][static-hosting-preview].</span><span class="sxs-lookup"><span data-stu-id="247e5-130">Static website hosting is currently in [preview][static-hosting-preview].</span></span>

<span data-ttu-id="247e5-131">**CDN**.</span><span class="sxs-lookup"><span data-stu-id="247e5-131">**CDN**.</span></span> <span data-ttu-id="247e5-132">Verwenden Sie [Azure Content Delivery Network][cdn] (CDN) zum Zwischenspeichern von Inhalten, um eine geringere Latenz und schnellere Bereitstellung eines HTTPS-Endpunkts zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="247e5-132">Use [Azure Content Delivery Network][cdn] (CDN) to cache content for lower latency and faster delivery of content, as well as providing an HTTPS endpoint.</span></span>

<span data-ttu-id="247e5-133">**Funktions-Apps**.</span><span class="sxs-lookup"><span data-stu-id="247e5-133">**Function Apps**.</span></span> <span data-ttu-id="247e5-134">[Azure Functions][functions] ist eine serverlose Computeoption.</span><span class="sxs-lookup"><span data-stu-id="247e5-134">[Azure Functions][functions] is a serverless compute option.</span></span> <span data-ttu-id="247e5-135">Es wird ein ereignisgesteuertes Modell verwendet, bei dem ein Codeabschnitt (eine „Funktion“) durch einen Trigger aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="247e5-135">It uses an event-driven model, where a piece of code (a "function") is invoked by a trigger.</span></span> <span data-ttu-id="247e5-136">In dieser Architektur wird die Funktion aufgerufen, wenn ein Client eine HTTP-Anforderung sendet.</span><span class="sxs-lookup"><span data-stu-id="247e5-136">In this architecture, the function is invoked when a client makes an HTTP request.</span></span> <span data-ttu-id="247e5-137">Die Anforderung wird immer über ein API-Gateway geleitet, wie unten beschrieben.</span><span class="sxs-lookup"><span data-stu-id="247e5-137">The request is always routed through an API gateway, described below.</span></span>

<span data-ttu-id="247e5-138">**API Management**.</span><span class="sxs-lookup"><span data-stu-id="247e5-138">**API Management**.</span></span> <span data-ttu-id="247e5-139">Bei [API Management][apim] wird ein API-Gateway bereitgestellt, das vor der HTTP-Funktion angeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="247e5-139">[API Management][apim] provides a API gateway that sits in front of the HTTP function.</span></span> <span data-ttu-id="247e5-140">Sie können API Management nutzen, um von Clientanwendungen verwendete APIs zu veröffentlichen und zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="247e5-140">You can use API Management to publish and manage APIs used by client applications.</span></span> <span data-ttu-id="247e5-141">Mit der Verwendung eines Gateways wird die Entkopplung der Front-End-Anwendung von den Back-End-APIs unterstützt.</span><span class="sxs-lookup"><span data-stu-id="247e5-141">Using a gateway helps to decouple the front-end application from the back-end APIs.</span></span> <span data-ttu-id="247e5-142">Beispielsweise kann API Management URLs umschreiben, Anforderungen vor dem Erreichen des Back-Ends transformieren, Anforderungs- oder Antwortheader festlegen usw.</span><span class="sxs-lookup"><span data-stu-id="247e5-142">For example, API Management can rewrite URLs, transform requests before they reach the backend, set request or response headers, and so forth.</span></span>

<span data-ttu-id="247e5-143">API Management kann auch verwendet werden, um übergreifende Aspekte zu implementieren, z.B.:</span><span class="sxs-lookup"><span data-stu-id="247e5-143">API Management can also be used to implement cross-cutting concerns such as:</span></span>

- <span data-ttu-id="247e5-144">Erzwingen von Nutzungskontingenten und Ratenbegrenzungen</span><span class="sxs-lookup"><span data-stu-id="247e5-144">Enforcing usage quotas and rate limits</span></span>
- <span data-ttu-id="247e5-145">Überprüfen von OAuth-Token für die Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="247e5-145">Validating OAuth tokens for authentication</span></span>
- <span data-ttu-id="247e5-146">Aktivieren von ursprungsübergreifenden Anforderungen (Cross-Origin Requests, CORS)</span><span class="sxs-lookup"><span data-stu-id="247e5-146">Enabling cross-origin requests (CORS)</span></span>
- <span data-ttu-id="247e5-147">Zwischenspeichern von Antworten</span><span class="sxs-lookup"><span data-stu-id="247e5-147">Caching responses</span></span>
- <span data-ttu-id="247e5-148">Überwachen und Protokollieren von Anforderungen</span><span class="sxs-lookup"><span data-stu-id="247e5-148">Monitoring and logging requests</span></span>  

<span data-ttu-id="247e5-149">Falls Sie nicht die gesamte Funktionalität benötigen, die von API Management bereitgestellt wird, ist die Nutzung von [Funktionsproxys][functions-proxy] eine Alternative.</span><span class="sxs-lookup"><span data-stu-id="247e5-149">If you don't need all of the functionality provided by API Management, another option is to use [Functions Proxies][functions-proxy].</span></span> <span data-ttu-id="247e5-150">Mit diesem Feature von Azure Functions können Sie eine einzelne API-Oberfläche für mehrere Funktions-Apps definieren, indem Sie Routen zu Back-End-Funktionen erstellen.</span><span class="sxs-lookup"><span data-stu-id="247e5-150">This feature of Azure Functions lets you define a single API surface for multiple function apps, by creating routes to back-end functions.</span></span> <span data-ttu-id="247e5-151">Außerdem können mit Funktionsproxys eingeschränkte Transformationen für die HTTP-Anforderung und -Antwort durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="247e5-151">Function proxies can also perform limited transformations on the HTTP request and response.</span></span> <span data-ttu-id="247e5-152">Sie ermöglichen aber nicht die gleichen umfassenden richtlinienbasierten Funktionen wie API Management.</span><span class="sxs-lookup"><span data-stu-id="247e5-152">However, they don't provide the same rich policy-based capabilities of API Management.</span></span>

<span data-ttu-id="247e5-153">**Cosmos DB**:</span><span class="sxs-lookup"><span data-stu-id="247e5-153">**Cosmos DB**.</span></span> <span data-ttu-id="247e5-154">[Cosmos DB][cosmosdb] ist ein Datenbankdienst mit mehreren Modellen.</span><span class="sxs-lookup"><span data-stu-id="247e5-154">[Cosmos DB][cosmosdb] is a multi-model database  service.</span></span> <span data-ttu-id="247e5-155">Für dieses Szenario ruft die Funktionsanwendung Dokumente aus Cosmos DB als Antwort auf HTTP GET-Anforderungen vom Client ab.</span><span class="sxs-lookup"><span data-stu-id="247e5-155">For this scenario, the function application fetches documents from Cosmos DB in response to HTTP GET requests from the client.</span></span>

<span data-ttu-id="247e5-156">**Azure Active Directory** (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="247e5-156">**Azure Active Directory** (Azure AD).</span></span> <span data-ttu-id="247e5-157">Benutzer melden sich mit ihren Azure AD-Anmeldeinformationen an der Webanwendung an.</span><span class="sxs-lookup"><span data-stu-id="247e5-157">Users sign into the web application by using their Azure AD credentials.</span></span> <span data-ttu-id="247e5-158">Azure AD gibt ein Zugriffstoken für die API zurück, das von der Webanwendung genutzt wird, um API-Anforderungen zu authentifizieren (siehe [Authentifizierung](#authentication)).</span><span class="sxs-lookup"><span data-stu-id="247e5-158">Azure AD returns an access token for the API, which the web application uses to authenticate API requests (see [Authentication](#authentication)).</span></span>

<span data-ttu-id="247e5-159">**Azure Monitor**:</span><span class="sxs-lookup"><span data-stu-id="247e5-159">**Azure Monitor**.</span></span> <span data-ttu-id="247e5-160">[Monitor][monitor] erfasst Leistungsmetriken zu den in der Lösung bereitgestellten Azure-Diensten.</span><span class="sxs-lookup"><span data-stu-id="247e5-160">[Monitor][monitor] collects performance metrics about the Azure services deployed in the solution.</span></span> <span data-ttu-id="247e5-161">Durch die Visualisierung dieser Metriken in einem Dashboard können Sie einen Einblick in die Integrität der Lösung gewinnen.</span><span class="sxs-lookup"><span data-stu-id="247e5-161">By visualizing these in a dashboard, you can get visibility into the health of the solution.</span></span> <span data-ttu-id="247e5-162">Außerdem werden Anwendungsprotokolle erfasst.</span><span class="sxs-lookup"><span data-stu-id="247e5-162">It also collected application logs.</span></span>

<span data-ttu-id="247e5-163">**Azure Pipelines**.</span><span class="sxs-lookup"><span data-stu-id="247e5-163">**Azure Pipelines**.</span></span> <span data-ttu-id="247e5-164">[Pipelines][pipelines] ist ein CI-/CD-Dienst (Continuous Integration/Continuous Delivery), mit dem die Anwendung erstellt, getestet und bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="247e5-164">[Pipelines][pipelines] is a continuous integration (CI) and continuous delivery (CD) service that builds, tests, and deploys the application.</span></span>

## <a name="recommendations"></a><span data-ttu-id="247e5-165">Empfehlungen</span><span class="sxs-lookup"><span data-stu-id="247e5-165">Recommendations</span></span>

### <a name="function-app-plans"></a><span data-ttu-id="247e5-166">Funktions-App-Pläne</span><span class="sxs-lookup"><span data-stu-id="247e5-166">Function App plans</span></span>

<span data-ttu-id="247e5-167">Azure Functions unterstützt zwei Hostingmodelle.</span><span class="sxs-lookup"><span data-stu-id="247e5-167">Azure Functions supports two hosting models.</span></span> <span data-ttu-id="247e5-168">Beim **Verbrauchstarif** wird automatisch Computeleistung zugeordnet, wenn Ihr Code ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="247e5-168">With the **consumption plan**, compute power is automatically allocated when your code is running.</span></span>  <span data-ttu-id="247e5-169">Beim **App Service**-Plan wird eine Gruppe von VMs für Ihren Code zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="247e5-169">With the **App Service** plan, a set of VMs are allocated for your code.</span></span> <span data-ttu-id="247e5-170">Mit dem App Service-Plan wird die Anzahl von VMs und die VM-Größe definiert.</span><span class="sxs-lookup"><span data-stu-id="247e5-170">The App Service plan defines the number of VMs and the VM size.</span></span> 

<span data-ttu-id="247e5-171">Beachten Sie, dass der App Service-Plan nicht *serverlos* im strengeren Sinne gemäß der obigen Definition ist.</span><span class="sxs-lookup"><span data-stu-id="247e5-171">Note that the App Service plan is not strictly *serverless*, according to the definition given above.</span></span> <span data-ttu-id="247e5-172">Das Programmiermodell ist aber identisch: Sowohl unter einem Verbrauchstarif als auch unter einem App Service-Plan kann der gleiche Funktionscode ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="247e5-172">The programming model is the same, however &mdash; the same function code can run in both a consumption plan and an App Service plan.</span></span>

<span data-ttu-id="247e5-173">Hierbei müssen einige Faktoren berücksichtigt werden, wenn ausgewählt wird, welche Art von Plan verwendet werden soll:</span><span class="sxs-lookup"><span data-stu-id="247e5-173">Here are some factors to consider when choosing which type of plan to use:</span></span>

- <span data-ttu-id="247e5-174">**Kaltstart**.</span><span class="sxs-lookup"><span data-stu-id="247e5-174">**Cold start**.</span></span> <span data-ttu-id="247e5-175">Beim Verbrauchstarif führt eine Funktion, die nicht kürzlich aufgerufen wurde, bei der nächsten Ausführung zu zusätzlicher Latenz.</span><span class="sxs-lookup"><span data-stu-id="247e5-175">With the consumption plan, a function that hasn't been invoked recently will incur some additional latency the next time it runs.</span></span> <span data-ttu-id="247e5-176">Der Grund für diese zusätzliche Latenz ist die Zuordnung und Vorbereitung der Laufzeitumgebung.</span><span class="sxs-lookup"><span data-stu-id="247e5-176">This additional latency is due to allocating and preparing the runtime environment.</span></span> <span data-ttu-id="247e5-177">Dies bewegt sich normalerweise im Sekundenbereich, ist aber von mehreren Faktoren abhängig, z.B. der Anzahl von Abhängigkeiten, die geladen werden müssen.</span><span class="sxs-lookup"><span data-stu-id="247e5-177">It is usually on the order of seconds but depends on several factors, including the number of dependencies that need to be loaded.</span></span> <span data-ttu-id="247e5-178">Weitere Informationen finden Sie unter [Understanding Serverless Cold Start][functions-cold-start] (Grundlegendes zum serverlosen Kaltstart).</span><span class="sxs-lookup"><span data-stu-id="247e5-178">For more information, see [Understanding Serverless Cold Start][functions-cold-start].</span></span> <span data-ttu-id="247e5-179">Der Kaltstart ist normalerweise eher ein Problem bei interaktiven Workloads (HTTP-Trigger) als bei asynchronen nachrichtengesteuerten Workloads (Warteschlangen- oder Event Hubs-Trigger), da die zusätzliche Latenz von den Benutzern direkt erkannt wird.</span><span class="sxs-lookup"><span data-stu-id="247e5-179">Cold start is usually more of a concern for interactive workloads (HTTP triggers) than asynchronous message-driven workloads (queue or event hubs triggers), because the additional latency is directly observed by users.</span></span>
- <span data-ttu-id="247e5-180">**Zeitlimit**.</span><span class="sxs-lookup"><span data-stu-id="247e5-180">**Timeout period**.</span></span>  <span data-ttu-id="247e5-181">Beim Verbrauchstarif tritt für eine Funktionsausführung nach einem [konfigurierbaren][functions-timeout] Zeitraum ein Timeout auf (maximal zehn Minuten).</span><span class="sxs-lookup"><span data-stu-id="247e5-181">In the consumption plan, a function execution times out after a [configurable][functions-timeout] period of time (to a maximum of 10 minutes)</span></span>
- <span data-ttu-id="247e5-182">**Isolation virtueller Netzwerke**.</span><span class="sxs-lookup"><span data-stu-id="247e5-182">**Virtual network isolation**.</span></span> <span data-ttu-id="247e5-183">Bei der Nutzung eines App Service-Plans können Funktionen in einer [App Service-Umgebung][ase] ausgeführt werden, bei der es sich um eine dedizierte und isolierte Hostingumgebung handelt.</span><span class="sxs-lookup"><span data-stu-id="247e5-183">Using an App Service plan allows functions to run inside of an [App Service Environment][ase], which is a dedicated and isolated hosting environment.</span></span>
- <span data-ttu-id="247e5-184">**Preismodell**.</span><span class="sxs-lookup"><span data-stu-id="247e5-184">**Pricing model**.</span></span> <span data-ttu-id="247e5-185">Die Abrechnung für den Verbrauchstarif erfolgt anhand der Anzahl von Ausführungen und des Ressourcenverbrauchs (Arbeitsspeicher &times; Ausführungszeit).</span><span class="sxs-lookup"><span data-stu-id="247e5-185">The consumption plan is billed by the number of executions and resource consumption (memory &times; execution time).</span></span> <span data-ttu-id="247e5-186">Beim App Service-Plan erfolgt die Abrechnung stündlich basierend auf der VM-Instanz-SKU.</span><span class="sxs-lookup"><span data-stu-id="247e5-186">The App Service plan is billed hourly based on VM instance SKU.</span></span> <span data-ttu-id="247e5-187">Der Verbrauchstarif kann häufig kostengünstiger als ein App Service-Plan sein, da Sie nur für die genutzten Computeressourcen zahlen.</span><span class="sxs-lookup"><span data-stu-id="247e5-187">Often, the consumption plan can be cheaper than an App Service plan, because you pay only for the compute resources that you use.</span></span> <span data-ttu-id="247e5-188">Dies gilt besonders, wenn Ihr Datenverkehr Spitzen und Täler aufweist.</span><span class="sxs-lookup"><span data-stu-id="247e5-188">This is especially true if your traffic experiences peaks and troughs.</span></span> <span data-ttu-id="247e5-189">Falls eine Anwendung aber über einen konstant hohen Datendurchsatz verfügt, sind die Kosten für einen App Service-Plan unter Umständen aber geringer als beim Verbrauchstarif.</span><span class="sxs-lookup"><span data-stu-id="247e5-189">However, if an application experiences constant high-volume throughput, an App Service plan may cost less than the consumption plan.</span></span>
- <span data-ttu-id="247e5-190">**Skalierung**.</span><span class="sxs-lookup"><span data-stu-id="247e5-190">**Scaling**.</span></span> <span data-ttu-id="247e5-191">Ein großer Vorteil des Verbrauchsmodells ist, dass basierend auf dem eingehenden Datenverkehr bedarfsabhängig dynamisch skaliert wird.</span><span class="sxs-lookup"><span data-stu-id="247e5-191">A big advantage of the consumption model is that it scales dynamically as needed, based on the incoming traffic.</span></span> <span data-ttu-id="247e5-192">Diese Skalierung kann zwar schnell durchgeführt werden, aber es ist eine Vorlaufzeit erforderlich.</span><span class="sxs-lookup"><span data-stu-id="247e5-192">While this scaling occurs quickly, there is still a ramp-up period.</span></span> <span data-ttu-id="247e5-193">Für einige Workloads kann es ratsam sein, absichtlich zu viele VMs bereitzustellen, damit Datenverkehrsspitzen ohne Vorlaufzeit verarbeitet werden können.</span><span class="sxs-lookup"><span data-stu-id="247e5-193">For some workloads, you might want to deliberately overprovision the VMs, so that you can handle bursts of traffic with zero ramp-up time.</span></span> <span data-ttu-id="247e5-194">In diesem Fall sollten Sie erwägen, einen App Service-Plan zu nutzen.</span><span class="sxs-lookup"><span data-stu-id="247e5-194">In that case, consider an App Service plan.</span></span>

### <a name="function-app-boundaries"></a><span data-ttu-id="247e5-195">Grenzen von Funktions-Apps</span><span class="sxs-lookup"><span data-stu-id="247e5-195">Function App boundaries</span></span>

<span data-ttu-id="247e5-196">Eine *Funktions-App* hostet die Ausführung von einer oder mehreren *Funktionen*.</span><span class="sxs-lookup"><span data-stu-id="247e5-196">A *function app* hosts the execution of one or more *functions*.</span></span> <span data-ttu-id="247e5-197">Sie können eine Funktions-App nutzen, um mehrere Funktionen als logische Einheit zu gruppieren.</span><span class="sxs-lookup"><span data-stu-id="247e5-197">You can use a function app to group several functions together as a logical unit.</span></span> <span data-ttu-id="247e5-198">Innerhalb einer Funktions-App sind für die Funktionen die Anwendungseinstellungen, der Hostingplan und der Entwicklungslebenszyklus jeweils gleich.</span><span class="sxs-lookup"><span data-stu-id="247e5-198">Within a function app, the functions share the same application settings, hosting plan, and deployment lifecycle.</span></span> <span data-ttu-id="247e5-199">Jede Funktions-App verfügt über einen eigenen Hostnamen.</span><span class="sxs-lookup"><span data-stu-id="247e5-199">Each function app has its own hostname.</span></span>  

<span data-ttu-id="247e5-200">Verwenden Sie Funktions-Apps zum Gruppieren von Funktionen, die den gleichen Lebenszyklus und die gleichen Einstellungen aufweisen.</span><span class="sxs-lookup"><span data-stu-id="247e5-200">Use function apps to group functions that share the same lifecycle and settings.</span></span> <span data-ttu-id="247e5-201">Funktionen, die nicht über den gleichen Lebenszyklus verfügen, sollten in anderen Funktions-Apps gehostet werden.</span><span class="sxs-lookup"><span data-stu-id="247e5-201">Functions that don't share the same lifecycle should be hosted in different function apps.</span></span> 

<span data-ttu-id="247e5-202">Erwägen Sie, einen Ansatz mit Microservices zu nutzen, bei dem jede Funktions-App einen Microservice darstellt, der unter Umständen aus mehreren verwandten Funktionen besteht.</span><span class="sxs-lookup"><span data-stu-id="247e5-202">Consider taking a microservices approach, where each function app represents one microservice, possibly consisting of several related functions.</span></span> <span data-ttu-id="247e5-203">In einer Architektur mit Microservices sollten Dienste eine lose Kopplung und eine hohe funktionale Kohäsion aufweisen.</span><span class="sxs-lookup"><span data-stu-id="247e5-203">In a microservices architecture, services should have loose coupling and high functional cohesion.</span></span> <span data-ttu-id="247e5-204">*Lose gekoppelt* bedeutet, dass Sie einen Dienst ändern können, ohne gleichzeitig andere Dienste aktualisieren zu müssen.</span><span class="sxs-lookup"><span data-stu-id="247e5-204">*Loosely* coupled means you can change one service without requiring other services to be updated at the same time.</span></span> <span data-ttu-id="247e5-205">Mit *Kohäsion* ist gemeint, dass ein Dienst einem einzelnen, klar definierten Zweck dient.</span><span class="sxs-lookup"><span data-stu-id="247e5-205">*Cohesive* means a service has a single, well-defined purpose.</span></span> <span data-ttu-id="247e5-206">Weitere Informationen zu diesen Aspekten finden Sie unter [Entwerfen von Microservices: Domänenanalyse][microservices-domain-analysis].</span><span class="sxs-lookup"><span data-stu-id="247e5-206">For more discussion of these ideas, see [Designing microservices: Domain analysis][microservices-domain-analysis].</span></span>

### <a name="function-bindings"></a><span data-ttu-id="247e5-207">Funktionsbindungen</span><span class="sxs-lookup"><span data-stu-id="247e5-207">Function bindings</span></span>

<span data-ttu-id="247e5-208">Nutzen Sie [Funktionsbindungen][functions-bindings], wann immer dies möglich ist.</span><span class="sxs-lookup"><span data-stu-id="247e5-208">Use Functions [bindings][functions-bindings] when possible.</span></span> <span data-ttu-id="247e5-209">Bindungen stellen eine deklarative Möglichkeit dar, Ihren Code mit Daten zu verbinden und in andere Azure-Dienste zu integrieren.</span><span class="sxs-lookup"><span data-stu-id="247e5-209">Bindings provide a declarative way to connect your code to data and integrate with other Azure services.</span></span> <span data-ttu-id="247e5-210">Mit einer Eingabebindung wird ein Eingabeparameter aus einer externen Datenquelle aufgefüllt.</span><span class="sxs-lookup"><span data-stu-id="247e5-210">An input binding populates an input parameter from an external data source.</span></span> <span data-ttu-id="247e5-211">Eine Ausgabebindung sendet den Rückgabewert der Funktion an eine Datensenke, z.B. eine Warteschlange oder Datenbank.</span><span class="sxs-lookup"><span data-stu-id="247e5-211">An output binding sends the function's return value to a data sink, such as a queue or database.</span></span>

<span data-ttu-id="247e5-212">Für die Funktion `GetStatus` in der Referenzimplementierung wird die Cosmos DB-[Eingabebindung][cosmosdb-input-binding] verwendet.</span><span class="sxs-lookup"><span data-stu-id="247e5-212">For example, the `GetStatus` function in the reference implementation uses the Cosmos DB [input binding][cosmosdb-input-binding].</span></span> <span data-ttu-id="247e5-213">Diese Bindung ist so konfiguriert, dass nach einem Dokument in Cosmos DB gesucht wird. Hierzu werden Abfrageparameter verwendet, die aus der Abfragezeichenfolge in der HTTP-Anforderung stammen.</span><span class="sxs-lookup"><span data-stu-id="247e5-213">This binding is configured to look up a document in Cosmos DB, using query parameters that are taken from the query string in the HTTP request.</span></span> <span data-ttu-id="247e5-214">Wenn das Dokument gefunden wird, wird es als Parameter an die Funktion übergeben.</span><span class="sxs-lookup"><span data-stu-id="247e5-214">If the document is found, it is passed to the function as a parameter.</span></span>

```csharp
[FunctionName("GetStatusFunction")]
public static Task<IActionResult> Run(
    [HttpTrigger(AuthorizationLevel.Function, "get", Route = null)] HttpRequest req, 
    [CosmosDB(
        databaseName: "%COSMOSDB_DATABASE_NAME%",
        collectionName: "%COSMOSDB_DATABASE_COL%",
        ConnectionStringSetting = "COSMOSDB_CONNECTION_STRING",
        Id = "{Query.deviceId}",
        PartitionKey = "{Query.deviceId}")] dynamic deviceStatus, 
    ILogger log)
{
    ...
}
```

<span data-ttu-id="247e5-215">Aufgrund der Nutzung von Bindungen müssen Sie keinen Code schreiben, der direkt mit dem Dienst kommuniziert. Hierdurch wird der Funktionscode vereinfacht, und außerdem werden die Details der Datenquelle bzw. -senke abstrahiert.</span><span class="sxs-lookup"><span data-stu-id="247e5-215">By using bindings, you don't need to write code that talks directly to the service, which makes the function code simpler and also abstracts the details of the data source or sink.</span></span> <span data-ttu-id="247e5-216">In einigen Fällen benötigen Sie aber unter Umständen eine komplexere Logik als die von der Bindung bereitgestellte Logik.</span><span class="sxs-lookup"><span data-stu-id="247e5-216">In some cases, however, you may need more complex logic than the binding provides.</span></span> <span data-ttu-id="247e5-217">Verwenden Sie in diesem Fall direkt die Azure-Client-SDKs.</span><span class="sxs-lookup"><span data-stu-id="247e5-217">In that case, use the Azure client SDKs directly.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="247e5-218">Überlegungen zur Skalierbarkeit</span><span class="sxs-lookup"><span data-stu-id="247e5-218">Scalability considerations</span></span>

<span data-ttu-id="247e5-219">**Funktionen**.</span><span class="sxs-lookup"><span data-stu-id="247e5-219">**Functions**.</span></span> <span data-ttu-id="247e5-220">Für den Verbrauchstarif wird der HTTP-Trigger basierend auf dem Datenverkehr skaliert.</span><span class="sxs-lookup"><span data-stu-id="247e5-220">For the consumption plan, the HTTP trigger scales based on the traffic.</span></span> <span data-ttu-id="247e5-221">Es gilt ein Limit für die Anzahl von gleichzeitigen Funktionsinstanzen, aber jede Instanz kann mehr als eine Anforderung gleichzeitig verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="247e5-221">There is a limit to the number of concurrent function instances, but each instance can process more than one request at a time.</span></span> <span data-ttu-id="247e5-222">Für einen App Service-Plan wird der HTTP-Trigger gemäß der Anzahl von VM-Instanzen skaliert. Dies kann ein fester Wert sein, oder es kann eine automatische Skalierung basierend auf einem Satz mit entsprechenden Regeln durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="247e5-222">For an App Service plan, the HTTP trigger scales according to the number of VM instances, which can be a fixed value or can autoscale based on a set of autoscaling rules.</span></span> <span data-ttu-id="247e5-223">Informationen hierzu finden Sie unter [Skalierung und Hosting von Azure Functions][functions-scale].</span><span class="sxs-lookup"><span data-stu-id="247e5-223">For information, see [Azure Functions scale and hosting][functions-scale].</span></span> 

<span data-ttu-id="247e5-224">**Cosmos DB**:</span><span class="sxs-lookup"><span data-stu-id="247e5-224">**Cosmos DB**.</span></span> <span data-ttu-id="247e5-225">Die Durchsatzkapazität für Cosmos DB wird in [Anforderungseinheiten][ru] (RU) gemessen.</span><span class="sxs-lookup"><span data-stu-id="247e5-225">Throughput capacity for Cosmos DB is measured in [Request Units][ru] (RU).</span></span> <span data-ttu-id="247e5-226">Ein Durchsatz von einer Anforderungseinheit (1 RU) entspricht dem Durchsatz für das Abrufen eines 1-KB-Dokuments per GET-Anforderung.</span><span class="sxs-lookup"><span data-stu-id="247e5-226">A 1-RU throughput corresponds to the throughput need to GET a 1KB document.</span></span> <span data-ttu-id="247e5-227">Um einen Cosmos DB-Container auf eine Kapazität von mehr als 10.000 RU zu skalieren, müssen Sie beim Erstellen des Containers einen [Partitionsschlüssel][partition-key] angeben und diesen in jedes von Ihnen erstellte Dokument einfügen.</span><span class="sxs-lookup"><span data-stu-id="247e5-227">In order to scale a Cosmos DB container past 10,000 RU, you must specify a [partition key][partition-key] when you create the container and include the partition key in every document that you create.</span></span> <span data-ttu-id="247e5-228">Weitere Informationen zu Partitionsschlüsseln finden Sie unter [Partitionieren und Skalieren in Azure Cosmos DB][cosmosdb-scale].</span><span class="sxs-lookup"><span data-stu-id="247e5-228">For more information about partition keys, see [Partition and scale in Azure Cosmos DB][cosmosdb-scale].</span></span>

<span data-ttu-id="247e5-229">**API Management**.</span><span class="sxs-lookup"><span data-stu-id="247e5-229">**API Management**.</span></span> <span data-ttu-id="247e5-230">API Management ermöglicht das horizontale Hochskalieren und unterstützt die regelbasierte automatische Skalierung.</span><span class="sxs-lookup"><span data-stu-id="247e5-230">API Management can scale out and supports rule-based autoscaling.</span></span> <span data-ttu-id="247e5-231">Beachten Sie, dass der Skalierungsvorgang mindestens 20 Minuten dauert.</span><span class="sxs-lookup"><span data-stu-id="247e5-231">Note that the scaling process takes at least 20 minutes.</span></span> <span data-ttu-id="247e5-232">Wenn Ihr Datenverkehr Spitzen („Bursts“) aufweist, sollten Sie entsprechende Ressourcen bereitstellen, um den erwarteten maximalen Burstdatenverkehr abzudecken.</span><span class="sxs-lookup"><span data-stu-id="247e5-232">If your traffic is bursty, you should provision for the maximum burst traffic that you expect.</span></span> <span data-ttu-id="247e5-233">Die automatische Skalierung ist aber für die Verarbeitung von stündlichen oder täglichen Schwankungen beim Datenverkehr nützlich.</span><span class="sxs-lookup"><span data-stu-id="247e5-233">However, autoscaling is useful for handling hourly or daily variations in traffic.</span></span> <span data-ttu-id="247e5-234">Weitere Informationen finden Sie unter [Automatisches Skalieren einer Azure API Management-Instanz][apim-scale].</span><span class="sxs-lookup"><span data-stu-id="247e5-234">For more information, see [Automatically scale an Azure API Management instance][apim-scale].</span></span>

## <a name="disaster-recovery-considerations"></a><span data-ttu-id="247e5-235">Überlegungen zur Notfallwiederherstellung</span><span class="sxs-lookup"><span data-stu-id="247e5-235">Disaster recovery considerations</span></span>

<span data-ttu-id="247e5-236">Die hier dargestellte Bereitstellung befindet sich in nur einer Azure-Region.</span><span class="sxs-lookup"><span data-stu-id="247e5-236">The deployment shown here resides in a single Azure region.</span></span> <span data-ttu-id="247e5-237">Nutzen Sie die Features für die geografische Verteilung in den verschiedenen Diensten, um einen stabileren Ansatz für die Notfallwiederherstellung zu erzielen:</span><span class="sxs-lookup"><span data-stu-id="247e5-237">For a more resilient approach to disaster-recovery, take advantage of the geo-distribution features in the various services:</span></span>

- <span data-ttu-id="247e5-238">API Management unterstützt eine Bereitstellung für mehrere Regionen. Dies kann genutzt werden, um einen einzelnen API Management-Dienst in einer beliebigen Anzahl von Azure-Regionen zur Verfügung zu stellen.</span><span class="sxs-lookup"><span data-stu-id="247e5-238">API Management supports multi-region deployment, which can be used to distribute a single API Management instance across any number of Azure regions.</span></span> <span data-ttu-id="247e5-239">Weitere Informationen finden Sie unter [Bereitstellen einer Azure API Management-Dienstinstanz für mehrere Azure-Regionen][api-geo].</span><span class="sxs-lookup"><span data-stu-id="247e5-239">For more information, see [How to deploy an Azure API Management service instance to multiple Azure regions][api-geo].</span></span>

- <span data-ttu-id="247e5-240">Verwenden Sie [Traffic Manager][tm], um HTTP-Anforderungen an die primäre Region zu leiten.</span><span class="sxs-lookup"><span data-stu-id="247e5-240">Use [Traffic Manager][tm] to route HTTP requests to the primary region.</span></span> <span data-ttu-id="247e5-241">Wenn die Funktions-App, die in dieser Region ausgeführt wird, nicht verfügbar ist, kann Traffic Manager ein Failover in eine sekundäre Region ausführen.</span><span class="sxs-lookup"><span data-stu-id="247e5-241">If the Function App running in that region becomes unavailable, Traffic Manager can fail over to a secondary region.</span></span>

- <span data-ttu-id="247e5-242">Cosmos DB unterstützt [mehrere Masterregionen][cosmosdb-geo], sodass Schreibvorgänge in alle Regionen möglich sind, die Sie Ihrem Cosmos DB-Konto hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="247e5-242">Cosmos DB supports [multiple master regions][cosmosdb-geo], which enables writes to any region that you add to your Cosmos DB account.</span></span> <span data-ttu-id="247e5-243">Wenn Sie die Funktion für mehrere Master (Multimaster) nicht aktivieren, können Sie trotzdem ein Failover in die primäre Schreibregion ausführen.</span><span class="sxs-lookup"><span data-stu-id="247e5-243">If you don't enable multi-master, you can still fail over the primary write region.</span></span> <span data-ttu-id="247e5-244">Die Cosmos DB-Client-SDKs und die Azure-Funktionsbindungen verarbeiten das Failover automatisch, sodass Sie keine Einstellungen für die Anwendungskonfiguration aktualisieren müssen.</span><span class="sxs-lookup"><span data-stu-id="247e5-244">The Cosmos DB client SDKs and the Azure Function bindings automatically handle the failover, so you don't need to update any application configuration settings.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="247e5-245">Sicherheitshinweise</span><span class="sxs-lookup"><span data-stu-id="247e5-245">Security considerations</span></span>

### <a name="authentication"></a><span data-ttu-id="247e5-246">Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="247e5-246">Authentication</span></span>

<span data-ttu-id="247e5-247">Für die `GetStatus`-API in der Referenzimplementierung wird Azure AD zum Authentifizieren von Anforderungen verwendet.</span><span class="sxs-lookup"><span data-stu-id="247e5-247">The `GetStatus` API in the reference implementation uses Azure AD to authenticate requests.</span></span> <span data-ttu-id="247e5-248">Azure AD unterstützt das Open ID Connect-Protokoll, bei dem es sich um ein Authentifizierungsprotokoll handelt, das auf dem OAuth 2-Protokoll basiert.</span><span class="sxs-lookup"><span data-stu-id="247e5-248">Azure AD supports the Open ID Connect protocol, which is an authentication protocol built on top of the OAuth 2 protocol.</span></span>

<span data-ttu-id="247e5-249">In dieser Architektur ist die Clientanwendung eine Single-Page-Anwendung (SPA), die im Browser ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="247e5-249">In this architecture, the client application is a single-page application (SPA) that runs in the browser.</span></span> <span data-ttu-id="247e5-250">Da bei dieser Art von Clientanwendung der geheime Clientschlüssel oder der Autorisierungscode nicht ausgeblendet werden können, ist die implizite Genehmigung hierfür der geeignete Ablauf.</span><span class="sxs-lookup"><span data-stu-id="247e5-250">This type of client application cannot keep a client secret or an authorization code hidden, so the implicit grant flow is appropriate.</span></span> <span data-ttu-id="247e5-251">(Siehe [Which OAuth 2.0 flow should I use?][oauth-flow] (Welchen OAuth 2.0-Ablauf soll ich verwenden?).)</span><span class="sxs-lookup"><span data-stu-id="247e5-251">(See [Which OAuth 2.0 flow should I use?][oauth-flow]).</span></span> <span data-ttu-id="247e5-252">Hier ist der allgemeine Ablauf angegeben:</span><span class="sxs-lookup"><span data-stu-id="247e5-252">Here's the overall flow:</span></span>

1. <span data-ttu-id="247e5-253">Der Benutzer klickt in der Webanwendung auf den Link „Anmelden“.</span><span class="sxs-lookup"><span data-stu-id="247e5-253">The user clicks the "Sign in" link in the web application.</span></span>
1. <span data-ttu-id="247e5-254">Der Browser wird auf die Azure AD-Anmeldeseite umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="247e5-254">The browser is redirected the Azure AD sign in page.</span></span> 
1. <span data-ttu-id="247e5-255">Der Benutzer meldet sich an.</span><span class="sxs-lookup"><span data-stu-id="247e5-255">The user signs in.</span></span>
1. <span data-ttu-id="247e5-256">Azure AD führt die Umleitung zurück zur Clientanwendung durch, einschließlich eines Zugriffstokens im URL-Fragment.</span><span class="sxs-lookup"><span data-stu-id="247e5-256">Azure AD redirects back to the client application, including an access token in the URL fragment.</span></span>
1. <span data-ttu-id="247e5-257">Wenn die Webanwendung die API aufruft, fügt sie das Zugriffstoken in den Authentifizierungsheader ein.</span><span class="sxs-lookup"><span data-stu-id="247e5-257">When the web application calls the API, it includes the access token in the Authentication header.</span></span> <span data-ttu-id="247e5-258">Die Anwendungs-ID wird im Zugriffstoken als „Audience“-Anspruch („aud“) gesendet.</span><span class="sxs-lookup"><span data-stu-id="247e5-258">The application ID is sent as the audience ('aud') claim in the access token.</span></span> 
1. <span data-ttu-id="247e5-259">Die Back-End-API überprüft das Zugriffstoken.</span><span class="sxs-lookup"><span data-stu-id="247e5-259">The backend API validates the access token.</span></span>

<span data-ttu-id="247e5-260">Konfigurieren Sie die Authentifizierung wie folgt:</span><span class="sxs-lookup"><span data-stu-id="247e5-260">To configure authentication:</span></span>

- <span data-ttu-id="247e5-261">Registrieren Sie eine Anwendung in Ihrem Azure AD-Mandanten.</span><span class="sxs-lookup"><span data-stu-id="247e5-261">Register an application in your Azure AD tenant.</span></span> <span data-ttu-id="247e5-262">Es wird eine Anwendungs-ID generiert, die vom Client in die Anmelde-URL eingefügt wird.</span><span class="sxs-lookup"><span data-stu-id="247e5-262">This generates an application ID, which the client includes with the login URL.</span></span>

- <span data-ttu-id="247e5-263">Aktivieren Sie die Azure AD-Authentifizierung in der Funktions-App.</span><span class="sxs-lookup"><span data-stu-id="247e5-263">Enable Azure AD authentication inside the Function App.</span></span> <span data-ttu-id="247e5-264">Weitere Informationen finden Sie unter [Authentifizierung und Autorisierung in Azure App Service][app-service-auth].</span><span class="sxs-lookup"><span data-stu-id="247e5-264">For more information, see [Authentication and authorization in Azure App Service][app-service-auth].</span></span>

- <span data-ttu-id="247e5-265">Fügen Sie API Management eine Richtlinie hinzu, um die Anforderung durch die Überprüfung des Zugriffstokens vorab zu autorisieren:</span><span class="sxs-lookup"><span data-stu-id="247e5-265">Add a policy to API Management to pre-authorize the request by validating the access token:</span></span>

    ```xml
    <validate-jwt header-name="Authorization" failed-validation-httpcode="401" failed-validation-error-message="Unauthorized. Access token is missing or invalid.">
        <openid-config url="https://login.microsoftonline.com/[Azure AD tenant ID]/.well-known/openid-configuration" />
        <required-claims>
            <claim name="aud">
                <value>[Application ID]</value>
            </claim>
        </required-claims>
    </validate-jwt>
    ```

<span data-ttu-id="247e5-266">Weitere Informationen finden Sie in der [GitHub-Infodatei][readme].</span><span class="sxs-lookup"><span data-stu-id="247e5-266">For more details, see the [GitHub readme][readme].</span></span>

### <a name="authorization"></a><span data-ttu-id="247e5-267">Autorisierung</span><span class="sxs-lookup"><span data-stu-id="247e5-267">Authorization</span></span>

<span data-ttu-id="247e5-268">In vielen Anwendungen muss die Back-End-API überprüfen, wann ein Benutzer über die Berechtigung zum Durchführen einer bestimmten Aktion verfügt.</span><span class="sxs-lookup"><span data-stu-id="247e5-268">In many applications, the backend API must check whether a user has permission to perform a given action.</span></span> <span data-ttu-id="247e5-269">Es wird empfohlen, die [anspruchsbasierte Autorisierung][claims] zu verwenden. Hierbei werden Informationen zum Benutzer vom Identitätsanbieter (hier: Azure AD) übermittelt und zum Treffen von Autorisierungsentscheidungen genutzt.</span><span class="sxs-lookup"><span data-stu-id="247e5-269">It's recommended to use [claims-based authorization][claims], where information about the user is conveyed by the identity provider (in this case, Azure AD) and used to make authorization decisions.</span></span> 

<span data-ttu-id="247e5-270">Einige Ansprüche werden in dem ID-Token bereitgestellt, das von Azure AD an den Client zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="247e5-270">Some claims are provided inside the ID token that Azure AD returns to the client.</span></span> <span data-ttu-id="247e5-271">Sie können diese Ansprüche über die Funktions-App erhalten, indem Sie in der Anforderung den X-MS-CLIENT-PRINCIPAL-Header untersuchen.</span><span class="sxs-lookup"><span data-stu-id="247e5-271">You can get these claims from within the function app by examining the X-MS-CLIENT-PRINCIPAL header in the request.</span></span> <span data-ttu-id="247e5-272">Verwenden Sie für andere Ansprüche [Microsoft Graph][graph], um Azure AD abzufragen (Zustimmung des Benutzers während der Anmeldung erforderlich).</span><span class="sxs-lookup"><span data-stu-id="247e5-272">For other claims, use [Microsoft Graph][graph] to query Azure AD (requires user consent during sign-in).</span></span> 

<span data-ttu-id="247e5-273">Wenn Sie eine Anwendung in Azure AD registrieren, können Sie im Registrierungsmanifest der Anwendung eine Gruppe von Anwendungsrollen definieren.</span><span class="sxs-lookup"><span data-stu-id="247e5-273">For example, when you register an application in Azure AD, you can define a set of application roles in the application's registration manifest.</span></span> <span data-ttu-id="247e5-274">Wenn sich ein Benutzer an der Anwendung anmeldet, enthält Azure AD einen Rollenanspruch („Roles“) für jede Rolle, die dem Benutzer gewährt wurde (einschließlich Rollen, die per Gruppenmitgliedschaft vererbt werden).</span><span class="sxs-lookup"><span data-stu-id="247e5-274">When a user signs into the application, Azure AD includes a "roles" claim for each role that the user has been granted (including roles that are inherited through group membership).</span></span> 

<span data-ttu-id="247e5-275">In der Referenzimplementierung überprüft die Funktion, ob der authentifizierte Benutzer ein Mitglied der Anwendungsrolle `GetStatus` ist.</span><span class="sxs-lookup"><span data-stu-id="247e5-275">In the reference implementation, the function checks whether the authenticated user is a member of the `GetStatus` application role.</span></span> <span data-ttu-id="247e5-276">Wenn nicht, gibt die Funktion die HTTP-Antwort „Nicht autorisiert (401)“ zurück.</span><span class="sxs-lookup"><span data-stu-id="247e5-276">If not, the function returns an HTTP Unauthorized (401) response.</span></span> 

```csharp
[FunctionName("GetStatusFunction")]
public static Task<IActionResult> Run(
    [HttpTrigger(AuthorizationLevel.Function, "get", "post", Route = null)] HttpRequest req, 
    [CosmosDB(
        databaseName: "%COSMOSDB_DATABASE_NAME%",
        collectionName: "%COSMOSDB_DATABASE_COL%",
        ConnectionStringSetting = "COSMOSDB_CONNECTION_STRING",
        Id = "{Query.deviceId}",
        PartitionKey = "{Query.deviceId}")] dynamic deviceStatus, 
    ILogger log)
{
    log.LogInformation("Processing GetStatus request.");

    return req.HandleIfAuthorizedForRoles(new[] { GetDeviceStatusRoleName },
        async () =>
        {
            string deviceId = req.Query["deviceId"];
            if (deviceId == null)
            {
                return new BadRequestObjectResult("Missing DeviceId");
            }

            return await Task.FromResult<IActionResult>(deviceStatus != null
                    ? (ActionResult)new OkObjectResult(deviceStatus)
                    : new NotFoundResult());
        },
        log);
}
```

<span data-ttu-id="247e5-277">In diesem Codebeispiel ist `HandleIfAuthorizedForRoles` eine Erweiterungsmethode, mit der eine Prüfung auf den Rollenanspruch durchgeführt und HTTP 401 zurückgegeben wird, wenn der Anspruch nicht gefunden wird.</span><span class="sxs-lookup"><span data-stu-id="247e5-277">In this code example, `HandleIfAuthorizedForRoles` is an extension method that checks for the role claim and returns HTTP 401 if the claim isn't found.</span></span> <span data-ttu-id="247e5-278">Sie finden die Quelldatei [hier][HttpRequestAuthorizationExtensions].</span><span class="sxs-lookup"><span data-stu-id="247e5-278">You can find the source code [here][HttpRequestAuthorizationExtensions].</span></span> <span data-ttu-id="247e5-279">Beachten Sie, dass für `HandleIfAuthorizedForRoles` der Parameter `ILogger` verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="247e5-279">Notice that `HandleIfAuthorizedForRoles` takes an `ILogger` parameter.</span></span> <span data-ttu-id="247e5-280">Es ist ratsam, nicht autorisierte Anforderungen zu protokollieren, damit Sie über einen Überwachungspfad verfügen und bei Bedarf Probleme diagnostizieren können.</span><span class="sxs-lookup"><span data-stu-id="247e5-280">You should log unauthorized requests so that you have an audit trail and can diagnose issues if needed.</span></span> <span data-ttu-id="247e5-281">Gleichzeitig sollte verhindert werden, dass in der HTTP 401-Antwort detaillierte Informationen offengelegt werden.</span><span class="sxs-lookup"><span data-stu-id="247e5-281">At the same time, avoid leaking any detailed information inside the HTTP 401 response.</span></span>

### <a name="cors"></a><span data-ttu-id="247e5-282">CORS</span><span class="sxs-lookup"><span data-stu-id="247e5-282">CORS</span></span>

<span data-ttu-id="247e5-283">In dieser Referenzarchitektur weisen die Webanwendung und die API nicht denselben Ursprung auf.</span><span class="sxs-lookup"><span data-stu-id="247e5-283">In this reference architecture, the web application and the API do not share the same origin.</span></span> <span data-ttu-id="247e5-284">Dies bedeutet, dass es sich um eine ursprungsübergreifende Anforderung handelt, wenn die Anwendung die API aufruft.</span><span class="sxs-lookup"><span data-stu-id="247e5-284">That means when the application calls the API, it is a cross-origin request.</span></span> <span data-ttu-id="247e5-285">Die Browsersicherheit verhindert, dass eine Webseite AJAX-Anforderungen an eine andere Domäne richtet.</span><span class="sxs-lookup"><span data-stu-id="247e5-285">Browser security prevents a web page from making AJAX requests to another domain.</span></span> <span data-ttu-id="247e5-286">Diese Einschränkung wird als *Richtlinie des gleichen Ursprungs* bezeichnet und verhindert, dass eine schädliche Website sensible Daten von einer anderen Website liest.</span><span class="sxs-lookup"><span data-stu-id="247e5-286">This restriction is called the *same-origin policy* and prevents a malicious site from reading sensitive data from another site.</span></span> <span data-ttu-id="247e5-287">Sie können eine ursprungsübergreifende Anforderung aktivieren, indem Sie dem API Management-Gateway eine [Richtlinie][cors-policy] vom Typ CORS (Cross-Origin Resource Sharing, Ressourcenfreigabe zwischen verschiedenen Ursprüngen) hinzufügen:</span><span class="sxs-lookup"><span data-stu-id="247e5-287">To enable a cross-origin request, add a Cross-Origin Resource Sharing (CORS) [policy][cors-policy] to the API Management gateway:</span></span>

```xml
<cors allow-credentials="true">
    <allowed-origins>
        <origin>[Website URL]</origin>
    </allowed-origins>
    <allowed-methods>
        <method>GET</method>
    </allowed-methods>
    <allowed-headers>
        <header>*</header>
    </allowed-headers>
</cors>
```

<span data-ttu-id="247e5-288">In diesem Beispiel ist das Attribut **allow-credentials** auf **true** festgelegt.</span><span class="sxs-lookup"><span data-stu-id="247e5-288">In this example, the **allow-credentials** attribute is **true**.</span></span> <span data-ttu-id="247e5-289">Hiermit wird für den Browser das Senden von Anmeldeinformationen (einschließlich Cookies) mit der Anforderung autorisiert.</span><span class="sxs-lookup"><span data-stu-id="247e5-289">This authorizes the browser to send credentials (including cookies) with the request.</span></span> <span data-ttu-id="247e5-290">Andernfalls sendet der Browser standardmäßig keine Anmeldeinformationen mit einer ursprungsübergreifenden Anforderung.</span><span class="sxs-lookup"><span data-stu-id="247e5-290">Otherwise, by default the browser does not send credentials with a cross-origin request.</span></span>

> [!NOTE] 
> <span data-ttu-id="247e5-291">Gehen Sie beim Festlegen von **allow-credentials** auf **true** mit Bedacht vor, da eine Website die Benutzeranmeldeinformationen dann im Namen des Benutzers an Ihre API senden kann, ohne dass der Benutzer darüber informiert ist.</span><span class="sxs-lookup"><span data-stu-id="247e5-291">Be very careful about setting **allow-credentials** to **true**, because it means a website can send the user's credentials to your API on the user's behalf, without the user being aware.</span></span> <span data-ttu-id="247e5-292">Sie müssen den zugelassenen Ursprung als vertrauenswürdig festlegen.</span><span class="sxs-lookup"><span data-stu-id="247e5-292">You must trust the allowed origin.</span></span>

### <a name="enforce-https"></a><span data-ttu-id="247e5-293">Erzwingen von HTTPS</span><span class="sxs-lookup"><span data-stu-id="247e5-293">Enforce HTTPS</span></span>

<span data-ttu-id="247e5-294">Sie können maximale Sicherheit erzielen, indem Sie HTTPS für die gesamte Anforderungspipeline erzwingen:</span><span class="sxs-lookup"><span data-stu-id="247e5-294">For maximum security, require HTTPS throughout the request pipeline:</span></span>

- <span data-ttu-id="247e5-295">**CDN**.</span><span class="sxs-lookup"><span data-stu-id="247e5-295">**CDN**.</span></span> <span data-ttu-id="247e5-296">Azure CDN unterstützt HTTPS standardmäßig für die Unterdomäne `*.azureedge.net`.</span><span class="sxs-lookup"><span data-stu-id="247e5-296">Azure CDN supports HTTPS on the `*.azureedge.net` subdomain by default.</span></span> <span data-ttu-id="247e5-297">Informationen zur Aktivierung von HTTPS im CDN für benutzerdefinierte Domänennamen finden Sie unter [Tutorial: Konfigurieren von HTTPS in einer benutzerdefinierten Azure CDN-Domäne][cdn-https].</span><span class="sxs-lookup"><span data-stu-id="247e5-297">To enable HTTPS in the CDN for custom domain names, see [Tutorial: Configure HTTPS on an Azure CDN custom domain][cdn-https].</span></span> 

- <span data-ttu-id="247e5-298">**Hosten von statischen Websites**.</span><span class="sxs-lookup"><span data-stu-id="247e5-298">**Static website hosting**.</span></span> <span data-ttu-id="247e5-299">Aktivieren Sie die Option „[Sichere Übertragung erforderlich][storage-https]“ im Speicherkonto.</span><span class="sxs-lookup"><span data-stu-id="247e5-299">Enable the "[Secure transfer required][storage-https]" option on the Storage account.</span></span> <span data-ttu-id="247e5-300">Wenn diese Option aktiviert ist, lässt das Speicherkonto nur Anforderungen von sicheren HTTPS-Verbindungen zu.</span><span class="sxs-lookup"><span data-stu-id="247e5-300">When this option is enabled, the storage account only allows requests from secure HTTPS connections.</span></span> 

- <span data-ttu-id="247e5-301">**API Management**.</span><span class="sxs-lookup"><span data-stu-id="247e5-301">**API Management**.</span></span> <span data-ttu-id="247e5-302">Konfigurieren Sie die APIs so, das nur das HTTPS-Protokoll verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="247e5-302">Configure the APIs to use HTTPS protocol only.</span></span> <span data-ttu-id="247e5-303">Sie können dies im Azure-Portal oder über eine Resource Manager-Vorlage konfigurieren:</span><span class="sxs-lookup"><span data-stu-id="247e5-303">You can configure this in the Azure portal or through a Resource Manager template:</span></span>

    ```json
    {
        "apiVersion": "2018-01-01",
        "type": "apis",
        "name": "dronedeliveryapi",
        "dependsOn": [
            "[concat('Microsoft.ApiManagement/service/', variables('apiManagementServiceName'))]"
        ],
        "properties": {
            "displayName": "Drone Delivery API",
            "description": "Drone Delivery API",
            "path": "api",
            "protocols": [ "HTTPS" ]
        },
        ...
    }
    ```

- <span data-ttu-id="247e5-304">**Azure Functions**.</span><span class="sxs-lookup"><span data-stu-id="247e5-304">**Azure Functions**.</span></span> <span data-ttu-id="247e5-305">Aktivieren Sie die Einstellung „[Nur HTTPS][functions-https]“.</span><span class="sxs-lookup"><span data-stu-id="247e5-305">Enable the "[HTTPS Only][functions-https]" setting.</span></span> 

### <a name="lock-down-the-function-app"></a><span data-ttu-id="247e5-306">Sperren der Funktions-App</span><span class="sxs-lookup"><span data-stu-id="247e5-306">Lock down the function app</span></span>

<span data-ttu-id="247e5-307">Alle Aufrufe der Funktion sollten über das API-Gateway verlaufen.</span><span class="sxs-lookup"><span data-stu-id="247e5-307">All calls to the function should go through the API gateway.</span></span> <span data-ttu-id="247e5-308">Sie können dies wie folgt erreichen:</span><span class="sxs-lookup"><span data-stu-id="247e5-308">You can achieve this as follows:</span></span>

- <span data-ttu-id="247e5-309">Konfigurieren Sie die Funktions-App so, dass ein Funktionsschlüssel verwendet werden muss.</span><span class="sxs-lookup"><span data-stu-id="247e5-309">Configure the function app to require a function key.</span></span> <span data-ttu-id="247e5-310">Das API Management-Gateway enthält den Funktionsschlüssel, wenn es die Funktions-App aufruft.</span><span class="sxs-lookup"><span data-stu-id="247e5-310">The API Management gateway will include the function key when it calls the function app.</span></span> <span data-ttu-id="247e5-311">So wird verhindert, dass Clients die Funktion direkt aufrufen, indem sie das Gateway umgehen.</span><span class="sxs-lookup"><span data-stu-id="247e5-311">This prevents clients from calling the function directly, bypassing the gateway.</span></span> 

- <span data-ttu-id="247e5-312">Das API Management-Gateway hat eine [statische IP-Adresse][apim-ip].</span><span class="sxs-lookup"><span data-stu-id="247e5-312">The API Management gateway has a [static IP address][apim-ip].</span></span> <span data-ttu-id="247e5-313">Beschränken Sie die Azure-Funktion, damit nur Aufrufe über diese statische IP-Adresse zulässig sind.</span><span class="sxs-lookup"><span data-stu-id="247e5-313">Restrict the Azure Function to allow only calls from that static IP address.</span></span> <span data-ttu-id="247e5-314">Weitere Informationen finden Sie unter [Statische Azure App Service-IP-Einschränkungen][app-service-ip-restrictions].</span><span class="sxs-lookup"><span data-stu-id="247e5-314">For more information, see [Azure App Service Static IP Restrictions][app-service-ip-restrictions].</span></span> <span data-ttu-id="247e5-315">(Dieses Feature ist nur für Dienste mit dem Standard-Tarif verfügbar.)</span><span class="sxs-lookup"><span data-stu-id="247e5-315">(This feature is available for Standard tier services only.)</span></span> 

### <a name="protect-application-secrets"></a><span data-ttu-id="247e5-316">Schützen von Anwendungsgeheimnissen</span><span class="sxs-lookup"><span data-stu-id="247e5-316">Protect application secrets</span></span>

<span data-ttu-id="247e5-317">Speichern Sie Anwendungsgeheimnisse, z.B. Datenbank-Anmeldeinformationen, nicht in Ihrem Code oder in Konfigurationsdateien.</span><span class="sxs-lookup"><span data-stu-id="247e5-317">Don't store application secrets, such as database credentials, in your code or configuration files.</span></span> <span data-ttu-id="247e5-318">Verwenden Sie stattdessen App-Einstellungen, die in Azure verschlüsselt gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="247e5-318">Instead, use App settings, which are stored encrypted in Azure.</span></span> <span data-ttu-id="247e5-319">Weitere Informationen finden Sie unter [Sicherheit in Azure App Service und Azure Functions][app-service-security].</span><span class="sxs-lookup"><span data-stu-id="247e5-319">For more information, see [Security in Azure App Service and Azure Functions][app-service-security].</span></span>

<span data-ttu-id="247e5-320">Alternativ hierzu können Sie Anwendungsgeheimnisse in Key Vault speichern.</span><span class="sxs-lookup"><span data-stu-id="247e5-320">Alternatively, you can store application secrets in Key Vault.</span></span> <span data-ttu-id="247e5-321">Dies ermöglicht Ihnen die Zentralisierung der Speicherung von Geheimnissen, die Steuerung ihrer Verteilung und die Überwachung, wie und wann auf Geheimnisse zugegriffen wird.</span><span class="sxs-lookup"><span data-stu-id="247e5-321">This allows you to centralize the storage of secrets, control their distribution, and monitor how and when secrets are being accessed.</span></span> <span data-ttu-id="247e5-322">Weitere Informationen finden Sie unter [Konfigurieren einer Azure-Webanwendung zum Lesen eines Geheimnisses aus Key Vault][key-vault-web-app].</span><span class="sxs-lookup"><span data-stu-id="247e5-322">For more information, see [Configure an Azure web application to read a secret from Key Vault][key-vault-web-app].</span></span> <span data-ttu-id="247e5-323">Beachten Sie aber, dass Functions-Trigger und -Bindungen ihre Konfigurationseinstellungen aus App-Einstellungen laden.</span><span class="sxs-lookup"><span data-stu-id="247e5-323">However, note that Functions triggers and bindings load their configuration settings from app settings.</span></span> <span data-ttu-id="247e5-324">Es gibt keine integrierte Möglichkeit, für die Trigger und Bindungen die Verwendung von Key Vault-Geheimnissen zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="247e5-324">There is no built-in way to configure the triggers and bindings to use Key Vault secrets.</span></span>

## <a name="devops-considerations"></a><span data-ttu-id="247e5-325">Überlegungen zu DevOps</span><span class="sxs-lookup"><span data-stu-id="247e5-325">DevOps considerations</span></span>

### <a name="api-versioning"></a><span data-ttu-id="247e5-326">API-Versionsverwaltung</span><span class="sxs-lookup"><span data-stu-id="247e5-326">API versioning</span></span>

<span data-ttu-id="247e5-327">Eine API ist ein Vertrag zwischen einem Dienst und den Clients oder Consumern dieses Diensts.</span><span class="sxs-lookup"><span data-stu-id="247e5-327">An API is a contract between a service and clients or consumers of that service.</span></span> <span data-ttu-id="247e5-328">Unterstützen Sie die Versionsverwaltung in Ihrem API-Vertrag.</span><span class="sxs-lookup"><span data-stu-id="247e5-328">Support versioning in your API contract.</span></span> <span data-ttu-id="247e5-329">Wenn Sie eine grundlegende API-Änderung einführen, verbinden Sie dies mit der Einführung einer neuen API-Version.</span><span class="sxs-lookup"><span data-stu-id="247e5-329">If you introduce a breaking API change, introduce a new API version.</span></span> <span data-ttu-id="247e5-330">Stellen Sie die neue Version parallel zur Originalversion in einer separaten Funktions-App bereit.</span><span class="sxs-lookup"><span data-stu-id="247e5-330">Deploy the new version side-by-side with the original version, in a separate Function App.</span></span> <span data-ttu-id="247e5-331">So können Sie vorhandene Clients zur neuen API migrieren, ohne die Funktion von Clientanwendungen zu beeinträchtigen.</span><span class="sxs-lookup"><span data-stu-id="247e5-331">This lets you migrate existing clients to the new API without breaking client applications.</span></span> <span data-ttu-id="247e5-332">Letztendlich können Sie die frühere Version dann als veraltet deklarieren.</span><span class="sxs-lookup"><span data-stu-id="247e5-332">Eventually, you can deprecate the previous version.</span></span> <span data-ttu-id="247e5-333">Weitere Informationen zur API-Versionsverwaltung finden Sie unter [Versionsverwaltung einer RESTful-Web-API][api-versioning].</span><span class="sxs-lookup"><span data-stu-id="247e5-333">For more information about API versioning, see [Versioning a RESTful web API][api-versioning].</span></span>

<span data-ttu-id="247e5-334">Stellen Sie für Updates, die keine grundlegenden API-Änderungen darstellen, die neue Version in einem Stagingslot in der derselben Funktions-App bereit.</span><span class="sxs-lookup"><span data-stu-id="247e5-334">For updates that are not breaking API changes, deploy the new version to a staging slot in the same Function App.</span></span> <span data-ttu-id="247e5-335">Überprüfen Sie, ob die Bereitstellung erfolgreich war, und ersetzen Sie dann die bereitgestellte Version durch die Produktionsversion.</span><span class="sxs-lookup"><span data-stu-id="247e5-335">Verify the deployment succeeded and then swap the staged version with the production version.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="247e5-336">Bereitstellen der Lösung</span><span class="sxs-lookup"><span data-stu-id="247e5-336">Deploy the solution</span></span>

<span data-ttu-id="247e5-337">Zeigen Sie zum Bereitstellen dieser Referenzarchitektur die [GitHub-Infodatei][readme] an.</span><span class="sxs-lookup"><span data-stu-id="247e5-337">To deploy this reference architecture, view the [GitHub readme][readme].</span></span> 

<!-- links -->

[api-versioning]: ../../best-practices/api-design.md#versioning-a-restful-web-api
[apim]: /azure/api-management/api-management-key-concepts
[apim-ip]: /azure/api-management/api-management-faq#is-the-api-management-gateway-ip-address-constant-can-i-use-it-in-firewall-rules
[api-geo]: /azure/api-management/api-management-howto-deploy-multi-region
[apim-scale]: /azure/api-management/api-management-howto-autoscale
[app-service-auth]: /azure/app-service/app-service-authentication-overview
[app-service-ip-restrictions]: /azure/app-service/app-service-ip-restrictions
[app-service-security]: /azure/app-service/app-service-security
[ase]: /azure/app-service/environment/intro
[azure-messaging]: /azure/event-grid/compare-messaging-services
[claims]: https://en.wikipedia.org/wiki/Claims-based_identity
[cdn]: https://azure.microsoft.com/services/cdn/
[cdn-https]: /azure/cdn/cdn-custom-ssl
[cors-policy]: /azure/api-management/api-management-cross-domain-policies
[cosmosdb]: /azure/cosmos-db/introduction
[cosmosdb-geo]: /azure/cosmos-db/distribute-data-globally
[cosmosdb-input-binding]: /azure/azure-functions/functions-bindings-cosmosdb-v2#input
[cosmosdb-scale]: /azure/cosmos-db/partition-data
[event-driven]: ../../guide/architecture-styles/event-driven.md
[functions]: /azure/azure-functions/functions-overview
[functions-bindings]: /azure/azure-functions/functions-triggers-bindings
[functions-cold-start]: https://blogs.msdn.microsoft.com/appserviceteam/2018/02/07/understanding-serverless-cold-start/
[functions-https]: /azure/app-service/app-service-web-tutorial-custom-ssl#enforce-https
[functions-proxy]: /azure-functions/functions-proxies
[functions-scale]: /azure/azure-functions/functions-scale
[functions-timeout]: /azure/azure-functions/functions-scale#consumption-plan
[graph]: https://developer.microsoft.com/graph/docs/concepts/overview
[key-vault-web-app]: /azure/key-vault/tutorial-web-application-keyvault
[microservices-domain-analysis]: ../../microservices/domain-analysis.md
[monitor]: /azure/azure-monitor/overview
[oauth-flow]: https://auth0.com/docs/api-auth/which-oauth-flow-to-use
[partition-key]: /azure/cosmos-db/partition-data
[pipelines]: /azure/devops/pipelines/index
[ru]: /azure/cosmos-db/request-units
[static-hosting]: /azure/storage/blobs/storage-blob-static-website
[static-hosting-preview]: https://azure.microsoft.com/blog/azure-storage-static-web-hosting-public-preview/
[storage-https]: /azure/storage/common/storage-require-secure-transfer
[tm]: /azure/traffic-manager/traffic-manager-overview

[github]: https://github.com/mspnp/serverless-reference-implementation
[HttpRequestAuthorizationExtensions]: https://github.com/mspnp/serverless-reference-implementation/blob/master/src/DroneStatus/dotnet/DroneStatusFunctionApp/HttpRequestAuthorizationExtensions.cs
[readme]: https://github.com/mspnp/serverless-reference-implementation/blob/master/README.md