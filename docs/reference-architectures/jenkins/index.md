---
title: Ausführen eines Jenkins-Servers in Azure
titleSuffix: Azure Reference Architectures
description: Empfohlene Architektur, die veranschaulicht, wie Sie einen für Unternehmen konzipierten skalierbaren Jenkins-Server in Azure bereitstellen und betreiben, der durch einmaliges Anmelden (Single Sign-On, SSO) geschützt ist.
author: njray
ms.date: 04/30/2018
ms.topic: reference-architecture
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: seodec18
ms.openlocfilehash: 4b8d84ef6eedd93f1a3ec948e7c6d6e3d1c465fc
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 03/20/2019
ms.locfileid: "58346024"
---
# <a name="run-a-jenkins-server-on-azure"></a><span data-ttu-id="1dc0d-103">Ausführen eines Jenkins-Servers in Azure</span><span class="sxs-lookup"><span data-stu-id="1dc0d-103">Run a Jenkins server on Azure</span></span>

<span data-ttu-id="1dc0d-104">Diese Referenzarchitektur veranschaulicht, wie Sie einen für Unternehmen konzipierten skalierbaren Jenkins-Server in Azure bereitstellen und betreiben, der durch einmaliges Anmelden (Single Sign-On, SSO) geschützt ist.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-104">This reference architecture shows how to deploy and operate a scalable, enterprise-grade Jenkins server on Azure secured with single sign-on (SSO).</span></span> <span data-ttu-id="1dc0d-105">Die Architektur verwendet zudem Azure Monitor zum Überwachen des Zustands des Jenkins-Servers.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-105">The architecture also uses Azure Monitor to monitor the state of the Jenkins server.</span></span> <span data-ttu-id="1dc0d-106">[**Stellen Sie diese Lösung bereit**](#deploy-the-solution).</span><span class="sxs-lookup"><span data-stu-id="1dc0d-106">[**Deploy this solution**](#deploy-the-solution).</span></span>

![In Azure ausgeführter Jenkins-Server][0]

<span data-ttu-id="1dc0d-108">*Laden Sie eine [Visio-Datei](https://archcenter.blob.core.windows.net/cdn/Jenkins-architecture.vsdx) herunter, die dieses Architekturdiagramm enthält.*</span><span class="sxs-lookup"><span data-stu-id="1dc0d-108">*Download a [Visio file](https://archcenter.blob.core.windows.net/cdn/Jenkins-architecture.vsdx) that contains this architecture diagram.*</span></span>

<span data-ttu-id="1dc0d-109">Diese Architektur unterstützt die Notfallwiederherstellung mit Azure-Diensten, deckt jedoch keine komplexeren Szenarien mit horizontaler Skalierung und mehreren Mastern oder Hochverfügbarkeit (High Availability, HA) ohne Downtime ab.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-109">This architecture supports disaster recovery with Azure services but does not cover more advanced scale-out scenarios involving multiple masters or high availability (HA) with no downtime.</span></span> <span data-ttu-id="1dc0d-110">Allgemeine Informationen zu den verschiedenen Azure-Komponenten, etwa ein ausführliches Tutorial zum Erstellen einer CI/CD-Pipeline in Azure, finden Sie unter [Jenkins in Azure][jenkins-on-azure].</span><span class="sxs-lookup"><span data-stu-id="1dc0d-110">For general insights about the various Azure components, including a step-by-step tutorial about building out a CI/CD pipeline on Azure, see [Jenkins on Azure][jenkins-on-azure].</span></span>

<span data-ttu-id="1dc0d-111">Der Schwerpunkt dieses Dokuments liegt auf den zentralen Azure-Vorgängen, die zur Unterstützung von Jenkins erforderlich sind. Dazu zählen die Verwendung von Azure Storage zum Speichern von Buildartefakten, die für SSO erforderlichen Sicherheitselemente, andere integrierbare Dienste und Skalierbarkeit für die Pipeline.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-111">The focus of this document is on the core Azure operations needed to support Jenkins, including the use of Azure Storage to maintain build artifacts, the security items needed for SSO, other services that can be integrated, and scalability for the pipeline.</span></span> <span data-ttu-id="1dc0d-112">Die Architektur ist so konzipiert, dass sie mit einem vorhandenen Quellcodeverwaltungs-Repository verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-112">The architecture is designed to work with an existing source control repository.</span></span> <span data-ttu-id="1dc0d-113">Ein allgemeines Szenario ist beispielsweise das Starten von Jenkins-Aufträgen auf der Grundlage von GitHub-Commits.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-113">For example, a common scenario is to start Jenkins jobs based on GitHub commits.</span></span>

## <a name="architecture"></a><span data-ttu-id="1dc0d-114">Architecture</span><span class="sxs-lookup"><span data-stu-id="1dc0d-114">Architecture</span></span>

<span data-ttu-id="1dc0d-115">Die Architektur umfasst die folgenden Komponenten:</span><span class="sxs-lookup"><span data-stu-id="1dc0d-115">The architecture consists of the following components:</span></span>

- <span data-ttu-id="1dc0d-116">**Ressourcengruppe**.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-116">**Resource group**.</span></span> <span data-ttu-id="1dc0d-117">Eine [Ressourcengruppe][rg] dient zum Gruppieren von Azure-Ressourcen, damit sie nach Lebensdauer, Besitzer und anderen Kriterien verwaltet werden können.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-117">A [resource group][rg] is used to group Azure assets so they can be managed by lifetime, owner, and other criteria.</span></span> <span data-ttu-id="1dc0d-118">Verwenden Sie Ressourcengruppen, um Azure-Ressourcen als Gruppe bereitzustellen und zu überwachen und Abrechnungskosten nach Ressourcengruppe nachzuverfolgen.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-118">Use resource groups to deploy and monitor Azure assets as a group and track billing costs by resource group.</span></span> <span data-ttu-id="1dc0d-119">Sie können auch Ressourcen als Gruppe löschen, was für Testbereitstellungen sehr nützlich ist.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-119">You can also delete resources as a set, which is very useful for test deployments.</span></span>

- <span data-ttu-id="1dc0d-120">**Jenkins-Server:**</span><span class="sxs-lookup"><span data-stu-id="1dc0d-120">**Jenkins server**.</span></span> <span data-ttu-id="1dc0d-121">Ein virtueller Computer, der als Jenkins-Master fungiert, wird bereitgestellt, um [Jenkins][azure-market] als Automatisierungsserver auszuführen.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-121">A virtual machine is deployed to run [Jenkins][azure-market] as an automation server and serve as Jenkins Master.</span></span> <span data-ttu-id="1dc0d-122">Diese Referenzarchitektur verwendet die [Lösungsvorlage für Jenkins in Azure][solution] und ist auf einem virtuellen Linux-Computer (Ubuntu 16.04 LTS) in Azure installiert.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-122">This reference architecture uses the [solution template for Jenkins on Azure][solution], installed on a Linux (Ubuntu 16.04 LTS) virtual machine on Azure.</span></span> <span data-ttu-id="1dc0d-123">Andere Jenkins-Angebote sind im Azure Marketplace erhältlich.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-123">Other Jenkins offerings are available in the Azure Marketplace.</span></span>

  > [!NOTE]
  > <span data-ttu-id="1dc0d-124">Nginx ist auf dem virtuellen Computer installiert und fungiert als Reverseproxy für Jenkins.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-124">Nginx is installed on the VM to act as a reverse proxy to Jenkins.</span></span> <span data-ttu-id="1dc0d-125">Sie können Nginx zum Aktivieren von SSL für den Jenkins-Server konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-125">You can configure Nginx to enable SSL for the Jenkins server.</span></span>
  >

- <span data-ttu-id="1dc0d-126">**Virtuelles Netzwerk**.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-126">**Virtual network**.</span></span> <span data-ttu-id="1dc0d-127">Ein [virtuelles Netzwerk][vnet] verknüpft Azure-Ressourcen und bietet eine logische Isolierung.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-127">A [virtual network][vnet] connects Azure resources to each other and provides logical isolation.</span></span> <span data-ttu-id="1dc0d-128">In dieser Architektur wird der Jenkins-Server in einem virtuellen Netzwerk ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-128">In this architecture, the Jenkins server runs in a virtual network.</span></span>

- <span data-ttu-id="1dc0d-129">**Subnetze:**</span><span class="sxs-lookup"><span data-stu-id="1dc0d-129">**Subnets**.</span></span> <span data-ttu-id="1dc0d-130">Der Jenkins-Server ist in einem [Subnetz][subnet] isoliert, um die Verwaltung und Aufteilung des Netzwerkdatenverkehrs zu vereinfachen, ohne die Leistung zu beeinträchtigen.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-130">The Jenkins server is isolated in a [subnet][subnet] to make it easier to manage and segregate network traffic without affecting performance.</span></span>

- <span data-ttu-id="1dc0d-131">**NSGs**.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-131">**NSGs**.</span></span> <span data-ttu-id="1dc0d-132">Verwenden Sie [Netzwerksicherheitsgruppen][nsg] (NSGs), um Netzwerkdatenverkehr vom Internet auf ein Subnetz eines virtuellen Netzwerks zu beschränken.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-132">Use [network security groups][nsg] (NSGs) to restrict network traffic from the Internet to the subnet of a virtual network.</span></span>

- <span data-ttu-id="1dc0d-133">**Verwaltete Datenträger:**</span><span class="sxs-lookup"><span data-stu-id="1dc0d-133">**Managed disks**.</span></span> <span data-ttu-id="1dc0d-134">Ein [verwalteter Datenträger][managed-disk] ist eine persistente virtuelle Festplatte (Virtual Hard Disk, VHD), die als Anwendungsspeicher sowie zum Speichern des Zustands des Jenkins-Servers und Bereitstellen der Notfallwiederherstellung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-134">A [managed disk][managed-disk] is a persistent virtual hard disk (VHD) used for application storage and also to maintain the state of the Jenkins server and provide disaster recovery.</span></span> <span data-ttu-id="1dc0d-135">Datenträger werden in Azure Storage gespeichert.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-135">Data disks are stored in Azure Storage.</span></span> <span data-ttu-id="1dc0d-136">Für eine hohe Leistung wird [Storage Premium][premium] empfohlen.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-136">For high performance, [premium storage][premium] is recommended.</span></span>

- <span data-ttu-id="1dc0d-137">**Azure Blob Storage:**</span><span class="sxs-lookup"><span data-stu-id="1dc0d-137">**Azure Blob Storage**.</span></span> <span data-ttu-id="1dc0d-138">Das [Windows Azure Storage-Plug-In][configure-storage] nutzt Azure Blob Storage zum Speichern der Buildartefakte, die erstellt und für andere Jenkins-Builds freigegeben werden.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-138">The [Windows Azure Storage plugin][configure-storage] uses Azure Blob Storage to store the build artifacts that are created and shared with other Jenkins builds.</span></span>

- <span data-ttu-id="1dc0d-139">**Azure Active Directory (Azure AD):**</span><span class="sxs-lookup"><span data-stu-id="1dc0d-139">**Azure Active Directory (Azure AD)**.</span></span> <span data-ttu-id="1dc0d-140">[Azure AD][azure-ad] unterstützt die Benutzerauthentifizierung, sodass Sie SSO einrichten können.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-140">[Azure AD][azure-ad] supports user authentication, allowing you to set up SSO.</span></span> <span data-ttu-id="1dc0d-141">Azure AD-[Dienstprinzipale][service-principal] definieren die Richtlinie und Berechtigungen für jede Rollenauthentifizierung im Workflow unter Verwendung der [rollenbasierten Zugriffssteuerung][rbac] (Role-Based Access Control, RBAC).</span><span class="sxs-lookup"><span data-stu-id="1dc0d-141">Azure AD [service principals][service-principal] define the policy and permissions for each role authorization in the workflow, using [role-based access control][rbac] (RBAC).</span></span> <span data-ttu-id="1dc0d-142">Jeder Dienstprinzipal ist einem Jenkins-Auftrag zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-142">Each service principal is associated with a Jenkins job.</span></span>

- <span data-ttu-id="1dc0d-143">**Azure Key Vault**.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-143">**Azure Key Vault**.</span></span> <span data-ttu-id="1dc0d-144">Diese Architektur verwendet [Key Vault][key-vault] zum Verwalten von Geheimnissen und kryptografischen Schlüssel, die zum Bereitstellen von Azure-Ressourcen verwendet werden, wenn Geheimnisse erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-144">To manage secrets and cryptographic keys used to provision Azure resources when secrets are required, this architecture uses [Key Vault][key-vault].</span></span> <span data-ttu-id="1dc0d-145">Zusätzliche Hilfe beim Speichern von Geheimnissen, die der Anwendung in der Pipeline zugeordnet sind, finden Sie auch auf der Seite für das [Azure-Anmeldeinformationen-Plug-In][configure-credential] für Jenkins.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-145">For added help storing secrets associated with the application in the pipeline, see also the [Azure Credentials][configure-credential] plugin for Jenkins.</span></span>

- <span data-ttu-id="1dc0d-146">**Azure-Überwachungsdienste:**</span><span class="sxs-lookup"><span data-stu-id="1dc0d-146">**Azure monitoring services**.</span></span> <span data-ttu-id="1dc0d-147">Dieser Dienst [überwacht][monitor] den virtuellen Azure-Computer, auf dem Jenkins gehostet wird.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-147">This service [monitors][monitor] the Azure virtual machine hosting Jenkins.</span></span> <span data-ttu-id="1dc0d-148">Bei dieser Bereitstellung werden der Status des virtuellen Computers und die CPU-Auslastung überwacht und Warnungen gesendet.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-148">This deployment monitors the virtual machine status and CPU utilization and sends alerts.</span></span>

## <a name="recommendations"></a><span data-ttu-id="1dc0d-149">Empfehlungen</span><span class="sxs-lookup"><span data-stu-id="1dc0d-149">Recommendations</span></span>

<span data-ttu-id="1dc0d-150">Die folgenden Empfehlungen gelten für die meisten Szenarios.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-150">The following recommendations apply for most scenarios.</span></span> <span data-ttu-id="1dc0d-151">Sofern Sie keine besonderen Anforderungen haben, die Vorrang haben, sollten Sie diese Empfehlungen befolgen.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-151">Follow these recommendations unless you have a specific requirement that overrides them.</span></span>

### <a name="azure-ad"></a><span data-ttu-id="1dc0d-152">Azure AD</span><span class="sxs-lookup"><span data-stu-id="1dc0d-152">Azure AD</span></span>

<span data-ttu-id="1dc0d-153">Mit dem [Azure AD][azure-ad]-Mandanten für Ihr Azure-Abonnement wird SSO für Jenkins-Benutzer aktiviert. Darüber hinaus wird er zum Einrichten von [Dienstprinzipalen][service-principal] verwendet, die Jenkins-Aufträgen den Zugriff auf Azure-Ressourcen ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-153">The [Azure AD][azure-ad] tenant for your Azure subscription is used to enable SSO for Jenkins users and set up [service principals][service-principal] that enable Jenkins jobs to access Azure resources.</span></span>

<span data-ttu-id="1dc0d-154">SSO-Authentifizierung und -Autorisierung werden von dem auf dem Jenkins-Server installierten Azure AD-Plug-In implementiert.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-154">SSO authentication and authorization are implemented by the Azure AD plugin installed on the Jenkins server.</span></span> <span data-ttu-id="1dc0d-155">SSO ermöglicht bei der Anmeldung beim Jenkins-Server die Authentifizierung mit Ihren Organisationsanmeldeinformationen aus Azure AD.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-155">SSO allows you to authenticate using your organization credentials from Azure AD when logging on to the Jenkins server.</span></span> <span data-ttu-id="1dc0d-156">Beim Konfigurieren des Azure AD-Plug-Ins können Sie die Ebene des autorisierten Zugriffs eines Benutzers auf den Jenkins-Server angeben.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-156">When configuring the Azure AD plugin, you can specify the level of a user’s authorized access to the Jenkins server.</span></span>

<span data-ttu-id="1dc0d-157">Um Jenkins-Aufträgen den Zugriff auf Azure-Ressourcen zu gewähren, erstellt ein Azure AD-Administrator Dienstprinzipale.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-157">To provide Jenkins jobs with access to Azure resources, an Azure AD administrator creates service principals.</span></span> <span data-ttu-id="1dc0d-158">Diese gewähren Anwendungen – in diesem Fall den Jenkins-Aufträgen – [authentifizierten, autorisierten Zugriff][ad-sp] auf Azure-Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-158">These grant applications &mdash; in this case, the Jenkins jobs &mdash; [authenticated, authorized access][ad-sp] to Azure resources.</span></span>

<span data-ttu-id="1dc0d-159">Mit der [rollenbasierten Zugriffssteuerung][rbac] wird der Zugriff auf Azure-Ressourcen für Benutzer oder Dienstprinzipale über die zugewiesene Rolle genauer definiert und gesteuert.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-159">[RBAC][rbac] further defines and controls access to Azure resources for users or service principals through their assigned role.</span></span> <span data-ttu-id="1dc0d-160">Sowohl integrierte als auch benutzerdefinierte Rollen werden unterstützt.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-160">Both built-in and custom roles are supported.</span></span> <span data-ttu-id="1dc0d-161">Rollen tragen darüber hinaus zum Schützen der Pipeline bei und stellen sicher, dass die Zuständigkeiten eines Benutzers oder Agents richtig zugewiesen und autorisiert werden.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-161">Roles also help secure the pipeline and ensure that a user’s or agent’s responsibilities are assigned and authorized correctly.</span></span> <span data-ttu-id="1dc0d-162">Darüber hinaus kann die RBAC eingerichtet werden, um den Zugriff auf Azure-Ressourcen zu beschränken.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-162">In addition, RBAC can be set up to limit access to Azure assets.</span></span> <span data-ttu-id="1dc0d-163">Beispielsweise kann für einen Benutzer die Nutzung auf die Ressourcen in einer bestimmten Ressourcengruppe beschränkt werden.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-163">For example, a user can be limited to working with only the assets in a particular resource group.</span></span>

### <a name="storage"></a><span data-ttu-id="1dc0d-164">Storage</span><span class="sxs-lookup"><span data-stu-id="1dc0d-164">Storage</span></span>

<span data-ttu-id="1dc0d-165">Erstellen Sie mit dem über den Azure Marketplace installierten [Windows Azure Storage-Plug-In][storage-plugin] von Jenkins Artefakte, die für andere Builds und Tests freigegeben werden können.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-165">Use the Jenkins [Windows Azure Storage plugin][storage-plugin], which is installed from the Azure Marketplace, to store build artifacts that can be shared with other builds and tests.</span></span> <span data-ttu-id="1dc0d-166">Damit dieses Plug-In von den Jenkins-Aufträgen verwendet werden kann, muss ein Azure Storage-Konto konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-166">An Azure Storage account must be configured before this plugin can be used by the Jenkins jobs.</span></span>

### <a name="jenkins-azure-plugins"></a><span data-ttu-id="1dc0d-167">Azure-Plug-Ins für Jenkins</span><span class="sxs-lookup"><span data-stu-id="1dc0d-167">Jenkins Azure plugins</span></span>

<span data-ttu-id="1dc0d-168">Mit der Lösungsvorlage für Jenkins in Azure werden mehrere Azure-Plug-Ins installiert.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-168">The solution template for Jenkins on Azure installs several Azure plugins.</span></span> <span data-ttu-id="1dc0d-169">Das Azure DevOps-Team erstellt und wartet die Lösungsvorlage und die folgenden Plug-Ins. Diese können mit anderen Jenkins-Angeboten im Azure Marketplace sowie auf jedem lokal eingerichteten Jenkins-Master verwendet werden:</span><span class="sxs-lookup"><span data-stu-id="1dc0d-169">The Azure DevOps Team builds and maintains the solution template and the following plugins, which work with other Jenkins offerings in Azure Marketplace as well as any Jenkins master set up on premises:</span></span>

- <span data-ttu-id="1dc0d-170">Das [Azure AD-Plug-In][configure-azure-ad] ermöglicht dem Jenkins-Server auf der Grundlage von Azure AD die Unterstützung von SSO für Benutzer.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-170">[Azure AD plugin][configure-azure-ad] allows the Jenkins server to support SSO for users based on Azure AD.</span></span>

- <span data-ttu-id="1dc0d-171">Das Plug-In für [Azure-VM-Agents][configure-agent] nutzt eine Azure Resource Manager-Vorlage zum Erstellen von Jenkins-Agents auf virtuellen Azure-Computern.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-171">[Azure VM Agents][configure-agent] plugin uses an Azure Resource Manager template to create Jenkins agents in Azure virtual machines.</span></span>

- <span data-ttu-id="1dc0d-172">Das [Azure-Anmeldeinformationen-Plug-In][configure-credential] ermöglicht Ihnen das Speichern von Anmeldeinformationen des Azure-Dienstprinzipals in Jenkins.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-172">[Azure Credentials][configure-credential] plugin allows you to store Azure service principal credentials in Jenkins.</span></span>

- <span data-ttu-id="1dc0d-173">Das [Microsoft Azure Storage-Plug-In][configure-storage] lädt Buildartefakte in [Azure Blob Storage][blob] hoch bzw. lädt Buildabhängigkeiten daraus herunter.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-173">[Windows Azure Storage plugin][configure-storage] uploads build artifacts to, or downloads build dependencies from, [Azure Blob storage][blob].</span></span>

<span data-ttu-id="1dc0d-174">Es wird darüber hinaus empfohlen, die stetig wachsende Liste der verfügbaren Azure-Plug-Ins zu überprüfen, die mit Azure-Ressourcen verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-174">We also recommend reviewing the growing list of all available Azure plugins that work with Azure resources.</span></span> <span data-ttu-id="1dc0d-175">Wenn Sie die aktuelle Liste anzeigen möchten, navigieren Sie zu [Jenkins Plugin Index][index] (Index der Jenkins-Plug-Ins), und suchen Sie nach Azure.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-175">To see all the latest list, visit [Jenkins Plugin Index][index] and search for Azure.</span></span> <span data-ttu-id="1dc0d-176">Die folgenden Plug-Ins sind beispielsweise für die Bereitstellung verfügbar:</span><span class="sxs-lookup"><span data-stu-id="1dc0d-176">For example, the following plugins are available for deployment:</span></span>

- <span data-ttu-id="1dc0d-177">Das Plug-In für [Azure-Container-Agents][container-agents] ermöglicht die Ausführung eines Containers als Agent in Jenkins.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-177">[Azure Container Agents][container-agents] helps you to run a container as an agent in Jenkins.</span></span>

- <span data-ttu-id="1dc0d-178">Mit dem Plug-In für die [kontinuierliche Kubernetes-Bereitstellung](https://aka.ms/azjenkinsk8s) werden Ressourcenkonfigurationen in einem Kubernetes-Cluster bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-178">[Kubernetes Continuous Deploy](https://aka.ms/azjenkinsk8s) deploys resource configurations to a Kubernetes cluster.</span></span>

- <span data-ttu-id="1dc0d-179">Das [Azure Container Service][acs]-Plug-In stellt Konfigurationen in Azure Container Service mit Kubernetes, DC/OS mit Marathon oder Docker Swarm bereit.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-179">[Azure Container Service][acs] deploys configurations to Azure Container Service with Kubernetes, DC/OS with Marathon, or Docker Swarm.</span></span>

- <span data-ttu-id="1dc0d-180">[Azure Functions][functions] stellt Ihr Projekt in Azure Functions bereit.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-180">[Azure Functions][functions] deploys your project to Azure Function.</span></span>

- <span data-ttu-id="1dc0d-181">[Azure App Service][app-service] dient zur Bereitstellung in Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-181">[Azure App Service][app-service] deploys to Azure App Service.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="1dc0d-182">Überlegungen zur Skalierbarkeit</span><span class="sxs-lookup"><span data-stu-id="1dc0d-182">Scalability considerations</span></span>

<span data-ttu-id="1dc0d-183">Jenkins kann zur Unterstützung sehr großer Workloads skaliert werden.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-183">Jenkins can scale to support very large workloads.</span></span> <span data-ttu-id="1dc0d-184">Führen Sie bei elastischen Builds keine Builds auf dem Jenkins-Masterserver aus.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-184">For elastic builds, do not run builds on the Jenkins master server.</span></span> <span data-ttu-id="1dc0d-185">Lagern Sie stattdessen Buildtasks auf Jenkins-Agents aus, da diese elastisch horizontal herunter- und hochskaliert werden können.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-185">Instead, offload build tasks to Jenkins agents, which can be elastically scaled in and out as need.</span></span> <span data-ttu-id="1dc0d-186">Erwägen Sie zwei Optionen für die Skalierung von Agents:</span><span class="sxs-lookup"><span data-stu-id="1dc0d-186">Consider two options for scaling agents:</span></span>

- <span data-ttu-id="1dc0d-187">Erstellen Sie mithilfe des Plug-Ins für [Azure-VM-Agents][vm-agent] Jenkins-Agents, die auf virtuellen Azure-Computern ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-187">Use the [Azure VM Agents][vm-agent] plugin to create Jenkins agents that run in Azure VMs.</span></span> <span data-ttu-id="1dc0d-188">Dieses Plug-In ermöglicht die elastische horizontale Skalierung für Agents und kann verschiedene Typen virtueller Computer verwenden.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-188">This plugin enables elastic scale-out for agents and can use distinct types of virtual machines.</span></span> <span data-ttu-id="1dc0d-189">Sie können ein anderes Basisimage im Azure Marketplace oder ein benutzerdefiniertes Image auswählen.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-189">You can select a different base image from Azure Marketplace or use a custom image.</span></span> <span data-ttu-id="1dc0d-190">Ausführliche Informationen zum Skalieren von Jenkins-Agents finden Sie in der Jenkins-Dokumentation unter [Architecting for Scale][scale] (Entwerfen einer Architektur für die Skalierung).</span><span class="sxs-lookup"><span data-stu-id="1dc0d-190">For details about how the Jenkins agents scale, see [Architecting for Scale][scale] in the Jenkins documentation.</span></span>

- <span data-ttu-id="1dc0d-191">Verwenden Sie das Plug-In für [Azure-Container-Agents][container-agents], um einen Container als Agent in [Azure Container Service mit Kubernetes](/azure/container-service/kubernetes/) oder [Azure Container Instances](/azure/container-instances/) auszuführen.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-191">Use the [Azure Container Agents][container-agents] plugin to run a container as an agent in either [Azure Container Service with Kubernetes](/azure/container-service/kubernetes/), or [Azure Container Instances](/azure/container-instances/).</span></span>

<span data-ttu-id="1dc0d-192">Das Skalieren virtueller Computer ist im Allgemeinen teurer als das Skalieren von Containern.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-192">Virtual machines generally cost more to scale than containers.</span></span> <span data-ttu-id="1dc0d-193">Damit Sie Container für die Skalierung verwenden können, muss Ihr Buildprozess jedoch mit Containern ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-193">To use containers for scaling, however, your build process must run with containers.</span></span>

<span data-ttu-id="1dc0d-194">Verwenden Sie darüber hinaus Azure Storage für die Freigabe von Buildartefakten, die unter Umständen in der nächsten Phase der Pipeline von anderen Build-Agents verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-194">Also, use Azure Storage to share build artifacts that may be used in the next stage of the pipeline by other build agents.</span></span>

### <a name="scaling-the-jenkins-server"></a><span data-ttu-id="1dc0d-195">Skalieren des Jenkins-Servers</span><span class="sxs-lookup"><span data-stu-id="1dc0d-195">Scaling the Jenkins server</span></span>

<span data-ttu-id="1dc0d-196">Sie können den virtuellen Computer des Jenkins-Servers zentral hoch- oder herunterskalieren, indem Sie die VM-Größe ändern.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-196">You can scale the Jenkins server VM up or down by changing the VM size.</span></span> <span data-ttu-id="1dc0d-197">In der [Lösungsvorlage für Jenkins in Azure][azure-market] ist standardmäßig die Größe „DS2 v2“ (mit zwei CPUs, 7 GB) angegeben.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-197">The [solution template for Jenkins on Azure][azure-market] specifies the DS2 v2 size (with two CPUs, 7 GB) by default.</span></span> <span data-ttu-id="1dc0d-198">Diese Größe verarbeitet eine kleine bis mittlere Teamworkload.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-198">This size handles a small to medium team workload.</span></span> <span data-ttu-id="1dc0d-199">Ändern Sie die Größe des virtuellen Computers, indem Sie beim Erstellen des Servers eine andere Option auswählen.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-199">Change the VM size by choosing a different option when building out the server.</span></span>

<span data-ttu-id="1dc0d-200">Die Auswahl der richtigen Servergröße hängt von der Größe der erwarteten Workload ab.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-200">Selecting the correct server size depends on the size of the expected workload.</span></span> <span data-ttu-id="1dc0d-201">Die Jenkins-Community stellt einen [Leitfaden für die Auswahl][selection-guide] bereit, anhand dessen Sie die Konfiguration ermitteln können, die Ihre Anforderungen am besten erfüllt.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-201">The Jenkins community maintains a [selection guide][selection-guide] to help identify the configuration that best meets your requirements.</span></span> <span data-ttu-id="1dc0d-202">Azure bietet zahlreiche [Größen für virtuelle Linux-Computer][sizes-linux], um verschiedenste Anforderungen zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-202">Azure offers many [sizes for Linux VMs][sizes-linux] to meet any requirements.</span></span> <span data-ttu-id="1dc0d-203">Weitere Informationen zum Skalieren des Jenkins-Masters finden Sie in den [Best Practices][best-practices] der Jenkins-Community.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-203">For more information about scaling the Jenkins master, refer to the Jenkins community of [best practices][best-practices], which also includes details about scaling Jenkins master.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="1dc0d-204">Überlegungen zur Verfügbarkeit</span><span class="sxs-lookup"><span data-stu-id="1dc0d-204">Availability considerations</span></span>

<span data-ttu-id="1dc0d-205">Verfügbarkeit im Kontext eines Jenkins-Servers bedeutet Folgendes: Sie können jegliche Zustandsinformationen im Zusammenhang mit Ihrem Workflow (etwa Testergebnisse, von Ihnen erstellte Bibliotheken oder andere Artefakte) wiederherstellen.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-205">Availability in the context of a Jenkins server means being able to recover any state information associated with your workflow, such as test results, libraries you have created, or other artifacts.</span></span> <span data-ttu-id="1dc0d-206">Entscheidende Workflowzustände oder Artefakte müssen zur Wiederherstellung des Workflows beibehalten werden, falls der Jenkins-Server ausfällt.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-206">Critical workflow state or artifacts must be maintained to recover the workflow if the Jenkins server goes down.</span></span> <span data-ttu-id="1dc0d-207">Berücksichtigen Sie beim Bewerten der Verfügbarkeitsanforderungen zwei allgemeine Metriken:</span><span class="sxs-lookup"><span data-stu-id="1dc0d-207">To assess your availability requirements, consider two common metrics:</span></span>

- <span data-ttu-id="1dc0d-208">RTO (Recovery Time Objective) gibt an, wie lange Sie Vorgänge ohne Jenkins ausführen können.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-208">Recovery Time Objective (RTO) specifies how long you can go without Jenkins.</span></span>

- <span data-ttu-id="1dc0d-209">RPO (Recovery Point Objective) gibt an, wie viele Daten verloren gehen dürfen, wenn sich eine Dienstunterbrechung auf Jenkins auswirkt.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-209">Recovery Point Objective (RPO) indicates how much data you can afford to lose if a disruption in service affects Jenkins.</span></span>

<span data-ttu-id="1dc0d-210">In der Praxis geben RTO und RPO Redundanz und Sicherung an.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-210">In practice, RTO and RPO imply redundancy and backup.</span></span> <span data-ttu-id="1dc0d-211">Verfügbarkeit ist keine Frage der Hardwarewiederherstellung (diese ist Teil von Azure), sondern eine Frage der Aufrechterhaltung des Zustands des Jenkins-Servers.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-211">Availability is not a question of hardware recovery &mdash; that is part of Azure &mdash; but rather ensuring you maintain the state of your Jenkins server.</span></span> <span data-ttu-id="1dc0d-212">Microsoft bietet eine [Vereinbarung zum Servicelevel][sla] (Service Level Agreement, SLA) für einzelne VM-Instanzen an.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-212">Microsoft offers a [service level agreement][sla] (SLA) for single VM instances.</span></span> <span data-ttu-id="1dc0d-213">Falls diese SLA Ihre Verfügbarkeitsanforderungen nicht erfüllt, stellen Sie sicher, dass Sie einen Tarif für die Notfallwiederherstellung besitzen, oder ziehen Sie die Bereitstellung eines [Jenkins-Servers mit mehreren Mastern ][multi-master] (nicht in diesem Dokument behandelt) in Betracht.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-213">If this SLA doesn't meet your uptime requirements, make sure you have a plan for disaster recovery, or consider using a [multi-master Jenkins server][multi-master] deployment (not covered in this document).</span></span>

<span data-ttu-id="1dc0d-214">Erwägen Sie die Verwendung der [Skripts][disaster] für die Notfallwiederherstellung in Schritt 7 der Bereitstellung, um ein Azure Storage-Konto mit verwalteten Datenträgern zum Speichern des Jenkins-Serverzustands zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-214">Consider using the disaster recovery [scripts][disaster] in step 7 of the deployment to create an Azure Storage account with managed disks to store the Jenkins server state.</span></span> <span data-ttu-id="1dc0d-215">Wenn Jenkins ausfällt, kann der Systemzustand wiederhergestellt werden, der in diesem separaten Speicherkonto gespeichert ist.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-215">If Jenkins goes down, it can be restored to the state stored in this separate storage account.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="1dc0d-216">Sicherheitshinweise</span><span class="sxs-lookup"><span data-stu-id="1dc0d-216">Security considerations</span></span>

<span data-ttu-id="1dc0d-217">Verwenden Sie zum Schutz eines grundlegenden Jenkins-Servers die folgenden Vorgehensweisen, da ein Jenkins-Server in seinem Grundzustand nicht sicher ist.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-217">Use the following approaches to help lock down security on a basic Jenkins server, since in its basic state, it is not secure.</span></span>

- <span data-ttu-id="1dc0d-218">Richten Sie eine sichere Methode für die Anmeldung beim Jenkins-Server ein.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-218">Set up a secure way to log into the Jenkins server.</span></span> <span data-ttu-id="1dc0d-219">Diese Architektur verwendet HTTP und besitzt eine öffentliche IP, HTTP ist jedoch nicht standardmäßig sicher.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-219">This architecture uses HTTP and has a public IP, but HTTP is not secure by default.</span></span> <span data-ttu-id="1dc0d-220">Ziehen Sie die Einrichtung von [HTTPS auf dem Nginx-Server][nginx] in Betracht, der für die sichere Anmeldung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-220">Consider setting up [HTTPS on the Nginx server][nginx] being used for a secure logon.</span></span>

    > [!NOTE]
    > <span data-ttu-id="1dc0d-221">Wenn Sie Ihrem Server SSL hinzufügen, erstellen Sie eine NSG-Regel für das Jenkins-Subnetz, damit Port 443 geöffnet wird.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-221">When adding SSL to your server, create an NSG rule for the Jenkins subnet to open port 443.</span></span> <span data-ttu-id="1dc0d-222">Weitere Informationen finden Sie unter [Öffnen von Ports zu einem virtuellen Computer mit dem Azure-Portal][port443].</span><span class="sxs-lookup"><span data-stu-id="1dc0d-222">For more information, see [How to open ports to a virtual machine with the Azure portal][port443].</span></span>
    >

- <span data-ttu-id="1dc0d-223">Stellen Sie sicher, dass die Jenkins-Konfiguration die websiteübergreifende Anforderungsfälschung verhindert (Manage Jenkins \> Configure Global Security (Jenkins verwalten > Globale Sicherheit konfigurieren)).</span><span class="sxs-lookup"><span data-stu-id="1dc0d-223">Ensure that the Jenkins configuration prevents cross site request forgery (Manage Jenkins \> Configure Global Security).</span></span> <span data-ttu-id="1dc0d-224">Dies ist die Standardeinstellung für einen Microsoft Jenkins-Server.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-224">This is the default for Microsoft Jenkins Server.</span></span>

- <span data-ttu-id="1dc0d-225">Konfigurieren Sie den schreibgeschützten Zugriff auf das Jenkins-Dashboard mithilfe des [Plug-Ins für die Matrixautorisierungsstrategie][matrix].</span><span class="sxs-lookup"><span data-stu-id="1dc0d-225">Configure read-only access to the Jenkins dashboard by using the [Matrix Authorization Strategy Plugin][matrix].</span></span>

- <span data-ttu-id="1dc0d-226">Installieren Sie das [Azure-Anmeldeinformationen-Plug-In][configure-credential], um mithilfe von Key Vault Geheimnisse für die Azure-Ressourcen, die Agents in der Pipeline und Drittanbieterkomponenten zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-226">Install the [Azure Credentials][configure-credential] plugin to use Key Vault to handle secrets for the Azure assets, the agents in the pipeline, and third-party components.</span></span>

- <span data-ttu-id="1dc0d-227">Verwenden Sie RBAC, um den Zugriff des Dienstprinzipals auf die Mindestanforderungen für die Auftragsausführung zu beschränken.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-227">Use RBAC to restrict the access of the service principal to the minimum required to run the jobs.</span></span> <span data-ttu-id="1dc0d-228">Dies dient zur Begrenzung des Schadens, der durch einen nicht autorisierten Auftrag entstehen kann.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-228">This helps limit the scope of damage from a rogue job.</span></span>

<span data-ttu-id="1dc0d-229">Jenkins-Aufträge benötigen häufig Geheimnisse für den Zugriff auf Azure-Dienste, für die eine Autorisierung erforderlich ist, etwa Azure Container Service.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-229">Jenkins jobs often require secrets to access Azure services that require authorization, such as Azure Container Service.</span></span> <span data-ttu-id="1dc0d-230">Verwenden Sie [Key Vault][key-vault] zusammen mit dem [Azure-Anmeldeinformationen-Plug-In][configure-credential] für die sichere Verwaltung dieser Geheimnisse.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-230">Use [Key Vault][key-vault] along with the [Azure Credential plugin][configure-credential] to manage these secrets securely.</span></span> <span data-ttu-id="1dc0d-231">Speichern Sie mithilfe von Key Vault Dienstprinzipal-Anmeldeinformationen, Kennwörter, Token und andere Geheimnisse.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-231">Use Key Vault to store service principal credentials, passwords, tokens, and other secrets.</span></span>

<span data-ttu-id="1dc0d-232">Eine zentrale Übersicht über den Sicherheitszustand Ihrer Azure-Ressourcen können Sie sich mit [Azure Security Center][security-center] verschaffen.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-232">To get a central view of the security state of your Azure resources, use [Azure Security Center][security-center].</span></span> <span data-ttu-id="1dc0d-233">Mit Security Center werden potenzielle Sicherheitsprobleme überwacht, und Sie erhalten eine umfassende Darstellung des Sicherheitszustands Ihrer Bereitstellung.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-233">Security Center monitors potential security issues and provides a comprehensive picture of the security health of your deployment.</span></span> <span data-ttu-id="1dc0d-234">Security Center wird für jedes Azure-Abonnement individuell konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-234">Security Center is configured per Azure subscription.</span></span> <span data-ttu-id="1dc0d-235">Aktivieren Sie die Sammlung von Sicherheitsdaten wie im [Schnellstarthandbuch zu Azure Security Center][quick-start] beschrieben.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-235">Enable security data collection as described in the [Azure Security Center quick start guide][quick-start].</span></span> <span data-ttu-id="1dc0d-236">Nachdem die Datensammlung aktiviert wurde, durchsucht Security Center virtuelle Computer automatisch, die unter diesem Abonnement erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-236">When data collection is enabled, Security Center automatically scans any virtual machines created under that subscription.</span></span>

<span data-ttu-id="1dc0d-237">Der Jenkins-Server verfügt über ein eigenes Benutzerverwaltungssystem, und die Jenkins-Community stellt Best Practices zum [Sichern einer Jenkins-Instanz in Azure][secure-jenkins] zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-237">The Jenkins server has its own user management system, and the Jenkins community provides best practices for [securing a Jenkins instance on Azure][secure-jenkins].</span></span> <span data-ttu-id="1dc0d-238">Die Lösungsvorlage für Jenkins in Azure implementiert diese Best Practices.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-238">The solution template for Jenkins on Azure implements these best practices.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="1dc0d-239">Überlegungen zur Verwaltbarkeit</span><span class="sxs-lookup"><span data-stu-id="1dc0d-239">Manageability considerations</span></span>

<span data-ttu-id="1dc0d-240">Verwenden Sie Ressourcengruppen, um die bereitgestellten Azure-Ressourcen zu organisieren.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-240">Use resource groups to organize the Azure resources that are deployed.</span></span> <span data-ttu-id="1dc0d-241">Stellen Sie Produktionsumgebungen und Entwicklungs-/Testumgebungen in separaten Ressourcengruppen bereit, sodass Sie die Ressourcen der einzelnen Umgebungen überwachen und Abrechnungskosten nach Ressourcengruppe zusammenfassen können.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-241">Deploy production environments and development/test environments in separate resource groups, so that you can monitor each environment’s resources and roll up billing costs by resource group.</span></span> <span data-ttu-id="1dc0d-242">Sie können auch Ressourcen als Gruppe löschen, was für Testbereitstellungen sehr nützlich ist.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-242">You can also delete resources as a set, which is very useful for test deployments.</span></span>

<span data-ttu-id="1dc0d-243">In Azure sind mehrere Features für die [Überwachung und Diagnose][monitoring-diag] der Gesamtstruktur enthalten.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-243">Azure provides several features for [monitoring and diagnostics][monitoring-diag] of the overall infrastructure.</span></span> <span data-ttu-id="1dc0d-244">Zur Überwachung der CPU-Auslastung wird in dieser Architektur Azure Monitor bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-244">To monitor CPU usage, this architecture deploys Azure Monitor.</span></span> <span data-ttu-id="1dc0d-245">Sie können beispielsweise mithilfe von Azure Monitor die CPU-Auslastung überwachen und eine Benachrichtigung senden, wenn die CPU-Auslastung 80 Prozent überschreitet.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-245">For example, you can use Azure Monitor to monitor CPU utilization, and send a notification if CPU usage exceeds 80 percent.</span></span> <span data-ttu-id="1dc0d-246">(Eine hohe CPU-Auslastung weist darauf hin, dass Sie unter Umständen den virtuellen Computer mit dem Jenkins-Server zentral hochskalieren sollten.) Sie können auch einen angegebenen Benutzer benachrichtigen, wenn der virtuelle Computer ausfällt oder nicht mehr verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-246">(High CPU usage indicates that you might want to scale up the Jenkins server VM.) You can also notify a designated user if the VM fails or becomes unavailable.</span></span>

## <a name="communities"></a><span data-ttu-id="1dc0d-247">Communitys</span><span class="sxs-lookup"><span data-stu-id="1dc0d-247">Communities</span></span>

<span data-ttu-id="1dc0d-248">Communitys können Fragen beantworten und Sie beim Einrichten einer erfolgreichen Bereitstellung unterstützen.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-248">Communities can answer questions and help you set up a successful deployment.</span></span> <span data-ttu-id="1dc0d-249">Beachten Sie Folgendes:</span><span class="sxs-lookup"><span data-stu-id="1dc0d-249">Consider the following:</span></span>

- [<span data-ttu-id="1dc0d-250">Blog der Jenkins-Community</span><span class="sxs-lookup"><span data-stu-id="1dc0d-250">Jenkins Community Blog</span></span>](https://jenkins.io/node/)
- [<span data-ttu-id="1dc0d-251">Azure-Forum</span><span class="sxs-lookup"><span data-stu-id="1dc0d-251">Azure Forum</span></span>](https://azure.microsoft.com/support/forums/)
- [<span data-ttu-id="1dc0d-252">Stack Overflow: Jenkins</span><span class="sxs-lookup"><span data-stu-id="1dc0d-252">Stack Overflow Jenkins</span></span>](https://stackoverflow.com/tags/jenkins/info)

<span data-ttu-id="1dc0d-253">Weitere Best Practices der Jenkins-Community finden Sie unter [Jenkins best practices][jenkins-best] (Best Practices für Jenkins).</span><span class="sxs-lookup"><span data-stu-id="1dc0d-253">For more best practices from the Jenkins community, visit [Jenkins best practices][jenkins-best].</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="1dc0d-254">Bereitstellen der Lösung</span><span class="sxs-lookup"><span data-stu-id="1dc0d-254">Deploy the solution</span></span>

<span data-ttu-id="1dc0d-255">Führen Sie zum Bereitstellen dieser Architektur die folgenden Schritte aus, um die [Lösungsvorlage für Jenkins in Azure][azure-market] zu installieren, und installieren Sie anschließend die Skripts, mit denen die Überwachung und Notfallwiederherstellung eingerichtet wird.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-255">To deploy this architecture, follow the steps below to install the [solution template for Jenkins on Azure][azure-market], then install the scripts that set up monitoring and disaster recovery in the steps below.</span></span>

### <a name="prerequisites"></a><span data-ttu-id="1dc0d-256">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="1dc0d-256">Prerequisites</span></span>

- <span data-ttu-id="1dc0d-257">Für diese Referenzarchitektur ist ein Azure-Abonnement erforderlich.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-257">This reference architecture requires an Azure subscription.</span></span>
- <span data-ttu-id="1dc0d-258">Zum Erstellen eines Azure-Dienstprinzipals sind Administratorrechte für den Azure AD-Mandanten erforderlich, der dem bereitgestellten Jenkins-Server zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-258">To create an Azure service principal, you must have admin rights to the Azure AD tenant that is associated with the deployed Jenkins server.</span></span>
- <span data-ttu-id="1dc0d-259">Bei diesen Anweisungen wird davon ausgegangen, dass der Jenkins-Administrator gleichzeitig ein Azure-Benutzer ist, der mindestens über die Berechtigung „Mitwirkender“ verfügt.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-259">These instructions assume that the Jenkins administrator is also an Azure user with at least Contributor privileges.</span></span>

### <a name="step-1-deploy-the-jenkins-server"></a><span data-ttu-id="1dc0d-260">Schritt 1: Bereitstellen des Jenkins-Servers</span><span class="sxs-lookup"><span data-stu-id="1dc0d-260">Step 1: Deploy the Jenkins server</span></span>

1. <span data-ttu-id="1dc0d-261">Öffnen Sie in Ihrem Webbrowser das [Azure Marketplace-Image für Jenkins][azure-market], und wählen links auf der Seite **JETZT ANFORDERN** aus.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-261">Open the [Azure Marketplace image for Jenkins][azure-market] in your web browser and select **GET IT NOW** from the left side of the page.</span></span>

2. <span data-ttu-id="1dc0d-262">Sehen Sie sich die Preisdetails an, und wählen Sie **Weiter** aus. Wählen Sie anschließend **Erstellen** aus, um den Jenkins-Server über das Azure-Portal zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-262">Review the pricing details and select **Continue**, then select **Create** to configure the Jenkins server in the Azure portal.</span></span>

<span data-ttu-id="1dc0d-263">Ausführliche Informationen finden Sie unter [Erstellen eines Jenkins-Servers auf einem virtuellen Azure-Linux-Computer über das Azure-Portal][create-jenkins].</span><span class="sxs-lookup"><span data-stu-id="1dc0d-263">For detailed instructions, see [Create a Jenkins server on an Azure Linux VM from the Azure portal][create-jenkins].</span></span> <span data-ttu-id="1dc0d-264">Für diese Referenzarchitektur reicht es, den Server mit der Administratoranmeldung betriebsbereit zu machen.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-264">For this reference architecture, it is sufficient to get the server up and running with the admin logon.</span></span> <span data-ttu-id="1dc0d-265">Anschließend können Sie ihn für die Verwendung verschiedener anderer Dienste bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-265">Then you can provision it to use various other services.</span></span>

### <a name="step-2-set-up-sso"></a><span data-ttu-id="1dc0d-266">Schritt 2: Einrichten von SSO</span><span class="sxs-lookup"><span data-stu-id="1dc0d-266">Step 2: Set up SSO</span></span>

<span data-ttu-id="1dc0d-267">Dieser Schritt wird vom Jenkins-Administrator ausgeführt, der außerdem ein Benutzerkonto im Azure AD-Verzeichnis des Abonnements besitzen und der Rolle „Mitwirkender“ zugewiesen sein muss.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-267">The step is run by the Jenkins administrator, who must also have a user account in the subscription’s Azure AD directory and must be assigned the Contributor role.</span></span>

<span data-ttu-id="1dc0d-268">Verwenden Sie das [Azure AD-Plug-In][configure-azure-ad] aus dem Jenkins Update Center auf dem Jenkins-Server, und befolgen Sie die Anweisungen zum Einrichten von SSO.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-268">Use the [Azure AD Plugin][configure-azure-ad] from the Jenkins Update Center in the Jenkins server and follow the instructions to set up SSO.</span></span>

### <a name="step-3-provision-jenkins-server-with-azure-vm-agent-plugin"></a><span data-ttu-id="1dc0d-269">Schritt 3: Bereitstellen des Jenkins-Servers mit dem Azure-VM-Agent-Plug-In</span><span class="sxs-lookup"><span data-stu-id="1dc0d-269">Step 3: Provision Jenkins server with Azure VM Agent plugin</span></span>

<span data-ttu-id="1dc0d-270">Dieser Schritt wird vom Jenkins-Administrator zum Einrichten des bereits installierten Azure-VM-Agent-Plug-Ins ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-270">The step is run by the Jenkins administrator to set up the Azure VM Agent plugin, which is already installed.</span></span>

<span data-ttu-id="1dc0d-271">Führen Sie zum Konfigurieren des Plug-Ins [diese Schritte][configure-agent] aus.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-271">[Follow these steps to configure the plugin][configure-agent].</span></span> <span data-ttu-id="1dc0d-272">Ein Tutorial zum Einrichten von Dienstprinzipalen für das Plug-In finden Sie unter [Skalieren Ihrer Jenkins-Bereitstellungen für verschiedene Anforderungen mit Azure-VM-Agents][scale-agent].</span><span class="sxs-lookup"><span data-stu-id="1dc0d-272">For a tutorial about setting up service principals for the plugin, see [Scale your Jenkins deployments to meet demand with Azure VM agents][scale-agent].</span></span>

### <a name="step-4-provision-jenkins-server-with-azure-storage"></a><span data-ttu-id="1dc0d-273">Schritt 4: Bereitstellen des Jenkins-Servers mit Azure Storage</span><span class="sxs-lookup"><span data-stu-id="1dc0d-273">Step 4: Provision Jenkins server with Azure Storage</span></span>

<span data-ttu-id="1dc0d-274">Dieser Schritt wird vom Jenkins-Administrator ausgeführt, der das bereits installierte Windows Azure Storage-Plug-In einrichtet.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-274">The step is run by the Jenkins administrator, who sets up the Windows Azure Storage Plugin, which is already installed.</span></span>

<span data-ttu-id="1dc0d-275">Führen Sie zum Konfigurieren des Plug-Ins [diese Schritte][configure-storage] aus.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-275">[Follow these steps to configure the plugin][configure-storage].</span></span>

### <a name="step-5-provision-jenkins-server-with-azure-credential-plugin"></a><span data-ttu-id="1dc0d-276">Schritt 5: Bereitstellen des Jenkins-Servers mit dem Azure Anmeldeinformationen-Plug-In</span><span class="sxs-lookup"><span data-stu-id="1dc0d-276">Step 5: Provision Jenkins server with Azure Credential plugin</span></span>

<span data-ttu-id="1dc0d-277">Dieser Schritt wird vom Jenkins-Administrator zum Einrichten des bereits installierten Azure Anmeldeinformationen-Plug-Ins ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-277">The step is run by the Jenkins administrator to set up the Azure Credential plugin, which is already installed.</span></span>

<span data-ttu-id="1dc0d-278">Führen Sie zum Konfigurieren des Plug-Ins [diese Schritte][configure-credential] aus.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-278">[Follow these steps to configure the plugin][configure-credential].</span></span>

### <a name="step-6-provision-jenkins-server-for-monitoring-by-the-azure-monitor-service"></a><span data-ttu-id="1dc0d-279">Schritt 6: Bereitstellen des Jenkins-Servers für die Überwachung durch den Azure Monitor-Dienst</span><span class="sxs-lookup"><span data-stu-id="1dc0d-279">Step 6: Provision Jenkins server for monitoring by the Azure Monitor Service</span></span>

<span data-ttu-id="1dc0d-280">Befolgen Sie zum Einrichten der Überwachung Ihres Jenkins-Servers die Anweisungen unter [Erstellen von Metrikwarnungen in Azure Monitor für Azure-Dienste – Azure-Portal][create-metric].</span><span class="sxs-lookup"><span data-stu-id="1dc0d-280">To set up monitoring for your Jenkins server, follow the instructions in [Create metric alerts in Azure Monitor for Azure services][create-metric].</span></span>

### <a name="step-7-provision-jenkins-server-with-managed-disks-for-disaster-recovery"></a><span data-ttu-id="1dc0d-281">Schritt 7: Bereitstellen des Jenkins-Servers mit Managed Disks für die Notfallwiederherstellung</span><span class="sxs-lookup"><span data-stu-id="1dc0d-281">Step 7: Provision Jenkins server with Managed Disks for disaster recovery</span></span>

<span data-ttu-id="1dc0d-282">Die Microsoft Jenkins-Produktgruppe hat Notfallwiederherstellungsskripts entwickelt, mit denen ein verwalteter Datenträger zum Speichern des Jenkins-Zustands erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-282">The Microsoft Jenkins product group has created disaster recovery scripts that build a managed disk used to save the Jenkins state.</span></span> <span data-ttu-id="1dc0d-283">Wenn der Server ausfällt, kann sein letzter Zustand wiederhergestellt werden.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-283">If the server goes down, it can be restored to its latest state.</span></span>

<span data-ttu-id="1dc0d-284">Laden Sie die Notfallwiederherstellungsskripts von [GitHub][disaster] herunter, und installieren Sie sie.</span><span class="sxs-lookup"><span data-stu-id="1dc0d-284">Download and run the disaster recovery scripts from [GitHub][disaster].</span></span>

<span data-ttu-id="1dc0d-285">Es wird empfohlen, sich das folgende [Azure-Beispielszenario](/azure/architecture/example-scenario) anzusehen, das veranschaulicht, wie bestimmte Lösungen einige derselben Technologien verwenden:</span><span class="sxs-lookup"><span data-stu-id="1dc0d-285">You may wish to review the following [Azure example scenario](/azure/architecture/example-scenario) that demonstrates specific solutions using some of the same technologies:</span></span>

- [<span data-ttu-id="1dc0d-286">CI/CD-Pipeline für containerbasierte Workloads</span><span class="sxs-lookup"><span data-stu-id="1dc0d-286">CI/CD pipeline for container-based workloads</span></span>](/azure/architecture/example-scenario/apps/devops-with-aks)

<!-- links -->

[acs]: https://aka.ms/azjenkinsacs
[ad-sp]: /azure/active-directory/develop/active-directory-integrating-applications
[app-service]: https://plugins.jenkins.io/azure-app-service
[azure-ad]: /azure/active-directory/
[azure-market]: https://azuremarketplace.microsoft.com/marketplace/apps/azure-oss.jenkins?tab=Overview
[best-practices]: https://jenkins.io/doc/book/architecting-for-scale/
[blob]: /azure/storage/common/storage-java-jenkins-continuous-integration-solution
[configure-azure-ad]: https://plugins.jenkins.io/azure-ad
[configure-agent]: https://plugins.jenkins.io/azure-vm-agents
[configure-credential]: https://plugins.jenkins.io/azure-credentials
[configure-storage]: https://plugins.jenkins.io/windows-azure-storage
[container-agents]: https://aka.ms/azcontaineragent
[create-jenkins]: /azure/jenkins/install-jenkins-solution-template
[create-metric]: /azure/monitoring-and-diagnostics/insights-alerts-portal
[disaster]: https://github.com/Azure/jenkins/tree/master/disaster_recovery
[functions]: https://aka.ms/azjenkinsfunctions
[index]: https://plugins.jenkins.io
[jenkins-best]: https://wiki.jenkins.io/display/JENKINS/Jenkins+Best+Practices
[jenkins-on-azure]: /azure/jenkins/
[key-vault]: /azure/key-vault/
[managed-disk]: /azure/virtual-machines/linux/managed-disks-overview
[matrix]: https://plugins.jenkins.io/matrix-auth
[monitor]: /azure/monitoring-and-diagnostics/
[monitoring-diag]: /azure/architecture/best-practices/monitoring
[multi-master]: https://jenkins.io/doc/book/architecting-for-scale/
[nginx]: https://www.digitalocean.com/community/tutorials/how-to-create-an-ssl-certificate-on-nginx-for-ubuntu-14-04
[nsg]: /azure/virtual-network/virtual-networks-nsg
[quick-start]: /azure/security-center/security-center-get-started
[port443]: /azure/virtual-machines/windows/nsg-quickstart-portal
[premium]: /azure/virtual-machines/linux/premium-storage
[rbac]: /azure/active-directory/role-based-access-control-what-is
[rg]: /azure/azure-resource-manager/resource-group-overview
[scale]: https://jenkins.io/doc/book/architecting-for-scale/
[scale-agent]: /azure/jenkins/jenkins-azure-vm-agents
[selection-guide]: https://jenkins.io/doc/book/hardware-recommendations/
[service-principal]: /azure/active-directory/develop/active-directory-application-objects
[secure-jenkins]: https://jenkins.io/blog/2017/04/20/secure-jenkins-on-azure/
[security-center]: /azure/security-center/security-center-intro
[sizes-linux]: /azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json
[solution]: https://azure.microsoft.com/blog/announcing-the-solution-template-for-jenkins-on-azure/
[sla]: https://azure.microsoft.com/support/legal/sla/virtual-machines/
[storage-plugin]: https://wiki.jenkins.io/display/JENKINS/Windows+Azure+Storage+Plugin
[subnet]: /azure/virtual-network/virtual-network-manage-subnet
[vm-agent]: https://wiki.jenkins.io/display/JENKINS/Azure+VM+Agents+plugin
[vnet]: /azure/virtual-network/virtual-networks-overview
[0]: ./images/jenkins-server.png
