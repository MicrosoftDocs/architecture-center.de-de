---
title: Bereitstellen von SAP NetWeaver und SAP HANA in Azure
description: "Enthält die bewährten Methoden zum Ausführen von SAP HANA in einer Hochverfügbarkeitsumgebung in Azure."
author: njray
ms.date: 06/29/2017
ms.openlocfilehash: 27a97103c0c6f305cb8e830d670c8d0ba7e22aa5
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/14/2017
---
# <a name="deploy-sap-netweaver-and-sap-hana-on-azure"></a><span data-ttu-id="952a7-103">Bereitstellen von SAP NetWeaver und SAP HANA in Azure</span><span class="sxs-lookup"><span data-stu-id="952a7-103">Deploy SAP NetWeaver and SAP HANA on Azure</span></span>

<span data-ttu-id="952a7-104">Anhand dieser Referenzarchitektur werden einige bewährte Methoden für die Ausführung von SAP HANA in einer Hochverfügbarkeitsumgebung in Azure veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="952a7-104">This reference architecture shows a set of proven practices for running SAP HANA in a high availability environment on Azure.</span></span> [<span data-ttu-id="952a7-105">**Stellen Sie diese Lösung bereit**.</span><span class="sxs-lookup"><span data-stu-id="952a7-105">**Deploy this solution**.</span></span>](#deploy-the-solution)

<span data-ttu-id="952a7-106">![0][0]</span><span class="sxs-lookup"><span data-stu-id="952a7-106">![0][0]</span></span>

<span data-ttu-id="952a7-107">*Laden Sie eine [Visio-Datei][visio-download] mit dieser Architektur herunter.*</span><span class="sxs-lookup"><span data-stu-id="952a7-107">*Download a [Visio file][visio-download] of this architecture.*</span></span>

> [!NOTE]
> <span data-ttu-id="952a7-108">Zum Bereitstellen dieser Referenzarchitektur ist eine geeignete Lizenzierung von SAP-Produkten und anderen nicht von Microsoft stammenden Technologiekomponenten erforderlich.</span><span class="sxs-lookup"><span data-stu-id="952a7-108">Deploying this reference architecture requires appropriate licensing of SAP products and other non-Microsoft technologies.</span></span> <span data-ttu-id="952a7-109">Informationen zur Partnerschaft zwischen Microsoft und SAP finden Sie unter [SAP HANA in Azure][sap-hana-on-azure].</span><span class="sxs-lookup"><span data-stu-id="952a7-109">For information about the partnership between Microsoft and SAP, see [SAP HANA on Azure][sap-hana-on-azure].</span></span>

## <a name="architecture"></a><span data-ttu-id="952a7-110">Architektur</span><span class="sxs-lookup"><span data-stu-id="952a7-110">Architecture</span></span>

<span data-ttu-id="952a7-111">Diese Architektur besteht aus den folgenden Komponenten:</span><span class="sxs-lookup"><span data-stu-id="952a7-111">The architecture consists of the following components.</span></span>

- <span data-ttu-id="952a7-112">**Virtuelles Netzwerk (VNET)**.</span><span class="sxs-lookup"><span data-stu-id="952a7-112">**Virtual network (VNet)**.</span></span> <span data-ttu-id="952a7-113">Ein VNet ist eine Darstellung eines logisch isolierten Netzwerks in Azure.</span><span class="sxs-lookup"><span data-stu-id="952a7-113">A VNet is a representation of a logically isolated network in Azure.</span></span> <span data-ttu-id="952a7-114">Alle VMs in dieser Referenzarchitektur werden in demselben VNet bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="952a7-114">All of the VMs in this reference architecture are deployed to the same VNet.</span></span> <span data-ttu-id="952a7-115">Das VNet ist in Subnetze unterteilt.</span><span class="sxs-lookup"><span data-stu-id="952a7-115">The VNet is further subdivided into subnets.</span></span> <span data-ttu-id="952a7-116">Erstellen Sie ein getrenntes Subnetz für jede Ebene, z.B. Anwendung (SAP NetWeaver), Datenbank (SAP HANA), Verwaltung (Jumpbox) und Active Directory.</span><span class="sxs-lookup"><span data-stu-id="952a7-116">Create a separate subnet for each tier, including application (SAP NetWeaver), database (SAP HANA), management (the jumpbox), and Active Directory.</span></span>

- <span data-ttu-id="952a7-117">**Virtuelle Computer (Virtual Machines, VMs)**:</span><span class="sxs-lookup"><span data-stu-id="952a7-117">**Virtual machines (VMs)**.</span></span> <span data-ttu-id="952a7-118">Die VMs für diese Architektur werden auf mehreren unterschiedlichen Ebenen gruppiert.</span><span class="sxs-lookup"><span data-stu-id="952a7-118">The VMs for this architecture are grouped into several distinct tiers.</span></span>

    - <span data-ttu-id="952a7-119">**SAP NetWeaver**:</span><span class="sxs-lookup"><span data-stu-id="952a7-119">**SAP NetWeaver**.</span></span> <span data-ttu-id="952a7-120">Enthält SAP ASCS, SAP Web Dispatcher und die SAP-Anwendungsserver.</span><span class="sxs-lookup"><span data-stu-id="952a7-120">Includes SAP ASCS, SAP Web Dispatcher, and the SAP application servers.</span></span> 
    
    - <span data-ttu-id="952a7-121">**SAP HANA**:</span><span class="sxs-lookup"><span data-stu-id="952a7-121">**SAP HANA**.</span></span> <span data-ttu-id="952a7-122">In dieser Referenzarchitektur wird SAP HANA für die Datenbankebene verwendet und auf einer einzelnen [GS5][vm-sizes-mem]-Instanz ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="952a7-122">This reference architecture uses SAP HANA for the database tier, running on a single [GS5][vm-sizes-mem] instance.</span></span> <span data-ttu-id="952a7-123">SAP HANA ist für OLAP-Produktionsworkloads auf GS5- oder [SAP HANA auf großen Azure-Instanzen][azure-large-instances] zertifiziert.</span><span class="sxs-lookup"><span data-stu-id="952a7-123">SAP HANA is certified for production OLAP workloads on GS5 or [SAP HANA on Azure Large Instances][azure-large-instances].</span></span> <span data-ttu-id="952a7-124">Diese Referenzarchitektur gilt für virtuelle Azure-Computer der G- und M-Serie.</span><span class="sxs-lookup"><span data-stu-id="952a7-124">This reference architecture is for Azure virtual machines in the G-series and M-series.</span></span> <span data-ttu-id="952a7-125">Informationen zu SAP HANA auf großen Azure-Instanzen finden Sie unter [Übersicht und Architektur von SAP HANA in Azure (große Instanzen)][azure-large-instances].</span><span class="sxs-lookup"><span data-stu-id="952a7-125">For information about SAP HANA on Azure Large Instances, see [SAP HANA (large instances) overview and architecture on Azure][azure-large-instances].</span></span>
   
    - <span data-ttu-id="952a7-126">**Jumpbox**:</span><span class="sxs-lookup"><span data-stu-id="952a7-126">**Jumpbox**.</span></span> <span data-ttu-id="952a7-127">Wird auch als „geschützter Host“ bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="952a7-127">Also called a bastion host.</span></span> <span data-ttu-id="952a7-128">Dies ist eine geschützte VM im Netzwerk, die von Administratoren zum Herstellen der Verbindung mit anderen VMs verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="952a7-128">This is a secure VM on the network that administrators use to connect to the other VMs.</span></span> 
     
    - <span data-ttu-id="952a7-129">**Windows Server Active Directory-Domänencontroller**:</span><span class="sxs-lookup"><span data-stu-id="952a7-129">**Windows Server Active Directory (AD) domain controllers.**</span></span> <span data-ttu-id="952a7-130">Die Domänencontroller werden verwendet, um den Windows Server-Failovercluster zu konfigurieren (siehe unten).</span><span class="sxs-lookup"><span data-stu-id="952a7-130">The domain controllers are used to configure the Windows Server Failover Cluster (see below).</span></span>
 
- <span data-ttu-id="952a7-131">**Verfügbarkeitsgruppen**:</span><span class="sxs-lookup"><span data-stu-id="952a7-131">**Availability sets**.</span></span> <span data-ttu-id="952a7-132">Ordnen Sie die VMs für den SAP Web Dispatcher, SAP-Anwendungsserver und SAP ACSC-Rollen in separaten Verfügbarkeitsgruppen an, und stellen Sie mindestens zwei VMs für jede Rolle bereit.</span><span class="sxs-lookup"><span data-stu-id="952a7-132">Place the VMs for the SAP Web Dispatcher, SAP application server, and SAP ACSC roles into separate availability sets, and provision at least two VMs for each role.</span></span> <span data-ttu-id="952a7-133">Auf diese Weise können die VMs für eine höhere Vereinbarung zum Servicelevel (SLA) genutzt werden.</span><span class="sxs-lookup"><span data-stu-id="952a7-133">This makes the VMs eligible for a higher service level agreement (SLA).</span></span>
    
- <span data-ttu-id="952a7-134">**NICs**:</span><span class="sxs-lookup"><span data-stu-id="952a7-134">**NICs.**</span></span> <span data-ttu-id="952a7-135">Für die VMs, auf denen SAP NetWeaver und SAP HANA ausgeführt werden, sind zwei Netzwerkschnittstellen (NICs) erforderlich.</span><span class="sxs-lookup"><span data-stu-id="952a7-135">The VMs that run SAP NetWeaver and SAP HANA require two network interfaces (NICs).</span></span> <span data-ttu-id="952a7-136">Jede NIC wird einem anderen Subnetz zugewiesen, um unterschiedliche Arten von Datenverkehr aufteilen zu können.</span><span class="sxs-lookup"><span data-stu-id="952a7-136">Each NIC is assigned to a different subnet, to segregate different types of traffic.</span></span> <span data-ttu-id="952a7-137">Weitere Informationen finden Sie unter [Empfehlungen](#recommendations).</span><span class="sxs-lookup"><span data-stu-id="952a7-137">See [Recommendations](#recommendations) below for more information.</span></span>

- <span data-ttu-id="952a7-138">**Windows Server-Failovercluster**:</span><span class="sxs-lookup"><span data-stu-id="952a7-138">**Windows Server Failover Cluster**.</span></span> <span data-ttu-id="952a7-139">Die VMs, auf denen SAP ACSC ausgeführt wird, sind als Failovercluster für Hochverfügbarkeit konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="952a7-139">The VMs that run SAP ACSC are configured as a failover cluster for high availability.</span></span> <span data-ttu-id="952a7-140">Zur Unterstützung des Failoverclusters führt SIOS DataKeeper Cluster Edition den CSV-Vorgang (Cluster Shared Volume, Freigegebenes Clustervolume) durch, indem unabhängige Datenträger repliziert werden, die sich im Besitz der Clusterknoten befinden.</span><span class="sxs-lookup"><span data-stu-id="952a7-140">To support the failover cluster, SIOS DataKeeper Cluster Edition performs the cluster shared volume (CSV) function by replicating independent disks owned by the cluster nodes.</span></span> <span data-ttu-id="952a7-141">Ausführliche Informationen finden Sie unter [Running SAP applications on the Microsoft platform][running-sap] (Ausführen von SAP-Anwendungen auf der Microsoft-Plattform).</span><span class="sxs-lookup"><span data-stu-id="952a7-141">For details, see [Running SAP applications on the Microsoft platform][running-sap].</span></span>
    
- <span data-ttu-id="952a7-142">**Lastenausgleichsmodule**:</span><span class="sxs-lookup"><span data-stu-id="952a7-142">**Load balancers.**</span></span> <span data-ttu-id="952a7-143">Es werden zwei [Azure Load Balancer][azure-lb]-Instanzen verwendet.</span><span class="sxs-lookup"><span data-stu-id="952a7-143">Two [Azure Load Balancer][azure-lb] instances are used.</span></span> <span data-ttu-id="952a7-144">Mit der ersten Instanz, die im Diagramm links dargestellt ist, wird Datenverkehr auf die SAP Web Dispatcher-VMs verteilt.</span><span class="sxs-lookup"><span data-stu-id="952a7-144">The first, shown on the left of the diagram, distributes traffic to the SAP Web Dispatcher VMs.</span></span> <span data-ttu-id="952a7-145">Mit dieser Konfiguration wird die Option für den parallelen Web Dispatcher implementiert, die unter [Hochverfügbarkeit des SAP Web Dispatchers][sap-dispatcher-ha] beschrieben ist.</span><span class="sxs-lookup"><span data-stu-id="952a7-145">This configuration implements the parallel web dispatcher option described in [High Availability of the SAP Web Dispatcher][sap-dispatcher-ha].</span></span> <span data-ttu-id="952a7-146">Das zweite Lastenausgleichsmodul, das im Diagramm auf der rechten Seite dargestellt ist, ermöglicht das Failover im Windows Server-Failovercluster, indem eingehende Verbindungen an den aktiven bzw. fehlerfreien Knoten weitergeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="952a7-146">The second load balancer, shown on the right, enables failover in the Windows Server Failover Cluster, by directing incoming connections to the active/healthy node.</span></span>

- <span data-ttu-id="952a7-147">**VPN Gateway**:</span><span class="sxs-lookup"><span data-stu-id="952a7-147">**VPN Gateway.**</span></span> <span data-ttu-id="952a7-148">Mit dem VPN Gateway wird Ihr lokales Netzwerk auf das Azure VNet erweitert.</span><span class="sxs-lookup"><span data-stu-id="952a7-148">The VPN Gateway extends your on-premises network to the Azure VNet.</span></span> <span data-ttu-id="952a7-149">Sie können auch eine ExpressRoute-Verbindung verwenden, bei der eine dedizierte private Verbindung genutzt wird, die nicht über das öffentliche Internet verläuft.</span><span class="sxs-lookup"><span data-stu-id="952a7-149">You can also use ExpressRoute, which uses a dedicated private connection that does not go over the public Internet.</span></span> <span data-ttu-id="952a7-150">In der Beispiellösung wird das Gateway nicht bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="952a7-150">The example solution does not deploy the gateway.</span></span> <span data-ttu-id="952a7-151">Weitere Informationen finden Sie unter [Connect an on-premises network to Azure][hybrid-networking] (Verbinden eines lokalen Netzwerks mit Azure).</span><span class="sxs-lookup"><span data-stu-id="952a7-151">For more information, see [Connect an on-premises network to Azure][hybrid-networking].</span></span>

## <a name="recommendations"></a><span data-ttu-id="952a7-152">Recommendations</span><span class="sxs-lookup"><span data-stu-id="952a7-152">Recommendations</span></span>

<span data-ttu-id="952a7-153">Ihre Anforderungen können von der hier beschriebenen Architektur abweichen.</span><span class="sxs-lookup"><span data-stu-id="952a7-153">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="952a7-154">Verwenden Sie diese Empfehlungen als Ausgangspunkt.</span><span class="sxs-lookup"><span data-stu-id="952a7-154">Use these recommendations as a starting point.</span></span>

### <a name="load-balancers"></a><span data-ttu-id="952a7-155">Load Balancer</span><span class="sxs-lookup"><span data-stu-id="952a7-155">Load balancers</span></span>

<span data-ttu-id="952a7-156">[SAP Web Dispatcher][sap-dispatcher] verarbeitet den Lastenausgleich für HTTP(S)-Datenverkehr von Dualstapel-Servern (ABAP und Java).</span><span class="sxs-lookup"><span data-stu-id="952a7-156">[SAP Web Dispatcher][sap-dispatcher] handles load balancing of HTTP(S) traffic to dual-stack servers (ABAP and Java).</span></span> <span data-ttu-id="952a7-157">SAP legt den Schwerpunkt schon seit Jahren auf Einzelstapel-Anwendungsserver, sodass sehr wenige Anwendungen heutzutage unter einem Dualstapel-Bereitstellungsmodell ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="952a7-157">SAP has advocated single-stack application servers for years, so very few applications run on a dual-stack deployment model nowadays.</span></span> <span data-ttu-id="952a7-158">Mit dem im Architekturdiagramm implementierten Azure Load Balancer wird der Hochverfügbarkeitscluster für den SAP Web Dispatcher implementiert.</span><span class="sxs-lookup"><span data-stu-id="952a7-158">The Azure load balancer shown in the architecture diagram implements the high availability cluster for the SAP Web Dispatcher.</span></span>

<span data-ttu-id="952a7-159">Der Lastenausgleich des Datenverkehrs zu den Anwendungsservern wird intern bei SAP durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="952a7-159">Load balancing of traffic to the application servers is handled within SAP.</span></span> <span data-ttu-id="952a7-160">Für Datenverkehr von SAPGUI-Clients, die eine Verbindung mit einem SAP-Server per DIAG und über Remotefunktionsaufrufe herstellen, nimmt der SCS-Nachrichtenserver den Lastenausgleich vor, indem SAP App Server-[Anmeldegruppen][logon-groups] erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="952a7-160">For traffic from SAPGUI clients connecting to a SAP server via DIAG and Remote Function Calls (RFC), the SCS message server balances the load by creating SAP App Server [Logon Groups][logon-groups].</span></span> 

<span data-ttu-id="952a7-161">SMLG ist eine SAP ABAP-Transaktion zum Verwalten der Lastenausgleichsfunktion von SAP Central Services für die Anmeldung.</span><span class="sxs-lookup"><span data-stu-id="952a7-161">SMLG is an SAP ABAP transaction used to manage the logon load balancing capability of SAP Central Services.</span></span> <span data-ttu-id="952a7-162">Der Back-End-Pool der Anmeldegruppe enthält mehr als einen ABAP-Anwendungsserver.</span><span class="sxs-lookup"><span data-stu-id="952a7-162">The backend pool of the logon group has more than one ABAP application server.</span></span> <span data-ttu-id="952a7-163">Clients, die auf ASCS-Clusterdienste zugreifen, stellen über eine Front-End-IP-Adresse eine Verbindung mit dem Azure Load Balancer her.</span><span class="sxs-lookup"><span data-stu-id="952a7-163">Clients accessing ASCS cluster services connect to the Azure load balancer through a frontend IP address.</span></span> <span data-ttu-id="952a7-164">Der Name des virtuellen Netzwerks für den ASCS-Cluster verfügt auch über eine IP-Adresse.</span><span class="sxs-lookup"><span data-stu-id="952a7-164">The ASCS cluster virtual network name also has an IP address.</span></span> <span data-ttu-id="952a7-165">Optional kann diese Adresse einer zusätzlichen IP-Adresse im Azure Load Balancer zugeordnet werden, damit für den Cluster die Remoteverwaltung ermöglicht wird.</span><span class="sxs-lookup"><span data-stu-id="952a7-165">Optionally, this address can be associated with an additional IP address on the Azure load balancer, so that the cluster can be managed remotely.</span></span>  

### <a name="nics"></a><span data-ttu-id="952a7-166">NICs</span><span class="sxs-lookup"><span data-stu-id="952a7-166">NICs</span></span>

<span data-ttu-id="952a7-167">Für Verwaltungsfunktionen der SAP-Landschaft ist die Aufteilung des Serverdatenverkehrs auf verschiedene NICs erforderlich.</span><span class="sxs-lookup"><span data-stu-id="952a7-167">SAP landscape management functions require segregation of server traffic on different NICs.</span></span> <span data-ttu-id="952a7-168">Beispielsweise sollten Geschäftsdaten von Verwaltungs- und Sicherungsdatenverkehr getrennt werden.</span><span class="sxs-lookup"><span data-stu-id="952a7-168">For example, business data should be separated from administrative traffic and backup traffic.</span></span> <span data-ttu-id="952a7-169">Die Zuweisung mehrerer NICs zu unterschiedlichen Subnetzen ermöglicht diese Datentrennung.</span><span class="sxs-lookup"><span data-stu-id="952a7-169">Assigning multiple NICs to different subnets enables this data segregation.</span></span> <span data-ttu-id="952a7-170">Weitere Informationen finden Sie im Abschnitt „Network“ (Netzwerk) der PDF-Datei [Building High Availability for SAP NetWeaver and SAP HANA][sap-ha] (Ermöglichen von Hochverfügbarkeit für SAP NetWeaver und SAP HANA).</span><span class="sxs-lookup"><span data-stu-id="952a7-170">For more information, see "Network" in [Building High Availability for SAP NetWeaver and SAP HANA][sap-ha] (PDF).</span></span>

<span data-ttu-id="952a7-171">Weisen Sie die NIC für die Verwaltung dem Verwaltungssubnetz und die NIC für die Datenkommunikation einem separaten Subnetz zu.</span><span class="sxs-lookup"><span data-stu-id="952a7-171">Assign the administration NIC to the management subnet, and assign the data communication NIC to a separate subnet.</span></span> <span data-ttu-id="952a7-172">Ausführliche Informationen zur Konfiguration finden Sie unter [Erstellen und Verwalten eines virtuellen Windows-Computers mit mehreren Netzwerkkarten][multiple-vm-nics].</span><span class="sxs-lookup"><span data-stu-id="952a7-172">For configuration details, see [Create and manage a Windows virtual machine that has multiple NICs][multiple-vm-nics].</span></span>

### <a name="azure-storage"></a><span data-ttu-id="952a7-173">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="952a7-173">Azure Storage</span></span>

<span data-ttu-id="952a7-174">Wir empfehlen für alle Datenbankserver-VMs die Verwendung von Azure Storage Premium, um eine einheitliche Wartezeit für Lese- und Schreibvorgänge zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="952a7-174">With all database server VMs, we recommend using Azure Premium Storage for consistent read/write latency.</span></span> <span data-ttu-id="952a7-175">Für SAP-Anwendungsserver, z.B. die virtuellen (A)SCS-Computer, können Sie Azure-Standardspeicher verwenden, da die Anwendung im Arbeitsspeicher ausgeführt wird und Datenträger nur für die Protokollierung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="952a7-175">For SAP application servers, including the (A)SCS virtual machines, you can use Azure Standard Storage, because application execution takes place in memory and uses disks for logging only.</span></span>

<span data-ttu-id="952a7-176">Wir empfehlen die Verwendung von [Azure Managed Disks][managed-disks], um die beste Zuverlässigkeit zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="952a7-176">For best reliability, we recommend using [Azure Managed Disks][managed-disks].</span></span> <span data-ttu-id="952a7-177">Mit Managed Disks (verwalteten Datenträgern) stellen Sie sicher, dass die Datenträger für VMs in einer Verfügbarkeitsgruppe isoliert sind, um Single Points of Failure zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="952a7-177">Managed disks ensure that the disks for VMs within an availability set are isolated to avoid single points of failure.</span></span>

> [!NOTE]
> <span data-ttu-id="952a7-178">Derzeit werden für die Resource Manager-Vorlage für diese Referenzarchitektur keine verwalteten Datenträger verwendet.</span><span class="sxs-lookup"><span data-stu-id="952a7-178">Currently the Resource Manager template for this reference architecture does not use managed disks.</span></span> <span data-ttu-id="952a7-179">Es ist geplant, die Vorlage zu aktualisieren, um die Verwendung von verwalteten Datenträgern zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="952a7-179">We are planning to update the template to use managed disks.</span></span>

<span data-ttu-id="952a7-180">Zur Erreichung eines hohen Durchsatzes in Bezug auf IOPS und die Datenträger-Bandbreite gelten für das Azure-Speicherlayout die gängigen Vorgehensweisen zur Leistungsoptimierung für Speichervolumes.</span><span class="sxs-lookup"><span data-stu-id="952a7-180">To achieve high IOPS and disk bandwidth throughput, the common practices in storage volume performance optimization apply to Azure storage layout.</span></span> <span data-ttu-id="952a7-181">Wenn beispielsweise mehrere Datenträger per Striping verknüpft werden, um ein größeres Datenträgervolume zu erstellen, verbessert sich die E/A-Leistung.</span><span class="sxs-lookup"><span data-stu-id="952a7-181">For example, striping multiple disks together to create a larger disk volume improves IO performance.</span></span> <span data-ttu-id="952a7-182">Eine Aktivierung des Lesecaches für Speicherinhalte, die sich in unregelmäßigen Abständen ändern, bewirkt eine höhere Geschwindigkeit beim Datenabruf.</span><span class="sxs-lookup"><span data-stu-id="952a7-182">Enabling the read cache on storage content that changes infrequently enhances the speed of data retrieval.</span></span> <span data-ttu-id="952a7-183">Ausführliche Informationen zu den Leistungsanforderungen finden Sie unter [SAP Note 1943937 – Hardware Configuration Check Tool][sap-1943937] (SAP-Hinweis 1943937 – Tool für die Überprüfung der Hardwarekonfiguration).</span><span class="sxs-lookup"><span data-stu-id="952a7-183">For details about performance requirements, see [SAP note 1943937 - Hardware Configuration Check Tool][sap-1943937].</span></span>

<span data-ttu-id="952a7-184">Für den Sicherungsdatenspeicher empfehlen wir die Verwendung der [kalten Speicherebene][cool-blob-storage] des Azure-Blobspeichers.</span><span class="sxs-lookup"><span data-stu-id="952a7-184">For the backup data store, we recommend using the [cool storage tier][cool-blob-storage] of Azure Blob storage.</span></span> <span data-ttu-id="952a7-185">Die kalte Speicherebene ist eine kostengünstige Möglichkeit zum Speichern von Daten, auf die weniger häufig zugegriffen wird und die eine lange Lebensdauer haben.</span><span class="sxs-lookup"><span data-stu-id="952a7-185">The cool storage tier is a cost-effective way to store data that is less frequently accessed and long-lived.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="952a7-186">Überlegungen zur Skalierbarkeit</span><span class="sxs-lookup"><span data-stu-id="952a7-186">Scalability considerations</span></span>

<span data-ttu-id="952a7-187">Auf der SAP-Anwendungsschicht sind in Azure viele verschiedene VM-Größen für das zentrale Hochskalieren verfügbar.</span><span class="sxs-lookup"><span data-stu-id="952a7-187">At the SAP application layer, Azure offers a wide range of virtual machine sizes for scaling up.</span></span> <span data-ttu-id="952a7-188">Eine umfassende Liste finden Sie unter [SAP Note 1928533 – SAP Applications on Azure: Supported Products and Azure VM Types][sap-1928533] (SAP-Hinweis 1928533 – SAP-Anwendungen in Azure: Unterstützte Produkte und Azure-VM-Typen).</span><span class="sxs-lookup"><span data-stu-id="952a7-188">For an inclusive list, see [SAP note 1928533 - SAP Applications on Azure: Supported Products and Azure VM Types][sap-1928533].</span></span> <span data-ttu-id="952a7-189">Führen Sie das horizontale Hochskalieren durch, indem Sie der Verfügbarkeitsgruppe weitere VMs hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="952a7-189">Scale out by adding more VMs to the availability set.</span></span>

<span data-ttu-id="952a7-190">Für SAP HANA auf virtuellen Azure-Computern mit OLTP- und OLAP-SAP-Anwendungen ist die von SAP zertifizierte VM-Größe „GS5“ mit einer einzelnen VM-Instanz.</span><span class="sxs-lookup"><span data-stu-id="952a7-190">For SAP HANA on Azure virtual machines with both OLTP and OLAP SAP applications, the SAP-certified virtual machine size is GS5 with a single VM instance.</span></span> <span data-ttu-id="952a7-191">Für größere Workloads bietet Microsoft auch [große Azure-Instanzen][azure-large-instances] für SAP HANA auf physischen Servern an, die zusammen in einem zertifizierten Microsoft Azure-Datencenter angeordnet sind. Derzeit ermöglichen diese Datencenter eine Arbeitsspeicherkapazität von bis zu 4 TB für eine einzelne Instanz.</span><span class="sxs-lookup"><span data-stu-id="952a7-191">For larger workloads, Microsoft also offers [Azure Large Instances][azure-large-instances] for SAP HANA on physical servers co-located in a Microsoft Azure certified datacenter, which provides up to 4 TB of memory capacity for a single instance at this time.</span></span> <span data-ttu-id="952a7-192">Die Konfiguration von mehreren Knoten ist auch mit einer Gesamtkapazität des Arbeitsspeichers von bis zu 32 TB möglich.</span><span class="sxs-lookup"><span data-stu-id="952a7-192">Multi-node configuration is also possible with a total memory capacity of up to 32 TB.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="952a7-193">Überlegungen zur Verfügbarkeit</span><span class="sxs-lookup"><span data-stu-id="952a7-193">Availability considerations</span></span>

<span data-ttu-id="952a7-194">Bei dieser verteilten Installation der SAP-Anwendung in einer zentralisierten Datenbank wird die Basisinstallation repliziert, um Hochverfügbarkeit zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="952a7-194">In this distributed installation of the SAP application on a centralized database, the base installation is replicated to achieve high availability.</span></span> <span data-ttu-id="952a7-195">Der Entwurf für die Hochverfügbarkeit variiert für jede Ebene der Architektur:</span><span class="sxs-lookup"><span data-stu-id="952a7-195">For each layer of the architecture, the high availability design varies:</span></span>

- <span data-ttu-id="952a7-196">**Web Dispatcher**:</span><span class="sxs-lookup"><span data-stu-id="952a7-196">**Web Dispatcher.**</span></span> <span data-ttu-id="952a7-197">Hochverfügbarkeit wird über redundante SAP Web Dispatcher-Instanzen mit SAP-Anwendungsdatenverkehr erzielt.</span><span class="sxs-lookup"><span data-stu-id="952a7-197">High availability is achieved with redundant SAP Web Dispatcher instances with SAP application traffic.</span></span> <span data-ttu-id="952a7-198">Informationen hierzu finden Sie in der SAP-Dokumentation unter [SAP Web Dispatcher][swd].</span><span class="sxs-lookup"><span data-stu-id="952a7-198">See [SAP Web Dispatcher][swd] in the SAP Documentation.</span></span>

- <span data-ttu-id="952a7-199">**ASCS**:</span><span class="sxs-lookup"><span data-stu-id="952a7-199">**ASCS.**</span></span> <span data-ttu-id="952a7-200">Zur Sicherstellung der Hochverfügbarkeit von ASCS auf virtuellen Azure-Computern unter Windows wird das Windows Sever-Failoverclustering mit SIOS DataKeeper verwendet, um das freigegebene Clustervolume zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="952a7-200">For high availability of ASCS on Azure Windows virtual machines, Windows Sever Failover Clustering is used with SIOS DataKeeper to implement the cluster shared volume.</span></span> <span data-ttu-id="952a7-201">Implementierungsdetails finden Sie unter [Clustering SAP ASCS on Azure][clustering] (Clustering für SAP ASCS in Azure).</span><span class="sxs-lookup"><span data-stu-id="952a7-201">For implementation details, see [Clustering SAP ASCS on Azure][clustering].</span></span>

- <span data-ttu-id="952a7-202">**Anwendungsserver**:</span><span class="sxs-lookup"><span data-stu-id="952a7-202">**Application servers.**</span></span> <span data-ttu-id="952a7-203">Hochverfügbarkeit wird erzielt, indem für Datenverkehr in einem Pool mit Anwendungsservern ein Lastenausgleich durchgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="952a7-203">High availability is achieved by load balancing traffic within a pool of application servers.</span></span>

- <span data-ttu-id="952a7-204">**Datenbankebene**:</span><span class="sxs-lookup"><span data-stu-id="952a7-204">**Database tier.**</span></span> <span data-ttu-id="952a7-205">In dieser Referenzarchitektur wird eine einzelne SAP HANA-Datenbankinstanz bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="952a7-205">This reference architecture deploys a single SAP HANA database instance.</span></span> <span data-ttu-id="952a7-206">Stellen Sie zur Erreichung der Hochverfügbarkeit mehr als eine Instanz bereit, und verwenden Sie die HANA-Systemreplikation (HSR), um das manuelle Failover zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="952a7-206">For high availability, deploy more than one instance and use HANA System Replication (HSR) to implement manual failover.</span></span> <span data-ttu-id="952a7-207">Zur Aktivierung des automatischen Failovers ist eine Hochverfügbarkeitserweiterung für die jeweilige Linux-Distribution erforderlich.</span><span class="sxs-lookup"><span data-stu-id="952a7-207">To enable automatic failover, an HA extension for the specific Linux distribution is required.</span></span>

### <a name="disaster-recovery-considerations"></a><span data-ttu-id="952a7-208">Überlegungen zur Notfallwiederherstellung</span><span class="sxs-lookup"><span data-stu-id="952a7-208">Disaster recovery considerations</span></span>

<span data-ttu-id="952a7-209">Für jede Ebene wird eine andere Strategie genutzt, um per Notfallwiederherstellung für den erforderlichen Schutz zu sorgen.</span><span class="sxs-lookup"><span data-stu-id="952a7-209">Each tier uses a different strategy to provide disaster recovery (DR) protection.</span></span>

- <span data-ttu-id="952a7-210">**Anwendungsserver**:</span><span class="sxs-lookup"><span data-stu-id="952a7-210">**Application servers.**</span></span> <span data-ttu-id="952a7-211">SAP-Anwendungsserver enthalten keine Geschäftsdaten.</span><span class="sxs-lookup"><span data-stu-id="952a7-211">SAP application servers don't contain business data.</span></span> <span data-ttu-id="952a7-212">In Azure besteht eine einfache Strategie für die Notfallwiederherstellung darin, SAP-Anwendungsserver in einer anderen Region zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="952a7-212">On Azure, a simple DR strategy is to create SAP application servers in another region.</span></span> <span data-ttu-id="952a7-213">Bei Konfigurationsänderungen oder Kernel-Updates auf dem primären Anwendungsserver müssen die gleichen Änderungen auf die VMs in der Region für die Notfallwiederherstellung kopiert werden.</span><span class="sxs-lookup"><span data-stu-id="952a7-213">Upon any configuration changes or kernel updates on the primary application server, the same changes must be copied to VMs in the DR region.</span></span> <span data-ttu-id="952a7-214">Beispielsweise werden die ausführbaren Kerneldateien auf die VMs für die Notfallwiederherstellung kopiert.</span><span class="sxs-lookup"><span data-stu-id="952a7-214">For example, the kernel executables copied to the DR VMs.</span></span>

- <span data-ttu-id="952a7-215">**SAP Central Services**:</span><span class="sxs-lookup"><span data-stu-id="952a7-215">**SAP Central Services.**</span></span> <span data-ttu-id="952a7-216">Auch bei dieser Komponente des SAP-Anwendungsstapels werden keine Geschäftsdaten beibehalten.</span><span class="sxs-lookup"><span data-stu-id="952a7-216">This component of the SAP application stack also doesn't persist business data.</span></span> <span data-ttu-id="952a7-217">Sie können eine VM in der Region für die Notfallwiederherstellung erstellen, die zum Ausführen der SCS-Rolle bestimmt ist.</span><span class="sxs-lookup"><span data-stu-id="952a7-217">You can build a VM in the DR region to run the SCS role.</span></span> <span data-ttu-id="952a7-218">Der einzige Inhalt, der vom primären SCS-Knoten synchronisiert wird, ist der Inhalt der Freigabe **/sapmnt**.</span><span class="sxs-lookup"><span data-stu-id="952a7-218">The only content from the primary SCS node to synchronize is the **/sapmnt** share content.</span></span> <span data-ttu-id="952a7-219">Wenn Konfigurationsänderungen oder Kernel-Updates auf den primären SCS-Servern stattfinden, müssen sie für die SCS-Einheiten der Notfallwiederherstellung wiederholt werden.</span><span class="sxs-lookup"><span data-stu-id="952a7-219">Also, if configuration changes or kernel updates take place on the primary SCS servers, they must be repeated on the DR SCS.</span></span> <span data-ttu-id="952a7-220">Verwenden Sie zum Synchronisieren der beiden Server einfach einen regulär geplanten Kopierauftrag, um **/sapmnt** an den Ort für die Notfallwiederherstellung zu kopieren.</span><span class="sxs-lookup"><span data-stu-id="952a7-220">To synchronize the two servers, simply use a regularly scheduled copy job to copy **/sapmnt** to the DR side.</span></span> <span data-ttu-id="952a7-221">Ausführliche Informationen zum Erstellungs-, Kopier- und Testfailoverprozess erhalten Sie, indem Sie den Artikel [SAP NetWeaver: Building a Hyper-V and Microsoft Azure-based Disaster Recovery Solution][sap-netweaver-dr] (SAP NetWeaver: Erstellen einer Lösung für die Notfallwiederherstellung auf Basis von Hyper-V und Microsoft Azure) herunterladen und unter „4.3.</span><span class="sxs-lookup"><span data-stu-id="952a7-221">For details about the build, copy, and test failover process, download [SAP NetWeaver: Building a Hyper-V and Microsoft Azure–based Disaster Recovery Solution][sap-netweaver-dr], and refer to "4.3.</span></span> <span data-ttu-id="952a7-222">SAP SPOF layer (ASCS)“ (4.3. SAP-SPOF-Schicht (ASCS)) nachsehen.</span><span class="sxs-lookup"><span data-stu-id="952a7-222">SAP SPOF layer (ASCS)."</span></span>

- <span data-ttu-id="952a7-223">**Datenbankebene**:</span><span class="sxs-lookup"><span data-stu-id="952a7-223">**Database tier.**</span></span> <span data-ttu-id="952a7-224">Verwenden Sie für HANA unterstützte Replikationslösungen, z.B. HSR oder Speicherreplikation.</span><span class="sxs-lookup"><span data-stu-id="952a7-224">Use HANA-supported replication solutions such as HSR or Storage Replication.</span></span> 

## <a name="manageability-considerations"></a><span data-ttu-id="952a7-225">Überlegungen zur Verwaltbarkeit</span><span class="sxs-lookup"><span data-stu-id="952a7-225">Manageability considerations</span></span>

<span data-ttu-id="952a7-226">SAP HANA verfügt über eine Sicherungsfunktion, für die die zugrunde liegende Azure-Infrastruktur genutzt wird.</span><span class="sxs-lookup"><span data-stu-id="952a7-226">SAP HANA has a backup feature that uses the underlying Azure infrastructure.</span></span> <span data-ttu-id="952a7-227">Zum Sichern der SAP HANA-Datenbank, die auf virtuellen Azure-Computern ausgeführt wird, werden sowohl die SAP HANA-Momentaufnahme als auch die Azure-Speichermomentaufnahme verwendet, um für die Konsistenz von Sicherungsdateien zu sorgen.</span><span class="sxs-lookup"><span data-stu-id="952a7-227">To back up the SAP HANA database running on Azure virtual machines, both the SAP HANA snapshot and Azure storage snapshot are used to ensure the consistency of backup files.</span></span> <span data-ttu-id="952a7-228">Ausführliche Informationen finden Sie unter [Sicherungsanleitung für SAP HANA in Azure Virtual Machines][hana-backup] und [Fragen zum Azure Backup-Dienst][backup-faq].</span><span class="sxs-lookup"><span data-stu-id="952a7-228">For details, see [Backup guide for SAP HANA on Azure Virtual Machines][hana-backup] and the [Azure Backup service FAQ][backup-faq].</span></span>

<span data-ttu-id="952a7-229">In Azure sind mehrere Funktionen für die [Überwachung und Diagnose][monitoring] der Gesamtstruktur enthalten.</span><span class="sxs-lookup"><span data-stu-id="952a7-229">Azure provides several functions for [monitoring and diagnostics][monitoring] of the overall infrastructure.</span></span> <span data-ttu-id="952a7-230">Außerdem wird die erweiterte Überwachung von virtuellen Azure-Computern (Linux oder Windows) von der Azure Operations Management Suite (OMS) durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="952a7-230">Also, enhanced monitoring of Azure virtual machines (Linux or Windows) is handled by Azure Operations Management Suite (OMS).</span></span>

<span data-ttu-id="952a7-231">Verwenden Sie die Azure-Erweiterung für die „Erweiterte Überwachung“ von SAP, um die SAP-basierte Überwachung von Ressourcen und Leistung von Diensten für die SAP-Infrastruktur durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="952a7-231">To provide SAP-based monitoring of resources and service performance of the SAP infrastructure, use the Azure SAP Enhanced Monitoring extension.</span></span> <span data-ttu-id="952a7-232">Mit dieser Erweiterung werden statistische Daten zur Azure-Überwachung in die SAP-Anwendung eingespeist, damit die Betriebssystemüberwachung und DBA Cockpit-Funktionen ermöglicht werden.</span><span class="sxs-lookup"><span data-stu-id="952a7-232">This extension feeds Azure monitoring statistics into the SAP application for operating system monitoring and DBA Cockpit functions.</span></span> 

## <a name="security-considerations"></a><span data-ttu-id="952a7-233">Sicherheitshinweise</span><span class="sxs-lookup"><span data-stu-id="952a7-233">Security considerations</span></span>

<span data-ttu-id="952a7-234">SAP verfügt über ein eigenes Modul für die Benutzerverwaltung (Users Management Engine, UME), um den rollenbasierten Zugriff und die Autorisierung in der SAP-Anwendung zu steuern.</span><span class="sxs-lookup"><span data-stu-id="952a7-234">SAP has its own Users Management Engine (UME) to control role-based access and authorization within the SAP application.</span></span> <span data-ttu-id="952a7-235">Ausführliche Informationen finden Sie unter [SAP HANA Security – An Overview][sap-security] (SAP HANA-Sicherheit – Eine Übersicht).</span><span class="sxs-lookup"><span data-stu-id="952a7-235">For details, see [SAP HANA Security - An Overview][sap-security].</span></span> <span data-ttu-id="952a7-236">(Für den Zugriff ist ein Konto für den SAP Service Marketplace erforderlich.)</span><span class="sxs-lookup"><span data-stu-id="952a7-236">(A SAP Service Marketplace account is required for access.)</span></span>

<span data-ttu-id="952a7-237">Um die Sicherheit der Infrastruktur zu gewährleisten, sind die Daten während der Übertragung und im Ruhezustand geschützt.</span><span class="sxs-lookup"><span data-stu-id="952a7-237">For infrastructure security, data is safeguarded in transit and at rest.</span></span> <span data-ttu-id="952a7-238">Im Abschnitt „Sicherheitshinweise“ des Artikels [Azure Virtual Machines – Planung und Implementierung für SAP NetWeaver][netweaver-on-azure] geht es um die Netzwerksicherheit.</span><span class="sxs-lookup"><span data-stu-id="952a7-238">The “Security considerations” section of the [SAP NetWeaver on Azure Virtual Machines (VMs) – Planning and Implementation Guide][netweaver-on-azure] begins to address network security.</span></span> <span data-ttu-id="952a7-239">In diesem Artikel sind auch die Netzwerkports angegeben, die Sie in den Firewalls öffnen müssen, um die Anwendungskommunikation zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="952a7-239">The guide also specifies the network ports you must open on the firewalls to allow application communication.</span></span> 

<span data-ttu-id="952a7-240">Zum Verschlüsseln von IaaS-VM-Datenträgern (Windows und Linux) können Sie [Azure Disk Encryption][disk-encryption] verwenden.</span><span class="sxs-lookup"><span data-stu-id="952a7-240">To encrypt Windows and Linux IaaS virtual machine disks, you can use [Azure Disk Encryption][disk-encryption].</span></span> <span data-ttu-id="952a7-241">Azure Disk Encryption verwendet das BitLocker-Feature von Windows und das DM-Crypt-Feature von Linux, um die Volumeverschlüsselung für das Betriebssystem und die Datenträger bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="952a7-241">Azure Disk Encryption uses the BitLocker feature of Windows and the DM-Crypt feature of Linux to provide volume encryption for the operating system and the data disks.</span></span> <span data-ttu-id="952a7-242">Die Lösung funktioniert auch für Azure Key Vault, damit Sie die Verschlüsselungsschlüssel und Geheimnisse für die Datenträgerverschlüsselung in Ihrem Key Vault-Abonnement steuern und verwalten können.</span><span class="sxs-lookup"><span data-stu-id="952a7-242">The solution also works with Azure Key Vault to help you control and manage the disk-encryption keys and secrets in your Key Vault subscription.</span></span> <span data-ttu-id="952a7-243">Daten auf den VM-Datenträgern werden in Ihrem Azure-Speicher im ruhenden Zustand verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="952a7-243">Data on the virtual machine disks are encrypted at rest in your Azure storage.</span></span>

<span data-ttu-id="952a7-244">Für die SAP HANA-Verschlüsselung von ruhenden Daten empfehlen wir die Verwendung der nativen SAP HANA-Verschlüsselungstechnologie.</span><span class="sxs-lookup"><span data-stu-id="952a7-244">For SAP HANA data-at-rest encryption, we recommend using the SAP HANA native encryption technology.</span></span>

> [!NOTE]
> <span data-ttu-id="952a7-245">Vermeiden Sie es, die HANA-Verschlüsselung von ruhenden Daten mit Azure Disk Encryption auf demselben Server zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="952a7-245">Don't use the HANA data-at-rest encryption with Azure disk encryption on the same server.</span></span>

<span data-ttu-id="952a7-246">Erwägen Sie die Verwendung von [Netzwerksicherheitsgruppen][nsg] (NSGs), um den Datenverkehr zwischen den verschiedenen Subnetzen im VNet einzuschränken.</span><span class="sxs-lookup"><span data-stu-id="952a7-246">Consider using [network security groups][nsg] (NSGs) to restrict traffic between the various subnets in the VNet.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="952a7-247">Bereitstellen der Lösung</span><span class="sxs-lookup"><span data-stu-id="952a7-247">Deploy the solution</span></span> 

<span data-ttu-id="952a7-248">Die Bereitstellungsskripts für diese Referenzarchitektur sind auf [GitHub][github] verfügbar.</span><span class="sxs-lookup"><span data-stu-id="952a7-248">The deployment scripts for this reference architecture are available on [GitHub][github].</span></span>


### <a name="prerequisites"></a><span data-ttu-id="952a7-249">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="952a7-249">Prerequisites</span></span>

- <span data-ttu-id="952a7-250">Sie müssen Zugriff auf das SAP Software Download Center haben, um die Installation durchführen zu können.</span><span class="sxs-lookup"><span data-stu-id="952a7-250">You must have access to the SAP Software Download Center to complete the installation.</span></span>
 
- <span data-ttu-id="952a7-251">Installieren Sie die neueste Version von [Azure PowerShell][azure-ps].</span><span class="sxs-lookup"><span data-stu-id="952a7-251">Install the latest version of [Azure PowerShell][azure-ps].</span></span> 

- <span data-ttu-id="952a7-252">Für diese Bereitstellung sind 51 Kerne erforderlich.</span><span class="sxs-lookup"><span data-stu-id="952a7-252">This deployment requires 51 cores.</span></span> <span data-ttu-id="952a7-253">Stellen Sie vor dem Bereitstellen sicher, dass Ihr Abonnement über ein ausreichendes Kontingent an VM-Kernen verfügt.</span><span class="sxs-lookup"><span data-stu-id="952a7-253">Before deploying, verify that your subscription has sufficient quota for VM cores.</span></span> <span data-ttu-id="952a7-254">Verwenden Sie das Azure-Portal, um per Supportanfrage ein höheres Kontingent anzufordern, falls diese Voraussetzung nicht erfüllt ist.</span><span class="sxs-lookup"><span data-stu-id="952a7-254">If not, use the Azure portal to submit a support request for more quota.</span></span>
 
- <span data-ttu-id="952a7-255">Für diese Bereitstellung wird eine VM der GS-Serie verwendet.</span><span class="sxs-lookup"><span data-stu-id="952a7-255">This deployment uses a GS-series VM.</span></span> <span data-ttu-id="952a7-256">Überprüfen Sie [hier][region-availability] die Verfügbarkeit der GS-Serie nach Region.</span><span class="sxs-lookup"><span data-stu-id="952a7-256">Check the availability of the GS series per region [here][region-availability].</span></span>

- <span data-ttu-id="952a7-257">Sie können eine Schätzung für die Kosten dieser Bereitstellung erstellen, indem Sie den [Azure-Preisrechner][azure-pricing] nutzen.</span><span class="sxs-lookup"><span data-stu-id="952a7-257">To estimate the cost of this deployment, see the [Azure Pricing Calculator][azure-pricing].</span></span> 
 
<span data-ttu-id="952a7-258">Für diese Referenzarchitektur werden die folgenden VMs bereitgestellt:</span><span class="sxs-lookup"><span data-stu-id="952a7-258">This reference architecture deploys the following VMs:</span></span>

| <span data-ttu-id="952a7-259">Ressourcenname</span><span class="sxs-lookup"><span data-stu-id="952a7-259">Resource name</span></span> | <span data-ttu-id="952a7-260">Größe des virtuellen Computers</span><span class="sxs-lookup"><span data-stu-id="952a7-260">VM Size</span></span> | <span data-ttu-id="952a7-261">Zweck</span><span class="sxs-lookup"><span data-stu-id="952a7-261">Purpose</span></span>  |
|---------------|---------|----------|
| <span data-ttu-id="952a7-262">`ra-sapApps-scs-vm1` ... `ra-sapApps-scs-vmN`</span><span class="sxs-lookup"><span data-stu-id="952a7-262">`ra-sapApps-scs-vm1` ... `ra-sapApps-scs-vmN`</span></span> | <span data-ttu-id="952a7-263">DS11v2</span><span class="sxs-lookup"><span data-stu-id="952a7-263">DS11v2</span></span> | <span data-ttu-id="952a7-264">SAP Central Services</span><span class="sxs-lookup"><span data-stu-id="952a7-264">SAP Central Services</span></span> |
| <span data-ttu-id="952a7-265">`ra-sapApps-vm1` ... `ra-sapApps-vmN`</span><span class="sxs-lookup"><span data-stu-id="952a7-265">`ra-sapApps-vm1` ... `ra-sapApps-vmN`</span></span> | <span data-ttu-id="952a7-266">DS11v2</span><span class="sxs-lookup"><span data-stu-id="952a7-266">DS11v2</span></span> | <span data-ttu-id="952a7-267">SAP NetWeaver-Anwendung</span><span class="sxs-lookup"><span data-stu-id="952a7-267">SAP NetWeaver application</span></span> |
| <span data-ttu-id="952a7-268">`ra-sap-wdp-vm1` ... `ra-sap-wdp-vmN`</span><span class="sxs-lookup"><span data-stu-id="952a7-268">`ra-sap-wdp-vm1` ... `ra-sap-wdp-vmN`</span></span> | <span data-ttu-id="952a7-269">DS11v2</span><span class="sxs-lookup"><span data-stu-id="952a7-269">DS11v2</span></span> | <span data-ttu-id="952a7-270">SAP Web Dispatcher</span><span class="sxs-lookup"><span data-stu-id="952a7-270">SAP Web Dispatcher</span></span> |
| `ra-sap-data-vm1` | <span data-ttu-id="952a7-271">GS5</span><span class="sxs-lookup"><span data-stu-id="952a7-271">GS5</span></span> | <span data-ttu-id="952a7-272">SAP HANA-Datenbankinstanz</span><span class="sxs-lookup"><span data-stu-id="952a7-272">SAP HANA database instance</span></span> |
| `ra-sap-jumpbox-vm1` | <span data-ttu-id="952a7-273">DS1V2</span><span class="sxs-lookup"><span data-stu-id="952a7-273">DS1V2</span></span> | <span data-ttu-id="952a7-274">Jumpbox</span><span class="sxs-lookup"><span data-stu-id="952a7-274">Jumpbox</span></span> |

<span data-ttu-id="952a7-275">Es wird eine einzelne SAP HANA-Instanz bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="952a7-275">A single SAP HANA instance is deployed.</span></span> <span data-ttu-id="952a7-276">Für die Anwendungs-VMs wird die Anzahl von bereitzustellenden Instanzen in den Vorlagenparametern angegeben.</span><span class="sxs-lookup"><span data-stu-id="952a7-276">For the application VMs, the number of instances to deploy is specified in the template parameters.</span></span>

### <a name="deploy-sap-infrastructure"></a><span data-ttu-id="952a7-277">Bereitstellen der SAP-Infrastruktur</span><span class="sxs-lookup"><span data-stu-id="952a7-277">Deploy SAP infrastructure</span></span>

<span data-ttu-id="952a7-278">Sie können diese Architektur inkrementell oder auf einmal bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="952a7-278">You can deploy this architecture incrementally or all at once.</span></span> <span data-ttu-id="952a7-279">Für die erste Bereitstellung empfehlen wir eine inkrementelle Vorgehensweise, damit Sie verfolgen können, was bei den einzelnen Bereitstellungsschritten passiert.</span><span class="sxs-lookup"><span data-stu-id="952a7-279">The first time, we recommend an incremental deployment, so that you can see what each deployment step does.</span></span> <span data-ttu-id="952a7-280">Geben Sie das Inkrement an, indem Sie einen der folgenden *mode*-Parameter verwenden.</span><span class="sxs-lookup"><span data-stu-id="952a7-280">Specify the increment using one of the following *mode* parameters</span></span>

| <span data-ttu-id="952a7-281">Mode</span><span class="sxs-lookup"><span data-stu-id="952a7-281">Mode</span></span>           | <span data-ttu-id="952a7-282">Funktionsbeschreibung</span><span class="sxs-lookup"><span data-stu-id="952a7-282">What it does</span></span>                                                                                                            |
|----------------|-----------------------------------------------------|
| <span data-ttu-id="952a7-283">infrastructure</span><span class="sxs-lookup"><span data-stu-id="952a7-283">infrastructure</span></span> | <span data-ttu-id="952a7-284">Stellt die Netzwerkinfrastruktur in Azure bereit.</span><span class="sxs-lookup"><span data-stu-id="952a7-284">Deploys the network infrastructure in Azure.</span></span>        |
| <span data-ttu-id="952a7-285">workload</span><span class="sxs-lookup"><span data-stu-id="952a7-285">workload</span></span>       | <span data-ttu-id="952a7-286">Stellt die SAP-Server im Netzwerk bereit.</span><span class="sxs-lookup"><span data-stu-id="952a7-286">Deploys the SAP servers to the network.</span></span>             |
| <span data-ttu-id="952a7-287">all</span><span class="sxs-lookup"><span data-stu-id="952a7-287">all</span></span>            | <span data-ttu-id="952a7-288">Stellt alle vorherigen Bereitstellungen bereit.</span><span class="sxs-lookup"><span data-stu-id="952a7-288">Deploys all the preceding deployments.</span></span>              |

<span data-ttu-id="952a7-289">Führen Sie die folgenden Schritte aus, um die Lösung bereitzustellen:</span><span class="sxs-lookup"><span data-stu-id="952a7-289">To deploy the solution, perform the following steps:</span></span>

1. <span data-ttu-id="952a7-290">Laden Sie das [GitHub-Repository][github] auf Ihren lokalen Computer herunter, oder klonen Sie es.</span><span class="sxs-lookup"><span data-stu-id="952a7-290">Download or clone the [GitHub repo][github] to your local computer.</span></span>

2. <span data-ttu-id="952a7-291">Öffnen Sie ein PowerShell-Fenster, und navigieren Sie zum Ordner `/sap/sap-hana/`.</span><span class="sxs-lookup"><span data-stu-id="952a7-291">Open a PowerShell window and navigate to the `/sap/sap-hana/` folder.</span></span>

3. <span data-ttu-id="952a7-292">Führen Sie das folgende PowerShell-Cmdlet aus.</span><span class="sxs-lookup"><span data-stu-id="952a7-292">Run the following PowerShell cmdlet.</span></span> <span data-ttu-id="952a7-293">Geben Sie für `<subscription id>` Ihre Azure-Abonnement-ID ein.</span><span class="sxs-lookup"><span data-stu-id="952a7-293">For `<subscription id>`, use your Azure subscription ID.</span></span> <span data-ttu-id="952a7-294">Geben Sie für `<location>` eine Azure-Region an, z.B. `eastus` oder `westus`.</span><span class="sxs-lookup"><span data-stu-id="952a7-294">For `<location>`, specify an Azure region, such as `eastus` or `westus`.</span></span> <span data-ttu-id="952a7-295">Geben Sie für `<mode>` einen der oben aufgeführten Modi an.</span><span class="sxs-lookup"><span data-stu-id="952a7-295">For `<mode>`, specify one of the modes listed above.</span></span>

    ```powershell
     .\Deploy-ReferenceArchitecture -SubscriptionId <subscription id> -Location <location> -ResourceGroupName <resource group> <mode>
    ```

4.  <span data-ttu-id="952a7-296">Melden Sie sich an Ihrem Azure-Konto an, wenn die Aufforderung angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="952a7-296">When prompted, log on to your Azure account.</span></span> 

<span data-ttu-id="952a7-297">Je nach ausgewähltem Modus kann es mehrere Stunden dauern, bis die Bereitstellungsskripts abgeschlossen sind.</span><span class="sxs-lookup"><span data-stu-id="952a7-297">The deployment scripts can take up to several hours to complete, depending on the mode you selected.</span></span>

> [!WARNING]
> <span data-ttu-id="952a7-298">Die Parameterdateien enthalten an verschiedenen Stellen ein hartcodiertes Kennwort (`AweS0me@PW`).</span><span class="sxs-lookup"><span data-stu-id="952a7-298">The parameter files include a hard-coded password (`AweS0me@PW`) in various places.</span></span> <span data-ttu-id="952a7-299">Ändern Sie diese Werte vor der Bereitstellung.</span><span class="sxs-lookup"><span data-stu-id="952a7-299">Change these values before you deploy.</span></span>
 
### <a name="configure-sap-applications-and-database"></a><span data-ttu-id="952a7-300">Konfigurieren der SAP-Anwendungen und der Datenbank</span><span class="sxs-lookup"><span data-stu-id="952a7-300">Configure SAP applications and database</span></span>

<span data-ttu-id="952a7-301">Führen Sie nach dem Bereitstellen der SAP-Infrastruktur wie unten angegeben auf den virtuellen Computern die Installation und Konfiguration Ihrer SAP-Anwendungen und der HANA-Datenbank durch.</span><span class="sxs-lookup"><span data-stu-id="952a7-301">After deploying the SAP infrastructure, install and configure your SAP applications and HANA database on the virtual machines as follows.</span></span>

> [!NOTE]
> <span data-ttu-id="952a7-302">Für die SAP-Installationsanleitung müssen Sie über einen SAP Support Portal-Benutzernamen und ein Kennwort zum Herunterladen der [SAP-Installationsleitfäden][sap-guide] verfügen.</span><span class="sxs-lookup"><span data-stu-id="952a7-302">For SAP installation instructions, you must have a SAP Support Portal username and password to download the [SAP installation guides][sap-guide].</span></span>

1. <span data-ttu-id="952a7-303">Melden Sie sich an der Jumpbox (`ra-sap-jumpbox-vm1`) an.</span><span class="sxs-lookup"><span data-stu-id="952a7-303">Log into the jumpbox (`ra-sap-jumpbox-vm1`).</span></span> <span data-ttu-id="952a7-304">Sie verwenden die Jumpbox zum Anmelden an anderen VMs.</span><span class="sxs-lookup"><span data-stu-id="952a7-304">You will use the jumpbox to log into the other VMs.</span></span> 

2.  <span data-ttu-id="952a7-305">Melden Sie sich für jede VM mit dem Namen `ra-sap-wdp-vm1` ... `ra-sap-wdp-vmN` an der VM an, und installieren und konfigurieren Sie die SAP Web Dispatcher-Instanz gemäß den Schritten im Wiki zur [Web Dispatcher-Installation][sap-dispatcher-install].</span><span class="sxs-lookup"><span data-stu-id="952a7-305">For each VM named `ra-sap-wdp-vm1` ... `ra-sap-wdp-vmN`, log into the VM, and install and configure the SAP Web Dispatcher instance using the steps described in the [Web Dispatcher Installation][sap-dispatcher-install] wiki.</span></span>

3.  <span data-ttu-id="952a7-306">Melden Sie sich mit dem Namen `ra-sap-data-vm1` an der VM an.</span><span class="sxs-lookup"><span data-stu-id="952a7-306">Log into the VM named `ra-sap-data-vm1`.</span></span> <span data-ttu-id="952a7-307">Installieren und konfigurieren Sie die SAP HANA-Datenbankinstanz gemäß [SAP HANA Server Installation and Update Guide][hana-guide] (SAP HANA-Server – Installations- und Updateleitfaden).</span><span class="sxs-lookup"><span data-stu-id="952a7-307">Install and configure the SAP Hana Database instance using the [SAP HANA Server Installation and Update Guide][hana-guide].</span></span>

4. <span data-ttu-id="952a7-308">Melden Sie sich für jede VM mit dem Namen `ra-sapApps-scs-vm1` ... `ra-sapApps-scs-vmN` an der VM an, und installieren und konfigurieren Sie SAP Central Services (SCS) gemäß den [SAP-Installationsleitfäden][sap-guide].</span><span class="sxs-lookup"><span data-stu-id="952a7-308">For each VM named `ra-sapApps-scs-vm1` ... `ra-sapApps-scs-vmN`, log into the VM, and install and configure the SAP Central Services (SCS) using the [SAP installation guides][sap-guide].</span></span>

5.  <span data-ttu-id="952a7-309">Melden Sie sich für jede VM mit dem Namen `ra-sapApps-vm1` ... `ra-sapApps-vmN` an der VM an, und installieren und konfigurieren Sie die SAP NetWeaver-Anwendung gemäß den [SAP-Installationsleitfäden][sap-guide].</span><span class="sxs-lookup"><span data-stu-id="952a7-309">For each VM named `ra-sapApps-vm1` ... `ra-sapApps-vmN`, log into the VM, and install and configure the SAP NetWeaver application using the [SAP installation guides][sap-guide].</span></span>

<span data-ttu-id="952a7-310">**_Mitwirkende dieser Referenzarchitektur_** &mdash; Rick Rainey, Ross Sponholtz, Ben Trinh</span><span class="sxs-lookup"><span data-stu-id="952a7-310">**_Contributors to this reference architecture_** &mdash; Rick Rainey, Ross Sponholtz, Ben Trinh</span></span>

[azure-large-instances]: /azure/virtual-machines/workloads/sap/hana-overview-architecture
[azure-lb]: /azure/load-balancer/load-balancer-overview
[azure-pricing]: https://azure.microsoft.com/pricing/calculator/
[azure-ps]: /powershell/azure/overview
[backup-faq]: /azure/backup/backup-azure-backup-faq
[clustering]: https://blogs.msdn.microsoft.com/saponsqlserver/2015/05/20/clustering-sap-ascs-instance-using-windows-server-failover-cluster-on-microsoft-azure-with-sios-datakeeper-and-azure-internal-load-balancer/
[cool-blob-storage]: /azure/storage/storage-blob-storage-tiers
[disk-encryption]: /azure/security/azure-security-disk-encryption
[github]: https://github.com/mspnp/reference-architectures/tree/master/sap/sap-hana
[hana-backup]: /azure/virtual-machines/workloads/sap/sap-hana-backup-guide
[hana-guide]: https://help.sap.com/viewer/2c1988d620e04368aa4103bf26f17727/2.0.01/en-US/7eb0167eb35e4e2885415205b8383584.html
[hybrid-networking]: ../hybrid-networking/index.md
[logon-groups]: https://wiki.scn.sap.com/wiki/display/SI/ABAP+Logon+Group+based+Load+Balancing
[managed-disks]: /azure/storage/storage-managed-disks-overview
[monitoring]: /azure/architecture/best-practices/monitoring
[multiple-vm-nics]: /azure/virtual-machines/windows/multiple-nics
[netweaver-on-azure]: /azure/virtual-machines/workloads/sap/planning-guide
[nsg]: /azure/virtual-network/virtual-networks-nsg
[region-availability]: https://azure.microsoft.com/regions/services/
[running-SAP]: https://blogs.msdn.microsoft.com/saponsqlserver/2016/06/07/sap-on-sql-general-update-for-customers-partners-june-2016/
[sap-1943937]: https://launchpad.support.sap.com/#/notes/1943937
[sap-1928533]: https://launchpad.support.sap.com/#/notes/1928533
[sap-dispatcher]: https://help.sap.com/doc/saphelp_nw73ehp1/7.31.19/en-US/48/8fe37933114e6fe10000000a421937/frameset.htm
[sap-dispatcher-ha]: https://help.sap.com/doc/saphelp_nw73ehp1/7.31.19/en-US/48/9a9a6b48c673e8e10000000a42189b/frameset.htm
[sap-dispatcher-install]: https://wiki.scn.sap.com/wiki/display/SI/Web+Dispatcher+Installation
[sap-guide]: https://service.sap.com/instguides
[sap-ha]: https://support.sap.com/content/dam/SAAP/SAP_Activate/AGS_70.pdf
[sap-hana-on-azure]: https://azure.microsoft.com/services/virtual-machines/sap-hana/
[sap-netweaver-dr]: http://download.microsoft.com/download/9/5/6/956FEDC3-702D-4EFB-A7D3-2DB7505566B6/SAP%20NetWeaver%20-%20Building%20an%20Azure%20based%20Disaster%20Recovery%20Solution%20V1_5%20.docx
[sap-security]: https://archive.sap.com/documents/docs/DOC-62943
[visio-download]: https://archcenter.azureedge.net/cdn/SAP-HANA-architecture.vsdx
[vm-sizes-mem]: /azure/virtual-machines/windows/sizes-memory
[swd]: https://help.sap.com/doc/saphelp_nw70ehp2/7.02.16/en-us/48/8fe37933114e6fe10000000a421937/frameset.htm
[0]: ./images/sap-hana.png "SAP HANA-Architektur mit Microsoft Azure"
