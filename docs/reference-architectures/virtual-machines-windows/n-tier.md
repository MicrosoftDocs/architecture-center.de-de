---
title: "Ausführen von Windows-VMs für eine n-schichtige Architektur"
description: "Vorgehensweise zur Implementierung einer mehrschichtigen Architektur in Azure mit Fokus auf eine zuverlässige Verfügbarkeit, Sicherheit, Skalierbarkeit und Verwaltbarkeit"
author: MikeWasson
ms.date: 11/22/2016
pnp.series.title: Windows VM workloads
pnp.series.next: multi-region-application
pnp.series.prev: multi-vm
ms.openlocfilehash: f3c375f8fccc633d9525a8afbd11c13037265f4a
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/14/2017
---
# <a name="run-windows-vms-for-an-n-tier-application"></a><span data-ttu-id="46033-103">Ausführen von Windows-VMs für eine n-schichtige Anwendung</span><span class="sxs-lookup"><span data-stu-id="46033-103">Run Windows VMs for an N-tier application</span></span>

<span data-ttu-id="46033-104">Anhand dieser Referenzarchitektur werden einige bewährte Methoden für die Ausführung virtueller Windows-Computer (VMs) für eine n-schichtige Anwendung veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="46033-104">This reference architecture shows a set of proven practices for running Windows virtual machines (VMs) for an N-tier application.</span></span> [<span data-ttu-id="46033-105">**Stellen Sie diese Lösung bereit**.</span><span class="sxs-lookup"><span data-stu-id="46033-105">**Deploy this solution**.</span></span>](#deploy-the-solution) 

<span data-ttu-id="46033-106">![[0]][0]</span><span class="sxs-lookup"><span data-stu-id="46033-106">![[0]][0]</span></span>

<span data-ttu-id="46033-107">*Laden Sie eine [Visio-Datei][visio-download] mit dieser Architektur herunter.*</span><span class="sxs-lookup"><span data-stu-id="46033-107">*Download a [Visio file][visio-download] of this architecture.*</span></span>

## <a name="architecture"></a><span data-ttu-id="46033-108">Architektur</span><span class="sxs-lookup"><span data-stu-id="46033-108">Architecture</span></span> 

<span data-ttu-id="46033-109">Es gibt viele Möglichkeiten für die Implementierung einer n-schichtigen Architektur.</span><span class="sxs-lookup"><span data-stu-id="46033-109">There are many ways to implement an N-tier architecture.</span></span> <span data-ttu-id="46033-110">Das Diagramm zeigt eine typische 3-schichtige Webanwendung.</span><span class="sxs-lookup"><span data-stu-id="46033-110">The diagram shows a typical 3-tier web application.</span></span> <span data-ttu-id="46033-111">Diese Architektur baut auf den Informationen unter [Run load-balanced VMs for scalability and availability][multi-vm] (Ausführen von VMs mit Lastenausgleich zur Erzielung von Skalierbarkeit und Verfügbarkeit) auf.</span><span class="sxs-lookup"><span data-stu-id="46033-111">This architecture builds on [Run load-balanced VMs for scalability and availability][multi-vm].</span></span> <span data-ttu-id="46033-112">In der Internet- und Unternehmensschicht werden VMs mit Lastenausgleich verwendet.</span><span class="sxs-lookup"><span data-stu-id="46033-112">The web and business tiers use load-balanced VMs.</span></span>

* <span data-ttu-id="46033-113">**Verfügbarkeitsgruppen:**</span><span class="sxs-lookup"><span data-stu-id="46033-113">**Availability sets.**</span></span> <span data-ttu-id="46033-114">Erstellen Sie eine [Verfügbarkeitsgruppe][azure-availability-sets] für jede Schicht, und stellen Sie mindestens zwei VMs in jeder Schicht bereit.</span><span class="sxs-lookup"><span data-stu-id="46033-114">Create an [availability set][azure-availability-sets] for each tier, and provision at least two VMs in each tier.</span></span> <span data-ttu-id="46033-115">Dies berechtigt die VMs zu einer höheren [Vereinbarung zum Servicelevel (SLA)][vm-sla] für VMs.</span><span class="sxs-lookup"><span data-stu-id="46033-115">This makes the VMs eligible for a higher [service level agreement (SLA)][vm-sla] for VMs.</span></span>
* <span data-ttu-id="46033-116">**Subnetze:**</span><span class="sxs-lookup"><span data-stu-id="46033-116">**Subnets.**</span></span> <span data-ttu-id="46033-117">Erstellen Sie für jede Schicht ein separates Subnetz.</span><span class="sxs-lookup"><span data-stu-id="46033-117">Create a separate subnet for each tier.</span></span> <span data-ttu-id="46033-118">Geben Sie mit der [CIDR]-Notation den Adressbereich und die Subnetzmaske an.</span><span class="sxs-lookup"><span data-stu-id="46033-118">Specify the address range and subnet mask using [CIDR] notation.</span></span> 
* <span data-ttu-id="46033-119">**Lastenausgleichsmodule:**</span><span class="sxs-lookup"><span data-stu-id="46033-119">**Load balancers.**</span></span> <span data-ttu-id="46033-120">Verwenden Sie ein [Lastenausgleichsmodul mit Internetzugriff][load-balancer-external], um eingehenden Internetdatenverkehr auf die Internetschicht zu verteilen, und ein [internes Lastenausgleichsmodul][load-balancer-internal], um den Netzwerkdatenverkehr von der Internetschicht auf die Unternehmensschicht zu verteilen.</span><span class="sxs-lookup"><span data-stu-id="46033-120">Use an [Internet-facing load balancer][load-balancer-external] to distribute incoming Internet traffic to the web tier, and an [internal load balancer][load-balancer-internal] to distribute network traffic from the web tier to the business tier.</span></span>
* <span data-ttu-id="46033-121">**Jumpbox:**</span><span class="sxs-lookup"><span data-stu-id="46033-121">**Jumpbox.**</span></span> <span data-ttu-id="46033-122">Wird auch als [geschützter Host] bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="46033-122">Also called a [bastion host].</span></span> <span data-ttu-id="46033-123">Dies ist eine geschützte VM im Netzwerk, die von Administratoren zum Herstellen der Verbindung mit anderen VMs verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="46033-123">A secure VM on the network that administrators use to connect to the other VMs.</span></span> <span data-ttu-id="46033-124">Die Jumpbox verfügt über eine NSG, bei der Remotedatenverkehr nur von öffentlichen IP-Adressen zugelassen wird, die in einer Liste mit sicheren Adressen enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="46033-124">The jumpbox has an NSG that allows remote traffic only from public IP addresses on a safe list.</span></span> <span data-ttu-id="46033-125">Die NSG sollte Remotedesktop-Datenverkehr (RDP) zulassen.</span><span class="sxs-lookup"><span data-stu-id="46033-125">The NSG should permit remote desktop (RDP) traffic.</span></span>
* <span data-ttu-id="46033-126">**Überwachung:**</span><span class="sxs-lookup"><span data-stu-id="46033-126">**Monitoring.**</span></span> <span data-ttu-id="46033-127">Mit Überwachungssoftware wie [Nagios], [Zabbix] oder [Icinga] können Informationen über die Antwortzeit, die VM-Betriebszeit und die allgemeine Integrität Ihres Systems bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="46033-127">Monitoring software such as [Nagios], [Zabbix], or [Icinga] can give you insight into response time, VM uptime, and the overall health of your system.</span></span> <span data-ttu-id="46033-128">Installieren Sie die Überwachungssoftware auf einer VM, die sich in einem separaten Verwaltungssubnetz befindet.</span><span class="sxs-lookup"><span data-stu-id="46033-128">Install the monitoring software on a VM that's placed in a separate management subnet.</span></span>
* <span data-ttu-id="46033-129">**NSGs:**</span><span class="sxs-lookup"><span data-stu-id="46033-129">**NSGs.**</span></span> <span data-ttu-id="46033-130">Verwenden Sie [Netzwerksicherheitsgruppen][nsg] (NSGs), um den Netzwerkdatenverkehr im VNET zu beschränken.</span><span class="sxs-lookup"><span data-stu-id="46033-130">Use [network security groups][nsg] (NSGs) to restrict network traffic within the VNet.</span></span> <span data-ttu-id="46033-131">In der hier gezeigten 3-schichtigen Architektur akzeptiert die Datenbankschicht beispielsweise keinen Datenverkehr vom Web-Front-End, sondern nur von der Unternehmensschicht und dem Verwaltungssubnetz.</span><span class="sxs-lookup"><span data-stu-id="46033-131">For example, in the 3-tier architecture shown here, the database tier does not accept traffic from the web front end, only from the business tier and the management subnet.</span></span>
* <span data-ttu-id="46033-132">**SQL Server Always On-Verfügbarkeitsgruppe:**</span><span class="sxs-lookup"><span data-stu-id="46033-132">**SQL Server Always On Availability Group.**</span></span> <span data-ttu-id="46033-133">Stellt Hochverfügbarkeit in der Datenschicht durch Replikation und Failover bereit.</span><span class="sxs-lookup"><span data-stu-id="46033-133">Provides high availability at the data tier, by enabling replication and failover.</span></span>
* <span data-ttu-id="46033-134">**AD DS-Server (Active Directory Domain Services):**</span><span class="sxs-lookup"><span data-stu-id="46033-134">**Active Directory Domain Services (AD DS) Servers**.</span></span> <span data-ttu-id="46033-135">Bei älteren Versionen als Windows Server 2016 müssen SQL Server Always On-Verfügbarkeitsgruppen Mitglied einer Domäne sein.</span><span class="sxs-lookup"><span data-stu-id="46033-135">Prior to Windows Server 2016, SQL Server Always On Availability Groups must be joined to a domain.</span></span> <span data-ttu-id="46033-136">Dies ist auf die Abhängigkeit der Verfügbarkeitsgruppen von der Windows Server Failover Cluster-Technologie (WSFC) zurückzuführen.</span><span class="sxs-lookup"><span data-stu-id="46033-136">This is because Availability Groups depend on Windows Server Failover Cluster (WSFC) technology.</span></span> <span data-ttu-id="46033-137">Windows Server 2016 bietet die Möglichkeit, einen Failovercluster ohne Active Directory zu erstellen. In diesem Fall sind die AD DS-Server für diese Architektur nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="46033-137">Windows Server 2016 introduces the ability to create a Failover Cluster without Active Directory, in which case the AD DS servers are not required for this architecture.</span></span> <span data-ttu-id="46033-138">Weitere Informationen finden Sie unter [Neuerungen beim Failoverclustering unter Windows Server 2016][wsfc-whats-new].</span><span class="sxs-lookup"><span data-stu-id="46033-138">For more information, see [What's new in Failover Clustering in Windows Server 2016][wsfc-whats-new].</span></span>

## <a name="recommendations"></a><span data-ttu-id="46033-139">Recommendations</span><span class="sxs-lookup"><span data-stu-id="46033-139">Recommendations</span></span>

<span data-ttu-id="46033-140">Ihre Anforderungen können von der hier beschriebenen Architektur abweichen.</span><span class="sxs-lookup"><span data-stu-id="46033-140">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="46033-141">Verwenden Sie diese Empfehlungen als Ausgangspunkt.</span><span class="sxs-lookup"><span data-stu-id="46033-141">Use these recommendations as a starting point.</span></span> 

### <a name="vnet--subnets"></a><span data-ttu-id="46033-142">VNET/Subnetze</span><span class="sxs-lookup"><span data-stu-id="46033-142">VNet / Subnets</span></span>

<span data-ttu-id="46033-143">Legen Sie bei der Erstellung des VNET fest, wie viele IP-Adressen Ihre Ressourcen in jedem Subnetz benötigen.</span><span class="sxs-lookup"><span data-stu-id="46033-143">When you create the VNet, determine how many IP addresses your resources in each subnet require.</span></span> <span data-ttu-id="46033-144">Geben Sie mithilfe der [CIDR-Notation] eine Subnetzmaske und einen VNET-Adressbereich an, der für die erforderlichen IP-Adressen groß genug ist.</span><span class="sxs-lookup"><span data-stu-id="46033-144">Specify a subnet mask and a VNet address range large enough for the required IP addresses, using [CIDR] notation.</span></span> <span data-ttu-id="46033-145">Verwenden Sie einen Adressraum, der in die standardmäßigen [privaten IP-Adressblöcke][private-ip-space] 10.0.0.0/8, 172.16.0.0/12 und 192.168.0.0/16 fällt.</span><span class="sxs-lookup"><span data-stu-id="46033-145">Use an address space that falls within the standard [private IP address blocks][private-ip-space], which are 10.0.0.0/8, 172.16.0.0/12, and 192.168.0.0/16.</span></span>

<span data-ttu-id="46033-146">Wählen Sie einen Adressbereich, der sich nicht mit Ihrem lokalen Netzwerk überschneidet, für den Fall, dass Sie später ein Gateway zwischen dem VNET und dem lokalen Netzwerk einrichten müssen.</span><span class="sxs-lookup"><span data-stu-id="46033-146">Choose an address range that does not overlap with your on-premises network, in case you need to set up a gateway between the VNet and your on-premise network later.</span></span> <span data-ttu-id="46033-147">Sobald Sie das VNET erstellt haben, können Sie den Adressbereich nicht mehr ändern.</span><span class="sxs-lookup"><span data-stu-id="46033-147">Once you create the VNet, you can't change the address range.</span></span>

<span data-ttu-id="46033-148">Entwerfen Sie Subnetze unter Berücksichtigung der Funktionalität und Sicherheitsanforderungen.</span><span class="sxs-lookup"><span data-stu-id="46033-148">Design subnets with functionality and security requirements in mind.</span></span> <span data-ttu-id="46033-149">Alle VMs innerhalb derselben Schicht oder Rolle sollten im selben Subnetz platziert werden, was eine Sicherheitsbegrenzung darstellen kann.</span><span class="sxs-lookup"><span data-stu-id="46033-149">All VMs within the same tier or role should go into the same subnet, which can be a security boundary.</span></span> <span data-ttu-id="46033-150">Weitere Informationen zum Entwerfen von VNETs und Subnetzen finden Sie unter [Planen und Entwerfen von Azure Virtual Networks][plan-network].</span><span class="sxs-lookup"><span data-stu-id="46033-150">For more information about designing VNets and subnets, see [Plan and design Azure Virtual Networks][plan-network].</span></span>

<span data-ttu-id="46033-151">Geben Sie für jedes Subnetz den Adressraum für das Subnetz in CIDR-Notation an.</span><span class="sxs-lookup"><span data-stu-id="46033-151">For each subnet, specify the address space for the subnet in CIDR notation.</span></span> <span data-ttu-id="46033-152">Mit „10.0.0.0/24“ wird beispielsweise ein Bereich von 256 IP-Adressen erstellt.</span><span class="sxs-lookup"><span data-stu-id="46033-152">For example, '10.0.0.0/24' creates a range of 256 IP addresses.</span></span> <span data-ttu-id="46033-153">Von diesen sind 251 für VMs nutzbar; die restlichen fünf sind reserviert.</span><span class="sxs-lookup"><span data-stu-id="46033-153">VMs can use 251 of these; five are reserved.</span></span> <span data-ttu-id="46033-154">Achten Sie darauf, dass sich die Adressbereiche nicht mit anderen Subnetzen überlappen.</span><span class="sxs-lookup"><span data-stu-id="46033-154">Make sure the address ranges don't overlap across subnets.</span></span> <span data-ttu-id="46033-155">Weitere Informationen finden Sie unter [Azure Virtual Network – häufig gestellte Fragen][vnet faq].</span><span class="sxs-lookup"><span data-stu-id="46033-155">See the [Virtual Network FAQ][vnet faq].</span></span>

### <a name="network-security-groups"></a><span data-ttu-id="46033-156">Netzwerksicherheitsgruppen</span><span class="sxs-lookup"><span data-stu-id="46033-156">Network security groups</span></span>

<span data-ttu-id="46033-157">Verwenden Sie NSG-Regeln, um den Datenverkehr zwischen den Schichten zu beschränken.</span><span class="sxs-lookup"><span data-stu-id="46033-157">Use NSG rules to restrict traffic between tiers.</span></span> <span data-ttu-id="46033-158">In der oben gezeigten 3-schichtigen Architektur kommuniziert die Internetschicht beispielsweise nicht direkt mit der Datenbankschicht.</span><span class="sxs-lookup"><span data-stu-id="46033-158">For example, in the 3-tier architecture shown above, the web tier does not communicate directly with the database tier.</span></span> <span data-ttu-id="46033-159">Um dies zu erzwingen, sollte die Datenbankschicht eingehenden Datenverkehr aus dem Subnetz der Internetschicht blockieren.</span><span class="sxs-lookup"><span data-stu-id="46033-159">To enforce this, the database tier should block incoming traffic from the web tier subnet.</span></span>  

1. <span data-ttu-id="46033-160">Erstellen Sie eine NSG, und ordnen Sie diese dem Subnetz der Datenbankschicht zu.</span><span class="sxs-lookup"><span data-stu-id="46033-160">Create an NSG and associate it to the database tier subnet.</span></span>
2. <span data-ttu-id="46033-161">Fügen Sie eine Regel hinzu, die den gesamten eingehenden Datenverkehr vom VNET ablehnt.</span><span class="sxs-lookup"><span data-stu-id="46033-161">Add a rule that denies all inbound traffic from the VNet.</span></span> <span data-ttu-id="46033-162">(Verwenden Sie den `VIRTUAL_NETWORK`-Tag in der Regel.)</span><span class="sxs-lookup"><span data-stu-id="46033-162">(Use the `VIRTUAL_NETWORK` tag in the rule.)</span></span> 
3. <span data-ttu-id="46033-163">Fügen Sie eine Regel mit einer höheren Priorität hinzu, die eingehenden Datenverkehr aus dem Subnetz der Unternehmensschicht zulässt.</span><span class="sxs-lookup"><span data-stu-id="46033-163">Add a rule with a higher priority that allows inbound traffic from the business tier subnet.</span></span> <span data-ttu-id="46033-164">Diese Regel überschreibt die vorherige Regel und ermöglicht die Kommunikation zwischen der Unternehmens- und Datenbankschicht.</span><span class="sxs-lookup"><span data-stu-id="46033-164">This rule overrides the previous rule, and allows the business tier to talk to the database tier.</span></span>
4. <span data-ttu-id="46033-165">Fügen Sie eine Regel hinzu, die eingehenden Datenverkehr innerhalb des Subnetzes der Datenbankschicht selbst zulässt.</span><span class="sxs-lookup"><span data-stu-id="46033-165">Add a rule that allows inbound traffic from within the database tier subnet itself.</span></span> <span data-ttu-id="46033-166">Diese Regel ermöglicht die Kommunikation zwischen VMs in der Datenbankschicht, die für die Replikation und das Failover der Datenbank erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="46033-166">This rule allows communication between VMs in the database tier, which is needed for database replication and failover.</span></span>
5. <span data-ttu-id="46033-167">Fügen Sie eine Regel hinzu, die RDP-Datenverkehr vom Subnetz der Jumpbox zulässt.</span><span class="sxs-lookup"><span data-stu-id="46033-167">Add a rule that allows RDP traffic from the jumpbox subnet.</span></span> <span data-ttu-id="46033-168">Diese Regel erlaubt Administratoren, über die Jumpbox eine Verbindung mit der Datenbankschicht herzustellen.</span><span class="sxs-lookup"><span data-stu-id="46033-168">This rule lets administrators connect to the database tier from the jumpbox.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="46033-169">Eine NSG ist mit Standardregeln versehen, die sämtlichen eingehenden Datenverkehr im VNET zulassen.</span><span class="sxs-lookup"><span data-stu-id="46033-169">An NSG has default rules that allow any inbound traffic from within the VNet.</span></span> <span data-ttu-id="46033-170">Diese Regeln können nicht gelöscht, aber durch die Erstellung von Regeln mit höherer Priorität überschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="46033-170">These rules can't be deleted, but you can override them by creating higher priority rules.</span></span>
   > 
   > 

### <a name="load-balancers"></a><span data-ttu-id="46033-171">Load Balancer</span><span class="sxs-lookup"><span data-stu-id="46033-171">Load balancers</span></span>

<span data-ttu-id="46033-172">Das externe Lastenausgleichsmodul verteilt den Internetdatenverkehr auf die Internetschicht.</span><span class="sxs-lookup"><span data-stu-id="46033-172">The external load balancer distributes Internet traffic to the web tier.</span></span> <span data-ttu-id="46033-173">Erstellen Sie eine öffentliche IP-Adresse für dieses Lastenausgleichsmodul.</span><span class="sxs-lookup"><span data-stu-id="46033-173">Create a public IP address for this load balancer.</span></span> <span data-ttu-id="46033-174">Weitere Informationen finden Sie unter [Erstellen eines Load Balancers mit Internetzugriff im Azure-Portal][lb-external-create].</span><span class="sxs-lookup"><span data-stu-id="46033-174">See [Creating an Internet-facing load balancer][lb-external-create].</span></span>

<span data-ttu-id="46033-175">Das interne Lastenausgleichsmodul verteilt den Netzwerkdatenverkehr von der Internetschicht auf die Unternehmensschicht.</span><span class="sxs-lookup"><span data-stu-id="46033-175">The internal load balancer distributes network traffic from the web tier to the business tier.</span></span> <span data-ttu-id="46033-176">Um diesem Lastenausgleichsmodul eine private IP-Adresse zuzuweisen, erstellen Sie eine Front-End-IP-Konfiguration, und ordnen Sie diese dem Subnetz für die Unternehmensschicht zu.</span><span class="sxs-lookup"><span data-stu-id="46033-176">To give this load balancer a private IP address, create a frontend IP configuration and associate it with the subnet for the business tier.</span></span> <span data-ttu-id="46033-177">Weitere Informationen finden Sie unter [Erstellen eines internen Lastenausgleichs über das Azure-Portal][lb-internal-create].</span><span class="sxs-lookup"><span data-stu-id="46033-177">See [Get started creating an Internal load balancer][lb-internal-create].</span></span>

### <a name="sql-server-always-on-availability-groups"></a><span data-ttu-id="46033-178">SQL Server Always On-Verfügbarkeitsgruppen</span><span class="sxs-lookup"><span data-stu-id="46033-178">SQL Server Always On Availability Groups</span></span>

<span data-ttu-id="46033-179">Um Hochverfügbarkeit von SQL Server zu erzielen, werden [AlwaysOn-Verfügbarkeitsgruppen][sql-alwayson] empfohlen.</span><span class="sxs-lookup"><span data-stu-id="46033-179">We recommend [Always On Availability Groups][sql-alwayson] for SQL Server high availability.</span></span> <span data-ttu-id="46033-180">Bei früheren Versionen als Windows Server 2016 erfordern AlwaysOn-Verfügbarkeitsgruppen einen Domänencontroller, und alle Knoten in der Verfügbarkeitsgruppe müssen sich in der gleichen AD-Domäne befinden.</span><span class="sxs-lookup"><span data-stu-id="46033-180">Prior to Windows Server 2016, Always On Availability Groups require a domain controller, and all nodes in the availability group must be in the same AD domain.</span></span>

<span data-ttu-id="46033-181">Andere Schichten stellen über einen [Verfügbarkeitsgruppenlistener][sql-alwayson-listeners] eine Verbindung mit der Datenbank her.</span><span class="sxs-lookup"><span data-stu-id="46033-181">Other tiers connect to the database through an [availability group listener][sql-alwayson-listeners].</span></span> <span data-ttu-id="46033-182">Mit dem Listener kann ein SQL-Client eine Verbindung herstellen, ohne den Namen der physischen SQL Server-Instanz zu kennen.</span><span class="sxs-lookup"><span data-stu-id="46033-182">The listener enables a SQL client to connect without knowing the name of the physical instance of SQL Server.</span></span> <span data-ttu-id="46033-183">VMs, die auf die Datenbank zugreifen, müssen Mitglied der Domäne sein.</span><span class="sxs-lookup"><span data-stu-id="46033-183">VMs that access the database must be joined to the domain.</span></span> <span data-ttu-id="46033-184">Der Client (in diesem Fall eine andere Schicht) verwendet DNS, um den Namen des virtuellen Netzwerks des Listeners in IP-Adressen aufzulösen.</span><span class="sxs-lookup"><span data-stu-id="46033-184">The client (in this case, another tier) uses DNS to resolve the listener's virtual network name into IP addresses.</span></span>

<span data-ttu-id="46033-185">Konfigurieren Sie die SQL Server-Always On-Verfügbarkeitsgruppe wie folgt:</span><span class="sxs-lookup"><span data-stu-id="46033-185">Configure the SQL Server Always On Availability Group as follows:</span></span>

1. <span data-ttu-id="46033-186">Erstellen Sie einen WSFC-Cluster (Windows Server Failover Clustering), eine SQL Server Always On-Verfügbarkeitsgruppe und ein primäres Replikat.</span><span class="sxs-lookup"><span data-stu-id="46033-186">Create a Windows Server Failover Clustering (WSFC) cluster, a SQL Server Always On Availability Group, and a primary replica.</span></span> <span data-ttu-id="46033-187">Weitere Informationen finden Sie unter [Erste Schritte mit Always On-Verfügbarkeitsgruppen (SQL Server)][sql-alwayson-getting-started].</span><span class="sxs-lookup"><span data-stu-id="46033-187">For more information, see [Getting Started with Always On Availability Groups][sql-alwayson-getting-started].</span></span> 
2. <span data-ttu-id="46033-188">Erstellen Sie ein internes Lastenausgleichsmodul mit einer statischen privaten IP-Adresse.</span><span class="sxs-lookup"><span data-stu-id="46033-188">Create an internal load balancer with a static private IP address.</span></span>
3. <span data-ttu-id="46033-189">Erstellen Sie einen Verfügbarkeitsgruppenlistener, und ordnen Sie den DNS-Namen des Listeners der IP-Adresse eines internen Lastenausgleichsmoduls zu.</span><span class="sxs-lookup"><span data-stu-id="46033-189">Create an availability group listener, and map the listener's DNS name to the IP address of an internal load balancer.</span></span> 
4. <span data-ttu-id="46033-190">Erstellen Sie eine Lastenausgleichsregel für den SQL Server-Überwachungsport (standardmäßig TCP-Port 1433).</span><span class="sxs-lookup"><span data-stu-id="46033-190">Create a load balancer rule for the SQL Server listening port (TCP port 1433 by default).</span></span> <span data-ttu-id="46033-191">Die Lastenausgleichsregel muss *Floating IP*, auch als „Direct Server Return“ bezeichnet, aktivieren.</span><span class="sxs-lookup"><span data-stu-id="46033-191">The load balancer rule must enable *floating IP*, also called Direct Server Return.</span></span> <span data-ttu-id="46033-192">Dies bewirkt, dass die VM direkt auf den Client antwortet, was eine direkte Verbindung mit dem primären Replikat ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="46033-192">This causes the VM to reply directly to the client, which enables a direct connection to the primary replica.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="46033-193">Wenn die Floating IP aktiviert ist, muss die Portnummer des Front-Ends mit der des Back-Ends in der Lastenausgleichsregel übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="46033-193">When floating IP is enabled, the front-end port number must be the same as the back-end port number in the load balancer rule.</span></span>
  > 
  > 

<span data-ttu-id="46033-194">Wenn ein SQL-Client versucht, eine Verbindung herzustellen, leitet das Lastenausgleichsmodul die Verbindungsanforderung an das primäre Replikat weiter.</span><span class="sxs-lookup"><span data-stu-id="46033-194">When a SQL client tries to connect, the load balancer routes the connection request to the primary replica.</span></span> <span data-ttu-id="46033-195">Bei einem Failover zu einem anderen Replikat leitet das Lastenausgleichsmodul nachfolgende Anforderungen automatisch an ein neues primäres Replikat weiter.</span><span class="sxs-lookup"><span data-stu-id="46033-195">If there is a failover to another replica, the load balancer automatically routes subsequent requests to a new primary replica.</span></span> <span data-ttu-id="46033-196">Weitere Informationen finden Sie unter [Konfigurieren eines ILB-Listeners für AlwaysOn-Verfügbarkeitsgruppen in Azure][sql-alwayson-ilb].</span><span class="sxs-lookup"><span data-stu-id="46033-196">For more information, see [Configure an ILB listener for SQL Server Always On Availability Groups][sql-alwayson-ilb].</span></span>

<span data-ttu-id="46033-197">Bei einem Failover werden bestehende Clientverbindungen geschlossen.</span><span class="sxs-lookup"><span data-stu-id="46033-197">During a failover, existing client connections are closed.</span></span> <span data-ttu-id="46033-198">Nachdem das Failover abgeschlossen ist, werden neue Verbindungen an das neue primäre Replikat weitergeleitet.</span><span class="sxs-lookup"><span data-stu-id="46033-198">After the failover completes, new connections will be routed to the new primary replica.</span></span>

<span data-ttu-id="46033-199">Wenn Ihre Anwendung deutlich mehr Lesezugriffe als Schreibzugriffe tätigt, können Sie einige der schreibgeschützten Abfragen in ein sekundäres Replikat auslagern.</span><span class="sxs-lookup"><span data-stu-id="46033-199">If your application makes significantly more reads than writes, you can offload some of the read-only queries to a secondary replica.</span></span> <span data-ttu-id="46033-200">Weitere Informationen finden Sie unter [Verwenden eines Listeners zum Herstellen einer Verbindung mit einem schreibgeschützten sekundären Replikat (schreibgeschütztes Routing)][sql-alwayson-read-only-routing].</span><span class="sxs-lookup"><span data-stu-id="46033-200">See [Using a Listener to Connect to a Read-Only Secondary Replica (Read-Only Routing)][sql-alwayson-read-only-routing].</span></span>

<span data-ttu-id="46033-201">Testen Sie Ihre Bereitstellung, indem Sie [ein manuelles Failover der Verfügbarkeitsgruppe erzwingen][sql-alwayson-force-failover].</span><span class="sxs-lookup"><span data-stu-id="46033-201">Test your deployment by [forcing a manual failover][sql-alwayson-force-failover] of the availability group.</span></span>

### <a name="jumpbox"></a><span data-ttu-id="46033-202">Jumpbox</span><span class="sxs-lookup"><span data-stu-id="46033-202">Jumpbox</span></span>

<span data-ttu-id="46033-203">Die Jumpbox setzt minimale Leistungsanforderungen voraus. Wählen Sie daher eine kleine VM-Größe für die Jumpbox wie „Standard A1“.</span><span class="sxs-lookup"><span data-stu-id="46033-203">The jumpbox will have minimal performance requirements, so select a small VM size for the jumpbox such as Standard A1.</span></span> 

<span data-ttu-id="46033-204">Erstellen Sie eine [öffentliche IP-Adresse] für die Jumpbox.</span><span class="sxs-lookup"><span data-stu-id="46033-204">Create a [public IP address] for the jumpbox.</span></span> <span data-ttu-id="46033-205">Platzieren Sie die Jumpbox in dasselbe VNET wie die anderen VMs, jedoch in ein separates Verwaltungssubnetz.</span><span class="sxs-lookup"><span data-stu-id="46033-205">Place the jumpbox in the same VNet as the other VMs, but in a separate management subnet.</span></span>

<span data-ttu-id="46033-206">Verweigern Sie den RDP-Zugriff über das öffentliche Internet auf die VMs, auf denen die Anwendungsworkload ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="46033-206">Do not allow RDP access from the public Internet to the VMs that run the application workload.</span></span> <span data-ttu-id="46033-207">Der gesamte RDP-Zugriff auf diese VMs muss stattdessen über die Jumpbox erfolgen.</span><span class="sxs-lookup"><span data-stu-id="46033-207">Instead, all RDP access to these VMs must come through the jumpbox.</span></span> <span data-ttu-id="46033-208">Ein Administrator meldet sich bei der Jumpbox und von der Jumpbox aus dann bei der anderen VM an.</span><span class="sxs-lookup"><span data-stu-id="46033-208">An administrator logs into the jumpbox, and then logs into the other VM from the jumpbox.</span></span> <span data-ttu-id="46033-209">Die Jumpbox lässt RDP-Datenverkehr aus dem Internet zu, jedoch nur von bekannten, sicheren IP-Adressen.</span><span class="sxs-lookup"><span data-stu-id="46033-209">The jumpbox allows RDP traffic from the Internet, but only from known, safe IP addresses.</span></span>

<span data-ttu-id="46033-210">Erstellen Sie zum Schutz der Jumpbox eine NSG, und wenden Sie diese auf das Subnetz der Jumpbox an.</span><span class="sxs-lookup"><span data-stu-id="46033-210">To secure the jumpbox, create an NSG and apply it to the jumpbox subnet.</span></span> <span data-ttu-id="46033-211">Fügen Sie eine NSG-Regel hinzu, die ausschließlich RDP-Verbindungen von einer sicheren Gruppe öffentlicher IP-Adressen zulässt.</span><span class="sxs-lookup"><span data-stu-id="46033-211">Add an NSG rule that allows RDP connections only from a safe set of public IP addresses.</span></span> <span data-ttu-id="46033-212">Die NSG kann entweder dem Subnetz oder der Jumpbox-NIC hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="46033-212">The NSG can be attached either to the subnet or to the jumpbox NIC.</span></span> <span data-ttu-id="46033-213">In diesem Fall empfehlen wir, diese der NIC hinzuzufügen, sodass RDP-Datenverkehr nur an die Jumpbox erlaubt ist, auch wenn Sie andere VMs zum selben Subnetz hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="46033-213">In this case, we recommend attaching it to the NIC, so RDP traffic is permitted only to the jumpbox, even if you add other VMs to the same subnet.</span></span>

<span data-ttu-id="46033-214">Konfigurieren Sie die NSGs für die anderen Subnetze, um RDP-Datenverkehr aus dem Verwaltungssubnetz zuzulassen.</span><span class="sxs-lookup"><span data-stu-id="46033-214">Configure the NSGs for the other subnets to allow RDP traffic from the management subnet.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="46033-215">Überlegungen zur Verfügbarkeit</span><span class="sxs-lookup"><span data-stu-id="46033-215">Availability considerations</span></span>

<span data-ttu-id="46033-216">Durch das Vorhandensein mehrerer VMs in der Datenbankschicht wird nicht automatisch eine hochverfügbare Datenbank erstellt.</span><span class="sxs-lookup"><span data-stu-id="46033-216">At the database tier, having multiple VMs does not automatically translate into a highly available database.</span></span> <span data-ttu-id="46033-217">Bei einer relationalen Datenbank müssen Sie in der Regel Replikation und Failover einsetzen, um Hochverfügbarkeit zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="46033-217">For a relational database, you will typically need to use replication and failover to achieve high availability.</span></span> <span data-ttu-id="46033-218">Für SQL Server wird die Verwendung von [AlwaysOn-Verfügbarkeitsgruppen][sql-alwayson] empfohlen.</span><span class="sxs-lookup"><span data-stu-id="46033-218">For SQL Server, we recommend using [Always On Availability Groups][sql-alwayson].</span></span> 

<span data-ttu-id="46033-219">Wenn Sie eine höhere Hochverfügbarkeit benötigen, als die [Azure-SLA für VMs][vm-sla] bietet, replizieren Sie die Anwendung über zwei Regionen, und verwenden Sie für das Failover den Azure Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="46033-219">If you need higher availability than the [Azure SLA for VMs][vm-sla] provides, replicate the application across two regions and use Azure Traffic Manager for failover.</span></span> <span data-ttu-id="46033-220">Weitere Informationen finden Sie unter [Ausführen von Windows-VMs in mehreren Regionen für Hochverfügbarkeit][multi-dc].</span><span class="sxs-lookup"><span data-stu-id="46033-220">For more information, see [Run Windows VMs in multiple regions for high availability][multi-dc].</span></span>   

## <a name="security-considerations"></a><span data-ttu-id="46033-221">Sicherheitshinweise</span><span class="sxs-lookup"><span data-stu-id="46033-221">Security considerations</span></span>

<span data-ttu-id="46033-222">Verschlüsseln Sie sensible ruhende Daten, und verwalten Sie die Datenbankverschlüsselungsschlüssel mithilfe von [Azure Key Vault][azure-key-vault].</span><span class="sxs-lookup"><span data-stu-id="46033-222">Encrypt sensitive data at rest and use [Azure Key Vault][azure-key-vault] to manage the database encryption keys.</span></span> <span data-ttu-id="46033-223">Key Vault kann Verschlüsselungsschlüssel in Hardwaresicherheitsmodulen (HSMs) speichern.</span><span class="sxs-lookup"><span data-stu-id="46033-223">Key Vault can store encryption keys in hardware security modules (HSMs).</span></span> <span data-ttu-id="46033-224">Weitere Informationen finden Sie unter [Konfigurieren der Azure Key Vault-Integration für SQL Server auf virtuellen Azure-Computern (Resource Manager)][sql-keyvault]. Es wird außerdem empfohlen, Anwendungsgeheimnisse wie Datenbankverbindungszeichenfolgen in Key Vault zu speichern.</span><span class="sxs-lookup"><span data-stu-id="46033-224">For more information, see [Configure Azure Key Vault Integration for SQL Server on Azure VMs][sql-keyvault] It's also recommended to store application secrets, such as database connection strings, in Key Vault.</span></span>

<span data-ttu-id="46033-225">Für die Erstellung einer DMZ zwischen dem Internet und dem virtuellen Azure-Netzwerk sollten Sie eventuell eine virtuelle Netzwerkappliance (Network Virtual Appliance, NVA) hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="46033-225">Consider adding a network virtual appliance (NVA) to create a DMZ between the Internet and the Azure virtual network.</span></span> <span data-ttu-id="46033-226">NVA ist ein Oberbegriff für eine virtuelle Appliance, die netzwerkbezogene Aufgaben wie Erstellung von Firewalls, Paketüberprüfung, Überwachung und benutzerdefiniertes Routing ausführen kann.</span><span class="sxs-lookup"><span data-stu-id="46033-226">NVA is a generic term for a virtual appliance that can perform network-related tasks, such as firewall, packet inspection, auditing, and custom routing.</span></span> <span data-ttu-id="46033-227">Weitere Informationen finden Sie unter [Implementieren einer DMZ zwischen Azure und dem Internet][dmz].</span><span class="sxs-lookup"><span data-stu-id="46033-227">For more information, see [Implementing a DMZ between Azure and the Internet][dmz].</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="46033-228">Überlegungen zur Skalierbarkeit</span><span class="sxs-lookup"><span data-stu-id="46033-228">Scalability considerations</span></span>

<span data-ttu-id="46033-229">Die Lastenausgleichsmodule verteilen den Netzwerkdatenverkehr auf die Internet- und Unternehmensschicht.</span><span class="sxs-lookup"><span data-stu-id="46033-229">The load balancers distribute network traffic to the web and business tiers.</span></span> <span data-ttu-id="46033-230">Führen Sie eine horizontale Skalierung durch, indem Sie neue VM-Instanzen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="46033-230">Scale horizontally by adding new VM instances.</span></span> <span data-ttu-id="46033-231">Beachten Sie, dass die Internet- und Unternehmensschicht je nach Auslastung unabhängig voneinander skaliert werden können.</span><span class="sxs-lookup"><span data-stu-id="46033-231">Note that you can scale the web and business tiers independently, based on load.</span></span> <span data-ttu-id="46033-232">Um das Risiko von Komplikationen zu reduzieren, die durch die Notwendigkeit zur Aufrechterhaltung der Clientaffinität verursacht werden, sollten die VMs in der Internetschicht zustandslos sein.</span><span class="sxs-lookup"><span data-stu-id="46033-232">To reduce possible complications caused by the need to maintain client affinity, the VMs in the web tier should be stateless.</span></span> <span data-ttu-id="46033-233">Die VMs, die die Geschäftslogik hosten, sollten ebenfalls zustandslos sein.</span><span class="sxs-lookup"><span data-stu-id="46033-233">The VMs hosting the business logic should also be stateless.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="46033-234">Überlegungen zur Verwaltbarkeit</span><span class="sxs-lookup"><span data-stu-id="46033-234">Manageability considerations</span></span>

<span data-ttu-id="46033-235">Vereinfachen Sie die Verwaltung des gesamten Systems durch den Einsatz von zentralisierten Verwaltungstools wie [Azure Automation][azure-administration], [Microsoft Operations Management Suite][operations-management-suite], [Chef][chef] oder [Puppet][puppet].</span><span class="sxs-lookup"><span data-stu-id="46033-235">Simplify management of the entire system by using centralized administration tools such as [Azure Automation][azure-administration], [Microsoft Operations Management Suite][operations-management-suite], [Chef][chef], or [Puppet][puppet].</span></span> <span data-ttu-id="46033-236">Diese Tools können Diagnose- und Integritätsinformationen konsolidieren, die von mehreren VMs erfasst wurden, um einen allgemeinen Überblick über das System bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="46033-236">These tools can consolidate diagnostic and health information captured from multiple VMs to provide an overall view of the system.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="46033-237">Bereitstellen der Lösung</span><span class="sxs-lookup"><span data-stu-id="46033-237">Deploy the solution</span></span>

<span data-ttu-id="46033-238">Eine Bereitstellung für diese Architektur ist auf [GitHub][github-folder] verfügbar.</span><span class="sxs-lookup"><span data-stu-id="46033-238">A deployment for this architecture is available on [GitHub][github-folder].</span></span> <span data-ttu-id="46033-239">Die Bereitstellung der Architektur erfolgt in drei Phasen.</span><span class="sxs-lookup"><span data-stu-id="46033-239">The architecture is deployed in three stages.</span></span> <span data-ttu-id="46033-240">Um die Architektur bereitzustellen, gehen Sie folgendermaßen vor:</span><span class="sxs-lookup"><span data-stu-id="46033-240">To deploy the architecture, follow these steps:</span></span> 

1. <span data-ttu-id="46033-241">Klicken Sie auf die nachfolgende Schaltfläche, um mit der ersten Phase der Bereitstellung zu beginnen:</span><span class="sxs-lookup"><span data-stu-id="46033-241">Click the button below to begin the first stage of deployment:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Freference-architectures%2Fmaster%2Fvirtual-machines%2Fn-tier-windows%2FvirtualNetwork.azuredeploy.json" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>
2. <span data-ttu-id="46033-242">Nachdem der Link im Azure-Portal geöffnet wurde, geben Sie die folgenden Werte ein:</span><span class="sxs-lookup"><span data-stu-id="46033-242">Once the link has opened in the Azure portal, enter the follow values:</span></span> 
   * <span data-ttu-id="46033-243">Der Name der **Ressourcengruppe** ist bereits in der Parameterdatei definiert. Wählen Sie also **Neu erstellen**, und geben Sie im Textfeld `ra-ntier-sql-network-rg` ein.</span><span class="sxs-lookup"><span data-stu-id="46033-243">The **Resource group** name is already defined in the parameter file, so select **Create New** and enter `ra-ntier-sql-network-rg` in the text box.</span></span>
   * <span data-ttu-id="46033-244">Wählen Sie im Dropdownfeld **Standort** die Region aus.</span><span class="sxs-lookup"><span data-stu-id="46033-244">Select the region from the **Location** drop down box.</span></span>
   * <span data-ttu-id="46033-245">Lassen Sie die Textfelder für den **Vorlagenstamm-URI** bzw. **Parameterstamm-URI** unverändert.</span><span class="sxs-lookup"><span data-stu-id="46033-245">Do not edit the **Template Root Uri** or the **Parameter Root Uri** text boxes.</span></span>
   * <span data-ttu-id="46033-246">Überprüfen Sie die allgemeinen Geschäftsbedingungen, und aktivieren Sie dann das Kontrollkästchen **Ich stimme den oben genannten Geschäftsbedingungen zu**.</span><span class="sxs-lookup"><span data-stu-id="46033-246">Review the terms and conditions, then click the **I agree to the terms and conditions stated above** checkbox.</span></span>
   * <span data-ttu-id="46033-247">Klicken Sie auf die Schaltfläche **Kaufen**.</span><span class="sxs-lookup"><span data-stu-id="46033-247">Click on the **Purchase** button.</span></span>
3. <span data-ttu-id="46033-248">Suchen Sie in den Azure-Portalbenachrichtigungen nach einer Meldung, dass die erste Phase der Bereitstellung abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="46033-248">Check Azure portal notification for a message that the first stage of the deployment is complete.</span></span>
4. <span data-ttu-id="46033-249">Klicken Sie auf die nachfolgende Schaltfläche, um mit der zweiten Phase der Bereitstellung zu beginnen:</span><span class="sxs-lookup"><span data-stu-id="46033-249">Click the button below to begin the second stage of the deployment:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Freference-architectures%2Fmaster%2Fvirtual-machines%2Fn-tier-windows%2Fworkload.azuredeploy.json" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>
5. <span data-ttu-id="46033-250">Nachdem der Link im Azure-Portal geöffnet wurde, geben Sie die folgenden Werte ein:</span><span class="sxs-lookup"><span data-stu-id="46033-250">Once the link has opened in the Azure portal, enter the follow values:</span></span> 
   * <span data-ttu-id="46033-251">Der Name der **Ressourcengruppe** ist bereits in der Parameterdatei definiert. Wählen Sie also **Neu erstellen**, und geben Sie im Textfeld `ra-ntier-sql-workload-rg` ein.</span><span class="sxs-lookup"><span data-stu-id="46033-251">The **Resource group** name is already defined in the parameter file, so select **Create New** and enter `ra-ntier-sql-workload-rg` in the text box.</span></span>
   * <span data-ttu-id="46033-252">Wählen Sie im Dropdownfeld **Standort** die Region aus.</span><span class="sxs-lookup"><span data-stu-id="46033-252">Select the region from the **Location** drop down box.</span></span>
   * <span data-ttu-id="46033-253">Lassen Sie die Textfelder für den **Vorlagenstamm-URI** bzw. **Parameterstamm-URI** unverändert.</span><span class="sxs-lookup"><span data-stu-id="46033-253">Do not edit the **Template Root Uri** or the **Parameter Root Uri** text boxes.</span></span>
   * <span data-ttu-id="46033-254">Überprüfen Sie die allgemeinen Geschäftsbedingungen, und aktivieren Sie dann das Kontrollkästchen **Ich stimme den oben genannten Geschäftsbedingungen zu**.</span><span class="sxs-lookup"><span data-stu-id="46033-254">Review the terms and conditions, then click the **I agree to the terms and conditions stated above** checkbox.</span></span>
   * <span data-ttu-id="46033-255">Klicken Sie auf die Schaltfläche **Kaufen**.</span><span class="sxs-lookup"><span data-stu-id="46033-255">Click on the **Purchase** button.</span></span>
6. <span data-ttu-id="46033-256">Suchen Sie in den Azure-Portalbenachrichtigungen nach einer Meldung, dass die zweite Phase der Bereitstellung abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="46033-256">Check Azure portal notification for a message that the second stage of deployment is complete.</span></span>
7. <span data-ttu-id="46033-257">Klicken Sie auf die nachfolgende Schaltfläche, um mit der dritten Phase der Bereitstellung zu beginnen:</span><span class="sxs-lookup"><span data-stu-id="46033-257">Click the button below to begin the third stage of the deployment:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Freference-architectures%2Fmaster%2Fvirtual-machines%2Fn-tier-windows%2Fsecurity.azuredeploy.json" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>
8. <span data-ttu-id="46033-258">Nachdem der Link im Azure-Portal geöffnet wurde, geben Sie die folgenden Werte ein:</span><span class="sxs-lookup"><span data-stu-id="46033-258">Once the link has opened in the Azure portal, enter the follow values:</span></span> 
   * <span data-ttu-id="46033-259">Der Name der **Ressourcengruppe** ist bereits in der Parameterdatei definiert. Wählen Sie also **Vorhandene verwenden** aus, und geben Sie im Textfeld `ra-ntier-sql-network-rg` ein.</span><span class="sxs-lookup"><span data-stu-id="46033-259">The **Resource group** name is already defined in the parameter file, so select **Use Existing** and enter `ra-ntier-sql-network-rg` in the text box.</span></span>
   * <span data-ttu-id="46033-260">Wählen Sie im Dropdownfeld **Standort** die Region aus.</span><span class="sxs-lookup"><span data-stu-id="46033-260">Select the region from the **Location** drop down box.</span></span>
   * <span data-ttu-id="46033-261">Lassen Sie die Textfelder für den **Vorlagenstamm-URI** bzw. **Parameterstamm-URI** unverändert.</span><span class="sxs-lookup"><span data-stu-id="46033-261">Do not edit the **Template Root Uri** or the **Parameter Root Uri** text boxes.</span></span>
   * <span data-ttu-id="46033-262">Überprüfen Sie die allgemeinen Geschäftsbedingungen, und aktivieren Sie dann das Kontrollkästchen **Ich stimme den oben genannten Geschäftsbedingungen zu**.</span><span class="sxs-lookup"><span data-stu-id="46033-262">Review the terms and conditions, then click the **I agree to the terms and conditions stated above** checkbox.</span></span>
   * <span data-ttu-id="46033-263">Klicken Sie auf die Schaltfläche **Kaufen**.</span><span class="sxs-lookup"><span data-stu-id="46033-263">Click on the **Purchase** button.</span></span>
9. <span data-ttu-id="46033-264">Suchen Sie in den Azure-Portalbenachrichtigungen nach einer Meldung, dass die dritte Phase der Bereitstellung abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="46033-264">Check Azure portal notification for a message that the third stage of the deployment is complete.</span></span>
10. <span data-ttu-id="46033-265">Die Parameterdateien enthalten einen hartcodierten Administratorbenutzernamen und das dazugehörige Kennwort, und es wird dringend empfohlen, beides sofort auf allen VMs zu ändern.</span><span class="sxs-lookup"><span data-stu-id="46033-265">The parameter files include a hard-coded administrator user names and passwords, and it is strongly recommended that you immediately change both on all the VMs.</span></span> <span data-ttu-id="46033-266">Klicken Sie im Azure-Portal auf die einzelnen VMs und auf dem Blatt **Support + Problembehandlung** dann auf **Kennwort zurücksetzen**.</span><span class="sxs-lookup"><span data-stu-id="46033-266">Click on each VM in the Azure portal then click on **Reset password** in the **Support + troubleshooting** blade.</span></span> <span data-ttu-id="46033-267">Wählen Sie im Dropdownfeld **Modus** die Option **Kennwort zurücksetzen**, und wählen Sie dann einen neuen **Benutzernamen** und ein **Kennwort** aus.</span><span class="sxs-lookup"><span data-stu-id="46033-267">Select **Reset password** in the **Mode** dropdown box, then select a new **User name** and **Password**.</span></span> <span data-ttu-id="46033-268">Klicken Sie auf die Schaltfläche **Aktualisieren**, um den neuen Benutzernamen und das Kennwort zu speichern.</span><span class="sxs-lookup"><span data-stu-id="46033-268">Click the **Update** button to save the new user name and password.</span></span> 


<!-- links -->
[dmz]: ../dmz/secure-vnet-dmz.md
[multi-dc]: multi-region-application.md
[multi-vm]: multi-vm.md
[n-tier]: n-tier.md

[azure-administration]: /azure/automation/automation-intro
[azure-availability-sets]: /azure/virtual-machines/virtual-machines-windows-manage-availability#configure-each-application-tier-into-separate-availability-sets
[azure-cli]: /azure/virtual-machines-command-line-tools
[azure-key-vault]: https://azure.microsoft.com/services/key-vault
[geschützter Host]: https://en.wikipedia.org/wiki/Bastion_host
[CIDR]: https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing
[chef]: https://www.chef.io/solutions/azure/
[github-folder]: https://github.com/mspnp/reference-architectures/tree/master/virtual-machines/n-tier-windows
[lb-external-create]: /azure/load-balancer/load-balancer-get-started-internet-portal
[lb-internal-create]: /azure/load-balancer/load-balancer-get-started-ilb-arm-portal
[load-balancer-external]: /azure/load-balancer/load-balancer-internet-overview
[load-balancer-internal]: /azure/load-balancer/load-balancer-internal-overview
[nsg]: /azure/virtual-network/virtual-networks-nsg
[operations-management-suite]: https://www.microsoft.com/server-cloud/operations-management-suite/overview.aspx
[plan-network]: /azure/virtual-network/virtual-network-vnet-plan-design-arm
[private-ip-space]: https://en.wikipedia.org/wiki/Private_network#Private_IPv4_address_spaces
[öffentliche IP-Adresse]: /azure/virtual-network/virtual-network-ip-addresses-overview-arm
[puppet]: https://puppetlabs.com/blog/managing-azure-virtual-machines-puppet
[sql-alwayson]: https://msdn.microsoft.com/library/hh510230.aspx
[sql-alwayson-force-failover]: https://msdn.microsoft.com/library/ff877957.aspx
[sql-alwayson-getting-started]: https://msdn.microsoft.com/library/gg509118.aspx
[sql-alwayson-ilb]: /azure/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-alwayson-int-listener
[sql-alwayson-listeners]: https://msdn.microsoft.com/library/hh213417.aspx
[sql-alwayson-read-only-routing]: https://technet.microsoft.com/library/hh213417.aspx#ConnectToSecondary
[sql-keyvault]: /azure/virtual-machines/virtual-machines-windows-ps-sql-keyvault
[vm-sla]: https://azure.microsoft.com/support/legal/sla/virtual-machines
[vnet faq]: /azure/virtual-network/virtual-networks-faq
[wsfc-whats-new]: https://technet.microsoft.com/windows-server-docs/failover-clustering/whats-new-in-failover-clustering
[Nagios]: https://www.nagios.org/
[Zabbix]: http://www.zabbix.com/
[Icinga]: http://www.icinga.org/
[visio-download]: https://archcenter.azureedge.net/cdn/vm-reference-architectures.vsdx
[0]: ./images/n-tier-diagram.png "n-schichtige Architektur mit Microsoft Azure"