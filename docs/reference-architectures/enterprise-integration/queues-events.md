---
title: Unternehmensintegration mithilfe von Nachrichtenwarteschlangen und Ereignissen
titleSuffix: Azure Reference Architectures
description: Empfohlene Architektur für die Implementierung eines Unternehmensintegrationsmusters in Azure Logic Apps, Azure API Management, Azure Service Bus und Azure Event Grid.
author: mattfarm
ms.reviewer: jonfan, estfan, LADocs
ms.topic: article
ms.date: 12/03/2018
ms.custom: integration-services
ms.openlocfilehash: 6357cb5015c8f10c0f4a8aa1b310ddbb38367004
ms.sourcegitcommit: a0a9981e7586bed8d876a54e055dea1e392118f8
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 12/11/2018
ms.locfileid: "53233862"
---
# <a name="enterprise-integration-on-azure-using-message-queues-and-events"></a><span data-ttu-id="03b5c-103">Unternehmensintegration in Azure mithilfe von Nachrichtenwarteschlangen und Ereignissen</span><span class="sxs-lookup"><span data-stu-id="03b5c-103">Enterprise integration on Azure using message queues and events</span></span>

<span data-ttu-id="03b5c-104">Diese Referenzarchitektur integriert Back-End-Systeme von Unternehmen mithilfe von Nachrichtenwarteschlangen und Ereignissen, um eine Entkoppelung der Dienste und damit eine bessere Skalierbarkeit und Zuverlässigkeit zu erreichen.</span><span class="sxs-lookup"><span data-stu-id="03b5c-104">This reference architecture integrates enterprise backend systems, using message queues and events to decouple services for greater scalability and reliability.</span></span> <span data-ttu-id="03b5c-105">Die Back-End-Systeme können SaaS-Systeme (Software-as-a-Service), Azure-Dienste und vorhandene Webdienste in Ihrem Unternehmen enthalten.</span><span class="sxs-lookup"><span data-stu-id="03b5c-105">The backend systems may include software as a service (SaaS) systems, Azure services, and existing web services in your enterprise.</span></span>

![Referenzarchitektur für die Unternehmensintegration mit Warteschlangen und Ereignissen](./_images/enterprise-integration-queues-events.png)

## <a name="architecture"></a><span data-ttu-id="03b5c-107">Architecture</span><span class="sxs-lookup"><span data-stu-id="03b5c-107">Architecture</span></span>

<span data-ttu-id="03b5c-108">Die hier gezeigte Architektur basiert auf der einfacheren Architektur aus [Einfache Unternehmensintegration][basic-enterprise-integration].</span><span class="sxs-lookup"><span data-stu-id="03b5c-108">The architecture shown here builds on a simpler architecture that is shown in [Basic enterprise integration][basic-enterprise-integration].</span></span> <span data-ttu-id="03b5c-109">Diese Architektur verwendet [Logic Apps][logic-apps] zum Orchestrieren von Workflows und [API Management][apim] zum Erstellen von API-Katalogen.</span><span class="sxs-lookup"><span data-stu-id="03b5c-109">That architecture uses [Logic Apps][logic-apps] to orchestrate workflows and [API Management][apim] to create catalogs of APIs.</span></span>

<span data-ttu-id="03b5c-110">Bei der vorliegenden Version der Architektur werden zwei Komponenten hinzugefügt, um das System zuverlässiger und besser skalierbar zu machen:</span><span class="sxs-lookup"><span data-stu-id="03b5c-110">This version of the architecture adds two components that help make the system more reliable and scalable:</span></span>

- <span data-ttu-id="03b5c-111">**[Azure Service Bus][service-bus]**:</span><span class="sxs-lookup"><span data-stu-id="03b5c-111">**[Azure Service Bus][service-bus]**.</span></span> <span data-ttu-id="03b5c-112">Service Bus ist ein sicherer und zuverlässiger Nachrichtenbroker.</span><span class="sxs-lookup"><span data-stu-id="03b5c-112">Service Bus is a secure, reliable message broker.</span></span>

- <span data-ttu-id="03b5c-113">**[Azure Event Grid][event-grid]**:</span><span class="sxs-lookup"><span data-stu-id="03b5c-113">**[Azure Event Grid][event-grid]**.</span></span> <span data-ttu-id="03b5c-114">Event Grid ist ein Ereignisroutingdienst.</span><span class="sxs-lookup"><span data-stu-id="03b5c-114">Event Grid is an event routing service.</span></span> <span data-ttu-id="03b5c-115">Er verwendet ein Ereignismodell vom Typ [Veröffentlichen/Abonnieren](../../patterns/publisher-subscriber.md).</span><span class="sxs-lookup"><span data-stu-id="03b5c-115">It uses a [publish/subscribe](../../patterns/publisher-subscriber.md) (pub/sub) eventing model.</span></span>

<span data-ttu-id="03b5c-116">Die asynchrone Kommunikation über einen Nachrichtenbroker bietet zahlreiche Vorteile gegenüber synchronen Direktaufrufen für Back-End-Dienste:</span><span class="sxs-lookup"><span data-stu-id="03b5c-116">Asynchronous communication using a message broker provides a number of advantages over making direct, synchronous calls to backend services:</span></span>

- <span data-ttu-id="03b5c-117">Lastenausgleich zur Bewältigung von Workloadspitzen mithilfe des [warteschlangenbasierten Lastenausgleichsmusters](../../patterns/queue-based-load-leveling.md)</span><span class="sxs-lookup"><span data-stu-id="03b5c-117">Provides load-leveling to handle bursts in workloads, using the [Queue-Based Load Leveling pattern](../../patterns/queue-based-load-leveling.md).</span></span>
- <span data-ttu-id="03b5c-118">Zuverlässige Nachverfolgung des Status von Workflows mit langer Laufzeit, die mehrere Schritte oder Anwendungen umfassen</span><span class="sxs-lookup"><span data-stu-id="03b5c-118">Reliably tracks the progress of long-running workflows that involve multiple steps or multiple applications.</span></span>
- <span data-ttu-id="03b5c-119">Entkoppelung von Anwendungen</span><span class="sxs-lookup"><span data-stu-id="03b5c-119">Helps to decouple applications.</span></span>
- <span data-ttu-id="03b5c-120">Integration in vorhandene nachrichtenbasierte Systeme</span><span class="sxs-lookup"><span data-stu-id="03b5c-120">Integrates with existing message-based systems.</span></span>
- <span data-ttu-id="03b5c-121">Möglichkeit, Aufgaben einer Warteschlange hinzuzufügen, wenn ein Back-End-System nicht verfügbar ist</span><span class="sxs-lookup"><span data-stu-id="03b5c-121">Allows work to be queued when a backend system is not available.</span></span>

<span data-ttu-id="03b5c-122">Event Grid ermöglicht es den verschiedenen Komponenten im System, auf Ereignisse zu reagieren, sobald diese eintreten. Dadurch sind sie nicht auf Abfragen oder geplante Aufgaben angewiesen.</span><span class="sxs-lookup"><span data-stu-id="03b5c-122">Event Grid enables the various components in the system to react to events as they happen, rather than relying on polling or scheduled tasks.</span></span> <span data-ttu-id="03b5c-123">Diese trägt genau wie eine Nachrichtenwarteschlange zur Entkoppelung von Anwendungen und Diensten bei.</span><span class="sxs-lookup"><span data-stu-id="03b5c-123">As with a message queue, it helps decouple applications and services.</span></span> <span data-ttu-id="03b5c-124">Eine Anwendung oder ein Dienst kann Ereignisse veröffentlichen, und alle interessierten Abonnenten werden benachrichtigt.</span><span class="sxs-lookup"><span data-stu-id="03b5c-124">An application or service can publish events, and any interested subscribers will be notified.</span></span> <span data-ttu-id="03b5c-125">Neu Abonnenten können hinzugefügt werden, ohne den Sender zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="03b5c-125">New subscribers can be added without updating the sender.</span></span>

<span data-ttu-id="03b5c-126">Das Senden von Ereignissen an Event Grid wird von zahlreichen Azure-Diensten unterstützt.</span><span class="sxs-lookup"><span data-stu-id="03b5c-126">Many Azure services support sending events to Event Grid.</span></span> <span data-ttu-id="03b5c-127">So kann beispielsweise eine Logik-App auf ein Ereignis lauschen, wenn einem Blobspeicher neue Dateien hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="03b5c-127">For example, a logic app can listen for an event when new files are added to a blob store.</span></span> <span data-ttu-id="03b5c-128">Dieses Muster ermöglicht reaktive Workflows, bei denen das Hochladen einer Datei oder das Platzieren einer Nachricht in einer Warteschlange eine Reihe von Prozessen auslöst.</span><span class="sxs-lookup"><span data-stu-id="03b5c-128">This pattern enables reactive workflows, where uploading a file or putting a message on a queue kicks off a series of processes.</span></span> <span data-ttu-id="03b5c-129">Die Prozesse können parallel oder in einer bestimmten Reihenfolge ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="03b5c-129">The processes might be executed in parallel or in a specific sequence.</span></span>

## <a name="recommendations"></a><span data-ttu-id="03b5c-130">Empfehlungen</span><span class="sxs-lookup"><span data-stu-id="03b5c-130">Recommendations</span></span>

<span data-ttu-id="03b5c-131">Die Empfehlungen aus [Einfache Unternehmensintegration][basic-enterprise-integration] gelten auch für diese Architektur.</span><span class="sxs-lookup"><span data-stu-id="03b5c-131">The recommendations described in [Basic enterprise integration][basic-enterprise-integration] apply to this architecture.</span></span> <span data-ttu-id="03b5c-132">Es gibt allerdings noch weitere Empfehlungen:</span><span class="sxs-lookup"><span data-stu-id="03b5c-132">The following recommendations also apply:</span></span>

### <a name="service-bus"></a><span data-ttu-id="03b5c-133">Service Bus</span><span class="sxs-lookup"><span data-stu-id="03b5c-133">Service Bus</span></span>

<span data-ttu-id="03b5c-134">Service Bus verfügt über zwei Übermittlungsmodi: *Pull* und *Push*.</span><span class="sxs-lookup"><span data-stu-id="03b5c-134">Service Bus has two delivery modes, *pull* or *push*.</span></span> <span data-ttu-id="03b5c-135">Bei Verwendung des Pull-Modell fragt der Empfänger kontinuierlich ab, ob neue Nachrichten vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="03b5c-135">In the pull model, the receiver continuously polls for new messages.</span></span> <span data-ttu-id="03b5c-136">Abrufe können ineffizient sein – insbesondere, wenn Sie über viele Warteschlangen verfügen, die jeweils nur einige wenige Nachrichten empfangen, oder wenn die Nachrichten zeitlich weit auseinander liegen.</span><span class="sxs-lookup"><span data-stu-id="03b5c-136">Polling can be inefficient, especially if you have many queues that each receive a few messages, or if there a lot of time between messages.</span></span> <span data-ttu-id="03b5c-137">Bei Verwendung des Push-Modells sendet Service Bus ein Ereignis über Event Grid, wenn neue Nachrichten vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="03b5c-137">In the push model, Service Bus sends an event through Event Grid when there are new messages.</span></span> <span data-ttu-id="03b5c-138">Der Empfänger abonniert das Ereignis.</span><span class="sxs-lookup"><span data-stu-id="03b5c-138">The receiver subscribes to the event.</span></span> <span data-ttu-id="03b5c-139">Wenn das Ereignis ausgelöst wird, pullt der Empfänger den nächsten Nachrichtenstapel von Service Bus.</span><span class="sxs-lookup"><span data-stu-id="03b5c-139">When the event is triggered, the receiver pulls the next batch of messages from Service Bus.</span></span>

<span data-ttu-id="03b5c-140">Wenn Sie eine Logik-App erstellen, um Service Bus-Nachrichten zu nutzen, empfiehlt es sich, das Push-Modell mit Event Grid-Integration zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="03b5c-140">When you create a logic app to consume Service Bus messages, we recommend using the push model with Event Grid integration.</span></span> <span data-ttu-id="03b5c-141">Da die Logik-App keine Abfragen an Service Bus richten muss, ist es meistens kosteneffizienter.</span><span class="sxs-lookup"><span data-stu-id="03b5c-141">It's often more cost efficient, because the logic app doesn't need to poll Service Bus.</span></span> <span data-ttu-id="03b5c-142">Weitere Informationen finden Sie in der [Übersicht über die Integration von Azure Service Bus in Event Grid](/azure/service-bus-messaging/service-bus-to-event-grid-integration-concept).</span><span class="sxs-lookup"><span data-stu-id="03b5c-142">For more information, see [Azure Service Bus to Event Grid integration overview](/azure/service-bus-messaging/service-bus-to-event-grid-integration-concept).</span></span> <span data-ttu-id="03b5c-143">Für Event Grid-Benachrichtigungen wird derzeit der [Premium-Tarif](https://azure.microsoft.com/pricing/details/service-bus/) von Service Bus benötigt.</span><span class="sxs-lookup"><span data-stu-id="03b5c-143">Currently, Service Bus [Premium tier](https://azure.microsoft.com/pricing/details/service-bus/) is required for Event Grid notifications.</span></span>

<span data-ttu-id="03b5c-144">Verwenden Sie [PeekLock](/azure/service-bus-messaging/service-bus-messaging-overview#queues), um auf eine Gruppe von Nachrichten zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="03b5c-144">Use [PeekLock](/azure/service-bus-messaging/service-bus-messaging-overview#queues) for accessing a group of messages.</span></span> <span data-ttu-id="03b5c-145">Mit PeekLock kann die Logik-App dann Schritte ausführen, um die einzelnen Nachrichten zu überprüfen, bevor sie abgeschlossen oder verworfen werden.</span><span class="sxs-lookup"><span data-stu-id="03b5c-145">When you use PeekLock, the logic app can perform steps to validate each message before completing or abandoning the message.</span></span> <span data-ttu-id="03b5c-146">Dieser Ansatz schützt vor versehentlichem Nachrichtenverlust.</span><span class="sxs-lookup"><span data-stu-id="03b5c-146">This approach protects against accidental message loss.</span></span>

### <a name="event-grid"></a><span data-ttu-id="03b5c-147">Event Grid</span><span class="sxs-lookup"><span data-stu-id="03b5c-147">Event Grid</span></span>

<span data-ttu-id="03b5c-148">Wenn ein Event Grid-Trigger ausgelöst wird, bedeutet das, dass *mindestens ein* Ereignis eingetreten ist.</span><span class="sxs-lookup"><span data-stu-id="03b5c-148">When an Event Grid trigger fires, it means *at least one* event happened.</span></span> <span data-ttu-id="03b5c-149">Wenn also beispielsweise eine Logik-App einen Event Grid-Trigger für eine Service Bus-Nachricht erhält, ist davon auszugehen, dass unter Umständen mehrere Nachrichten zur Verarbeitung vorliegen.</span><span class="sxs-lookup"><span data-stu-id="03b5c-149">For example, when a logic app gets an Event Grid triggers for a Service Bus message, it should assume that several messages might be available to process.</span></span>

<span data-ttu-id="03b5c-150">Event Grid verwendet ein serverloses Modell.</span><span class="sxs-lookup"><span data-stu-id="03b5c-150">Event Grid uses a serverless model.</span></span> <span data-ttu-id="03b5c-151">Die Abrechnung erfolgt auf Basis der Anzahl der Vorgänge (Ereignisausführungen).</span><span class="sxs-lookup"><span data-stu-id="03b5c-151">Billing is calculated based on the number of operations (event executions).</span></span> <span data-ttu-id="03b5c-152">Weitere Informationen finden Sie unter [Event Grid-Preise](https://azure.microsoft.com/pricing/details/event-grid/).</span><span class="sxs-lookup"><span data-stu-id="03b5c-152">For more information, see [Event Grid pricing](https://azure.microsoft.com/pricing/details/event-grid/).</span></span> <span data-ttu-id="03b5c-153">Für Event Grid gibt es derzeit keine Überlegungen zu den Tarifen.</span><span class="sxs-lookup"><span data-stu-id="03b5c-153">Currently, there are no tier considerations for Event Grid.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="03b5c-154">Überlegungen zur Skalierbarkeit</span><span class="sxs-lookup"><span data-stu-id="03b5c-154">Scalability considerations</span></span>

<span data-ttu-id="03b5c-155">Mit dem Service Bus-Premium-Tarif lässt sich die Anzahl von Nachrichteneinheiten horizontal skalieren, um eine höhere Skalierbarkeit zu erreichen.</span><span class="sxs-lookup"><span data-stu-id="03b5c-155">To achieve higher scalability, the Service Bus Premium tier can scale out the number of messaging units.</span></span> <span data-ttu-id="03b5c-156">Premium-Tarif-Konfigurationen können über eine, zwei oder vier Nachrichteneinheiten verfügen.</span><span class="sxs-lookup"><span data-stu-id="03b5c-156">Premium tier configurations can have one, two, or four messaging units.</span></span> <span data-ttu-id="03b5c-157">Weitere Informationen zum Skalieren von Service Bus finden Sie unter [Bewährte Methoden für Leistungsoptimierungen mithilfe von Service Bus Messaging](/azure/service-bus-messaging/service-bus-performance-improvements).</span><span class="sxs-lookup"><span data-stu-id="03b5c-157">For more information about scaling Service Bus, see [Best practices for performance improvements by using Service Bus Messaging](/azure/service-bus-messaging/service-bus-performance-improvements).</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="03b5c-158">Überlegungen zur Verfügbarkeit</span><span class="sxs-lookup"><span data-stu-id="03b5c-158">Availability considerations</span></span>

<span data-ttu-id="03b5c-159">Lesen Sie die SLA für jeden Dienst:</span><span class="sxs-lookup"><span data-stu-id="03b5c-159">Review the SLA for each service:</span></span>

- <span data-ttu-id="03b5c-160">[SLA für API Management][apim-sla]</span><span class="sxs-lookup"><span data-stu-id="03b5c-160">[API Management SLA][apim-sla]</span></span>
- <span data-ttu-id="03b5c-161">[SLA für Event Grid][event-grid-sla]</span><span class="sxs-lookup"><span data-stu-id="03b5c-161">[Event Grid SLA][event-grid-sla]</span></span>
- <span data-ttu-id="03b5c-162">[SLA für Logic Apps][logic-apps-sla]</span><span class="sxs-lookup"><span data-stu-id="03b5c-162">[Logic Apps SLA][logic-apps-sla]</span></span>
- <span data-ttu-id="03b5c-163">[SLA für Service Bus][sb-sla]</span><span class="sxs-lookup"><span data-stu-id="03b5c-163">[Service Bus SLA][sb-sla]</span></span>

<span data-ttu-id="03b5c-164">Erwägen Sie die Implementierung einer georedundanten Notfallwiederherstellung im Service Bus-Premium-Tarif, um bei einem schwerwiegenden Ausfall ein Failover sicherzustellen.</span><span class="sxs-lookup"><span data-stu-id="03b5c-164">To enable failover if a serious outage occurs, consider implementing geo-disaster recovery in Service Bus Premium.</span></span> <span data-ttu-id="03b5c-165">Weitere Informationen finden Sie unter [Georedundante Notfallwiederherstellung in Azure Service Bus](/azure/service-bus-messaging/service-bus-geo-dr).</span><span class="sxs-lookup"><span data-stu-id="03b5c-165">For more information, see [Azure Service Bus geo-disaster recovery](/azure/service-bus-messaging/service-bus-geo-dr).</span></span>

## <a name="security-considerations"></a><span data-ttu-id="03b5c-166">Sicherheitshinweise</span><span class="sxs-lookup"><span data-stu-id="03b5c-166">Security considerations</span></span>

<span data-ttu-id="03b5c-167">Sichern Sie Service Bus mithilfe von Shared Access Signature (SAS).</span><span class="sxs-lookup"><span data-stu-id="03b5c-167">To secure Service Bus, use shared access signature (SAS).</span></span> <span data-ttu-id="03b5c-168">Mit der [SAS-Authentifizierung](/azure/service-bus-messaging/service-bus-sas) können Sie einem Benutzer Zugriff auf Service Bus-Ressourcen mit spezifischen Rechten gewähren.</span><span class="sxs-lookup"><span data-stu-id="03b5c-168">You can grant a user access to Service Bus resources with specific rights by using [SAS authentication](/azure/service-bus-messaging/service-bus-sas).</span></span> <span data-ttu-id="03b5c-169">Weitere Informationen finden Sie unter [Service Bus-Authentifizierung und -Autorisierung](/azure/service-bus-messaging/service-bus-authentication-and-authorization).</span><span class="sxs-lookup"><span data-stu-id="03b5c-169">For more information, see [Service Bus authentication and authorization](/azure/service-bus-messaging/service-bus-authentication-and-authorization).</span></span>

<span data-ttu-id="03b5c-170">Wenn Sie eine Service Bus-Warteschlange als HTTP-Endpunkt verfügbar machen müssen, beispielsweise zum Veröffentlichen neuer Nachrichten, verwenden Sie API Management zum Sichern der Warteschlange, indem der Endpunkt verfügbar gemacht wird.</span><span class="sxs-lookup"><span data-stu-id="03b5c-170">If you need to expose a Service Bus queue as an HTTP endpoint, for example, to post new messages, use API Management to secure the queue by fronting the endpoint.</span></span> <span data-ttu-id="03b5c-171">Anschließend können Sie den Endpunkt mit Zertifikaten oder OAuth-Authentifizierung sichern.</span><span class="sxs-lookup"><span data-stu-id="03b5c-171">You can then secure the endpoint with certificates or OAuth authentication as appropriate.</span></span> <span data-ttu-id="03b5c-172">Ein Endpunkt lässt sich am einfachsten durch die Verwendung einer Logik-App mit einem Anforderung-/Antwort-HTTP-Trigger als Zwischenstufe schützen.</span><span class="sxs-lookup"><span data-stu-id="03b5c-172">The easiest way to secure an endpoint is using a logic app with an HTTP request/response trigger as an intermediary.</span></span>

<span data-ttu-id="03b5c-173">Der Event Grid-Dienst sichert die Ereignisübermittlung durch einen Validierungscode.</span><span class="sxs-lookup"><span data-stu-id="03b5c-173">The Event Grid service secures event delivery through a validation code.</span></span> <span data-ttu-id="03b5c-174">Wenn Sie Logic Apps verwenden, um das Ereignis abzurufen, wird die Validierung automatisch ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="03b5c-174">If you use Logic Apps to consume the event, validation is automatically performed.</span></span> <span data-ttu-id="03b5c-175">Weitere Informationen finden Sie unter [Event Grid – Sicherheit und Authentifizierung](/azure/event-grid/security-authentication).</span><span class="sxs-lookup"><span data-stu-id="03b5c-175">For more information, see [Event Grid security and authentication](/azure/event-grid/security-authentication).</span></span>

[apim]: /azure/api-management
[apim-sla]: https://azure.microsoft.com/support/legal/sla/api-management/
[event-grid]: /azure/event-grid/
[event-grid-sla]: https://azure.microsoft.com/support/legal/sla/event-grid
[logic-apps]: /azure/logic-apps/logic-apps-overview
[logic-apps-sla]: https://azure.microsoft.com/support/legal/sla/logic-apps
[sb-sla]: https://azure.microsoft.com/support/legal/sla/service-bus/
[service-bus]: /azure/service-bus-messaging/
[basic-enterprise-integration]: ./basic-enterprise-integration.md
