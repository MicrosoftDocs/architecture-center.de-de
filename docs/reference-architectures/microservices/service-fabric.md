---
title: Microservices-Architektur in Azure Service Fabric
description: Microservices-Architektur in Azure Service Fabric
author: PageWriter-MSFT
ms.date: 3/07/2019
ms.topic: reference-architecture
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: microservices
ms.openlocfilehash: 228e3242ce9f1ca45bc15c5b34f770bfc092dd43
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 03/20/2019
ms.locfileid: "58244341"
---
# <a name="microservices-architecture-on-azure-service-fabric"></a><span data-ttu-id="4335f-103">Microservices-Architektur in Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="4335f-103">Microservices architecture on Azure Service Fabric</span></span>

<span data-ttu-id="4335f-104">Diese Referenzarchitektur zeigt eine in Azure Service Fabric bereitgestellte Microservices-Architektur.</span><span class="sxs-lookup"><span data-stu-id="4335f-104">This reference architecture shows a microservices architecture deployed to Azure Service Fabric.</span></span> <span data-ttu-id="4335f-105">Zu sehen ist eine einfache Clusterkonfiguration, die als Ausgangspunkt für die meisten Bereitstellungen dienen kann.</span><span class="sxs-lookup"><span data-stu-id="4335f-105">It shows a basic cluster configuration that can be the starting point for most deployments.</span></span>

![Referenzarchitektur für Service Fabric](./_images/ra-sf-arch.png)

> [!NOTE]
> <span data-ttu-id="4335f-107">Der Fokus dieses Artikels liegt auf dem Programmiermodell [Reliable Services](/azure/service-fabric/service-fabric-reliable-services-introduction) für Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="4335f-107">This article focuses on the [Reliable Services](/azure/service-fabric/service-fabric-reliable-services-introduction) programming model for Service Fabric.</span></span> <span data-ttu-id="4335f-108">Die Nutzung von Service Fabric zur Bereitstellung und Verwaltung von [Containern](/azure/service-fabric/service-fabric-containers-overview) ist nicht Gegenstand dieses Artikels.</span><span class="sxs-lookup"><span data-stu-id="4335f-108">Using Service Fabric to deploy and manage [containers](/azure/service-fabric/service-fabric-containers-overview) is beyond the scope of this article.</span></span>

## <a name="architecture"></a><span data-ttu-id="4335f-109">Architecture</span><span class="sxs-lookup"><span data-stu-id="4335f-109">Architecture</span></span>

<span data-ttu-id="4335f-110">Die Architektur umfasst die folgenden Komponenten.</span><span class="sxs-lookup"><span data-stu-id="4335f-110">The architecture consists of the following components.</span></span> <span data-ttu-id="4335f-111">Informationen zu anderen Begriffen finden in der [Übersicht über die Service Fabric-Terminologie](/azure/service-fabric/service-fabric-technical-overview).</span><span class="sxs-lookup"><span data-stu-id="4335f-111">For other terms, see [Service Fabric terminology overview](/azure/service-fabric/service-fabric-technical-overview).</span></span>

<span data-ttu-id="4335f-112">**Service Fabric-Cluster**.</span><span class="sxs-lookup"><span data-stu-id="4335f-112">**Service Fabric cluster**.</span></span> <span data-ttu-id="4335f-113">In einem Netzwerk verbundene virtuelle Computer (VMs), auf denen Ihre Microservices bereitgestellt und verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-113">A network-connected set of virtual machines (VMs) into which your microservices are deployed and managed.</span></span>

<span data-ttu-id="4335f-114">**VM-Skalierungsgruppen**.</span><span class="sxs-lookup"><span data-stu-id="4335f-114">**Virtual machine scale sets**.</span></span> <span data-ttu-id="4335f-115">Mit VM-Skalierungsgruppen können Sie einer Gruppe identischer virtueller Computer mit Lastenausgleich und automatischer Skalierung erstellen und verwalten.</span><span class="sxs-lookup"><span data-stu-id="4335f-115">Virtual machine scale sets allow you to create and manage a group of identical, load balanced, and autoscaling VMs.</span></span> <span data-ttu-id="4335f-116">Sie bieten außerdem Fehler- und Upgradedomänen.</span><span class="sxs-lookup"><span data-stu-id="4335f-116">It also provides the fault and upgrade domains.</span></span>

<span data-ttu-id="4335f-117">**Knoten**.</span><span class="sxs-lookup"><span data-stu-id="4335f-117">**Nodes**.</span></span> <span data-ttu-id="4335f-118">Die Knoten sind die VMs, die dem Service Fabric-Cluster angehören.</span><span class="sxs-lookup"><span data-stu-id="4335f-118">The nodes are the VMs that belong to the Service Fabric cluster.</span></span>

<span data-ttu-id="4335f-119">**Knotentypen**.</span><span class="sxs-lookup"><span data-stu-id="4335f-119">**Node types**.</span></span> <span data-ttu-id="4335f-120">Ein Knotentyp stellt eine VM-Skalierungsgruppe dar, die eine Sammlung von Knoten bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="4335f-120">A node type represents a virtual machine scale set that deploys a collection of nodes.</span></span> <span data-ttu-id="4335f-121">Ein Service Fabric-Cluster hat mindestens einen Knotentyp.</span><span class="sxs-lookup"><span data-stu-id="4335f-121">A Service Fabric cluster has at least one node type.</span></span> <span data-ttu-id="4335f-122">In einem Cluster mit mehreren Knotentypen müssen Sie den [primären Knotentyp](/azure/service-fabric/service-fabric-cluster-capacity#primary-node-type) festlegen.</span><span class="sxs-lookup"><span data-stu-id="4335f-122">In a cluster with multiple node types, one must be declared the [Primary node type](/azure/service-fabric/service-fabric-cluster-capacity#primary-node-type).</span></span> <span data-ttu-id="4335f-123">Auf dem primären Knotentyp in Ihrem Cluster werden die [Service Fabric-Systemdienste](/azure/service-fabric/service-fabric-technical-overview#system-services) ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="4335f-123">The primary node type in the cluster runs the [Service Fabric system services](/azure/service-fabric/service-fabric-technical-overview#system-services).</span></span> <span data-ttu-id="4335f-124">Diese Dienste stellen die Plattformfunktionen von Service Fabric zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="4335f-124">These services provide the platform capabilities of Service Fabric.</span></span> <span data-ttu-id="4335f-125">Der primäre Knotentyp fungiert auch [Seedknoten](/azure/service-fabric/service-fabric-disaster-recovery#random-failures-leading-to-cluster-failures) für den Cluster. Dabei handelt es sich um die Knoten, die die Verfügbarkeit des zugrunde liegenden Clusters aufrechterhalten.</span><span class="sxs-lookup"><span data-stu-id="4335f-125">The primary node type also acts as the [seed nodes](/azure/service-fabric/service-fabric-disaster-recovery#random-failures-leading-to-cluster-failures) for the cluster, which are the nodes that maintain the availability of the underlying cluster.</span></span> <span data-ttu-id="4335f-126">Konfigurieren Sie [zusätzliche Knotentypen](/azure/service-fabric/service-fabric-cluster-capacity#non-primary-node-type) zum Ausführen Ihrer Dienste.</span><span class="sxs-lookup"><span data-stu-id="4335f-126">Configure [additional node types](/azure/service-fabric/service-fabric-cluster-capacity#non-primary-node-type) to run your services.</span></span>

<span data-ttu-id="4335f-127">**Dienste**.</span><span class="sxs-lookup"><span data-stu-id="4335f-127">**Services**.</span></span> <span data-ttu-id="4335f-128">Ein Dienst übernimmt eine eigenständige Funktion und kann unabhängig von anderen Diensten gestartet und ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-128">A service performs a standalone function that can start and run independently of other services.</span></span> <span data-ttu-id="4335f-129">Instanzen von Diensten werden auf Knoten im Cluster bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="4335f-129">Instances of services get deployed to nodes in the cluster.</span></span> <span data-ttu-id="4335f-130">Es gibt in Service Fabric zwei Arten von Dienst:</span><span class="sxs-lookup"><span data-stu-id="4335f-130">There are two varieties of service in Service Fabric:</span></span>

- <span data-ttu-id="4335f-131">**Zustandsloser Dienst**:</span><span class="sxs-lookup"><span data-stu-id="4335f-131">**Stateless service**.</span></span> <span data-ttu-id="4335f-132">Ein zustandsloser Dienst behält seinen Zustand innerhalb des Diensts nicht bei.</span><span class="sxs-lookup"><span data-stu-id="4335f-132">A stateless service does not maintain state within the service.</span></span> <span data-ttu-id="4335f-133">Wenn Zustandspersistenz erforderlich ist, wird der Zustand in einen externen Speicher, wie z.B. Azure Cosmos DB, geschrieben und aus diesem abgerufen.</span><span class="sxs-lookup"><span data-stu-id="4335f-133">If state persistence is required, then state is written to and retrieved from an external store, such as Azure Cosmos DB.</span></span>
- <span data-ttu-id="4335f-134">**Zustandsbehafteter Dienst**:</span><span class="sxs-lookup"><span data-stu-id="4335f-134">**Stateful service**.</span></span> <span data-ttu-id="4335f-135">Der [Dienstzustand](/azure/service-fabric/service-fabric-concepts-state) wird innerhalb des Diensts selbst gespeichert.</span><span class="sxs-lookup"><span data-stu-id="4335f-135">The [service state](/azure/service-fabric/service-fabric-concepts-state) is kept within the service itself.</span></span> <span data-ttu-id="4335f-136">Bei den meisten zustandsbehafteten Diensten wird dies über die Service Fabric-Funktion [Zuverlässige Sammlungen](/azure/service-fabric/service-fabric-reliable-services-reliable-collections) implementiert.</span><span class="sxs-lookup"><span data-stu-id="4335f-136">Most stateful services implement this through Service Fabric’s [Reliable Collections](/azure/service-fabric/service-fabric-reliable-services-reliable-collections).</span></span>

<span data-ttu-id="4335f-137">**Service Fabric Explorer**.</span><span class="sxs-lookup"><span data-stu-id="4335f-137">**Service Fabric Explorer**.</span></span> <span data-ttu-id="4335f-138">Bei [Service Fabric Explorer][sfx] handelt es sich um ein Open-Source-Tool zum Untersuchen und Verwalten von Service Fabric-Clustern.</span><span class="sxs-lookup"><span data-stu-id="4335f-138">[Service Fabric Explorer][sfx] is an open-source tool for inspecting and managing Service Fabric clusters.</span></span>

<span data-ttu-id="4335f-139">**Azure Pipelines**.</span><span class="sxs-lookup"><span data-stu-id="4335f-139">**Azure Pipelines**.</span></span> <span data-ttu-id="4335f-140">[Pipelines](/azure/devops/pipelines/?view=azure-devops) ist Teil von [Azure DevOps Services](/azure/devops/index?view=azure-devops) und führt automatisierte Build-, Test- und Bereitstellungsvorgänge durch.</span><span class="sxs-lookup"><span data-stu-id="4335f-140">[Pipelines](/azure/devops/pipelines/?view=azure-devops) is part of [Azure DevOps Services](/azure/devops/index?view=azure-devops) and runs automated builds, tests, and deployments.</span></span> <span data-ttu-id="4335f-141">Sie können auch CI/CD-Lösungen von Drittanbietern, z.B. Jenkins, verwenden.</span><span class="sxs-lookup"><span data-stu-id="4335f-141">You can also use third-party CI/CD solutions such as Jenkins.</span></span>

<span data-ttu-id="4335f-142">**Azure Monitor**:</span><span class="sxs-lookup"><span data-stu-id="4335f-142">**Azure Monitor**.</span></span> <span data-ttu-id="4335f-143">[Azure Monitor](/azure/azure-monitor/) erfasst und speichert Metriken und Protokolle. Beispiele hierfür sind Plattformmetriken für die Azure-Dienste in der Lösung und Anwendungstelemetrie.</span><span class="sxs-lookup"><span data-stu-id="4335f-143">[Azure Monitor](/azure/azure-monitor/) collects and stores metrics and logs, including platform metrics for the Azure services in the solution and application telemetry.</span></span> <span data-ttu-id="4335f-144">Nutzen Sie diese Daten zum Überwachen der Anwendung, Einrichten von Warnungen und Dashboards und Durchführen von Analysen der Grundursache von Fehlern.</span><span class="sxs-lookup"><span data-stu-id="4335f-144">Use this data to monitor the application, set up alerts and dashboards, and perform root cause analysis of failures.</span></span> <span data-ttu-id="4335f-145">Azure Monitor wird in Service Fabric integriert, um Metriken von Controllern, Knoten und Containern sowie aus Container- und Masterknotenprotokollen zu erfassen.</span><span class="sxs-lookup"><span data-stu-id="4335f-145">Azure Monitor integrates with Service Fabric to collect metrics from controllers, nodes, and containers, as well as container logs and master node logs.</span></span>

<span data-ttu-id="4335f-146">**Azure Key Vault**.</span><span class="sxs-lookup"><span data-stu-id="4335f-146">**Azure Key Vault**.</span></span> <span data-ttu-id="4335f-147">Verwenden Sie [Key Vault](/azure/key-vault/), um alle Anwendungsgeheimnisse zu speichern, die von den Microservices verwendet werden, wie z.B. Verbindungszeichenfolgen.</span><span class="sxs-lookup"><span data-stu-id="4335f-147">Use [Key Vault](/azure/key-vault/) to store any application secrets used by the microservices, such as connection strings.</span></span>

<span data-ttu-id="4335f-148">**Azure API Management:**</span><span class="sxs-lookup"><span data-stu-id="4335f-148">**Azure API Management**.</span></span> <span data-ttu-id="4335f-149">In dieser Architektur fungiert [API Management](/azure/api-management/api-management-key-concepts) als API-Gateway, das Anforderungen von Clients entgegennimmt und an Ihre Dienste weiterleitet.</span><span class="sxs-lookup"><span data-stu-id="4335f-149">In this architecture, [API Management](/azure/api-management/api-management-key-concepts) acts as an API gateway that accepts requests from clients and routes them to your services.</span></span>

## <a name="design-considerations"></a><span data-ttu-id="4335f-150">Überlegungen zum Entwurf</span><span class="sxs-lookup"><span data-stu-id="4335f-150">Design considerations</span></span>

<span data-ttu-id="4335f-151">Diese Referenzarchitektur konzentriert sich auf [Architekturen von Microservices](../../guide/architecture-styles/microservices.md).</span><span class="sxs-lookup"><span data-stu-id="4335f-151">This reference architecture is focused on [microservices architectures](../../guide/architecture-styles/microservices.md).</span></span> <span data-ttu-id="4335f-152">Ein Microservice ist eine kleine unabhängige Codeeinheit mit Versionsangabe.</span><span class="sxs-lookup"><span data-stu-id="4335f-152">A microservice is a small, independently versioned unit of code.</span></span> <span data-ttu-id="4335f-153">Microservices können über Dienstermittlungsmethoden ermittelt werden und über APIs mit anderen Diensten kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="4335f-153">It is discoverable through service discovery mechanisms and can communicate with other services over APIs.</span></span> <span data-ttu-id="4335f-154">Jeder Dienst ist eigenständig und sollte eine einzige Geschäftsfunktion implementieren.</span><span class="sxs-lookup"><span data-stu-id="4335f-154">Each service is self-contained and should implement a single business capability.</span></span> <span data-ttu-id="4335f-155">Weitere Informationen darüber, wie Sie Ihre Anwendungsdomäne in Microservices aufteilen können, finden Sie unter [Verwenden der Domänenanalyse zur Modellierung von Microservices](../../microservices/model/domain-analysis.md).</span><span class="sxs-lookup"><span data-stu-id="4335f-155">For more information about how to decompose your application domain into microservices, see [Using domain analysis to model microservices](../../microservices/model/domain-analysis.md).</span></span>

<span data-ttu-id="4335f-156">Service Fabric bietet eine Infrastruktur für das effiziente Erstellen, Bereitstellen und Aktualisieren von Microservices.</span><span class="sxs-lookup"><span data-stu-id="4335f-156">Service Fabric provides an infrastructure to build, deploy, and upgrade microservices efficiently.</span></span> <span data-ttu-id="4335f-157">Der Dienst bietet auch Optionen für die automatische Skalierung, Zustandsverwaltung und -überwachung sowie für den Neustart von Diensten bei einem Ausfall.</span><span class="sxs-lookup"><span data-stu-id="4335f-157">It also provides options for auto scaling, managing state, monitoring health, and restarting services in case of failure.</span></span>

<span data-ttu-id="4335f-158">Service Fabric arbeitet mit einem Anwendungsmodell, bei dem eine Anwendung eine Sammlung von Microservices ist.</span><span class="sxs-lookup"><span data-stu-id="4335f-158">Service Fabric follows an application model where an application is a collection of microservices.</span></span> <span data-ttu-id="4335f-159">Die Anwendung wird in einer [Anwendungsmanifestdatei](/azure/service-fabric/service-fabric-application-and-service-manifests) beschrieben, die die verschiedenen Arten von Diensten, die in dieser Anwendung enthalten sind, und Verweise auf die unabhängigen Dienstpakete definiert.</span><span class="sxs-lookup"><span data-stu-id="4335f-159">The application is described in an [application manifest](/azure/service-fabric/service-fabric-application-and-service-manifests) file that defines the different types of service contained in that application, and pointers to the independent service packages.</span></span> <span data-ttu-id="4335f-160">Das Anwendungspaket enthält in der Regel auch Parameter, die als Überschreibungen für bestimmte Einstellungen dienen, die von den Diensten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-160">The application package also usually contains parameters that serve as overrides for certain settings used by the services.</span></span> <span data-ttu-id="4335f-161">Jedes Dienstpaket enthält eine Manifestdatei, die die physischen Dateien und Ordner beschreibt, die für die Ausführung dieses Diensts erforderlich sind, einschließlich Binärdateien, Konfigurationsdateien und schreibgeschützte Daten für den jeweiligen Dienst.</span><span class="sxs-lookup"><span data-stu-id="4335f-161">Each service package has a manifest file that describes the physical files and folders that are necessary to run that service, including binaries, configuration files, and read-only data for that service.</span></span> <span data-ttu-id="4335f-162">Dienste und Anwendungen können unabhängig voneinander mit Versionsangaben versehen und aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-162">Services and applications are independently versioned and upgradable.</span></span>

<span data-ttu-id="4335f-163">Optional kann das Anwendungsmanifest Dienste beschreiben, die automatisch bereitgestellt werden, wenn eine Instanz der Anwendung erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="4335f-163">Optionally, the application manifest can describe services that are automatically provisioned when an instance of the application is created.</span></span> <span data-ttu-id="4335f-164">Diese werden als Standarddienste bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="4335f-164">These are called default services.</span></span> <span data-ttu-id="4335f-165">In diesem Fall beschreibt das Anwendungsmanifest auch, wie diese Dienste erstellt werden sollen, einschließlich des Namens des Diensts, der Anzahl der Instanzen, der Sicherheits-/Isolationsrichtlinie und der Platzierungsbeschränkungen.</span><span class="sxs-lookup"><span data-stu-id="4335f-165">In this case, the application manifest also describes how these services should be created, including the service’s name, instance count, security/isolation policy, and placement constraints.</span></span>

> [!NOTE]
> <span data-ttu-id="4335f-166">Vermeiden Sie die Verwendung von Standarddiensten, wenn Sie die Lebensdauer Ihrer Dienste steuern möchten.</span><span class="sxs-lookup"><span data-stu-id="4335f-166">Avoid using default services if you want to control the life time of your services.</span></span> <span data-ttu-id="4335f-167">Standarddienste werden beim Erstellen der Anwendung erstellt und werden so lange ausgeführt, wie die Anwendung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="4335f-167">Default services are created when the application is created, and run as long as the application is running.</span></span>

<span data-ttu-id="4335f-168">Grundlegende Informationen zu Service Fabric finden Sie unter [Sie möchten sich über Service Fabric informieren?](/azure/service-fabric/service-fabric-content-roadmap).</span><span class="sxs-lookup"><span data-stu-id="4335f-168">For more information about understanding Service Fabric, see [So you want to learn about Service Fabric?](/azure/service-fabric/service-fabric-content-roadmap)</span></span>

### <a name="choose-an-application-to-service-packaging-model"></a><span data-ttu-id="4335f-169">Wählen eines Anwendung-zu-Dienst-Paketerstellungsmodells</span><span class="sxs-lookup"><span data-stu-id="4335f-169">Choose an application-to-service packaging model</span></span>

<span data-ttu-id="4335f-170">Ein Grundsatz von Microservices ist, dass jeder Dienst unabhängig bereitgestellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="4335f-170">A tenet of microservices is that each service can be independently deployed.</span></span> <span data-ttu-id="4335f-171">Wenn Sie in Service Fabric alle Ihre Dienste in einem einzigen Anwendungspaket gruppieren und ein Dienst nicht aktualisiert werden kann, erfolgt ein Rollback des gesamten Updates der Anwendung, wodurch verhindert wird, dass andere Dienste aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-171">In Service Fabric, if you group all of your services into a single application package, and one service fails to upgrade, the entire application upgrade gets rolled back, which prevents other service from being upgraded.</span></span>

<span data-ttu-id="4335f-172">Aus diesem Grund empfehlen wir in einer Microservices-Architektur die Verwendung mehrerer Anwendungspakete.</span><span class="sxs-lookup"><span data-stu-id="4335f-172">For that reason, in a microservices architecture, we recommend using multiple application packages.</span></span> <span data-ttu-id="4335f-173">Fassen Sie einen oder mehrere eng zusammengehörige Diensttypen zu einem einzigen Anwendungstyp zusammen.</span><span class="sxs-lookup"><span data-stu-id="4335f-173">Put one or more closely related service types into a single application type.</span></span> <span data-ttu-id="4335f-174">Wenn Ihr Team für eine Reihe von Diensten verantwortlich ist, die die gleiche Lebensdauer haben und gleichzeitig aktualisiert werden müssen, den gleichen Lebenszyklus haben oder Ressourcen wie Abhängigkeiten oder Konfigurationen gemeinsam nutzen, platzieren Sie diese Diensttypen im gleichen Anwendungstyp.</span><span class="sxs-lookup"><span data-stu-id="4335f-174">If your team is responsible for a set of services that run for the same duration and need to be updated at the same time, have the same lifecycle, or share resources such as dependencies or configuration, then place those services types in the same application type.</span></span>

### <a name="service-fabric-programming-models"></a><span data-ttu-id="4335f-175">Service Fabric-Programmiermodelle</span><span class="sxs-lookup"><span data-stu-id="4335f-175">Service Fabric programming models</span></span>

<span data-ttu-id="4335f-176">Wenn Sie einen Microservice einer Service Fabric-Anwendung hinzufügen, entscheiden Sie, ob er über einen Zustand oder Daten verfügt, die hochverfügbar und zuverlässig zur Verfügung gestellt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="4335f-176">When you add a microservice to a Service Fabric application, decide whether it has state or data that needs to be made highly available and reliable.</span></span> <span data-ttu-id="4335f-177">Falls ja, können Daten extern gespeichert werden oder sind die Daten als Teil des Diensts enthalten?</span><span class="sxs-lookup"><span data-stu-id="4335f-177">If so, can it store data externally or is the data contained as part of the service?</span></span> <span data-ttu-id="4335f-178">Wählen Sie einen zustandslosen Dienst, wenn Sie keine Daten speichern müssen oder Daten in einem externen Speicher speichern möchten.</span><span class="sxs-lookup"><span data-stu-id="4335f-178">Choose a stateless service if you don’t need to store data or want to store data in external storage.</span></span> <span data-ttu-id="4335f-179">Wenn Sie den Zustand oder die Daten als Teil des Diensts pflegen möchten (z.B. wenn sich diese Daten im Arbeitsspeicher in der Nähe des Codes befinden müssen) oder eine Abhängigkeit von einem externen Speicher nicht unterstützen können, sollten Sie einen zustandsbehafteten Dienst wählen.</span><span class="sxs-lookup"><span data-stu-id="4335f-179">If you want to maintain state or data as part of the service (for example, you need that data to reside in memory close to the code), or cannot tolerate a dependency on an external store, consider choosing a stateful service.</span></span>

<span data-ttu-id="4335f-180">Wenn Sie bereits Code haben, den Sie in Service Fabric ausführen möchten, können Sie ihn als ausführbare Gastdatei ausführen, bei der es sich um eine beliebige ausführbare Datei handelt, die als Dienst ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="4335f-180">If you have existing code that you want to run on Service Fabric, you can run it as a guest executable, which is an arbitrary executable that runs as a service.</span></span> <span data-ttu-id="4335f-181">Alternativ können Sie die ausführbare Datei in einem Container packen, der alle für die Bereitstellung erforderlichen Abhängigkeiten enthält.</span><span class="sxs-lookup"><span data-stu-id="4335f-181">Alternatively, you can package the executable in a container that has all the dependencies needed for deployment.</span></span> <span data-ttu-id="4335f-182">Service Fabric modelliert sowohl Container als auch ausführbare Gastdateien als zustandslose Dienste.</span><span class="sxs-lookup"><span data-stu-id="4335f-182">Service Fabric models both containers and guest executables as stateless services.</span></span> <span data-ttu-id="4335f-183">Eine Anleitung zur Wahl eines Modells finden Sie unter [Übersicht über die Service Fabric-Programmiermodelle](/azure/service-fabric/service-fabric-choose-framework).</span><span class="sxs-lookup"><span data-stu-id="4335f-183">For guidance about choosing a model, see [Service Fabric programming model overview](/azure/service-fabric/service-fabric-choose-framework).</span></span>

<span data-ttu-id="4335f-184">Bei ausführbaren Gastdateien sind Sie für die Wartung der Umgebung verantwortlich, in der sie ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-184">With guest executables, you are responsible of maintaining the environment in which it runs.</span></span> <span data-ttu-id="4335f-185">Angenommen, eine ausführbare Gastdatei verlangt Python.</span><span class="sxs-lookup"><span data-stu-id="4335f-185">For example, suppose that a guest executable requires Python.</span></span> <span data-ttu-id="4335f-186">Wenn die ausführbare Datei nicht eigenständig ist, müssen Sie sicherstellen, dass die erforderliche Version von Python bereits in der Umgebung installiert ist.</span><span class="sxs-lookup"><span data-stu-id="4335f-186">If the executable is not self-contained, you need to make sure that the required version of Python is pre-installed in the environment.</span></span> <span data-ttu-id="4335f-187">Service Fabric verwaltet nicht die Umgebung.</span><span class="sxs-lookup"><span data-stu-id="4335f-187">Service Fabric does not manage the environment.</span></span> <span data-ttu-id="4335f-188">Azure bietet mehrere Mechanismen zum Einrichten der Umgebung, einschließlich benutzerdefinierter VM-Images und -Erweiterungen.</span><span class="sxs-lookup"><span data-stu-id="4335f-188">Azure offers multiple mechanisms to set up the environment, including custom virtual machine images and extensions.</span></span>

<span data-ttu-id="4335f-189">Weitere Informationen finden Sie unter</span><span class="sxs-lookup"><span data-stu-id="4335f-189">For more information, see:</span></span>

- [<span data-ttu-id="4335f-190">Packen einer Anwendung</span><span class="sxs-lookup"><span data-stu-id="4335f-190">Package an application</span></span>](/azure/service-fabric/service-fabric-package-apps)
- [<span data-ttu-id="4335f-191">Packen und Bereitstellen einer vorhandenen ausführbaren Datei für Service Fabric</span><span class="sxs-lookup"><span data-stu-id="4335f-191">Package and deploy an existing executable to Service Fabric</span></span>](/azure/service-fabric/service-fabric-deploy-existing-app)

### <a name="api-gateway"></a><span data-ttu-id="4335f-192">API-Gateway</span><span class="sxs-lookup"><span data-stu-id="4335f-192">API gateway</span></span>

<span data-ttu-id="4335f-193">Ein [API-Gateway](../..//microservices/design/gateway.md) (eingehend) befindet sich zwischen externen Clients und den Microservices.</span><span class="sxs-lookup"><span data-stu-id="4335f-193">An [API gateway](../..//microservices/design/gateway.md) (ingress) sits between external clients and the microservices.</span></span> <span data-ttu-id="4335f-194">Es fungiert als Reverseproxy und leitet Anforderungen von Clients an Microservices weiter.</span><span class="sxs-lookup"><span data-stu-id="4335f-194">It acts as a reverse proxy, routing requests from clients to microservices.</span></span> <span data-ttu-id="4335f-195">Darüber hinaus kann es verschiedene übergreifende Aufgaben wie Authentifizierung, SSL-Beendigung und Ratenbegrenzung übernehmen.</span><span class="sxs-lookup"><span data-stu-id="4335f-195">It may also perform various cross-cutting tasks such as authentication, SSL termination, and rate limiting.</span></span>

<span data-ttu-id="4335f-196">Azure API Management wird in den meisten Szenarien empfohlen, aber [Træfik](https://docs.traefik.io/) ist eine beliebte Open-Source-Alternative.</span><span class="sxs-lookup"><span data-stu-id="4335f-196">Azure API Management is recommended for most scenarios, but [Træfik](https://docs.traefik.io/) is a popular open-source alternative.</span></span> <span data-ttu-id="4335f-197">Beide Technologieoptionen sind in Service Fabric integriert.</span><span class="sxs-lookup"><span data-stu-id="4335f-197">Both technology options are integrated with Service Fabric.</span></span>

- <span data-ttu-id="4335f-198">API Management macht eine öffentliche IP-Adresse verfügbar und leitet Datenverkehr an Ihre Dienste weiter.</span><span class="sxs-lookup"><span data-stu-id="4335f-198">API Management exposes a public IP address and routes traffic to your services.</span></span> <span data-ttu-id="4335f-199">Die Lösung wird in einem dedizierten Subnetz im gleichen virtuellen Netzwerk wie der Service Fabric-Cluster ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="4335f-199">It runs in a dedicated subnet in the same virtual network as the Service Fabric cluster.</span></span>  <span data-ttu-id="4335f-200">Sie kann auf Dienste in einem Knotentyp zugreifen, der über einen Lastenausgleich mit einer privaten IP-Adresse verfügbar gemacht wird.</span><span class="sxs-lookup"><span data-stu-id="4335f-200">can access services in a node type that is exposed through a load balancer with a private IP address.</span></span> <span data-ttu-id="4335f-201">Diese Option ist nur in den Tarifen „Premium“ und „Developer“ von API Management verfügbar.</span><span class="sxs-lookup"><span data-stu-id="4335f-201">This option is only available in the Premium and Developer tiers of API Management.</span></span> <span data-ttu-id="4335f-202">Wählen Sie für Produktionsworkloads den Premium-Tarif.</span><span class="sxs-lookup"><span data-stu-id="4335f-202">For production workloads, use the Premium tier.</span></span> <span data-ttu-id="4335f-203">Weitere Informationen zu den Preisen finden Sie unter [API Management-Preise](https://azure.microsoft.com/pricing/details/api-management/).</span><span class="sxs-lookup"><span data-stu-id="4335f-203">Pricing information is described in [API Management pricing](https://azure.microsoft.com/pricing/details/api-management/).</span></span> <span data-ttu-id="4335f-204">Weitere Informationen finden Sie unter [Service Fabric mit Azure API Management: Übersicht](/azure/service-fabric/service-fabric-api-management-overview).</span><span class="sxs-lookup"><span data-stu-id="4335f-204">For more information, see Service Fabric with [Azure API Management overview](/azure/service-fabric/service-fabric-api-management-overview).</span></span>
- <span data-ttu-id="4335f-205">Træfik unterstützt Features wie Routing, Ablaufverfolgung, Protokolle und Metriken.</span><span class="sxs-lookup"><span data-stu-id="4335f-205">Træfik supports features such as routing, tracing, logs, and metrics.</span></span> <span data-ttu-id="4335f-206">Træfik wird als zustandsloser Dienst im Service Fabric-Cluster ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="4335f-206">Træfik runs as a stateless service in the Service Fabric cluster.</span></span> <span data-ttu-id="4335f-207">Die Dienstversionsverwaltung kann über Routing unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-207">Service versioning can be supported through routing.</span></span> <span data-ttu-id="4335f-208">Informationen darüber, wie Sie Træfik für eingehende Dienstdaten und als Reverseproxy innerhalb des Clusters einrichten, finden Sie unter [Azure Service Fabric-Anbieter](https://docs.traefik.io/configuration/backends/servicefabric/).</span><span class="sxs-lookup"><span data-stu-id="4335f-208">For information on how to set up Træfik for service ingress and as the reverse proxy within the cluster, see [Azure Service Fabric Provider](https://docs.traefik.io/configuration/backends/servicefabric/).</span></span> <span data-ttu-id="4335f-209">Weitere Informationen zur Verwendung von Træfik mit Service Fabric finden Sie im Blogbeitrag [Intelligent routing on Service Fabric with Træfik](https://blogs.msdn.microsoft.com/azureservicefabric/2018/04/05/intelligent-routing-on-service-fabric-with-traefik/) (Intelligentes Routing in Service Fabric mit Træfik).</span><span class="sxs-lookup"><span data-stu-id="4335f-209">For more information about using Træfik with Service Fabric, see [Intelligent routing on Service Fabric with Træfik](https://blogs.msdn.microsoft.com/azureservicefabric/2018/04/05/intelligent-routing-on-service-fabric-with-traefik/) (blog post).</span></span>

<span data-ttu-id="4335f-210">Weitere API Management-Optionen sind [Azure Application Gateway](/azure/application-gateway/) und [Azure Front Door](/azure/frontdoor/).</span><span class="sxs-lookup"><span data-stu-id="4335f-210">Other API Managementment options include [Azure Application Gateway](/azure/application-gateway/) and [Azure Front Door](/azure/frontdoor/).</span></span> <span data-ttu-id="4335f-211">Diese Dienste können in Verbindung mit API Management verwendet werden, um Aufgaben wie Routing, SSL-Terminierung und Firewall abzudecken.</span><span class="sxs-lookup"><span data-stu-id="4335f-211">These services can be used in conjunction with API Management to perform tasks such as routing, SSL termination, and firewall.</span></span>

### <a name="interservice-communication"></a><span data-ttu-id="4335f-212">Kommunikation zwischen Diensten</span><span class="sxs-lookup"><span data-stu-id="4335f-212">Interservice communication</span></span>

<span data-ttu-id="4335f-213">Um die Dienst-zu-Dienst-Kommunikation zu erleichtern, sollten Sie HTTP als Kommunikationsprotokoll in Erwägung ziehen.</span><span class="sxs-lookup"><span data-stu-id="4335f-213">To facilitate service-to-service communication, consider using HTTP as the communication protocol.</span></span> <span data-ttu-id="4335f-214">Als Grundlage für die meisten Szenarien wird der [Reverseproxydienst](/azure/service-fabric/service-fabric-reverseproxy) für die Dienstermittlung empfohlen.</span><span class="sxs-lookup"><span data-stu-id="4335f-214">As a baseline for most scenarios, we recommend using [the reverse proxy service](/azure/service-fabric/service-fabric-reverseproxy) for service discovery.</span></span>

- <span data-ttu-id="4335f-215">Kommunikationsprotokoll.</span><span class="sxs-lookup"><span data-stu-id="4335f-215">Communication protocol.</span></span> <span data-ttu-id="4335f-216">In einer Microservices-Architektur müssen Dienste mit minimaler Kopplung zur Laufzeit miteinander kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="4335f-216">In a microservices architecture, services need to communicate with each other with minimum coupling at runtime.</span></span> <span data-ttu-id="4335f-217">Um eine sprachunabhängige Kommunikation zu ermöglichen, ist HTTP ein Branchenstandard mit einer breiten Palette von Tools und HTTP-Servern, die in verschiedenen Sprachen verfügbar sind und allesamt von Service Fabric unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-217">To enable language-agnostic communication, HTTP is an industry-standard with a wide range of tools and HTTP servers that are available in different languages, all supported by Service Fabric.</span></span> <span data-ttu-id="4335f-218">Daher wird für die meisten Workloads HTTP anstelle des in Service Fabric integrierten Dienstremotings empfohlen.</span><span class="sxs-lookup"><span data-stu-id="4335f-218">Therefore, using HTTP instead of Service Fabric’s built in service remoting is recommended for most workloads.</span></span>
- <span data-ttu-id="4335f-219">Dienstermittlung:</span><span class="sxs-lookup"><span data-stu-id="4335f-219">Service discovery.</span></span> <span data-ttu-id="4335f-220">Um mit anderen Diensten innerhalb eines Clusters zu kommunizieren, muss ein Clientdienst den aktuellen Standort des Zieldiensts auflösen.</span><span class="sxs-lookup"><span data-stu-id="4335f-220">To communicate with other services within a cluster, a client service needs to resolve the target service’s current location.</span></span> <span data-ttu-id="4335f-221">In Service Fabric können Dienste zwischen Knoten verschoben werden, wodurch sich die Dienstendpunkte dynamisch ändern.</span><span class="sxs-lookup"><span data-stu-id="4335f-221">In Service Fabric, services can move between nodes, causing the service endpoints to change dynamically.</span></span> <span data-ttu-id="4335f-222">Um Verbindungen mit veralteten Endpunkten zu vermeiden, kann der Naming Service von Service Fabric verwendet werden, um aktualisierte Endpunktinformationen abzurufen.</span><span class="sxs-lookup"><span data-stu-id="4335f-222">To avoid connections to stale endpoints, Service Fabric’s Naming Service can be used to retrieve updated endpoint information.</span></span> <span data-ttu-id="4335f-223">Service Fabric bietet jedoch auch einen integrierten [Reverseproxydienst](/azure/service-fabric/service-fabric-reverseproxy), der den Naming Service abstrahiert.</span><span class="sxs-lookup"><span data-stu-id="4335f-223">However, Service Fabric also provides a built-in [reverse proxy service](/azure/service-fabric/service-fabric-reverseproxy) that abstracts the naming service.</span></span> <span data-ttu-id="4335f-224">Diese Option ist einfacher zu verwenden und führt zu einfacherem Code.</span><span class="sxs-lookup"><span data-stu-id="4335f-224">This option is easier to use and results in simpler code.</span></span>

<span data-ttu-id="4335f-225">Es folgen weitere Optionen für die Kommunikation zwischen Diensten:</span><span class="sxs-lookup"><span data-stu-id="4335f-225">Other options for interservice communication include,</span></span>

- <span data-ttu-id="4335f-226">[Træfik](https://docs.traefik.io/) für erweitertes Routing.</span><span class="sxs-lookup"><span data-stu-id="4335f-226">[Træfik](https://docs.traefik.io/) for advanced routing.</span></span>
- <span data-ttu-id="4335f-227">[DNS](/azure/dns/) für Kompatibilitätsszenarien, bei denen ein Dienst erwartet, dass DNS verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="4335f-227">[DNS](/azure/dns/) for compatibility scenarios where a service expects to use DNS.</span></span>
- <span data-ttu-id="4335f-228">[ServicePartitionClient&lt;TCommunicationClient&gt;](/dotnet/api/microsoft.servicefabric.services.communication.client.servicepartitionclient-1?view=azure-dotnet)-Klasse.</span><span class="sxs-lookup"><span data-stu-id="4335f-228">[ServicePartitionClient&lt;TCommunicationClient&gt;](/dotnet/api/microsoft.servicefabric.services.communication.client.servicepartitionclient-1?view=azure-dotnet) class.</span></span> <span data-ttu-id="4335f-229">Die Klasse speichert Dienstendpunkte zwischen und kann eine bessere Leistung ermöglichen, da Aufrufe direkt zwischen Diensten ohne Vermittler oder benutzerdefinierte Protokolle erfolgen.</span><span class="sxs-lookup"><span data-stu-id="4335f-229">The class caches service endpoints and can enable better performance, as calls go directly between services without intermediaries or custom protocols.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="4335f-230">Überlegungen zur Skalierbarkeit</span><span class="sxs-lookup"><span data-stu-id="4335f-230">Scalability considerations</span></span>

<span data-ttu-id="4335f-231">Service Fabric unterstützt die Skalierung dieser Clusterentitäten:</span><span class="sxs-lookup"><span data-stu-id="4335f-231">Service Fabric supports scaling these cluster entities:</span></span>

- <span data-ttu-id="4335f-232">Skalieren der Anzahl von Knoten für Knotentyp</span><span class="sxs-lookup"><span data-stu-id="4335f-232">Scaling the number of nodes for each node type.</span></span>
- <span data-ttu-id="4335f-233">Skalieren von Diensten</span><span class="sxs-lookup"><span data-stu-id="4335f-233">Scaling services.</span></span>

<span data-ttu-id="4335f-234">Dieser Abschnitt konzentriert sich auf die automatische Skalierung.</span><span class="sxs-lookup"><span data-stu-id="4335f-234">This section is focused on autoscaling.</span></span> <span data-ttu-id="4335f-235">In bestimmten Situationen können Sie die Skalierung manuell vornehmen.</span><span class="sxs-lookup"><span data-stu-id="4335f-235">You can choose to manually scale in situations where appropriate.</span></span> <span data-ttu-id="4335f-236">Dies gilt beispielsweise in einer Situation, in der ein manueller Eingriff erforderlich ist, um die Anzahl der Instanzen festzulegen.</span><span class="sxs-lookup"><span data-stu-id="4335f-236">For example, a situation where manual intervention is required to set the number of instances.</span></span>  

### <a name="initial-cluster-configuration-for-scalability"></a><span data-ttu-id="4335f-237">Anfängliche Clusterkonfiguration für Skalierbarkeit</span><span class="sxs-lookup"><span data-stu-id="4335f-237">Initial cluster configuration for scalability</span></span>

<span data-ttu-id="4335f-238">Wenn Sie einen Service Fabric-Cluster erstellen, stellen Sie die Knotentypen entsprechend Ihren Sicherheits- und Skalierungsanforderungen bereit.</span><span class="sxs-lookup"><span data-stu-id="4335f-238">When you create a Service Fabric cluster, provision the node types based on your security and scalability needs.</span></span> <span data-ttu-id="4335f-239">Jeder Knotentyp wird einer VM-Skalierungsgruppe zugeordnet und kann unabhängig skaliert werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-239">Each node type is mapped to a virtual machine scale set and can be scaled independently.</span></span>

- <span data-ttu-id="4335f-240">Erstellen Sie einen Knotentyp für jede Gruppe von Diensten, die unterschiedliche Skalierungs- oder Ressourcenanforderungen haben.</span><span class="sxs-lookup"><span data-stu-id="4335f-240">Create a node type for each group of services that have different scalability or resource requirements.</span></span> <span data-ttu-id="4335f-241">Stellen Sie zunächst einen Knotentyp (der zum [primären Knotentyp](/azure/service-fabric/service-fabric-cluster-capacity#primary-node-type) wird) für die Systemdienste von Service Fabric bereit.</span><span class="sxs-lookup"><span data-stu-id="4335f-241">Start by provisioning a node type (which becomes the [primary node type](/azure/service-fabric/service-fabric-cluster-capacity#primary-node-type)) for the Service Fabric system services.</span></span> <span data-ttu-id="4335f-242">Erstellen Sie anschließend gesonderte Knotentypen, um Ihre öffentlichen oder Front-End-Dienste und andere Knotentypen auszuführen, die für Ihre Back-End- bzw. private oder isolierte Dienste erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="4335f-242">Then create separate node types to run your public or front-end services, and other node types as necessary for your backend and private or isolated services.</span></span> <span data-ttu-id="4335f-243">Geben Sie [Platzierungseinschränkungen](/azure/service-fabric/service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies) an, damit die Dienste nur für die vorgesehenen Knotentypen bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-243">Specify [placement constraints](/azure/service-fabric/service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies) so that the services are only deployed to the intended node types.</span></span>
- <span data-ttu-id="4335f-244">Geben Sie für jeden Knotentyp eine Dauerhaftigkeitsstufe an.</span><span class="sxs-lookup"><span data-stu-id="4335f-244">Specify the durability tier for each node type.</span></span> <span data-ttu-id="4335f-245">Die Dauerhaftigkeitsstufe beschreibt die Möglichkeit von Service Fabric, Updates für VM-Skalierungsgruppen und Wartungsvorgänge zu beeinflussen.</span><span class="sxs-lookup"><span data-stu-id="4335f-245">The durability tier represents the ability for Service Fabric to influence virtual machine scale set updates and maintenance operations.</span></span> <span data-ttu-id="4335f-246">Wählen Sie für Produktionsworkloads mindestens die Dauerhaftigkeitsstufe „Silber“.</span><span class="sxs-lookup"><span data-stu-id="4335f-246">For production workloads, choose the Silver or higher durability tier.</span></span> <span data-ttu-id="4335f-247">Weitere Informationen zu jeder Stufe finden Sie unter [Die Dauerhaftigkeitsmerkmale des Clusters](/azure/service-fabric/service-fabric-cluster-capacity#the-durability-characteristics-of-the-cluster).</span><span class="sxs-lookup"><span data-stu-id="4335f-247">For information about each tier, see [The durability characteristics of the cluster](/azure/service-fabric/service-fabric-cluster-capacity#the-durability-characteristics-of-the-cluster).</span></span>
- <span data-ttu-id="4335f-248">Bei Verwenden der Dauerhaftigkeitsstufe „Bronze“ erfordern bestimmte Vorgänge manuelle Schritte.</span><span class="sxs-lookup"><span data-stu-id="4335f-248">If using the Bronze durability tier, certain operations require manual steps.</span></span>  <span data-ttu-id="4335f-249">Für Knotentypen mit der Dauerhaftigkeitsstufe „Bronze“ sind beim horizontalen Herunterskalieren zusätzliche Schritte erforderlich.</span><span class="sxs-lookup"><span data-stu-id="4335f-249">For node types with Bronze durability tier additional steps are required during scale in.</span></span> <span data-ttu-id="4335f-250">Weitere Informationen zu Skalierungsvorgängen finden Sie in [dieser Anleitung](/azure/service-fabric/service-fabric-cluster-scale-up-down).</span><span class="sxs-lookup"><span data-stu-id="4335f-250">For more information on scaling operations, see [this guide](/azure/service-fabric/service-fabric-cluster-scale-up-down).</span></span>

### <a name="scaling-nodes"></a><span data-ttu-id="4335f-251">Skalieren von Knoten</span><span class="sxs-lookup"><span data-stu-id="4335f-251">Scaling nodes</span></span>

<span data-ttu-id="4335f-252">Service Fabric bietet für die horizontale Hoch- und Herunterskalierung eine automatische Skalierung. Jeder Knotentyp kann unabhängig für die automatische Skalierung konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-252">Service Fabric supports autoscaling for scale-in and scale-out. Each node type can be configured for autoscaling independently.</span></span>

<span data-ttu-id="4335f-253">Jeder Knotentyp kann maximal 100 Knoten enthalten.</span><span class="sxs-lookup"><span data-stu-id="4335f-253">Each node type can have a maximum of 100 nodes.</span></span> <span data-ttu-id="4335f-254">Beginnen Sie mit einer kleinere Gruppe von Knoten, und fügen Sie abhängig von der Last weitere Knoten hinzu.</span><span class="sxs-lookup"><span data-stu-id="4335f-254">Start with a smaller set of nodes and add more nodes depending on your load.</span></span> <span data-ttu-id="4335f-255">Wenn Sie mehr als 100 Knoten in einem Knotentyp benötigen, müssen Sie weitere Knotentypen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="4335f-255">If you require more than 100 nodes in a node type, you will need to add more node types.</span></span> <span data-ttu-id="4335f-256">Einzelheiten finden Sie unter [Überlegungen zur Kapazitätsplanung für Service Fabric-Cluster](/azure/service-fabric/service-fabric-cluster-capacity).</span><span class="sxs-lookup"><span data-stu-id="4335f-256">For details, see [Service Fabric cluster capacity planning considerations](/azure/service-fabric/service-fabric-cluster-capacity).</span></span> <span data-ttu-id="4335f-257">Eine VM-Skalierungsgruppe wird nicht sofort skaliert, was Sie beim Einrichten von Regeln für die Autoskalierung berücksichtigen sollten.</span><span class="sxs-lookup"><span data-stu-id="4335f-257">A virtual machine scale set does not scale instantaneously, so consider that factor when you set up autoscale rules.</span></span>

<span data-ttu-id="4335f-258">Konfigurieren Sie für die automatische horizontale Herunterskalierung den Knotentyp mit der Dauerhaftigkeitsstufe „Silber“ oder „Gold“.</span><span class="sxs-lookup"><span data-stu-id="4335f-258">To support automatic scale-in, configure the node type to have the Silver or Gold durability tier.</span></span> <span data-ttu-id="4335f-259">Dadurch wird sichergestellt, dass die Skalierung verzögert wird, bis Service Fabric die Verlagerung von Diensten abgeschlossen hat, und dass die VM-Skalierungsgruppen Service Fabric darüber informieren, dass die VMs entfernt und nicht nur vorübergehend heruntergefahren werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-259">This makes sure that scaling in is delayed until Service Fabric is finished relocating services and that the virtual machine scale sets inform Service Fabric that the VMs are removed, not just down temporarily.</span></span>

<span data-ttu-id="4335f-260">Weitere Informationen zum Skalieren auf Knoten-/Clusterebene finden Sie unter [Skalieren von Azure Service Fabric-Clustern](/azure/service-fabric/service-fabric-cluster-scaling).</span><span class="sxs-lookup"><span data-stu-id="4335f-260">For more information about scaling at the node/cluster level, see [Scaling Azure Service Fabric clusters](/azure/service-fabric/service-fabric-cluster-scaling).</span></span>

### <a name="scaling-services"></a><span data-ttu-id="4335f-261">Skalieren von Diensten</span><span class="sxs-lookup"><span data-stu-id="4335f-261">Scaling services</span></span>

<span data-ttu-id="4335f-262">Zustandslose und zustandsbehaftete Dienste verfolgen bei der Skalierung unterschiedliche Ansätze.</span><span class="sxs-lookup"><span data-stu-id="4335f-262">Stateless and stateful services apply different approaches to scaling.</span></span>

#### <a name="autoscaling-for-stateless-services"></a><span data-ttu-id="4335f-263">Automatische Skalierung für zustandslose Dienste</span><span class="sxs-lookup"><span data-stu-id="4335f-263">Autoscaling for stateless services</span></span>

- <span data-ttu-id="4335f-264">Verwenden Sie den Trigger bei durchschnittlicher Partitionslast.</span><span class="sxs-lookup"><span data-stu-id="4335f-264">Use the average partition load trigger.</span></span> <span data-ttu-id="4335f-265">Dieser Trigger bestimmt, wann der Dienst horizontal herunter- oder hochskaliert wird, und zwar basierend auf einem in der Skalierungsrichtlinie angegebenen Schwellenwert für die Last.</span><span class="sxs-lookup"><span data-stu-id="4335f-265">This trigger determines when the service is scaled in or out, based on a load threshold value specified in the scaling policy.</span></span> <span data-ttu-id="4335f-266">Sie können auch festlegen, wie oft der Trigger überprüft wird.</span><span class="sxs-lookup"><span data-stu-id="4335f-266">You can also set how often the trigger is checked.</span></span> <span data-ttu-id="4335f-267">Siehe [Trigger für die durchschnittliche Partitionslast mit instanzbasierter Skalierung](/azure/service-fabric/service-fabric-cluster-resource-manager-autoscaling#average-partition-load-trigger-with-instance-based-scaling).</span><span class="sxs-lookup"><span data-stu-id="4335f-267">See [Average partition load trigger with instance-based scaling](/azure/service-fabric/service-fabric-cluster-resource-manager-autoscaling#average-partition-load-trigger-with-instance-based-scaling).</span></span> <span data-ttu-id="4335f-268">Dadurch ist ein zentrales Hochskalieren auf die Anzahl verfügbarer Knoten möglich.</span><span class="sxs-lookup"><span data-stu-id="4335f-268">This allows you to scale up to the number of available nodes.</span></span>
- <span data-ttu-id="4335f-269">Legen Sie im Dienstmanifest **InstanceCount** auf -1 fest, was Service Fabric anweist, auf jedem Knoten eine Instanz des Diensts auszuführen.</span><span class="sxs-lookup"><span data-stu-id="4335f-269">Set **InstanceCount** to -1 in the service manifest, which tells Service Fabric to run an instance of the service on every node.</span></span> <span data-ttu-id="4335f-270">Dieser Ansatz ermöglicht dem Dienst eine dynamische Skalierung entsprechend der Skalierung des Clusters.</span><span class="sxs-lookup"><span data-stu-id="4335f-270">This approach enables the service to scale dynamically as the cluster scales.</span></span> <span data-ttu-id="4335f-271">Wenn sich die Anzahl der Knoten im Cluster ändert, erstellt und löscht Service Fabric automatisch entsprechende Dienstinstanzen.</span><span class="sxs-lookup"><span data-stu-id="4335f-271">As the number of nodes in the cluster changes, Service Fabric automatically creates and deletes service instances to match.</span></span>

> [!NOTE]
> <span data-ttu-id="4335f-272">In einigen Fällen möchten Sie Ihren Dienst möglicherweise manuell skalieren.</span><span class="sxs-lookup"><span data-stu-id="4335f-272">In some cases, you might want to manually scale your service.</span></span>  <span data-ttu-id="4335f-273">Wenn Sie beispielsweise einen Dienst haben, der Daten aus Event Hubs liest, möchten Sie möglicherweise, dass eine dedizierte Instanz Daten aus jeder Event Hub-Partition liest, um einen gleichzeitigen Zugriff auf die Partition zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="4335f-273">For example, if you have a service that reads from Event Hubs, you might want a dedicated instance to read from each event hub partition, to avoid concurrent access to the partition.</span></span>  

#### <a name="scaling-for-stateful-services"></a><span data-ttu-id="4335f-274">Skalierung für zustandsbehaftete Dienste</span><span class="sxs-lookup"><span data-stu-id="4335f-274">Scaling for stateful services</span></span>

<span data-ttu-id="4335f-275">Bei einem zustandsbehafteten Dienst wird die Skalierung von der Anzahl der Partitionen, der Größe jeder Partition und der Anzahl der Partitionen/Replikate bestimmt, die auf einer bestimmten VM ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-275">For a stateful service, scaling is controlled by the number of partitions, the size of each partition, and the number of partitions/replicas running on a given machine.</span></span>

- <span data-ttu-id="4335f-276">Wenn Sie partitionierte Dienste erstellen, empfehlen wir eine hohe Anzahl kleiner Partitionen.</span><span class="sxs-lookup"><span data-stu-id="4335f-276">If you are creating partitioned services, we recommend having a high number of partitions that are small in size.</span></span> <span data-ttu-id="4335f-277">Wenn weitere Knoten hinzugefügt werden, verteilt Service Fabric die Workloads standardmäßig auf die neuen VMs.</span><span class="sxs-lookup"><span data-stu-id="4335f-277">If more nodes are added, Service Fabric distributes the workloads onto the new machines by default.</span></span> <span data-ttu-id="4335f-278">Wenn es beispielsweise 5 Knoten und 10 Partitionen gibt, platziert Service Fabric standardmäßig auf jedem Knoten zwei primäre Replikate.</span><span class="sxs-lookup"><span data-stu-id="4335f-278">For example, if there are 5 nodes and 10 partitions, by default Service Fabric will place two primary replicas on each node.</span></span> <span data-ttu-id="4335f-279">Wenn Sie die Knoten horizontal skalieren, können Sie eine höhere Leistung erzielen, da die Verarbeitungsaufgaben gleichmäßig auf mehr Ressourcen verteilt werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-279">If you scale out the nodes, you can achieve greater performance, because the work is evenly distributed across more resources.</span></span> <span data-ttu-id="4335f-280">Weitere Informationen zu Szenarien, die diese Strategie befolgen, finden Sie unter [Skalierung in Service Fabric](/azure/service-fabric/service-fabric-concepts-scalability).</span><span class="sxs-lookup"><span data-stu-id="4335f-280">For information about scenarios that take advantage of this strategy, see [Scaling in Service Fabric](/azure/service-fabric/service-fabric-concepts-scalability).</span></span>
- <span data-ttu-id="4335f-281">Das Hinzufügen oder Entfernen von Partitionen wird nicht sonderlich gut unterstützt.</span><span class="sxs-lookup"><span data-stu-id="4335f-281">Adding or removing partitions is not well supported.</span></span> <span data-ttu-id="4335f-282">Eine weitere häufig verwendete Option zur Skalierung ist das dynamische Erstellen oder Löschen von Diensten oder ganzen Anwendungsinstanzen.</span><span class="sxs-lookup"><span data-stu-id="4335f-282">Another option commonly used to scale is to dynamically create or delete services or whole application instances.</span></span> <span data-ttu-id="4335f-283">Ein Beispiel dieser Vorgehensweise finden Sie unter [Skalieren durch das Erstellen oder Entfernen von neuen benannten Diensten](/azure/service-fabric/service-fabric-concepts-scalability#scaling-by-creating-or-removing-new-named-services).</span><span class="sxs-lookup"><span data-stu-id="4335f-283">An example of that pattern is described in [Scaling by creating or removing new named services](/azure/service-fabric/service-fabric-concepts-scalability#scaling-by-creating-or-removing-new-named-services).</span></span>

<span data-ttu-id="4335f-284">Weitere Informationen finden Sie unter</span><span class="sxs-lookup"><span data-stu-id="4335f-284">For more information, see:</span></span>

- [<span data-ttu-id="4335f-285">Zentrales Hoch- oder Herunterskalieren eines Service Fabric-Clusters mithilfe von Regeln für die automatische Skalierung oder eines manuellen Verfahrens</span><span class="sxs-lookup"><span data-stu-id="4335f-285">Scale a Service Fabric cluster in or out using autoscale rules or manually</span></span>](/azure/service-fabric/service-fabric-cluster-scale-up-down)
- [<span data-ttu-id="4335f-286">Programmgesteuertes Skalieren eines Service Fabric-Clusters</span><span class="sxs-lookup"><span data-stu-id="4335f-286">Scale a Service Fabric cluster programmatically</span></span>](/azure/service-fabric/service-fabric-cluster-programmatic-scaling)
- [<span data-ttu-id="4335f-287">Skalieren eines Service Fabric-Clusters durch Hinzufügen einer VM-Skalierungsgruppe</span><span class="sxs-lookup"><span data-stu-id="4335f-287">Scale a Service Fabric cluster out by adding a Virtual Machine Scale Set</span></span>](/azure/service-fabric/virtual-machine-scale-set-scale-node-type-scale-out)

### <a name="using-metrics-to-balance-load"></a><span data-ttu-id="4335f-288">Verwenden von Metriken für den Lastenausgleich</span><span class="sxs-lookup"><span data-stu-id="4335f-288">Using metrics to balance load</span></span>

<span data-ttu-id="4335f-289">Je nachdem, wie Sie die Partition entwerfen, kann es Knoten mit Replikaten geben, die mehr Datenverkehr erhalten als andere.</span><span class="sxs-lookup"><span data-stu-id="4335f-289">Depending on how you design the partition, you might have nodes with replicas that get more traffic than others.</span></span> <span data-ttu-id="4335f-290">Um dies zu vermeiden, partitionieren Sie den Dienstzustand so, dass er auf alle Partitionen verteilt wird.</span><span class="sxs-lookup"><span data-stu-id="4335f-290">To avoid this situation, partition the service state so that it is distributed across all partitions.</span></span> <span data-ttu-id="4335f-291">Verwenden Sie das Bereichspartitionierungsschema mit einem geeigneten Hashalgorithmus.</span><span class="sxs-lookup"><span data-stu-id="4335f-291">Use the range partitioning scheme with a good hash algorithm.</span></span> <span data-ttu-id="4335f-292">Siehe [Erste Schritte mit der Partitionierung](/azure/service-fabric/service-fabric-concepts-partitioning#get-started-with-partitioning).</span><span class="sxs-lookup"><span data-stu-id="4335f-292">See [Get started with partitioning](/azure/service-fabric/service-fabric-concepts-partitioning#get-started-with-partitioning).</span></span>

<span data-ttu-id="4335f-293">Service Fabric verwendet Metriken, um zu wissen, wie Dienste innerhalb eines Clusters platziert und aufeinander abgestimmt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="4335f-293">Service Fabric uses metrics to know how to place and balance services within a cluster.</span></span> <span data-ttu-id="4335f-294">Sie können beim Erstellen dieses Diensts für jede Metrik, die einem Dienst zugeordnet ist, eine Standardlast angeben.</span><span class="sxs-lookup"><span data-stu-id="4335f-294">You can specify a default load for each metric associated with a service when that service is created.</span></span> <span data-ttu-id="4335f-295">Service Fabric berücksichtigt diese Last anschließend bei der Platzierung des Diensts oder immer dann, wenn der Dienst verschoben werden muss (z.B. bei Upgrades), um zu versuchen, die Knoten im Cluster in Einklang zu bringen.</span><span class="sxs-lookup"><span data-stu-id="4335f-295">Service Fabric then takes that load into account when placing the service, or whenever the service needs to move (for example, during upgrades) to try to balance the nodes in the cluster.</span></span>

<span data-ttu-id="4335f-296">Die anfänglich angegebene Standardlast für einen Dienst ändert sich während dessen Lebensdauer nicht.</span><span class="sxs-lookup"><span data-stu-id="4335f-296">The initially specified default load for a service will not change over the lifetime of the service.</span></span> <span data-ttu-id="4335f-297">Um sich ändernde Metriken für einen bestimmten Dienst zu erfassen, wird empfohlen, dass Sie Ihren Dienst überwachen und dann die Last dynamisch melden.</span><span class="sxs-lookup"><span data-stu-id="4335f-297">To capture changing metrics for a given service, we recommend that you monitor your service and then report the load dynamically.</span></span> <span data-ttu-id="4335f-298">Dies ermöglicht Service Fabric, die Zuordnung basierend auf der gemeldeten Last zu einem gegebenen Zeitpunkt anzupassen.</span><span class="sxs-lookup"><span data-stu-id="4335f-298">This allows Service Fabric to adjust the allocation based on the reported load at a given time.</span></span> <span data-ttu-id="4335f-299">Verwenden Sie die [IServicePartition.ReportLoad](/dotnet/api/system.fabric.iservicepartition.reportload?view=azure-dotnet)-Methode, um benutzerdefinierte Metriken zu melden.</span><span class="sxs-lookup"><span data-stu-id="4335f-299">Use the [IServicePartition.ReportLoad](/dotnet/api/system.fabric.iservicepartition.reportload?view=azure-dotnet) method to report custom metrics.</span></span> <span data-ttu-id="4335f-300">Weitere Informationen finden Sie unter [Dynamische Last](/azure/service-fabric/service-fabric-cluster-resource-manager-metrics#dynamic-load).</span><span class="sxs-lookup"><span data-stu-id="4335f-300">For more information, see [Dynamic load](/azure/service-fabric/service-fabric-cluster-resource-manager-metrics#dynamic-load).</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="4335f-301">Überlegungen zur Verfügbarkeit</span><span class="sxs-lookup"><span data-stu-id="4335f-301">Availability considerations</span></span>

<span data-ttu-id="4335f-302">Platzieren Sie Ihre Dienste auf einem anderen Knotentyp als dem primären Knotentyp.</span><span class="sxs-lookup"><span data-stu-id="4335f-302">Place your services in a node type other than the primary node type.</span></span> <span data-ttu-id="4335f-303">Die Service Fabric-Systemdienste werden stets auf dem primären Knotentyp platziert.</span><span class="sxs-lookup"><span data-stu-id="4335f-303">The Service Fabric system services are always deployed to the primary node type.</span></span> <span data-ttu-id="4335f-304">Wenn Ihre Dienste auf dem primären Knotentyp bereitgestellt werden, können sie mit Systemdiensten um Ressourcen konkurrieren und die Systemdienste stören.</span><span class="sxs-lookup"><span data-stu-id="4335f-304">If your services are deployed to the primary node type, they might compete with system services for resources and interfere with the system services.</span></span> <span data-ttu-id="4335f-305">Wenn von einem Knotentyp erwartet wird, dass er zustandsbehaftete Dienste hostet, stellen Sie sicher, dass es mindestens fünf Knoteninstanzen gibt, und Sie wählen die Dauerhaftigkeitsstufe „Silber“ oder „Gold“.</span><span class="sxs-lookup"><span data-stu-id="4335f-305">If a node type is expected to host stateful services, make sure there are at least five node instances and you select the Silver or Gold Durability tier.</span></span>

<span data-ttu-id="4335f-306">Erwägen Sie das Einschränken der Ressourcen Ihrer Dienste.</span><span class="sxs-lookup"><span data-stu-id="4335f-306">Consider constraining the resources of your services.</span></span> <span data-ttu-id="4335f-307">Siehe [Ressourcenkontrollmechanismus](/azure/service-fabric/service-fabric-resource-governance#resource-governance-mechanism).</span><span class="sxs-lookup"><span data-stu-id="4335f-307">See [Resource governance mechanism](/azure/service-fabric/service-fabric-resource-governance#resource-governance-mechanism).</span></span>

- <span data-ttu-id="4335f-308">Mischen Sie auf demselben Knotentyp keine Dienste mit Ressourcenkontrolle mit Diensten ohne Ressourcenkontrolle.</span><span class="sxs-lookup"><span data-stu-id="4335f-308">Do not mix resource governed and resource non-governed services on the same node type.</span></span> <span data-ttu-id="4335f-309">Die Dienste ohne Kontrolle nutzen ggf. zu viele Ressourcen, wodurch die Dienste mit Ressourcenkontrolle beeinträchtigt werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-309">The non-governed services might consume too many resources, affecting the resource governed services.</span></span> <span data-ttu-id="4335f-310">Geben Sie [Platzierungseinschränkungen](/azure/service-fabric/service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies) an, um sicherzustellen, dass diese Arten von Diensten nicht in der gleichen Gruppe von Knoten ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-310">Specify [placement constraints](/azure/service-fabric/service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies) to make sure that those types of services do not run on the same set of nodes.</span></span> <span data-ttu-id="4335f-311">Siehe [Festlegen der Ressourcenkontrolle](/azure/service-fabric/service-fabric-resource-governance#specify-resource-governance).</span><span class="sxs-lookup"><span data-stu-id="4335f-311">See [Specify resource governance](/azure/service-fabric/service-fabric-resource-governance#specify-resource-governance).</span></span> <span data-ttu-id="4335f-312">(Dies ist eine Beispiel des [Bulkhead-Musters](../../patterns/bulkhead.md).)</span><span class="sxs-lookup"><span data-stu-id="4335f-312">(This is an example of the [Bulkhead pattern](../../patterns/bulkhead.md).)</span></span>
- <span data-ttu-id="4335f-313">Geben Sie die CPU-Kerne und Arbeitsspeichergröße an, die für eine Dienstinstanz reserviert werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-313">Specify the CPU cores and memory to reserve for a service instance.</span></span> <span data-ttu-id="4335f-314">Informationen zur Verwendung und Einschränkungen von Richtlinien zur Ressourcenkontrolle finden Sie unter [Ressourcenkontrolle](/azure/service-fabric/service-fabric-resource-governance).</span><span class="sxs-lookup"><span data-stu-id="4335f-314">For information about usage and limitations of resource governance policies, see [Resource governance](/azure/service-fabric/service-fabric-resource-governance).</span></span>

<span data-ttu-id="4335f-315">Stellen Sie sicher, dass die Anzahl der Zielinstanzen oder Replikate jedes Diensts größer als 1 ist, um einen Single Point of Failure (SPOF) zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="4335f-315">Make sure every service’s target instance or replica count is greater than 1 to avoid a single point of failure (SPOF).</span></span> <span data-ttu-id="4335f-316">Die größtmögliche Anzahl von Dienstinstanzen oder Replikaten ist gleich der Anzahl der Knoten, auf die der Dienst beschränkt ist.</span><span class="sxs-lookup"><span data-stu-id="4335f-316">The largest number that you can use as service instance or replica count equals the number nodes that to which the service is constrained.</span></span>

<span data-ttu-id="4335f-317">Stellen Sie sicher, dass alle zustandsbehafteten Dienste mindestens über zwei aktive sekundäre Replikate verfügen.</span><span class="sxs-lookup"><span data-stu-id="4335f-317">Make sure every stateful service has at least two active secondary replicas.</span></span> <span data-ttu-id="4335f-318">Für Produktionsworkloads werden fünf Replikate empfohlen.</span><span class="sxs-lookup"><span data-stu-id="4335f-318">Five replicas are recommended for production workloads.</span></span>

<span data-ttu-id="4335f-319">Weitere Informationen finden Sie unter [Verfügbarkeit der Service Fabric-Dienste](/azure/service-fabric/service-fabric-availability-services).</span><span class="sxs-lookup"><span data-stu-id="4335f-319">For more information, see [Availability of Service Fabric services](/azure/service-fabric/service-fabric-availability-services).</span></span>

## <a name="security-considerations"></a><span data-ttu-id="4335f-320">Sicherheitshinweise</span><span class="sxs-lookup"><span data-stu-id="4335f-320">Security considerations</span></span>

<span data-ttu-id="4335f-321">Hier sind einige wichtige Punkte zur Absicherung Ihrer Anwendung in Service Fabric:</span><span class="sxs-lookup"><span data-stu-id="4335f-321">Here are some key points for securing your application on Service Fabric:</span></span>

### <a name="virtual-network"></a><span data-ttu-id="4335f-322">Virtuelles Netzwerk</span><span class="sxs-lookup"><span data-stu-id="4335f-322">Virtual network</span></span>

<span data-ttu-id="4335f-323">Erwägen Sie, Subnetzgrenzen für jede VM-Skalierungsgruppe zu definieren, um den Kommunikationsfluss zu steuern.</span><span class="sxs-lookup"><span data-stu-id="4335f-323">Consider defining subnet boundaries for each virtual machine scale set to control the flow of communication.</span></span> <span data-ttu-id="4335f-324">Jeder Knotentyp hat seine eigene VM-Skalierungsgruppe, die in einem Subnetz innerhalb des virtuellen Netzwerks des Service Fabric-Clusters festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="4335f-324">Each node type has its own virtual machine scale set in a subnet within the Service Fabric cluster's virtual network.</span></span> <span data-ttu-id="4335f-325">Netzwerksicherheitsgruppen (NSGs) können Subnetzen zum Zulassen oder Verweigern von Netzwerkdatenverkehr hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-325">Network Security Groups (NSGs) can be added to the subnets to allow or reject network traffic.</span></span> <span data-ttu-id="4335f-326">Beispielsweise können Sie bei Front-End- und Back-End-Knotentypen dem Back-End-Subnetz eine NSG hinzufügen, um eingehenden Datenverkehr nur für das Front-End-Subnetz zu akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="4335f-326">For example, with front-end and back-end node types, you can add an NSG to the backend subnet to accept inbound traffic only the front-end subnet.</span></span>

<span data-ttu-id="4335f-327">Verwenden Sie beim Aufrufen externer Azure-Dienste im Cluster die [Dienstendpunkte des virtuellen Netzwerks](/azure/virtual-network/virtual-network-service-endpoints-overview), sofern der Azure-Dienst dies unterstützt.</span><span class="sxs-lookup"><span data-stu-id="4335f-327">When calling external Azure Services from the cluster, use [Virtual Network service endpoints](/azure/virtual-network/virtual-network-service-endpoints-overview) if the Azure service supports it.</span></span> <span data-ttu-id="4335f-328">Durch die Verwendung eines Dienstendpunkts wird der Dienst nur im virtuellen Netzwerk des Clusters abgesichert.</span><span class="sxs-lookup"><span data-stu-id="4335f-328">Using a service endpoint secures the service to only the cluster’s Virtual Network.</span></span> <span data-ttu-id="4335f-329">Wenn Sie beispielsweise Cosmos DB zum Speichern von Daten verwenden, konfigurieren Sie das Cosmos DB-Konto mit einem Dienstendpunkt, um nur den Zugriff aus einem bestimmten Subnetz zuzulassen.</span><span class="sxs-lookup"><span data-stu-id="4335f-329">For example, if you are using Cosmos DB to store data, configure the Cosmos DB account with a service endpoint to allow access only from a specific subnet.</span></span> <span data-ttu-id="4335f-330">Siehe [Zugreifen auf Azure Cosmos DB-Ressourcen über virtuelle Netzwerke](/azure/cosmos-db/vnet-service-endpoint).</span><span class="sxs-lookup"><span data-stu-id="4335f-330">See [Access Azure Cosmos DB resources from virtual networks](/azure/cosmos-db/vnet-service-endpoint).</span></span>

### <a name="endpoints-and-interservice-communication"></a><span data-ttu-id="4335f-331">Endpunkte und Kommunikation zwischen Diensten</span><span class="sxs-lookup"><span data-stu-id="4335f-331">Endpoints and interservice communication</span></span>

<span data-ttu-id="4335f-332">Erstellen Sie keinen ungeschützten Service Fabric-Cluster.</span><span class="sxs-lookup"><span data-stu-id="4335f-332">Do not create an unsecured Service Fabric cluster.</span></span> <span data-ttu-id="4335f-333">Falls der Cluster Verwaltungsendpunkte im öffentlichen Internet verfügbar macht, können anonyme Benutzer eine Verbindung mit ihm herstellen.</span><span class="sxs-lookup"><span data-stu-id="4335f-333">If the cluster exposes management endpoints to the public internet, anonymous users can connect to it.</span></span> <span data-ttu-id="4335f-334">Nicht geschützte Cluster werden für Produktionsworkloads nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="4335f-334">Unsecured clusters are not supported for production workloads.</span></span> <span data-ttu-id="4335f-335">Siehe: [Szenarien für die Clustersicherheit in Service Fabric](/azure/service-fabric/service-fabric-cluster-security).</span><span class="sxs-lookup"><span data-stu-id="4335f-335">See: [Service Fabric cluster security scenarios](/azure/service-fabric/service-fabric-cluster-security).</span></span>

<span data-ttu-id="4335f-336">So schützen Sie die Kommunikation zwischen Diensten</span><span class="sxs-lookup"><span data-stu-id="4335f-336">To secure your interservice communications:</span></span>

- <span data-ttu-id="4335f-337">Erwägen Sie in Ihren ASP.NET Core- oder Java-Webdiensten das Aktivieren von HTTPS-Endpunkten.</span><span class="sxs-lookup"><span data-stu-id="4335f-337">Consider enabling HTTPS endpoints in your ASP.NET Core or Java web services.</span></span>
- <span data-ttu-id="4335f-338">Richten Sie eine sichere Verbindung zwischen dem Reverseproxy und Diensten ein.</span><span class="sxs-lookup"><span data-stu-id="4335f-338">Establish a secure connection between the reverse proxy and services.</span></span>  <span data-ttu-id="4335f-339">Einzelheiten finden Sie unter [Herstellen einer Verbindung mit einem sicheren Dienst](/azure/service-fabric/service-fabric-reverseproxy-configure-secure-communication).</span><span class="sxs-lookup"><span data-stu-id="4335f-339">For details, see [Connect to a secure service](/azure/service-fabric/service-fabric-reverseproxy-configure-secure-communication).</span></span>

<span data-ttu-id="4335f-340">Wenn Sie ein [API-Gateway](../../microservices/design/gateway.md) verwenden, können Sie die [Authentifizierung an das Gateway auslagern](../../patterns/gateway-offloading.md).</span><span class="sxs-lookup"><span data-stu-id="4335f-340">If you are using an [API gateway](../../microservices/design/gateway.md), you can [offload authentication](../../patterns/gateway-offloading.md) to the gateway.</span></span> <span data-ttu-id="4335f-341">Stellen Sie sicher, dass die einzelnen Dienste nicht direkt (ohne das API-Gateway) erreicht werden können, es sei denn, es ist zusätzliche Sicherheit für die Authentifizierung von Nachrichten vorhanden, ob sie vom Gateway stammen.</span><span class="sxs-lookup"><span data-stu-id="4335f-341">Make sure that the individual services cannot be reached directly (without the API gateway) unless additional security is in place to authenticate messages whether they come from the gateway.</span></span>

<span data-ttu-id="4335f-342">Machen Sie den Service Fabric-Reverseproxy nicht öffentlich verfügbar.</span><span class="sxs-lookup"><span data-stu-id="4335f-342">Do not expose the Service Fabric reverse proxy publicly.</span></span> <span data-ttu-id="4335f-343">Dadurch sind alle Dienste, die HTTP-Endpunkte verfügbar machen, von außerhalb des Clusters adressierbar, wodurch Sicherheitsrisiken entstehen und möglicherweise zusätzliche Informationen außerhalb des Clusters unnötig preisgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-343">Doing so causes all services that expose HTTP endpoints to be addressable from outside the cluster, introducing security vulnerabilities and potentially exposing additional information outside the cluster unnecessarily.</span></span> <span data-ttu-id="4335f-344">Wenn Sie auf einen Dienst öffentlich zugreifen möchten, verwenden Sie ein API-Gateway.</span><span class="sxs-lookup"><span data-stu-id="4335f-344">If you want to access a service publicly, use an API gateway.</span></span> <span data-ttu-id="4335f-345">Einige Optionen werden im Abschnitt [API-Gateway](#api-gateway) genannt.</span><span class="sxs-lookup"><span data-stu-id="4335f-345">Some options are mentioned in the [API gateway](#api-gateway) section.</span></span>

<span data-ttu-id="4335f-346">Remotedesktop ist nützlich für die Diagnose und Problembehandlung. Sie sollten diese Anwendung jedoch unbedingt schließen, damit keine Sicherheitslücke entsteht.</span><span class="sxs-lookup"><span data-stu-id="4335f-346">Remote desktop is useful for diagnostic and troubleshooting, but make sure not to leave it open otherwise it causes a security hole.</span></span>

### <a name="secrets-and-certificates"></a><span data-ttu-id="4335f-347">Geheime Schlüssel und Zertifikate</span><span class="sxs-lookup"><span data-stu-id="4335f-347">Secrets and certificates</span></span>

<span data-ttu-id="4335f-348">Um aus einem Service Fabric-Dienst auf Key Vault-Geheimnisse zuzugreifen, aktivieren Sie [verwaltete Identität](/azure/active-directory/managed-identities-azure-resources/services-support-msi#azure-virtual-machine-scale-sets) für die VM-Skalierungsgruppe, die den Dienst hostet.</span><span class="sxs-lookup"><span data-stu-id="4335f-348">To access Key Vault secrets from a Service Fabric service, enable [managed identity](/azure/active-directory/managed-identities-azure-resources/services-support-msi#azure-virtual-machine-scale-sets) on the virtual machine scale set that hosts the service.</span></span> <span data-ttu-id="4335f-349">Beispielcode: Verwenden Sie Key Vault aus App Service mit einer verwalteten Dienstidentität.</span><span class="sxs-lookup"><span data-stu-id="4335f-349">Sample code: Use Key Vault from App Service with Managed Service Identity.</span></span>

<span data-ttu-id="4335f-350">Verwenden Sie keine Clientzertifikate für den Zugriff auf Service Fabric Explorer.</span><span class="sxs-lookup"><span data-stu-id="4335f-350">Do not use client certificates to access Service Fabric Explorer.</span></span> <span data-ttu-id="4335f-351">Nutzen Sie stattdessen Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="4335f-351">Instead, use Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="4335f-352">Siehe auch [Azure-Dienste, die die Azure AD-Authentifizierung unterstützen](/azure/active-directory/managed-identities-azure-resources/services-support-msi%23azure-services-that-support-azure-ad-authentication).</span><span class="sxs-lookup"><span data-stu-id="4335f-352">Also see, [Azure services that support Azure AD authentication](/azure/active-directory/managed-identities-azure-resources/services-support-msi%23azure-services-that-support-azure-ad-authentication).</span></span>

<span data-ttu-id="4335f-353">Verwenden Sie keine selbstsignierten Zertifikate in der Produktion.</span><span class="sxs-lookup"><span data-stu-id="4335f-353">Do not use self-signed certificates for production.</span></span>

<span data-ttu-id="4335f-354">Weitere Informationen zum Absichern von Service Fabric finden Sie unter:</span><span class="sxs-lookup"><span data-stu-id="4335f-354">For more information about securing Service Fabric, see:</span></span>

- [<span data-ttu-id="4335f-355">Übersicht über die Azure Service Fabric-Sicherheit</span><span class="sxs-lookup"><span data-stu-id="4335f-355">Azure Service Fabric security overview</span></span>](/azure/security/azure-service-fabric-security-overview)
- [<span data-ttu-id="4335f-356">Bewährte Methoden für die Azure Service Fabric-Sicherheit</span><span class="sxs-lookup"><span data-stu-id="4335f-356">Azure Service Fabric security best practices</span></span>](/azure/security/azure-service-fabric-security-best-practices)
- [<span data-ttu-id="4335f-357">Checkliste für die Azure Service Fabric-Sicherheit</span><span class="sxs-lookup"><span data-stu-id="4335f-357">Azure Service Fabric security checklist</span></span>](/azure/security/azure-service-fabric-security-checklist)

## <a name="monitoring-considerations"></a><span data-ttu-id="4335f-358">Aspekte der Überwachung</span><span class="sxs-lookup"><span data-stu-id="4335f-358">Monitoring considerations</span></span>

<span data-ttu-id="4335f-359">Bevor Sie sich mit den Überwachungsoptionen befassen, empfehlen wir Ihnen, diesen Artikel über die [Diagnose gängiger Szenarien mit Service Fabric](/azure/service-fabric/service-fabric-diagnostics-common-scenarios) zu lesen.</span><span class="sxs-lookup"><span data-stu-id="4335f-359">Before you explore the monitoring options, we recommend you read this article about [diagnosing common scenarios with Service Fabric](/azure/service-fabric/service-fabric-diagnostics-common-scenarios).</span></span> <span data-ttu-id="4335f-360">Sie können sich Überwachungsdaten in diesen Kategorien vorstellen:</span><span class="sxs-lookup"><span data-stu-id="4335f-360">You can think of monitoring data in these sets:</span></span>

- [<span data-ttu-id="4335f-361">Anwendungsmetriken und -protokolle</span><span class="sxs-lookup"><span data-stu-id="4335f-361">Application metrics and logs</span></span>](#application-metrics-and-logs)
- [<span data-ttu-id="4335f-362">Service Fabric-Integritäts- und Ereignisdaten</span><span class="sxs-lookup"><span data-stu-id="4335f-362">Service Fabric health and event data</span></span>](#service-fabric-health-and-event-data)
- [<span data-ttu-id="4335f-363">Infrastrukturmetriken und -protokolle</span><span class="sxs-lookup"><span data-stu-id="4335f-363">Infrastructure metrics and logs</span></span>](#infrastructure-metrics-and-logs)
- [<span data-ttu-id="4335f-364">Metriken und Protokolle für abhängige Dienste</span><span class="sxs-lookup"><span data-stu-id="4335f-364">Metrics and logs for dependent services</span></span>](#dependent-service-metrics)

<span data-ttu-id="4335f-365">Es gibt zwei Hauptoptionen für die Analyse von Daten:</span><span class="sxs-lookup"><span data-stu-id="4335f-365">These are the two main options for analyzing that data:</span></span>

- <span data-ttu-id="4335f-366">Application Insights</span><span class="sxs-lookup"><span data-stu-id="4335f-366">Application Insights</span></span>
- <span data-ttu-id="4335f-367">Log Analytics</span><span class="sxs-lookup"><span data-stu-id="4335f-367">Log Analytics</span></span>

<span data-ttu-id="4335f-368">Mit Azure Monitor können Sie Dashboards für die Überwachung einrichten und Warnmeldungen an Bediener senden.</span><span class="sxs-lookup"><span data-stu-id="4335f-368">You can use Azure Monitor to set up dashboards for monitoring and to send alerts to operators.</span></span> <span data-ttu-id="4335f-369">Es gibt auch einige Überwachungstools von Drittanbietern, die in Service Fabric integriert werden können, z.B. Dynatrace.</span><span class="sxs-lookup"><span data-stu-id="4335f-369">There are also some third-party monitoring tools that are integrated with Service Fabric, such as Dynatrace.</span></span> <span data-ttu-id="4335f-370">Einzelheiten finden Sie unter [Partnerlösungen für die Überwachung von Azure Service Fabric](/azure/service-fabric/service-fabric-diagnostics-partners).</span><span class="sxs-lookup"><span data-stu-id="4335f-370">For details, see [Azure Service Fabric Monitoring Partners](/azure/service-fabric/service-fabric-diagnostics-partners).</span></span>

### <a name="application-metrics-and-logs"></a><span data-ttu-id="4335f-371">Anwendungsmetriken und -protokolle</span><span class="sxs-lookup"><span data-stu-id="4335f-371">Application metrics and logs</span></span>

<span data-ttu-id="4335f-372">Die Anwendungstelemetrie liefert Daten über Ihren Dienst, die Ihnen helfen können, die Integrität Ihres Diensts zu überwachen und Probleme auszumachen.</span><span class="sxs-lookup"><span data-stu-id="4335f-372">Application telemetry provides data about your service that can help you monitor the health of your service and identify issues.</span></span> <span data-ttu-id="4335f-373">So fügen Sie Ihrem Dienst Ablaufverfolgungen und Ereignisse hinzu</span><span class="sxs-lookup"><span data-stu-id="4335f-373">To add traces and events in your service:</span></span>

- <span data-ttu-id="4335f-374">[Microsoft.Extensions.Logging](/azure/service-fabric/service-fabric-how-to-diagnostics-log#microsoftextensionslogging), wenn Sie Ihren Dienst mit ASP.NET Core entwickeln.</span><span class="sxs-lookup"><span data-stu-id="4335f-374">[Microsoft.Extensions.Logging](/azure/service-fabric/service-fabric-how-to-diagnostics-log#microsoftextensionslogging) if you are developing your service with ASP.NET Core.</span></span> <span data-ttu-id="4335f-375">Verwenden Sie für andere Frameworks eine Protokollierungsbibliothek Ihrer Wahl wie z.B. Serilog.</span><span class="sxs-lookup"><span data-stu-id="4335f-375">For other frameworks, use a logging library of your choice such as Serilog.</span></span>
- <span data-ttu-id="4335f-376">Sie können Ihre eigene Instrumentierung hinzufügen, indem Sie die [TelemetryClient](/dotnet/api/microsoft.applicationinsights.telemetryclient?view=azure-dotnet)-Klasse im SDK verwenden und die Daten in Application Insights anzeigen.</span><span class="sxs-lookup"><span data-stu-id="4335f-376">You can add your own instrumentation by using the [TelemetryClient](/dotnet/api/microsoft.applicationinsights.telemetryclient?view=azure-dotnet) class in the SDK and view the data in Application Insights.</span></span> <span data-ttu-id="4335f-377">Siehe [Hinzufügen einer benutzerdefinierten Instrumentierung zu Ihrer Anwendung](/azure/service-fabric/service-fabric-tutorial-monitoring-aspnet#add-custom-instrumentation-to-your-application).</span><span class="sxs-lookup"><span data-stu-id="4335f-377">See [Add custom instrumentation to your application](/azure/service-fabric/service-fabric-tutorial-monitoring-aspnet#add-custom-instrumentation-to-your-application).</span></span>
- <span data-ttu-id="4335f-378">Protokollieren von ETW-Ereignissen mit [EventSource](/azure/service-fabric/service-fabric-diagnostics-event-generation-app#eventsource).</span><span class="sxs-lookup"><span data-stu-id="4335f-378">Log ETW events by using [EventSource](/azure/service-fabric/service-fabric-diagnostics-event-generation-app#eventsource).</span></span> <span data-ttu-id="4335f-379">Diese Option ist standardmäßig in einer Visual Studio Service Fabric-Lösung verfügbar.</span><span class="sxs-lookup"><span data-stu-id="4335f-379">This option is available by default in a Visual Studio Service Fabric solution.</span></span>

<span data-ttu-id="4335f-380">Verwenden Sie zum Anzeigen der Ablaufverfolgungs- und Ereignisprotokolle [Application Insights](/azure/service-fabric/service-fabric-diagnostics-event-analysis-appinsights) als eine der Senken für die strukturierte Protokollierung, damit Ihr Dienst Ablaufverfolgungen und Ereignisse visualisieren kann.</span><span class="sxs-lookup"><span data-stu-id="4335f-380">To view the trace and event logs, use [Application Insights](/azure/service-fabric/service-fabric-diagnostics-event-analysis-appinsights) as one of the sinks for structured logging so that your service can visualize traces and events.</span></span> <span data-ttu-id="4335f-381">Application Insights bietet zahlreiche integrierte Telemetriedaten: Anforderungen, Ablaufverfolgungen, Ereignisse, Ausnahmen, Metriken, Abhängigkeiten.</span><span class="sxs-lookup"><span data-stu-id="4335f-381">Application Insights provides a lot of built-in telemetry: requests, traces, events, exceptions, metrics, dependencies.</span></span> <span data-ttu-id="4335f-382">Weitere Informationen zum Instrumentieren Ihres Diensts für Application Insights finden Sie in diesen Artikeln:</span><span class="sxs-lookup"><span data-stu-id="4335f-382">For information about instrumenting your service for Application Insights, see these articles:</span></span>

- <span data-ttu-id="4335f-383">[Tutorial: Überwachen und Diagnostizieren einer ASP.NET Core-Anwendung in Service Fabric mithilfe von Application Insights](/azure/service-fabric/service-fabric-tutorial-monitoring-aspnet)</span><span class="sxs-lookup"><span data-stu-id="4335f-383">[Tutorial: Monitor and diagnose an ASP.NET Core application on Service Fabric using Application Insights](/azure/service-fabric/service-fabric-tutorial-monitoring-aspnet).</span></span>
- [<span data-ttu-id="4335f-384">Application Insights für ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="4335f-384">Application Insights for ASP.NET Core</span></span>](/azure/application-insights/app-insights-asp-net-core)
- [<span data-ttu-id="4335f-385">Application Insights .NET SDK</span><span class="sxs-lookup"><span data-stu-id="4335f-385">Application Insights .NET SDK</span></span>](/azure/application-insights/app-insights-api-custom-events-metrics)
- [<span data-ttu-id="4335f-386">Application Insights SDK für Service Fabric</span><span class="sxs-lookup"><span data-stu-id="4335f-386">Application Insights SDK for Service Fabric</span></span>](https://github.com/Microsoft/ApplicationInsights-ServiceFabric)

<span data-ttu-id="4335f-387">ASP.NET Core-Dienste verwenden für die Anwendungsprotokollierung die [ILogger-Schnittstelle](/aspnet/core/fundamentals/logging/?view=aspnetcore-2.2).</span><span class="sxs-lookup"><span data-stu-id="4335f-387">ASP.NET Core services use the [ILogger interface](/aspnet/core/fundamentals/logging/?view=aspnetcore-2.2) for application logging.</span></span> <span data-ttu-id="4335f-388">Um diese Anwendungsprotokolle in Azure Monitor verfügbar zu machen, übertragen Sie die `ILogger`-Ereignisse an Application Insights.</span><span class="sxs-lookup"><span data-stu-id="4335f-388">To make these application logs available in Azure Monitor, send the `ILogger` events to Application Insights.</span></span> <span data-ttu-id="4335f-389">Weitere Informationen finden Sie unter [ILogger in einer ASP.NET Core-Anwendung](https://github.com/Microsoft/ApplicationInsights-dotnet-logging/blob/develop/src/ILogger/Readme.md#aspnet-core-application).</span><span class="sxs-lookup"><span data-stu-id="4335f-389">For more information, see [ILogger in an ASP.NET Core application](https://github.com/Microsoft/ApplicationInsights-dotnet-logging/blob/develop/src/ILogger/Readme.md#aspnet-core-application).</span></span> <span data-ttu-id="4335f-390">Application Insights kann Korrelationseigenschaften zu ILogger-Ereignissen hinzufügen, was für die Visualisierung der verteilten Ablaufverfolgung nützlich ist.</span><span class="sxs-lookup"><span data-stu-id="4335f-390">Application Insights can add correlation properties to ILogger events, which is useful for visualizing distributed tracing.</span></span>

<span data-ttu-id="4335f-391">Weitere Informationen finden Sie unter</span><span class="sxs-lookup"><span data-stu-id="4335f-391">For more information, see:</span></span>

- [<span data-ttu-id="4335f-392">Anwendungsprotokollierung</span><span class="sxs-lookup"><span data-stu-id="4335f-392">Application logging</span></span>](/azure/service-fabric/service-fabric-diagnostics-event-generation-app)
- [<span data-ttu-id="4335f-393">Hinzufügen von Protokollierung zur Service Fabric-Anwendung</span><span class="sxs-lookup"><span data-stu-id="4335f-393">Add logging to your Service Fabric application</span></span>](/azure/azure-monitor/app/correlation)

### <a name="service-fabric-health-and-event-data"></a><span data-ttu-id="4335f-394">Service Fabric-Integritäts- und Ereignisdaten</span><span class="sxs-lookup"><span data-stu-id="4335f-394">Service Fabric health and event data</span></span>

<span data-ttu-id="4335f-395">Service Fabric-Telemetrie enthält Integritätsmetriken und Ereignisse im Zusammenhang mit Betrieb und Leistung des Service Fabric-Clusters und seiner Entitäten: Knoten, Anwendungen, Dienste, Partitionen und Replikate.</span><span class="sxs-lookup"><span data-stu-id="4335f-395">Service Fabric telemetry includes health metrics and events about the operation and performance of a Service Fabric cluster and its entities: its nodes, applications, services, partitions, and replicas.</span></span>

- <span data-ttu-id="4335f-396">[EventStore](/azure/service-fabric/service-fabric-diagnostics-eventstore).</span><span class="sxs-lookup"><span data-stu-id="4335f-396">[EventStore](/azure/service-fabric/service-fabric-diagnostics-eventstore).</span></span> <span data-ttu-id="4335f-397">Ein zustandsbehafteter Systemdienst, der Ereignisse im Zusammenhang mit dem Cluster und seinen Entitäten erfasst.</span><span class="sxs-lookup"><span data-stu-id="4335f-397">A stateful system service that collects events related to the cluster and its entities.</span></span> <span data-ttu-id="4335f-398">Service Fabric verwendet EventStore, um [Service Fabric-Ereignisse](/azure/service-fabric/service-fabric-diagnostics-event-generation-operational) zu schreiben und Informationen über Ihren Cluster bereitzustellen, und kann für Statusaktualisierungen, Problembehandlung und Überwachung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-398">Service Fabric uses EventStore to write [Service Fabric events](/azure/service-fabric/service-fabric-diagnostics-event-generation-operational) to provide information about your cluster and can be used for status updates, troubleshooting, monitoring.</span></span> <span data-ttu-id="4335f-399">Das Programm kann auch Ereignisse aus verschiedenen Entitäten zu einem bestimmten Zeitpunkt korrelieren, um Probleme im Cluster zu erkennen.</span><span class="sxs-lookup"><span data-stu-id="4335f-399">It can also correlate events from different entities at a given time to identify issues in the cluster.</span></span> <span data-ttu-id="4335f-400">Der Dienst macht diese Ereignisse über eine REST-API verfügbar.</span><span class="sxs-lookup"><span data-stu-id="4335f-400">The service exposes those events through a REST API.</span></span> <span data-ttu-id="4335f-401">Informationen zum Abfragen der EventStore-APIs finden Sie unter [Abfragen von EventStore-APIs nach Clusterereignissen](/azure/service-fabric/service-fabric-diagnostics-eventstore-query).</span><span class="sxs-lookup"><span data-stu-id="4335f-401">For information about how to query the EventStore APIs, see [Query EventStore APIs for cluster events](/azure/service-fabric/service-fabric-diagnostics-eventstore-query).</span></span> <span data-ttu-id="4335f-402">Sie können die Ereignisse aus EventStore in Log Analytics anzeigen, indem Sie Ihren Cluster mit der WAD-Erweiterung konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="4335f-402">You can view the events from EventStore in Log Analytics by configuring your cluster with WAD extension.</span></span>
- <span data-ttu-id="4335f-403">[HealthStore](/azure/service-fabric/service-fabric-health-introduction).</span><span class="sxs-lookup"><span data-stu-id="4335f-403">[HealthStore](/azure/service-fabric/service-fabric-health-introduction).</span></span> <span data-ttu-id="4335f-404">Bietet eine Momentaufnahme der aktuellen Integrität des Clusters.</span><span class="sxs-lookup"><span data-stu-id="4335f-404">Provides a snapshot of the current health of the cluster.</span></span> <span data-ttu-id="4335f-405">Ein zustandsbehafteter Dienst, der alle von Entitäten gemeldeten Integritätsdaten in einer Hierarchie aggregiert.</span><span class="sxs-lookup"><span data-stu-id="4335f-405">A stateful service that aggregates all health data reported by entities in a hierarchy.</span></span> <span data-ttu-id="4335f-406">Die Daten werden im [Service Fabric Explorer][sfx] visualisiert.</span><span class="sxs-lookup"><span data-stu-id="4335f-406">The data is visualized in [Service Fabric Explorer][sfx].</span></span> <span data-ttu-id="4335f-407">HealthStore überwacht außerdem Anwendungsupgrades.</span><span class="sxs-lookup"><span data-stu-id="4335f-407">The HealthStore also monitors application upgrades.</span></span> <span data-ttu-id="4335f-408">Sie können Integritätsabfragen in PowerShell, einer .NET-Anwendung oder REST-APIs ausführen.</span><span class="sxs-lookup"><span data-stu-id="4335f-408">You can use health queries in PowerShell, a .NET application, or REST APIs.</span></span> <span data-ttu-id="4335f-409">Siehe [Einführung in Service Fabric-Integritätsüberwachung](/azure/service-fabric/service-fabric-health-introduction).</span><span class="sxs-lookup"><span data-stu-id="4335f-409">See, [Introduction to Service Fabric health monitoring](/azure/service-fabric/service-fabric-health-introduction).</span></span>
- <span data-ttu-id="4335f-410">Erwägen Sie das Implementieren interner benutzerdefinierter Watchdog-Dienste.</span><span class="sxs-lookup"><span data-stu-id="4335f-410">Consider implementing internal custom watchdog services.</span></span> <span data-ttu-id="4335f-411">Diese Dienste können in regelmäßigen Abständen benutzerdefinierte Integritätsdaten wie fehlerhafte Status ausgeführter Dienste melden.</span><span class="sxs-lookup"><span data-stu-id="4335f-411">Those services can periodically report custom health data such as faulty states of running services.</span></span> <span data-ttu-id="4335f-412">Weitere Informationen finden Sie unter [Benutzerdefinierte Integritätsberichte](/azure/service-fabric/service-fabric-report-health).</span><span class="sxs-lookup"><span data-stu-id="4335f-412">For more information, see [Custom health reports](/azure/service-fabric/service-fabric-report-health).</span></span> <span data-ttu-id="4335f-413">Die Integritätsberichte können mithilfe von Service Fabric Explorer gelesen werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-413">You can read the health reports using the Service Fabric explorer.</span></span>  

### <a name="infrastructure-metrics-and-logs"></a><span data-ttu-id="4335f-414">Infrastrukturmetriken und -protokolle</span><span class="sxs-lookup"><span data-stu-id="4335f-414">Infrastructure metrics and logs</span></span>

<span data-ttu-id="4335f-415">Infrastrukturmetriken fördern das Verständnis der Ressourcenzuteilung im Cluster.</span><span class="sxs-lookup"><span data-stu-id="4335f-415">Infrastructure metrics help you to understand resource allocation in the cluster.</span></span> <span data-ttu-id="4335f-416">Es folgen die wichtigsten Optionen zum Sammeln dieser Informationen:</span><span class="sxs-lookup"><span data-stu-id="4335f-416">Here are the main options for collecting this information:</span></span>

- <span data-ttu-id="4335f-417">Microsoft Azure-Diagnose für Windows (WAD).</span><span class="sxs-lookup"><span data-stu-id="4335f-417">Windows Azure Diagnostics (WAD).</span></span> <span data-ttu-id="4335f-418">Dient zum Sammeln von Protokollen und Metriken auf Knotenebene unter Windows.</span><span class="sxs-lookup"><span data-stu-id="4335f-418">Collect logs and metrics at the node level on Windows.</span></span> <span data-ttu-id="4335f-419">Sie können WAD verwenden, indem Sie die VM-Erweiterung „IaaSDiagnostics“ für jede VM-Skalierungsgruppe konfigurieren, die einem Knotentyp zugeordnet ist. Anschließend können Sie Diagnoseereignisse sammeln, wie z.B. Windows-Ereignisprotokolle, Leistungsindikatoren, System- und Betriebsereignisse für ETW/Manifeste sowie benutzerdefinierte Protokolle.</span><span class="sxs-lookup"><span data-stu-id="4335f-419">You can use WAD by configuring the IaaSDiagnostics VM extension on any virtual machine scale set that is mapped to a node type to collect diagnostic events, such as Windows event logs, performance counters, ETW/manifests system and operational events, and custom logs.</span></span>
- <span data-ttu-id="4335f-420">Log Analytics-Agent.</span><span class="sxs-lookup"><span data-stu-id="4335f-420">Log Analytics agent.</span></span> <span data-ttu-id="4335f-421">Konfigurieren Sie die VM-Erweiterung „MicrosoftMonitoringAgent“, um Windows-Ereignisprotokolle, Leistungsindikatoren und benutzerdefinierte Protokolle an Log Analytics zu senden.</span><span class="sxs-lookup"><span data-stu-id="4335f-421">Configure the MicrosoftMonitoringAgent VM extension to send Windows event logs, performance counters, and custom logs to Log Analytics.</span></span>

<span data-ttu-id="4335f-422">Es gibt einige Überschneidungen bei der Art der Metriken, die von den vorhergehenden Mechanismen gesammelt wurden, wie beispielsweise Leistungsindikatoren.</span><span class="sxs-lookup"><span data-stu-id="4335f-422">There is some overlap in the type of metrics collected through the preceding mechanisms, such as performance counters.</span></span> <span data-ttu-id="4335f-423">Wenn eine Überlappung vorliegt, wird der Log Analytics-Agent empfohlen.</span><span class="sxs-lookup"><span data-stu-id="4335f-423">Where there is overlap, we recommend using the Log Analytics agent.</span></span> <span data-ttu-id="4335f-424">Da es keinen Azure-Speicher für den Log Analytics-Agent gibt, kommt es zu einer geringen Latenz.</span><span class="sxs-lookup"><span data-stu-id="4335f-424">Because there is no Azure storage for the Log Analytics agent, there is low latency.</span></span> <span data-ttu-id="4335f-425">Außerdem lassen sich die Leistungsindikatoren in „IaaSDiagnostics“ nicht einfach in Log Analytics einlesen.</span><span class="sxs-lookup"><span data-stu-id="4335f-425">Also, the performance counters in IaaSDiagnostics cannot be fed into Log Analytics easily.</span></span>

![Infrastrukturüberwachung in Service Fabric](./_images/ra-sf-monitoring.png)

<span data-ttu-id="4335f-427">Informationen zu VM-Erweiterungen finden Sie unter [Erweiterungen und Features für virtuelle Azure-Computer](/azure/virtual-machines/extensions/overview).</span><span class="sxs-lookup"><span data-stu-id="4335f-427">For information about using VM extensions, see [Azure virtual machine extensions and features](/azure/virtual-machines/extensions/overview).</span></span>

<span data-ttu-id="4335f-428">Um die Daten anzuzeigen, konfigurieren Sie Log Analytics so, dass die über WAD erfassten Daten angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-428">To view the data, configure Log Analytics to view the data collected through WAD.</span></span> <span data-ttu-id="4335f-429">Informationen zum Konfigurieren von Log Analytics zum Lesen von Ereignissen aus einem Speicherkonto finden Sie unter [Einrichten von Log Analytics für einen Cluster](/azure/service-fabric/service-fabric-diagnostics-oms-setup).</span><span class="sxs-lookup"><span data-stu-id="4335f-429">For information about how to configure Log Analytics to read events from a storage account, see [Set up Log Analytics for a cluster](/azure/service-fabric/service-fabric-diagnostics-oms-setup).</span></span>

<span data-ttu-id="4335f-430">Sie können auch Leistungsprotokolle und Telemetriedaten im Zusammenhang mit einem Service Fabric-Cluster, Workloads, Netzwerkdatenverkehr, anstehenden Updates und mehr anzeigen.</span><span class="sxs-lookup"><span data-stu-id="4335f-430">You can also view performance logs and telemetry data related to a Service Fabric cluster, workloads, network traffic, pending updates, and more.</span></span> <span data-ttu-id="4335f-431">Siehe [Leistungsüberwachung mit Log Analytics](/azure/service-fabric/service-fabric-diagnostics-oms-agent).</span><span class="sxs-lookup"><span data-stu-id="4335f-431">See [Performance Monitoring with Log Analytics](/azure/service-fabric/service-fabric-diagnostics-oms-agent).</span></span>

<span data-ttu-id="4335f-432">Die [Dienstzuordnungslösung in Log Analytics](/azure/azure-monitor/insights/service-map) bietet Informationen zur Topologie des Clusters (d.h. den Prozessen, die auf den einzelnen Knoten ausgeführt werden).</span><span class="sxs-lookup"><span data-stu-id="4335f-432">[Service Map solution in Log Analytics](/azure/azure-monitor/insights/service-map) provides information about the topology of the cluster (that is, the processes running in each node).</span></span> <span data-ttu-id="4335f-433">Übertragen Sie die Daten im Speicherkonto an [Application Insights](/azure/monitoring-and-diagnostics/azure-diagnostics-configure-application-insights).</span><span class="sxs-lookup"><span data-stu-id="4335f-433">Send the data in the storage account to [Application Insights](/azure/monitoring-and-diagnostics/azure-diagnostics-configure-application-insights).</span></span> <span data-ttu-id="4335f-434">Es gibt möglicherweise eine Verzögerung beim Abrufen von Daten in Application Insights.</span><span class="sxs-lookup"><span data-stu-id="4335f-434">There might be some delay in getting data into Application Insights.</span></span> <span data-ttu-id="4335f-435">Wenn Sie die Daten in Echtzeit sehen möchten, sollten Sie [Event Hub](/azure/monitoring-and-diagnostics/azure-diagnostics-streaming-event-hubs) mit Senken und Kanälen konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="4335f-435">If you want to see the data real time, consider configuring [Event Hub](/azure/monitoring-and-diagnostics/azure-diagnostics-streaming-event-hubs) using sinks and channels.</span></span> <span data-ttu-id="4335f-436">Weitere Informationen finden Sie unter [Ereignisaggregation und -sammlung mit der Windows Azure-Diagnose](/azure/service-fabric/service-fabric-diagnostics-event-aggregation-wad).</span><span class="sxs-lookup"><span data-stu-id="4335f-436">For more information, see [Event aggregation and collection using Windows Azure Diagnostics](/azure/service-fabric/service-fabric-diagnostics-event-aggregation-wad).</span></span>

### <a name="dependent-service-metrics"></a><span data-ttu-id="4335f-437">Metriken abhängiger Dienste.</span><span class="sxs-lookup"><span data-stu-id="4335f-437">Dependent service metrics</span></span>

- <span data-ttu-id="4335f-438">Die [Anwendungsübersicht zu Application Insights](/azure/azure-monitor/app/app-map) zeigt die Topologie der Anwendung unter Verwendung von HTTP-Abhängigkeitsaufrufen zwischen Diensten mit dem installierten Application Insights SDK.</span><span class="sxs-lookup"><span data-stu-id="4335f-438">[Application Insights Application Map](/azure/azure-monitor/app/app-map) provides the topology of the application by using HTTP dependency calls made between services, with the installed Application Insights SDK.</span></span>
- <span data-ttu-id="4335f-439">Die [Dienstzuordnungslösung in Log Analytics](/azure/azure-monitor/insights/service-map) bietet Informationen zum ein- und ausgehenden Datenverkehr externer Dienste.</span><span class="sxs-lookup"><span data-stu-id="4335f-439">[Service Map solution in Log Analytics](/azure/azure-monitor/insights/service-map) provides information about inbound and outbound traffic from/to external services.</span></span> <span data-ttu-id="4335f-440">Darüber hinaus lässt sich die Dienstzuordnung in andere Lösungen wie Updates oder Sicherheit integrieren.</span><span class="sxs-lookup"><span data-stu-id="4335f-440">In addition, Service Map integrates with other solutions such as updates or security.</span></span>
- <span data-ttu-id="4335f-441">Benutzerdefinierte Watchdogs können zum Melden von Fehlerbedingungen in externen Diensten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-441">Custom watchdogs can be used to report error conditions on external services.</span></span> <span data-ttu-id="4335f-442">Der Dienst kann beispielsweise einen Bericht zu Integritätsfehlern melden, wenn er nicht auf einen externen Dienst oder Datenspeicher (Azure Cosmos DB) zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="4335f-442">For example, the service could report an error health report if it cannot access an external service or data storage (Azure Cosmos DB).</span></span>  

### <a name="distributed-tracing"></a><span data-ttu-id="4335f-443">Verteilte Ablaufverfolgung</span><span class="sxs-lookup"><span data-stu-id="4335f-443">Distributed tracing</span></span>

<span data-ttu-id="4335f-444">In der Microservices-Architektur nehmen oft mehrere Dienste an der Erledigung einer Aufgabe teil.</span><span class="sxs-lookup"><span data-stu-id="4335f-444">In microservices architecture, several services often participate to complete a task.</span></span> <span data-ttu-id="4335f-445">Die Telemetriedaten von jedem dieser Dienste wird mithilfe von Kontextfeldern (Vorgangs-ID, Anforderungs-ID usw.) in einer verteilten Ablaufverfolgung korreliert.</span><span class="sxs-lookup"><span data-stu-id="4335f-445">The telemetry from each of those services is correlated by using context fields (operation ID, request ID, and so forth) in a distributed trace.</span></span> <span data-ttu-id="4335f-446">Mithilfe der [Anwendungszuordnung](/azure/azure-monitor/app/app-map) in Application Insights können Sie die Ansicht des verteilten logischen Betriebs erstellen und den gesamten Dienstgraphen Ihrer Anwendung visualisieren.</span><span class="sxs-lookup"><span data-stu-id="4335f-446">By using [Application Map](/azure/azure-monitor/app/app-map) in Application Insights, you can build the view of distributed logical operation and visualize the entire service graph of your application.</span></span> <span data-ttu-id="4335f-447">Sie können auch die Transaktionsdiagnose in Application Insight verwenden, um serverseitige Telemetrie zu korrelieren.</span><span class="sxs-lookup"><span data-stu-id="4335f-447">You can also use transaction diagnostics in Application Insight to correlate server-side telemetry.</span></span> <span data-ttu-id="4335f-448">Weitere Informationen finden Sie unter [Einheitliche komponentenübergreifende Transaktionsdiagnose](/azure/application-insights/app-insights-transaction-diagnostics).</span><span class="sxs-lookup"><span data-stu-id="4335f-448">For more information, see [Unified cross-component transaction diagnostics](/azure/application-insights/app-insights-transaction-diagnostics).</span></span>

<span data-ttu-id="4335f-449">Die [Application Insights-Anwendungsübersicht](/azure/azure-monitor/app/app-map) zeigt die Topologie der Anwendung unter Verwendung von HTTP-Abhängigkeitsaufrufen zwischen Diensten mit dem installierten Application Insights SDK.</span><span class="sxs-lookup"><span data-stu-id="4335f-449">[Application Insights Application Map](/azure/azure-monitor/app/app-map) provides the topology of the application by using HTTP dependency calls made between  services, with the installed Application Insights SDK.</span></span> <span data-ttu-id="4335f-450">Es ist auch wichtig, Aufgaben zu korrelieren, die asynchron mithilfe einer Warteschlange verteilt werden.</span><span class="sxs-lookup"><span data-stu-id="4335f-450">It’s also important to correlate tasks that are dispatched asynchronously using a queue.</span></span> <span data-ttu-id="4335f-451">Weitere Informationen zum Senden korrelierter Telemetriedaten in eine Warteschlange finden Sie unter [Warteschlangeninstrumentierung](/azure/azure-monitor/app/custom-operations-tracking#queue-instrumentation).</span><span class="sxs-lookup"><span data-stu-id="4335f-451">For details about sending correlation telemetry in a queue message, see [Queue instrumentation](/azure/azure-monitor/app/custom-operations-tracking#queue-instrumentation).</span></span>

<span data-ttu-id="4335f-452">Weitere Informationen finden Sie unter</span><span class="sxs-lookup"><span data-stu-id="4335f-452">For more information, see:</span></span>

- [<span data-ttu-id="4335f-453">Durchführen einer mehrere Ressourcen übergreifenden Abfrage</span><span class="sxs-lookup"><span data-stu-id="4335f-453">Performing a query across multiple resources</span></span>](/azure/azure-monitor/log-query/cross-workspace-query#performing-a-query-across-multiple-resources)
- [<span data-ttu-id="4335f-454">Telemetriekorrelation in Application Insights</span><span class="sxs-lookup"><span data-stu-id="4335f-454">Telemetry correlation in Application Insights</span></span>](/azure/azure-monitor/app/correlation)

#### <a name="alerts-and-dashboards"></a><span data-ttu-id="4335f-455">Warnungen und Dashboards</span><span class="sxs-lookup"><span data-stu-id="4335f-455">Alerts and Dashboards</span></span>

<span data-ttu-id="4335f-456">Application Insights und Log Analytics unterstützen mit Kusto eine [umfassende Abfragesprache](/azure/log-analytics/query-language/get-started-queries), mit der Sie Protokolldaten abrufen und analysieren können.</span><span class="sxs-lookup"><span data-stu-id="4335f-456">Application Insights and Log Analytics support an [extensive query language](/azure/log-analytics/query-language/get-started-queries) (Kusto query language) that lets you retrieve and analyze log data.</span></span> <span data-ttu-id="4335f-457">Verwenden Sie die Abfragen, um Datasets zu erstellen und in Diagnosedashboards zu visualisieren.</span><span class="sxs-lookup"><span data-stu-id="4335f-457">Use the queries to create data sets and visualize it in diagnostics dashboards.</span></span>

<span data-ttu-id="4335f-458">Verwenden Sie Azure Monitor-Warnungen, um Systemadministratoren zu benachrichtigen, wenn spezifische Bedingungen in bestimmten Ressourcen auftreten.</span><span class="sxs-lookup"><span data-stu-id="4335f-458">Use Azure Monitor alerts to notify sysadmins when certain conditions occur in specific resources.</span></span> <span data-ttu-id="4335f-459">Die Benachrichtigung kann eine E-Mail, eine Azure-Funktion, ein Aufruf eines Webhooks und dergleichen sein.</span><span class="sxs-lookup"><span data-stu-id="4335f-459">The notification could be an email, Azure function, call a web hook, and so on.</span></span> <span data-ttu-id="4335f-460">Weitere Informationen finden Sie unter [Warnungen in Azure Monitor](/azure/azure-monitor/platform/alerts-overview).</span><span class="sxs-lookup"><span data-stu-id="4335f-460">For more information, see [Alerts in Azure Monitor](/azure/azure-monitor/platform/alerts-overview).</span></span>

<span data-ttu-id="4335f-461">[Warnungsregeln für die Protokollsuche](/azure/azure-monitor/platform/alerts-unified-log) ermöglichen Ihnen das Definieren und regelmäßige Anwenden einer Kusto-Abfrage auf einen Log Analytics-Arbeitsbereich.</span><span class="sxs-lookup"><span data-stu-id="4335f-461">[Log search alert rules](/azure/azure-monitor/platform/alerts-unified-log) allow you to define and run a Kusto query against a Log Analytics workspace at regular intervals.</span></span> <span data-ttu-id="4335f-462">Eine Warnung wird erstellt, wenn das Ergebnis der Abfrage mit einer bestimmten Bedingung übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="4335f-462">An alert is created if the query result matches a certain condition.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4335f-463">Nächste Schritte</span><span class="sxs-lookup"><span data-stu-id="4335f-463">Next steps</span></span>

- [<span data-ttu-id="4335f-464">Verwenden der Domänenanalyse zur Modellierung von Microservices</span><span class="sxs-lookup"><span data-stu-id="4335f-464">Using domain analysis to model microservices</span></span>](../../microservices/model/domain-analysis.md)
- [<span data-ttu-id="4335f-465">Entwerfen einer Microservices-Architektur</span><span class="sxs-lookup"><span data-stu-id="4335f-465">Designing a microservices architecture</span></span>](../../microservices/design/index.md)

[sfx]: /azure/service-fabric/service-fabric-visualizing-your-cluster
