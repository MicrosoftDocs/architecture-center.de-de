---
title: "Verbinden eines lokalen Netzwerks mit Azure über ExpressRoute"
description: "Erläutert, wie Sie eine sichere Netzwerkarchitektur zwischen Standorten implementieren, die ein virtuelles Azure-Netzwerk und ein lokales Netzwerk umfasst, die über ExpressRoute verbunden werden."
author: telmosampaio
ms.date: 11/28/2016
pnp.series.title: Connect an on-premises network to Azure
pnp.series.next: expressroute-vpn-failover
pnp.series.prev: vpn
cardTitle: ExpressRoute
ms.openlocfilehash: 671be5118faaefab5ba5348de81642d8a8124b59
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/14/2017
---
# <a name="connect-an-on-premises-network-to-azure-using-expressroute"></a><span data-ttu-id="1144e-103">Verbinden eines lokalen Netzwerks mit Azure über ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="1144e-103">Connect an on-premises network to Azure using ExpressRoute</span></span>

<span data-ttu-id="1144e-104">Diese Referenzarchitektur zeigt, wie man mithilfe von [Azure ExpressRoute][expressroute-introduction] ein lokales Netzwerk mit virtuellen Azure-Netzwerken verbindet.</span><span class="sxs-lookup"><span data-stu-id="1144e-104">This reference architecture shows how to connect an on-premises network to virtual networks on Azure, using [Azure ExpressRoute][expressroute-introduction].</span></span> <span data-ttu-id="1144e-105">ExpressRoute-Verbindungen nutzen eine dedizierte private Verbindung über einen Drittanbieter für die Konnektivität.</span><span class="sxs-lookup"><span data-stu-id="1144e-105">ExpressRoute connections use a private, dedicated connection through a third-party connectivity provider.</span></span> <span data-ttu-id="1144e-106">Die private Verbindung erweitert Ihr lokales Netzwerk auf Azure.</span><span class="sxs-lookup"><span data-stu-id="1144e-106">The private connection extends your on-premises network into Azure.</span></span> [<span data-ttu-id="1144e-107">**So stellen Sie diese Lösung bereit**.</span><span class="sxs-lookup"><span data-stu-id="1144e-107">**Deploy this solution**.</span></span>](#deploy-the-solution)

<span data-ttu-id="1144e-108">![[0]][0]</span><span class="sxs-lookup"><span data-stu-id="1144e-108">![[0]][0]</span></span>

<span data-ttu-id="1144e-109">*Laden Sie eine [Visio-Datei][visio-download] mit dieser Architektur herunter.*</span><span class="sxs-lookup"><span data-stu-id="1144e-109">*Download a [Visio file][visio-download] of this architecture.*</span></span>

## <a name="architecture"></a><span data-ttu-id="1144e-110">Architektur</span><span class="sxs-lookup"><span data-stu-id="1144e-110">Architecture</span></span>

<span data-ttu-id="1144e-111">Die Architektur umfasst die folgenden Komponenten.</span><span class="sxs-lookup"><span data-stu-id="1144e-111">The architecture consists of the following components.</span></span>

* <span data-ttu-id="1144e-112">**Lokales Unternehmensnetzwerk**.</span><span class="sxs-lookup"><span data-stu-id="1144e-112">**On-premises corporate network**.</span></span> <span data-ttu-id="1144e-113">Ein privates lokales Netzwerk innerhalb einer Organisation.</span><span class="sxs-lookup"><span data-stu-id="1144e-113">A private local-area network running within an organization.</span></span>

* <span data-ttu-id="1144e-114">**ExpressRoute-Verbindung**.</span><span class="sxs-lookup"><span data-stu-id="1144e-114">**ExpressRoute circuit**.</span></span> <span data-ttu-id="1144e-115">Eine vom Konnektivitätsanbieter bereitgestellte Layer 2- oder Layer 3-Verbindung, die das lokale Netzwerk über die Edgerouter mit Azure verbindet.</span><span class="sxs-lookup"><span data-stu-id="1144e-115">A layer 2 or layer 3 circuit supplied by the connectivity provider that joins the on-premises network with Azure through the edge routers.</span></span> <span data-ttu-id="1144e-116">Für die Verbindung wird die vom Konnektivitätsanbieter verwaltete Hardwareinfrastruktur verwendet.</span><span class="sxs-lookup"><span data-stu-id="1144e-116">The circuit uses the hardware infrastructure managed by the connectivity provider.</span></span>

* <span data-ttu-id="1144e-117">**Lokale Edgerouter**.</span><span class="sxs-lookup"><span data-stu-id="1144e-117">**Local edge routers**.</span></span> <span data-ttu-id="1144e-118">Route, die das lokale Netzwerk mit der über den Anbieter verwalteten Verbindung verbinden.</span><span class="sxs-lookup"><span data-stu-id="1144e-118">Routers that connect the on-premises network to the circuit managed by the provider.</span></span> <span data-ttu-id="1144e-119">Je nachdem, wie Ihre Verbindung bereitgestellt wird, müssen Sie möglicherweise die öffentlichen IP-Adressen angeben, die von den Routern verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="1144e-119">Depending on how your connection is provisioned, you may need to provide the public IP addresses used by the routers.</span></span>
* <span data-ttu-id="1144e-120">**Microsoft Edge-Router**.</span><span class="sxs-lookup"><span data-stu-id="1144e-120">**Microsoft edge routers**.</span></span> <span data-ttu-id="1144e-121">Zwei Router in einer Aktiv/Aktiv-Konfiguration mit Hochverfügbarkeit.</span><span class="sxs-lookup"><span data-stu-id="1144e-121">Two routers in an active-active highly available configuration.</span></span> <span data-ttu-id="1144e-122">Diese Router ermöglichen es einem Konnektivitätsanbieter, eine direkte Verbindung zwischen ihren Leitungen und dem Rechenzentrum herzustellen.</span><span class="sxs-lookup"><span data-stu-id="1144e-122">These routers enable a connectivity provider to connect their circuits directly to their datacenter.</span></span> <span data-ttu-id="1144e-123">Je nachdem, wie Ihre Verbindung bereitgestellt wird, müssen Sie möglicherweise die öffentlichen IP-Adressen angeben, die von den Routern verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="1144e-123">Depending on how your connection is provisioned, you may need to provide the public IP addresses used by the routers.</span></span>

* <span data-ttu-id="1144e-124">**Virtuelle Azure-Netzwerke (VNETs)**.</span><span class="sxs-lookup"><span data-stu-id="1144e-124">**Azure virtual networks (VNets)**.</span></span> <span data-ttu-id="1144e-125">Jedes VNET befindet sich in einer einzelnen Azure-Region und kann mehrere Anwendungsebenen hosten.</span><span class="sxs-lookup"><span data-stu-id="1144e-125">Each VNet resides in a single Azure region, and can host multiple application tiers.</span></span> <span data-ttu-id="1144e-126">Anwendungsebenen können mithilfe von Subnetzen in jedem VNET segmentiert werden.</span><span class="sxs-lookup"><span data-stu-id="1144e-126">Application tiers can be segmented using subnets in each VNet.</span></span>

* <span data-ttu-id="1144e-127">**Öffentliche Azure-Dienste**.</span><span class="sxs-lookup"><span data-stu-id="1144e-127">**Azure public services**.</span></span> <span data-ttu-id="1144e-128">Azure-Dienste, die innerhalb einer Hybridanwendung genutzt werden können.</span><span class="sxs-lookup"><span data-stu-id="1144e-128">Azure services that can be used within a hybrid application.</span></span> <span data-ttu-id="1144e-129">Diese Dienste stehen auch über das Internet zur Verfügung, aber der Zugriff über eine ExpressRoute-Leitung bietet niedrige Latenz und eine besser vorhersagbare Leistung, da der Datenverkehr nicht über das Internet geleitet wird.</span><span class="sxs-lookup"><span data-stu-id="1144e-129">These services are also available over the Internet, but accessing them using an ExpressRoute circuit provides low latency and more predictable performance, because traffic does not go through the Internet.</span></span> <span data-ttu-id="1144e-130">Verbindungen werden über das [öffentliche Peering][expressroute-peering] hergestellt. Die hierbei verwendeten Adressen gehören entweder der Organisation oder werden vom Konnektivitätsanbieter bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="1144e-130">Connections are performed using [public peering][expressroute-peering], with addresses that are either owned by your organization or supplied by your connectivity provider.</span></span>

* <span data-ttu-id="1144e-131">**Office 365-Dienste**.</span><span class="sxs-lookup"><span data-stu-id="1144e-131">**Office 365 services**.</span></span> <span data-ttu-id="1144e-132">Die öffentlich verfügbaren Office 365-Anwendungen und -Dienste, die von Microsoft bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="1144e-132">The publicly available Office 365 applications and services provided by Microsoft.</span></span> <span data-ttu-id="1144e-133">Verbindungen werden über das [Microsoft-Peering][expressroute-peering] hergestellt. Die hierbei verwendeten Adressen gehören entweder der Organisation oder werden vom Konnektivitätsanbieter bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="1144e-133">Connections are performed using [Microsoft peering][expressroute-peering], with addresses that are either owned by your organization or supplied by your connectivity provider.</span></span> <span data-ttu-id="1144e-134">Es ist auch möglich, per Microsoft-Peering eine direkte Verbindung mit Microsoft CRM Online herzustellen.</span><span class="sxs-lookup"><span data-stu-id="1144e-134">You can also connect directly to Microsoft CRM Online through Microsoft peering.</span></span>

* <span data-ttu-id="1144e-135">**Konnektivitätsanbieter** (nicht gezeigt).</span><span class="sxs-lookup"><span data-stu-id="1144e-135">**Connectivity providers** (not shown).</span></span> <span data-ttu-id="1144e-136">Unternehmen, die Layer 2- oder Layer 3-Konnektivität zwischen Ihrem Rechenzentrum und einem Azure-Rechenzentrum bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="1144e-136">Companies that provide a connection either using layer 2 or layer 3 connectivity between your datacenter and an Azure datacenter.</span></span>

## <a name="recommendations"></a><span data-ttu-id="1144e-137">Empfehlungen</span><span class="sxs-lookup"><span data-stu-id="1144e-137">Recommendations</span></span>

<span data-ttu-id="1144e-138">Die folgenden Empfehlungen gelten für die meisten Szenarios.</span><span class="sxs-lookup"><span data-stu-id="1144e-138">The following recommendations apply for most scenarios.</span></span> <span data-ttu-id="1144e-139">Sofern Sie keine besonderen Anforderungen haben, die Vorrang haben, sollten Sie diese Empfehlungen befolgen.</span><span class="sxs-lookup"><span data-stu-id="1144e-139">Follow these recommendations unless you have a specific requirement that overrides them.</span></span>

### <a name="connectivity-providers"></a><span data-ttu-id="1144e-140">Konnektivitätsanbieter</span><span class="sxs-lookup"><span data-stu-id="1144e-140">Connectivity providers</span></span>

<span data-ttu-id="1144e-141">Wählen Sie einen geeigneten ExpressRoute-Konnektivitätsanbieter für Ihren Standort aus.</span><span class="sxs-lookup"><span data-stu-id="1144e-141">Select a suitable ExpressRoute connectivity provider for your location.</span></span> <span data-ttu-id="1144e-142">Verwenden Sie den folgenden Azure PowerShell-Befehl, um eine Liste der Konnektivitätsanbieter abzurufen, die an Ihrem Standort verfügbar sind:</span><span class="sxs-lookup"><span data-stu-id="1144e-142">To get a list of connectivity providers available at your location, use the following Azure PowerShell command:</span></span>

```powershell
Get-AzureRmExpressRouteServiceProvider
```

<span data-ttu-id="1144e-143">ExpressRoute-Konnektivitätsanbieter verbinden Ihr Rechenzentrum über die folgenden Methoden mit Microsoft:</span><span class="sxs-lookup"><span data-stu-id="1144e-143">ExpressRoute connectivity providers connect your datacenter to Microsoft in the following ways:</span></span>

* <span data-ttu-id="1144e-144">**Per Co-Location und Cloud Exchange**.</span><span class="sxs-lookup"><span data-stu-id="1144e-144">**Co-located at a cloud exchange**.</span></span> <span data-ttu-id="1144e-145">Wenn Sie sich in einer Einrichtung mit Cloud Exchange befinden, können Sie virtuelle Querverbindungen mit Azure über den Ethernet Exchange des Co-Location-Anbieters anfordern.</span><span class="sxs-lookup"><span data-stu-id="1144e-145">If you're co-located in a facility with a cloud exchange, you can order virtual cross-connections to Azure through the co-location provider’s Ethernet exchange.</span></span> <span data-ttu-id="1144e-146">Co-Location-Anbieter stellen entweder Layer 2-Querverbindungen oder verwaltete Layer 3-Querverbindungen zwischen Ihrer Infrastruktur in der Co-Location-Einrichtung und Azure bereit.</span><span class="sxs-lookup"><span data-stu-id="1144e-146">Co-location providers can offer either layer 2 cross-connections, or managed layer 3 cross-connections between your infrastructure in the co-location facility and Azure.</span></span>
* <span data-ttu-id="1144e-147">**Point-to-Point-Ethernet-Verbindungen**.</span><span class="sxs-lookup"><span data-stu-id="1144e-147">**Point-to-point Ethernet connections**.</span></span> <span data-ttu-id="1144e-148">Sie können Ihre lokalen Rechenzentren/Büros über Point-to-Point-Ethernet-Leitungen mit Azure verbinden.</span><span class="sxs-lookup"><span data-stu-id="1144e-148">You can connect your on-premises datacenters/offices to Azure through point-to-point Ethernet links.</span></span> <span data-ttu-id="1144e-149">Point-to-Point-Ethernet-Anbieter können Layer 2-Verbindungen oder verwaltete Layer 3-Verbindungen zwischen Ihrem Standort und Azure bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="1144e-149">Point-to-point Ethernet providers can offer layer 2 connections, or managed layer 3 connections between your site and Azure.</span></span>
* <span data-ttu-id="1144e-150">**Any-to-Any-Netzwerke (IPVPN)**.</span><span class="sxs-lookup"><span data-stu-id="1144e-150">**Any-to-any (IPVPN) networks**.</span></span> <span data-ttu-id="1144e-151">Sie können Ihr Fernnetz (WAN) in Azure integrieren.</span><span class="sxs-lookup"><span data-stu-id="1144e-151">You can integrate your wide area network (WAN) with Azure.</span></span> <span data-ttu-id="1144e-152">IPVPN-Anbieter (normalerweise MPLS VPN) stellen Any-to-Any-Konnektivität zwischen Ihren Niederlassungen und den Rechenzentren bereit.</span><span class="sxs-lookup"><span data-stu-id="1144e-152">Internet protocol virtual private network (IPVPN) providers (typically a multiprotocol label switching VPN) offer any-to-any connectivity between your branch offices and datacenters.</span></span> <span data-ttu-id="1144e-153">Azure kann mit Ihrem WAN verbunden werden, sodass es wie eine normale Niederlassung erscheint.</span><span class="sxs-lookup"><span data-stu-id="1144e-153">Azure can be interconnected to your WAN to make it look just like any other branch office.</span></span> <span data-ttu-id="1144e-154">WAN-Anbieter stellen in der Regel verwaltete Layer 3-Konnektivität bereit.</span><span class="sxs-lookup"><span data-stu-id="1144e-154">WAN providers typically offer managed layer 3 connectivity.</span></span>

<span data-ttu-id="1144e-155">Weitere Informationen zu Konnektivitätsanbietern finden Sie der [ExpressRoute-Übersicht][expressroute-introduction].</span><span class="sxs-lookup"><span data-stu-id="1144e-155">For more information about connectivity providers, see the [ExpressRoute introduction][expressroute-introduction].</span></span>

### <a name="expressroute-circuit"></a><span data-ttu-id="1144e-156">ExpressRoute-Verbindung</span><span class="sxs-lookup"><span data-stu-id="1144e-156">ExpressRoute circuit</span></span>

<span data-ttu-id="1144e-157">Stellen Sie sicher, dass Ihre Organisation die [ExpressRoute-Voraussetzungen][expressroute-prereqs] zum Herstellen der Verbindung mit Azure erfüllt.</span><span class="sxs-lookup"><span data-stu-id="1144e-157">Ensure that your organization has met the [ExpressRoute prerequisite requirements][expressroute-prereqs] for connecting to Azure.</span></span>

<span data-ttu-id="1144e-158">Sofern nicht bereits geschehen, fügen Sie ein Subnetz namens `GatewaySubnet` zu Ihrem Azure-VNET hinzu, und erstellen Sie mit dem Azure-VPN-Gatewaydienst ein virtuelles ExpressRoute-Gateway.</span><span class="sxs-lookup"><span data-stu-id="1144e-158">If you haven't already done so, add a subnet named `GatewaySubnet` to your Azure VNet and create an ExpressRoute virtual network gateway using the Azure VPN gateway service.</span></span> <span data-ttu-id="1144e-159">Weitere Informationen zur Vorgehensweise finden Sie unter [ExpressRoute-Workflows für die Verbindungsbereitstellung und Verbindungszustände][ExpressRoute-provisioning].</span><span class="sxs-lookup"><span data-stu-id="1144e-159">For more information about this process, see [ExpressRoute workflows for circuit provisioning and circuit states][ExpressRoute-provisioning].</span></span>

<span data-ttu-id="1144e-160">Gehen Sie folgendermaßen vor, um eine ExpressRoute-Verbindung zu erstellen:</span><span class="sxs-lookup"><span data-stu-id="1144e-160">Create an ExpressRoute circuit as follows:</span></span>

1. <span data-ttu-id="1144e-161">Führen Sie den folgenden PowerShell-Befehl aus:</span><span class="sxs-lookup"><span data-stu-id="1144e-161">Run the following PowerShell command:</span></span>
   
    ```powershell
    New-AzureRmExpressRouteCircuit -Name <<circuit-name>> -ResourceGroupName <<resource-group>> -Location <<location>> -SkuTier <<sku-tier>> -SkuFamily <<sku-family>> -ServiceProviderName <<service-provider-name>> -PeeringLocation <<peering-location>> -BandwidthInMbps <<bandwidth-in-mbps>>
    ```
2. <span data-ttu-id="1144e-162">Senden Sie den `ServiceKey` für die neue Verbindung an den Dienstanbieter.</span><span class="sxs-lookup"><span data-stu-id="1144e-162">Send the `ServiceKey` for the new circuit to the service provider.</span></span>

3. <span data-ttu-id="1144e-163">Warten Sie die Bereitstellung der Verbindung durch den Anbieter ab.</span><span class="sxs-lookup"><span data-stu-id="1144e-163">Wait for the provider to provision the circuit.</span></span> <span data-ttu-id="1144e-164">Überprüfen Sie mit dem folgenden PowerShell-Befehl den Bereitstellungszustand einer Verbindung:</span><span class="sxs-lookup"><span data-stu-id="1144e-164">To verify the provisioning state of a circuit, run the following PowerShell command:</span></span>
   
    ```powershell
    Get-AzureRmExpressRouteCircuit -Name <<circuit-name>> -ResourceGroupName <<resource-group>>
    ```

    <span data-ttu-id="1144e-165">Das Feld `Provisioning state` im Abschnitt `Service Provider` der Ausgabe ändert sich von `NotProvisioned` in `Provisioned`, wenn die Verbindung bereit ist.</span><span class="sxs-lookup"><span data-stu-id="1144e-165">The `Provisioning state` field in the `Service Provider` section of the output will change from `NotProvisioned` to `Provisioned` when the circuit is ready.</span></span>

    > [!NOTE]
    > <span data-ttu-id="1144e-166">Wenn Sie eine Layer 3-Verbindung verwenden, sollte die Konfiguration und Verwaltung für das Routing über den Anbieter erfolgen.</span><span class="sxs-lookup"><span data-stu-id="1144e-166">If you're using a layer 3 connection, the provider should configure and manage routing for you.</span></span> <span data-ttu-id="1144e-167">Sie teilen dem Anbieter die erforderlichen Informationen zum Implementieren der geeigneten Routen mit.</span><span class="sxs-lookup"><span data-stu-id="1144e-167">You provide the information necessary to enable the provider to implement the appropriate routes.</span></span>
    > 
    > 

4. <span data-ttu-id="1144e-168">Bei Verwendung einer Layer 2-Verbindung:</span><span class="sxs-lookup"><span data-stu-id="1144e-168">If you're using a layer 2 connection:</span></span>

    1. <span data-ttu-id="1144e-169">Reservieren Sie zwei /30-Subnetze mit gültigen öffentlichen IP-Adressen für jeden Peeringtyp, den Sie implementieren möchten.</span><span class="sxs-lookup"><span data-stu-id="1144e-169">Reserve two /30 subnets composed of valid public IP addresses for each type of peering you want to implement.</span></span> <span data-ttu-id="1144e-170">Über diese /30-Subnetze werden IP-Adressen für die Router bereitgestellt, die für die Verbindung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="1144e-170">These /30 subnets will be used to provide IP addresses for the routers used for the circuit.</span></span> <span data-ttu-id="1144e-171">Wenn Sie privates, öffentliches und Microsoft-Peering verwenden, benötigen Sie 6 /30-Subnetze mit gültigen öffentlichen IP-Adressen.</span><span class="sxs-lookup"><span data-stu-id="1144e-171">If you are implementing private, public, and Microsoft peering, you'll need 6 /30 subnets with valid public IP addresses.</span></span>     

    2. <span data-ttu-id="1144e-172">Konfigurieren Sie das Routing für die ExpressRoute-Verbindung.</span><span class="sxs-lookup"><span data-stu-id="1144e-172">Configure routing for the ExpressRoute circuit.</span></span> <span data-ttu-id="1144e-173">Führen Sie die folgenden PowerShell-Befehle für jeden Peeringtyp aus, den Sie konfigurieren möchten (privat, öffentlich, Microsoft).</span><span class="sxs-lookup"><span data-stu-id="1144e-173">Run the following PowerShell commands for each type of peering you want to configure (private, public, and Microsoft).</span></span> <span data-ttu-id="1144e-174">Weitere Informationen finden Sie unter [Erstellen und Ändern des Peerings für eine ExpressRoute-Verbindung mithilfe von PowerShell][configure-expressroute-routing].</span><span class="sxs-lookup"><span data-stu-id="1144e-174">For more information, see [Create and modify routing for an ExpressRoute circuit][configure-expressroute-routing].</span></span>
   
        ```powershell
        Set-AzureRmExpressRouteCircuitPeeringConfig -Name <<peering-name>> -Circuit <<circuit-name>> -PeeringType <<peering-type>> -PeerASN <<peer-asn>> -PrimaryPeerAddressPrefix <<primary-peer-address-prefix>> -SecondaryPeerAddressPrefix <<secondary-peer-address-prefix>> -VlanId <<vlan-id>>

        Set-AzureRmExpressRouteCircuit -ExpressRouteCircuit <<circuit-name>>
        ```

    3. <span data-ttu-id="1144e-175">Reservieren Sie einen weiteren Pool mit gültigen öffentlichen IP-Adressen für die Netzwerkadressübersetzung (NAT) für das öffentliche Peering und das Microsoft-Peering.</span><span class="sxs-lookup"><span data-stu-id="1144e-175">Reserve another pool of valid public IP addresses to use for network address translation (NAT) for public and Microsoft peering.</span></span> <span data-ttu-id="1144e-176">Es wird empfohlen, für jeden Peeringtyp einen eigenen Pool zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="1144e-176">It is recommended to have a different pool for each peering.</span></span> <span data-ttu-id="1144e-177">Teilen Sie den Pool Ihrem Konnektivitätsanbieter mit, damit dieser BGP-Ankündigungen (Border Gateway Protocol) für diese Bereiche konfigurieren kann.</span><span class="sxs-lookup"><span data-stu-id="1144e-177">Specify the pool to your connectivity provider, so they can configure border gateway protocol (BGP) advertisements for those ranges.</span></span>

5. <span data-ttu-id="1144e-178">Führen Sie die folgenden PowerShell-Befehle aus, um Ihre privaten VNETs mit der ExpressRoute-Verbindung zu verknüpfen.</span><span class="sxs-lookup"><span data-stu-id="1144e-178">Run the following PowerShell commands to link your private VNet(s) to the ExpressRoute circuit.</span></span> <span data-ttu-id="1144e-179">Weitere Informationen finden Sie unter [Verbinden eines virtuellen Netzwerks mit einer ExpressRoute-Verbindung][link-vnet-to-expressroute].</span><span class="sxs-lookup"><span data-stu-id="1144e-179">For more information,see [Link a virtual network to an ExpressRoute circuit][link-vnet-to-expressroute].</span></span>

    ```powershell
    $circuit = Get-AzureRmExpressRouteCircuit -Name <<circuit-name>> -ResourceGroupName <<resource-group>>
    $gw = Get-AzureRmVirtualNetworkGateway -Name <<gateway-name>> -ResourceGroupName <<resource-group>>
    New-AzureRmVirtualNetworkGatewayConnection -Name <<connection-name>> -ResourceGroupName <<resource-group>> -Location <<location> -VirtualNetworkGateway1 $gw -PeerId $circuit.Id -ConnectionType ExpressRoute
    ```

<span data-ttu-id="1144e-180">Sie können mehrere VNETs in unterschiedlichen Regionen mit derselben ExpressRoute-Leitung verbinden, solange VNETs und ExpressRoute-Leitung sich innerhalb derselben geopolitischen Region befinden.</span><span class="sxs-lookup"><span data-stu-id="1144e-180">You can connect multiple VNets located in different regions to the same ExpressRoute circuit, as long as all VNets and the ExpressRoute circuit are located within the same geopolitical region.</span></span>

### <a name="troubleshooting"></a><span data-ttu-id="1144e-181">Problembehandlung</span><span class="sxs-lookup"><span data-stu-id="1144e-181">Troubleshooting</span></span> 

<span data-ttu-id="1144e-182">Wenn über eine zuvor funktionsfähige ExpressRoute-Leitung jetzt keine Verbindung mehr hergestellt werden kann, obwohl weder lokal noch in Ihrem privaten VNET Konfigurationsänderungen durchgeführt wurden, müssen Sie sich möglicherweise mit dem Konnektivitätsanbieter in Verbindung setzen und gemeinsam an der Problemlösung arbeiten.</span><span class="sxs-lookup"><span data-stu-id="1144e-182">If a previously functioning ExpressRoute circuit now fails to connect, in the absence of any configuration changes on-premises or within your private VNet, you may need to contact the connectivity provider and work with them to correct the issue.</span></span> <span data-ttu-id="1144e-183">Überprüfen Sie mithilfe der folgenden PowerShell-Befehle, ob die ExpressRoute-Verbindung bereitgestellt wurde:</span><span class="sxs-lookup"><span data-stu-id="1144e-183">Use the following Powershell commands to verify that the ExpressRoute circuit has been provisioned:</span></span>

```powershell
Get-AzureRmExpressRouteCircuit -Name <<circuit-name>> -ResourceGroupName <<resource-group>>
```

<span data-ttu-id="1144e-184">Die Ausgabe dieses Befehls zeigt verschiedene Verbindungseigenschaften, darunter `ProvisioningState`, `CircuitProvisioningState` und `ServiceProviderProvisioningState`, wie unten gezeigt.</span><span class="sxs-lookup"><span data-stu-id="1144e-184">The output of this command shows several properties for your circuit, including `ProvisioningState`, `CircuitProvisioningState`, and `ServiceProviderProvisioningState` as shown below.</span></span>

```
ProvisioningState                : Succeeded
Sku                              : {
                                     "Name": "Standard_MeteredData",
                                     "Tier": "Standard",
                                     "Family": "MeteredData"
                                   }
CircuitProvisioningState         : Enabled
ServiceProviderProvisioningState : NotProvisioned
```

<span data-ttu-id="1144e-185">Wenn `ProvisioningState` nicht auf `Succeeded` festgelegt ist, nachdem Sie versucht haben, eine neue Verbindung zu erstellen, entfernen Sie die Verbindung über den folgenden Befehl. Versuchen Sie anschließend erneut, die Verbindung zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="1144e-185">If the `ProvisioningState` is not set to `Succeeded` after you tried to create a new circuit, remove the circuit by using the command below and try to create it again.</span></span>

```powershell
Remove-AzureRmExpressRouteCircuit -Name <<circuit-name>> -ResourceGroupName <<resource-group>>
```

<span data-ttu-id="1144e-186">Wenn Ihr Anbieter die Verbindung bereits bereitgestellt hat und `ProvisioningState` auf `Failed` festgelegt ist oder `CircuitProvisioningState` nicht `Enabled` lautet, wenden Sie sich an Ihren Anbieter, um weitere Unterstützung zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="1144e-186">If your provider had already provisioned the circuit, and the `ProvisioningState` is set to `Failed`, or the `CircuitProvisioningState` is not `Enabled`, contact your provider for further assistance.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="1144e-187">Überlegungen zur Skalierbarkeit</span><span class="sxs-lookup"><span data-stu-id="1144e-187">Scalability considerations</span></span>

<span data-ttu-id="1144e-188">ExpressRoute-Verbindungen bieten einen Pfad mit hoher Bandbreite zwischen Netzwerken.</span><span class="sxs-lookup"><span data-stu-id="1144e-188">ExpressRoute circuits provide a high bandwidth path between networks.</span></span> <span data-ttu-id="1144e-189">Allgemein gilt: Je größer die Bandbreite, desto höher die Kosten.</span><span class="sxs-lookup"><span data-stu-id="1144e-189">Generally, the higher the bandwidth the greater the cost.</span></span> 

<span data-ttu-id="1144e-190">ExpressRoute bietet zwei [Tarife][expressroute-pricing] für Kunden: einen Volumentarif und eine Datenflatrate.</span><span class="sxs-lookup"><span data-stu-id="1144e-190">ExpressRoute offers two [pricing plans][expressroute-pricing] to customers, a metered plan and an unlimited data plan.</span></span> <span data-ttu-id="1144e-191">Die Gebühren richten sich nach der Verbindungsbandbreite.</span><span class="sxs-lookup"><span data-stu-id="1144e-191">Charges vary according to circuit bandwidth.</span></span> <span data-ttu-id="1144e-192">Die verfügbare Bandbreite variiert je nach Anbieter.</span><span class="sxs-lookup"><span data-stu-id="1144e-192">Available bandwidth will likely vary from provider to provider.</span></span> <span data-ttu-id="1144e-193">Verwenden Sie das Cmdlet `Get-AzureRmExpressRouteServiceProvider`, um die verfügbaren Anbieter in Ihrer Region sowie die angebotenen Bandbreiten anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="1144e-193">Use the `Get-AzureRmExpressRouteServiceProvider` cmdlet to see the providers available in your region and the bandwidths that they offer.</span></span>
 
<span data-ttu-id="1144e-194">Eine einzelne ExpressRoute-Verbindung kann eine bestimmte Anzahl von Peerings und VNET-Verbindungen unterstützen.</span><span class="sxs-lookup"><span data-stu-id="1144e-194">A single ExpressRoute circuit can support a certain number of peerings and VNet links.</span></span> <span data-ttu-id="1144e-195">Weitere Informationen finden Sie unter [ExpressRoute-Limits](/azure/azure-subscription-service-limits).</span><span class="sxs-lookup"><span data-stu-id="1144e-195">See [ExpressRoute limits](/azure/azure-subscription-service-limits) for more information.</span></span>

<span data-ttu-id="1144e-196">Das ExpressRoute Premium-Add-On bietet gegen eine zusätzliche Gebühr einige zusätzliche Funktionen:</span><span class="sxs-lookup"><span data-stu-id="1144e-196">For an extra charge, the ExpressRoute Premium add-on provides some additional capability:</span></span>

* <span data-ttu-id="1144e-197">Erhöhung der Routengrenzwerte für öffentliches und privates Peering.</span><span class="sxs-lookup"><span data-stu-id="1144e-197">Increased route limits for public and private peering.</span></span> 
* <span data-ttu-id="1144e-198">Eine höhere Anzahl von VNET-Verbindungen pro ExpressRoute-Leitung.</span><span class="sxs-lookup"><span data-stu-id="1144e-198">Increased number of VNet links per ExpressRoute circuit.</span></span> 
* <span data-ttu-id="1144e-199">Globale Konnektivität für Dienste.</span><span class="sxs-lookup"><span data-stu-id="1144e-199">Global connectivity for services.</span></span>

<span data-ttu-id="1144e-200">Ausführliche Informationen finden Sie unter [ExpressRoute – Preise][expressroute-pricing].</span><span class="sxs-lookup"><span data-stu-id="1144e-200">See [ExpressRoute pricing][expressroute-pricing] for details.</span></span> 

<span data-ttu-id="1144e-201">ExpressRoute-Verbindungen sind so konzipiert, dass Sie das erworbene Bandbreitenlimit für kurzfristige Spitzen im Netzwerkdatenverkehr um das Doppelte überschreiten können, ohne dass zusätzliche Kosten anfallen.</span><span class="sxs-lookup"><span data-stu-id="1144e-201">ExpressRoute circuits are designed to allow temporary network bursts up to two times the bandwidth limit that you procured for no additional cost.</span></span> <span data-ttu-id="1144e-202">Dies wird durch den Einsatz redundanter Verbindungen erreicht.</span><span class="sxs-lookup"><span data-stu-id="1144e-202">This is achieved by using redundant links.</span></span> <span data-ttu-id="1144e-203">Allerdings wird dieses Feature nicht von allen Konnektivitätsanbietern unterstützt.</span><span class="sxs-lookup"><span data-stu-id="1144e-203">However, not all connectivity providers support this feature.</span></span> <span data-ttu-id="1144e-204">Stellen Sie sicher, dass Ihr Konnektivitätsanbieter dieses Feature unterstützt, bevor Sie sich darauf verlassen.</span><span class="sxs-lookup"><span data-stu-id="1144e-204">Verify that your connectivity provider enables this feature before depending on it.</span></span>

<span data-ttu-id="1144e-205">Wenngleich einige Anbieter eine Änderung der Bandbreite zulassen, sollten Sie eine anfängliche Bandbreite auswählen, die Ihre Anforderungen übersteigt und einen Puffer für künftiges Wachstum bietet.</span><span class="sxs-lookup"><span data-stu-id="1144e-205">Although some providers allow you to change your bandwidth, make sure you pick an initial bandwidth that surpasses your needs and provides room for growth.</span></span> <span data-ttu-id="1144e-206">Wenn Sie zu einem späteren Zeitpunkt mehr Bandbreite benötigen, haben Sie zwei Optionen:</span><span class="sxs-lookup"><span data-stu-id="1144e-206">If you need to increase bandwidth in the future, you are left with two options:</span></span>

- <span data-ttu-id="1144e-207">Erhöhen Sie die Bandbreite.</span><span class="sxs-lookup"><span data-stu-id="1144e-207">Increase the bandwidth.</span></span> <span data-ttu-id="1144e-208">Diese Option sollte nach Möglichkeit vermieden werden, weil nicht alle Anbieter eine dynamische Erhöhung der Bandbreite unterstützen.</span><span class="sxs-lookup"><span data-stu-id="1144e-208">You should avoid this option as much as possible, and not all providers allow you to increase bandwidth dynamically.</span></span> <span data-ttu-id="1144e-209">Wenn jedoch eine Bandbreitenerhöhung benötigt wird, fragen Sie bei Ihrem Anbieter an, ob das Ändern der ExpressRoute-Bandbreiteneigenschaften über PowerShell-Befehle unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="1144e-209">But if a bandwidth increase is needed, check with your provider to verify they support changing ExpressRoute bandwidth properties via Powershell commands.</span></span> <span data-ttu-id="1144e-210">Falls dem so ist, führen Sie die nachstehenden Befehle aus.</span><span class="sxs-lookup"><span data-stu-id="1144e-210">If they do, run the commands below.</span></span>

    ```powershell
    $ckt = Get-AzureRmExpressRouteCircuit -Name <<circuit-name>> -ResourceGroupName <<resource-group>>
    $ckt.ServiceProviderProperties.BandwidthInMbps = <<bandwidth-in-mbps>>
    Set-AzureRmExpressRouteCircuit -ExpressRouteCircuit $ckt
    ```

    <span data-ttu-id="1144e-211">Sie können die Bandbreite ohne Konnektivitätsverlust erhöhen.</span><span class="sxs-lookup"><span data-stu-id="1144e-211">You can increase the bandwidth without loss of connectivity.</span></span> <span data-ttu-id="1144e-212">Ein Downgrade der Bandbreite führt zu einer Konnektivitätsunterbrechung, weil Sie die Verbindung löschen und mit der neuen Konfiguration neu erstellen müssen.</span><span class="sxs-lookup"><span data-stu-id="1144e-212">Downgrading the bandwidth will result in disruption in connectivity, because you must delete the circuit and recreate it with the new configuration.</span></span>

- <span data-ttu-id="1144e-213">Stellen Sie Ihren Tarif um, und/oder führen Sie ein Upgrade auf Premium durch.</span><span class="sxs-lookup"><span data-stu-id="1144e-213">Change your pricing plan and/or upgrade to Premium.</span></span> <span data-ttu-id="1144e-214">Führen Sie zu diesem Zweck die folgenden Befehle aus.</span><span class="sxs-lookup"><span data-stu-id="1144e-214">To do so, run the following commands.</span></span> <span data-ttu-id="1144e-215">Die Eigenschaft `Sku.Tier` kann `Standard` oder `Premium` lauten, die Eigenschaft `Sku.Name` kann auf `MeteredData` oder `UnlimitedData` festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="1144e-215">The `Sku.Tier` property can be `Standard` or `Premium`; the `Sku.Name` property can be `MeteredData` or `UnlimitedData`.</span></span>

    ```powershell
    $ckt = Get-AzureRmExpressRouteCircuit -Name <<circuit-name>> -ResourceGroupName <<resource-group>>

    $ckt.Sku.Tier = "Premium"
    $ckt.Sku.Family = "MeteredData"
    $ckt.Sku.Name = "Premium_MeteredData"

    Set-AzureRmExpressRouteCircuit -ExpressRouteCircuit $ckt
    ```

    > [!IMPORTANT]
    > <span data-ttu-id="1144e-216">Stellen Sie sicher, dass die Eigenschaft `Sku.Name` dem `Sku.Tier` und der `Sku.Family` entspricht.</span><span class="sxs-lookup"><span data-stu-id="1144e-216">Make sure the `Sku.Name` property matches the `Sku.Tier` and `Sku.Family`.</span></span> <span data-ttu-id="1144e-217">Wenn Sie Familie und Tarif ändern, aber nicht den Namen, wird Ihre Verbindung deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="1144e-217">If you change the family and tier, but not the name, your connection will be disabled.</span></span>
    > 
    > 

    <span data-ttu-id="1144e-218">Ein SKU-Upgrade kann ohne Unterbrechung durchgeführt werden, aber Sie können nicht von der Datenflatrate auf den Volumentarif umstellen.</span><span class="sxs-lookup"><span data-stu-id="1144e-218">You can upgrade the SKU without disruption, but you cannot switch from the unlimited pricing plan to metered.</span></span> <span data-ttu-id="1144e-219">Bei einem Downgrade der SKU muss Ihr Bandbreitenverbrauch innerhalb des Standardlimits für die Standard-SKU liegen.</span><span class="sxs-lookup"><span data-stu-id="1144e-219">When downgrading the SKU, your bandwidth consumption must remain within the default limit of the standard SKU.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="1144e-220">Überlegungen zur Verfügbarkeit</span><span class="sxs-lookup"><span data-stu-id="1144e-220">Availability considerations</span></span>

<span data-ttu-id="1144e-221">ExpressRoute unterstützt keine Protokolle für die Routerredundanz – wie z.B. HSRP (Hot Standby Routing Protocol) und VRRP (Virtual Router Redundancy Protocol) – für die Implementierung von Hochverfügbarkeit.</span><span class="sxs-lookup"><span data-stu-id="1144e-221">ExpressRoute does not support router redundancy protocols such as hot standby routing protocol (HSRP) and virtual router redundancy protocol (VRRP) to implement high availability.</span></span> <span data-ttu-id="1144e-222">Stattdessen wird ein redundantes BGP-Sitzungspaar pro Peering verwendet.</span><span class="sxs-lookup"><span data-stu-id="1144e-222">Instead, it uses a redundant pair of BGP sessions per peering.</span></span> <span data-ttu-id="1144e-223">Um hochverfügbare Verbindungen mit Ihrem Netzwerk zu ermöglichen, stellt Azure zwei redundante Ports auf zwei Routern (Microsoft Edge) in einer Aktiv/Aktiv-Konfiguration bereit.</span><span class="sxs-lookup"><span data-stu-id="1144e-223">To facilitate highly-available connections to your network, Azure provisions you with two redundant ports on two routers (part of the Microsoft edge) in an active-active configuration.</span></span>

<span data-ttu-id="1144e-224">BGP-Sitzungen verwendet standardmäßig einen Leerlauftimeoutwert von 60 Sekunden.</span><span class="sxs-lookup"><span data-stu-id="1144e-224">By default, BGP sessions use an idle timeout value of 60 seconds.</span></span> <span data-ttu-id="1144e-225">Wenn für eine Sitzung drei Mal ein Timeout auftritt (180 Sekunden gesamt), wird der Router als nicht verfügbar markiert, und der gesamte Datenverkehr wird auf den verbleibenden Router umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="1144e-225">If a session times out three times (180 seconds total), the router is marked as unavailable, and all traffic is redirected to the remaining router.</span></span> <span data-ttu-id="1144e-226">Dieses 180-Sekunden-Timeout kann für kritische Anwendungen zu lang sein.</span><span class="sxs-lookup"><span data-stu-id="1144e-226">This 180-second timeout might be too long for critical applications.</span></span> <span data-ttu-id="1144e-227">Wenn dies der Fall ist, können Sie die BGP-Timeouteinstellungen auf dem lokalen Router auf einen kürzeren Zeitraum festlegen.</span><span class="sxs-lookup"><span data-stu-id="1144e-227">If so, you can change your BGP time-out settings on the on-premises router to a smaller value.</span></span>

<span data-ttu-id="1144e-228">Sie können für Ihre Azure-Verbindung auf unterschiedliche Weise Hochverfügbarkeit konfigurieren – je nachdem, welchen Anbieter Sie verwenden und wie viele ExpressRoute-Verbindungen und VNET-Gatewayverbindungen Sie konfigurieren möchten.</span><span class="sxs-lookup"><span data-stu-id="1144e-228">You can configure high availability for your Azure connection in different ways, depending on the type of provider you use, and the number of ExpressRoute circuits and virtual network gateway connections you're willing to configure.</span></span> <span data-ttu-id="1144e-229">Nachfolgend werden die verfügbaren Optionen zusammengefasst:</span><span class="sxs-lookup"><span data-stu-id="1144e-229">The following summarizes your availability options:</span></span>

* <span data-ttu-id="1144e-230">Wenn Sie eine Layer 2-Verbindung verwenden, stellen Sie redundante Router in Ihrem lokalen Netzwerk in einer Aktiv/Aktiv-Konfiguration bereit.</span><span class="sxs-lookup"><span data-stu-id="1144e-230">If you're using a layer 2 connection, deploy redundant routers in your on-premises network in an active-active configuration.</span></span> <span data-ttu-id="1144e-231">Verbinden Sie die primäre Verbindung mit dem ersten und die zweite Verbindung mit dem zweiten Router.</span><span class="sxs-lookup"><span data-stu-id="1144e-231">Connect the primary circuit to one router, and the secondary circuit to the other.</span></span> <span data-ttu-id="1144e-232">Auf diese Weise erhalten Sie eine hochverfügbare Verbindung auf beiden Seiten der Leitung.</span><span class="sxs-lookup"><span data-stu-id="1144e-232">This will give you a highly available connection at both ends of the connection.</span></span> <span data-ttu-id="1144e-233">Dies ist erforderlich, wenn Sie die Vereinbarung zum Servicelevel für ExpressRoute (SLA) benötigen.</span><span class="sxs-lookup"><span data-stu-id="1144e-233">This is necessary if you require the ExpressRoute service level agreement (SLA).</span></span> <span data-ttu-id="1144e-234">Ausführliche Informationen finden Sie unter [SLA für Azure ExpressRoute][sla-for-expressroute].</span><span class="sxs-lookup"><span data-stu-id="1144e-234">See [SLA for Azure ExpressRoute][sla-for-expressroute] for details.</span></span>

    <span data-ttu-id="1144e-235">Das folgende Diagramm zeigt eine Konfiguration mit redundanten lokalen Routern, die mit der primären und sekundären Leitung verbunden sind.</span><span class="sxs-lookup"><span data-stu-id="1144e-235">The following diagram shows a configuration with redundant on-premises routers connected to the primary and secondary circuits.</span></span> <span data-ttu-id="1144e-236">Jede Leitung verarbeitet den Datenverkehr für ein öffentliches Peering und ein privates Peering (jedes Peering umfasst ein dediziertes Paar aus /30-Adressräumen, wie im vorherigen Abschnitt beschrieben).</span><span class="sxs-lookup"><span data-stu-id="1144e-236">Each circuit handles the traffic for a public peering and a private peering (each peering is designated a pair of /30 address spaces, as described in the previous section).</span></span>

    <span data-ttu-id="1144e-237">![[1]][1]</span><span class="sxs-lookup"><span data-stu-id="1144e-237">![[1]][1]</span></span>

* <span data-ttu-id="1144e-238">Überprüfen Sie bei Verwendung einer Layer 3-Verbindung, ob redundante BGP-Sitzungen zur Sicherstellung der Verfügbarkeit bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="1144e-238">If you're using a layer 3 connection, verify that it provides redundant BGP sessions that handle availability for you.</span></span>

* <span data-ttu-id="1144e-239">Verbinden Sie das VNET mit mehreren ExpressRoute-Leitungen, die von unterschiedlichen Dienstanbietern bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="1144e-239">Connect the VNet to multiple ExpressRoute circuits, supplied by different service providers.</span></span> <span data-ttu-id="1144e-240">Diese Strategie bietet zusätzliche Hochverfügbarkeit und Notfallwiederherstellungsfunktionen.</span><span class="sxs-lookup"><span data-stu-id="1144e-240">This strategy provides additional high-availability and disaster recovery capabilities.</span></span>

* <span data-ttu-id="1144e-241">Konfigurieren Sie ein Site-to-Site-VPN als Failoverpfad für ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="1144e-241">Configure a site-to-site VPN as a failover path for ExpressRoute.</span></span> <span data-ttu-id="1144e-242">Weitere Informationen finden Sie unter [Verbinden eines lokalen Netzwerks mit Azure unter Verwendung von ExpressRoute mit VPN-Failover][highly-available-network-architecture].</span><span class="sxs-lookup"><span data-stu-id="1144e-242">For more about this option, see [Connect an on-premises network to Azure using ExpressRoute with VPN failover][highly-available-network-architecture].</span></span>
 <span data-ttu-id="1144e-243">Diese Option gilt nur für das private Peering.</span><span class="sxs-lookup"><span data-stu-id="1144e-243">This option only applies to private peering.</span></span> <span data-ttu-id="1144e-244">Für Azure- und Office 365-Dienste ist das Internet der einzige Failoverpfad.</span><span class="sxs-lookup"><span data-stu-id="1144e-244">For Azure and Office 365 services, the Internet is the only failover path.</span></span> 

## <a name="manageability-considerations"></a><span data-ttu-id="1144e-245">Überlegungen zur Verwaltbarkeit</span><span class="sxs-lookup"><span data-stu-id="1144e-245">Manageability considerations</span></span>

<span data-ttu-id="1144e-246">Sie können mit dem [Azure Connectivity Toolkit (AzureCT)][azurect] die Konnektivität zwischen Ihrem lokalen Rechenzentrum und Azure überwachen.</span><span class="sxs-lookup"><span data-stu-id="1144e-246">You can use the [Azure Connectivity Toolkit (AzureCT)][azurect] to monitor connectivity between your on-premises datacenter and Azure.</span></span> 

## <a name="security-considerations"></a><span data-ttu-id="1144e-247">Sicherheitshinweise</span><span class="sxs-lookup"><span data-stu-id="1144e-247">Security considerations</span></span>

<span data-ttu-id="1144e-248">Sie können die Sicherheitsoptionen für Ihre Azure-Verbindung abhängig von Ihren Anforderungen im Hinblick auf Sicherheit und Compliance auf unterschiedliche Weise konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="1144e-248">You can configure security options for your Azure connection in different ways, depending on your security concerns and compliance needs.</span></span> 

<span data-ttu-id="1144e-249">ExpressRoute arbeitet auf Layer 3.</span><span class="sxs-lookup"><span data-stu-id="1144e-249">ExpressRoute operates in layer 3.</span></span> <span data-ttu-id="1144e-250">Bedrohungen in der Anwendungsebene können durch den Einsatz einer Netzwerksicherheitsappliance verhindert werden, die den Datenverkehr auf autorisierte Ressourcen beschränkt.</span><span class="sxs-lookup"><span data-stu-id="1144e-250">Threats in the application layer can be prevented by using a network security appliance that restricts traffic to legitimate resources.</span></span> <span data-ttu-id="1144e-251">Darüber hinaus können ExpressRoute-Verbindungen mit öffentlichem Peering nur lokal initiiert werden.</span><span class="sxs-lookup"><span data-stu-id="1144e-251">Additionally, ExpressRoute connections using public peering can only be initiated from on-premises.</span></span> <span data-ttu-id="1144e-252">Dadurch wird verhindert, dass ein nicht autorisierter Dienst aus dem Internet auf lokale Daten zugreift und diese kompromittiert.</span><span class="sxs-lookup"><span data-stu-id="1144e-252">This prevents a rogue service from accessing and compromising on-premises data from the Internet.</span></span>

<span data-ttu-id="1144e-253">Um die Sicherheit zu maximieren, platzieren Sie Netzwerksicherheitsappliances zwischen dem lokalen Netzwerk und den Edgeroutern des Anbieters.</span><span class="sxs-lookup"><span data-stu-id="1144e-253">To maximize security, add network security appliances between the on-premises network and the provider edge routers.</span></span> <span data-ttu-id="1144e-254">Dies trägt dazu bei, nicht autorisierten Datenverkehr aus dem VNET zu unterbinden:</span><span class="sxs-lookup"><span data-stu-id="1144e-254">This will help to restrict the inflow of unauthorized traffic from the VNet:</span></span>

<span data-ttu-id="1144e-255">![[2]][2]</span><span class="sxs-lookup"><span data-stu-id="1144e-255">![[2]][2]</span></span>

<span data-ttu-id="1144e-256">Im Rahmen von Überwachung oder Compliance kann es notwendig sein, den direkten Zugriff von VNET-Komponenten auf das Internet zu verbieten und eine [Tunnelerzwingung][forced-tuneling] zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="1144e-256">For auditing or compliance purposes, it may be necessary to prohibit direct access from components running in the VNet to the Internet and implement [forced tunneling][forced-tuneling].</span></span> <span data-ttu-id="1144e-257">In diesem Fall sollte der Internetdatenverkehr an einen lokal ausgeführten Proxy umgeleitet werden, wo er überwacht werden kann.</span><span class="sxs-lookup"><span data-stu-id="1144e-257">In this situation, Internet traffic should be redirected back through a proxy running  on-premises where it can be audited.</span></span> <span data-ttu-id="1144e-258">Der Proxy kann so konfiguriert werden, dass er nicht autorisierten ausgehenden Datenverkehr blockiert und potenziell schädlichen eingehenden Datenverkehr filtert.</span><span class="sxs-lookup"><span data-stu-id="1144e-258">The proxy can be configured to block unauthorized traffic flowing out, and filter potentially malicious inbound traffic.</span></span>

<span data-ttu-id="1144e-259">![[3]][3]</span><span class="sxs-lookup"><span data-stu-id="1144e-259">![[3]][3]</span></span>

<span data-ttu-id="1144e-260">Um die Sicherheit zu maximieren, aktivieren Sie keine öffentliche IP-Adresse für Ihre VMs, und stellen Sie mithilfe von Netzwerksicherheitsgruppen (NSGs) sicher, dass diese VMs nicht öffentlich zugänglich sind.</span><span class="sxs-lookup"><span data-stu-id="1144e-260">To maximize security, do not enable a public IP address for your VMs, and use NSGs to ensure that these VMs aren't publicly accessible.</span></span> <span data-ttu-id="1144e-261">VMs sollten nur über die interne IP-Adresse erreichbar sein.</span><span class="sxs-lookup"><span data-stu-id="1144e-261">VMs should only be available using the internal IP address.</span></span> <span data-ttu-id="1144e-262">Diese Adressen können über das ExpressRoute-Netzwerk verfügbar gemacht werden, sodass DevOps-Mitarbeiter vor Ort eine Konfiguration oder Wartung durchführen können.</span><span class="sxs-lookup"><span data-stu-id="1144e-262">These addresses can be made accessible through the ExpressRoute network, enabling on-premises DevOps staff to perform configuration or maintenance.</span></span>

<span data-ttu-id="1144e-263">Wenn Sie Verwaltungsendpunkte für VMs gegenüber einem externen Netzwerk offenlegen müssen, verwenden Sie NSGs oder Zugriffssteuerunglisten (ACLs), um die Sichtbarkeit dieser Ports auf eine Whitelist mit IP-Adressen oder Netzwerken zu beschränken.</span><span class="sxs-lookup"><span data-stu-id="1144e-263">If you must expose management endpoints for VMs to an external network, use NSGs or access control lists to restrict the visibility of these ports to a whitelist of IP addresses or networks.</span></span>

> [!NOTE]
> <span data-ttu-id="1144e-264">Standardmäßig weisen Azure-VMs, die über das Azure-Portal bereitgestellt wurden, eine öffentliche IP-Adresse mit Anmeldezugriff auf.</span><span class="sxs-lookup"><span data-stu-id="1144e-264">By default, Azure VMs deployed through the Azure portal include a public IP address that provides login access.</span></span>  
> 
> 


## <a name="deploy-the-solution"></a><span data-ttu-id="1144e-265">Bereitstellen der Lösung</span><span class="sxs-lookup"><span data-stu-id="1144e-265">Deploy the solution</span></span>

<span data-ttu-id="1144e-266">**Voraussetzungen**</span><span class="sxs-lookup"><span data-stu-id="1144e-266">**Prequisites.**</span></span> <span data-ttu-id="1144e-267">Sie müssen über eine lokale Infrastruktur verfügen, die bereits mit einer geeigneten Netzwerkappliance konfiguriert ist.</span><span class="sxs-lookup"><span data-stu-id="1144e-267">You must have an existing on-premises infrastructure already configured with a suitable network appliance.</span></span>

<span data-ttu-id="1144e-268">Führen Sie die folgenden Schritte aus, um die Lösung bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="1144e-268">To deploy the solution, perform the following steps.</span></span>

1. <span data-ttu-id="1144e-269">Klicken Sie auf die Schaltfläche unten:</span><span class="sxs-lookup"><span data-stu-id="1144e-269">Click the button below:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Freference-architectures%2Fmaster%2Fhybrid-networking%2Fexpressroute%2Fazuredeploy.json" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>
2. <span data-ttu-id="1144e-270">Warten Sie, bis der Link im Azure-Portal geöffnet wird, und gehen Sie dann folgendermaßen vor:</span><span class="sxs-lookup"><span data-stu-id="1144e-270">Wait for the link to open in the Azure portal, then follow these steps:</span></span>
   * <span data-ttu-id="1144e-271">Der Name der **Ressourcengruppe** ist bereits in der Parameterdatei definiert. Wählen Sie also **Neu erstellen**, und geben Sie im Textfeld `ra-hybrid-er-rg` ein.</span><span class="sxs-lookup"><span data-stu-id="1144e-271">The **Resource group** name is already defined in the parameter file, so select **Create New** and enter `ra-hybrid-er-rg` in the text box.</span></span>
   * <span data-ttu-id="1144e-272">Wählen Sie im Dropdownfeld **Standort** die Region aus.</span><span class="sxs-lookup"><span data-stu-id="1144e-272">Select the region from the **Location** drop down box.</span></span>
   * <span data-ttu-id="1144e-273">Lassen Sie die Textfelder für den **Vorlagenstamm-URI** bzw. **Parameterstamm-URI** unverändert.</span><span class="sxs-lookup"><span data-stu-id="1144e-273">Do not edit the **Template Root Uri** or the **Parameter Root Uri** text boxes.</span></span>
   * <span data-ttu-id="1144e-274">Überprüfen Sie die allgemeinen Geschäftsbedingungen, und aktivieren Sie dann das Kontrollkästchen **Ich stimme den oben genannten Geschäftsbedingungen zu**.</span><span class="sxs-lookup"><span data-stu-id="1144e-274">Review the terms and conditions, then click the **I agree to the terms and conditions stated above** checkbox.</span></span>
   * <span data-ttu-id="1144e-275">Klicken Sie auf die Schaltfläche **Kaufen**.</span><span class="sxs-lookup"><span data-stu-id="1144e-275">Click the **Purchase** button.</span></span>
3. <span data-ttu-id="1144e-276">Warten Sie, bis die Bereitstellung abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="1144e-276">Wait for the deployment to complete.</span></span>
4. <span data-ttu-id="1144e-277">Klicken Sie auf die Schaltfläche unten:</span><span class="sxs-lookup"><span data-stu-id="1144e-277">Click the button below:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Freference-architectures%2Fmaster%2Fhybrid-networking%2Fexpressroute%2Fazuredeploy-expressRouteCircuit.json" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>
5. <span data-ttu-id="1144e-278">Warten Sie, bis der Link im Azure-Portal geöffnet wird, und gehen Sie dann folgendermaßen vor:</span><span class="sxs-lookup"><span data-stu-id="1144e-278">Wait for the link to open in the Azure portal, then follow these steps:</span></span>
   * <span data-ttu-id="1144e-279">Wählen Sie im Abschnitt **Ressourcengruppe** die Option **Vorhandene verwenden** aus, und geben Sie im Textfeld `ra-hybrid-er-rg` ein.</span><span class="sxs-lookup"><span data-stu-id="1144e-279">Select **Use existing** in the **Resource group** section and enter `ra-hybrid-er-rg` in the text box.</span></span>
   * <span data-ttu-id="1144e-280">Wählen Sie im Dropdownfeld **Standort** die Region aus.</span><span class="sxs-lookup"><span data-stu-id="1144e-280">Select the region from the **Location** drop down box.</span></span>
   * <span data-ttu-id="1144e-281">Lassen Sie die Textfelder für den **Vorlagenstamm-URI** bzw. **Parameterstamm-URI** unverändert.</span><span class="sxs-lookup"><span data-stu-id="1144e-281">Do not edit the **Template Root Uri** or the **Parameter Root Uri** text boxes.</span></span>
   * <span data-ttu-id="1144e-282">Überprüfen Sie die allgemeinen Geschäftsbedingungen, und aktivieren Sie dann das Kontrollkästchen **Ich stimme den oben genannten Geschäftsbedingungen zu**.</span><span class="sxs-lookup"><span data-stu-id="1144e-282">Review the terms and conditions, then click the **I agree to the terms and conditions stated above** checkbox.</span></span>
   * <span data-ttu-id="1144e-283">Klicken Sie auf die Schaltfläche **Kaufen**.</span><span class="sxs-lookup"><span data-stu-id="1144e-283">Click the **Purchase** button.</span></span>
6. <span data-ttu-id="1144e-284">Warten Sie, bis die Bereitstellung abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="1144e-284">Wait for the deployment to complete.</span></span>


<!-- links -->
[forced-tuneling]: ../dmz/secure-vnet-hybrid.md
[highly-available-network-architecture]: ./expressroute-vpn-failover.md

[expressroute-technical-overview]: /azure/expressroute/expressroute-introduction
[expressroute-prereqs]: /azure/expressroute/expressroute-prerequisites
[configure-expressroute-routing]: /azure/expressroute/expressroute-howto-routing-arm
[sla-for-expressroute]: https://azure.microsoft.com/support/legal/sla/expressroute/v1_0/
[link-vnet-to-expressroute]: /azure/expressroute/expressroute-howto-linkvnet-arm
[ExpressRoute-provisioning]: /azure/expressroute/expressroute-workflows
[expressroute-introduction]: /azure/expressroute/expressroute-introduction
[expressroute-peering]: /azure/expressroute/expressroute-circuit-peerings
[expressroute-pricing]: https://azure.microsoft.com/pricing/details/expressroute/
[expressroute-limits]: /azure/azure-subscription-service-limits#networking-limits
[azurect]: https://github.com/Azure/NetworkMonitoring/tree/master/AzureCT
[visio-download]: https://archcenter.azureedge.net/cdn/hybrid-network-architectures.vsdx
[er-circuit-parameters]: https://github.com/mspnp/reference-architectures/tree/master/hybrid-networking/expressroute/parameters/expressRouteCircuit.parameters.json
[azure-powershell-download]: https://azure.microsoft.com/documentation/articles/powershell-install-configure/
[azure-cli]: https://azure.microsoft.com/documentation/articles/xplat-cli-install/
[0]: ./images/expressroute.png "Hybrid-Netzwerkarchitektur mit Azure ExpressRoute"
[1]: ../_images/guidance-hybrid-network-expressroute/figure2.png "Einsatz redundanter Router mit primären und sekundären ExpressRoute-Verbindungen"
[2]: ../_images/guidance-hybrid-network-expressroute/figure3.png "Hinzufügen von Sicherheitsgeräten zum lokalen Netzwerk"
[3]: ../_images/guidance-hybrid-network-expressroute/figure4.png "Einsatz der Tunnelerzwingung zum Überwachen des Internetdatenverkehrs"
[4]: ../_images/guidance-hybrid-network-expressroute/figure5.png "Ermitteln des ServiceKey einer ExpressRoute-Verbindung"  